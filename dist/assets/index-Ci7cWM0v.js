var jF=Object.defineProperty;var OF=(t,e,n)=>e in t?jF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var mb=(t,e,n)=>OF(t,typeof e!="symbol"?e+"":e,n);function LF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ma(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pb={exports:{}},If={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function UF(){if(Rk)return If;Rk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return If.Fragment=e,If.jsx=n,If.jsxs=n,If}var Mk;function VF(){return Mk||(Mk=1,pb.exports=UF()),pb.exports}var f=VF(),gb={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function FF(){if(jk)return qe;jk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=y&&K[y]||K["@@iterator"],typeof K=="function"?K:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function N(K,re,pe){this.props=K,this.context=re,this.refs=C,this.updater=pe||_}N.prototype.isReactComponent={},N.prototype.setState=function(K,re){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,re,"setState")},N.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function M(){}M.prototype=N.prototype;function P(K,re,pe){this.props=K,this.context=re,this.refs=C,this.updater=pe||_}var L=P.prototype=new M;L.constructor=P,T(L,N.prototype),L.isPureReactComponent=!0;var j=Array.isArray;function V(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function U(K,re,pe){var we=pe.ref;return{$$typeof:t,type:K,key:re,ref:we!==void 0?we:null,props:pe}}function F(K,re){return U(K.type,re,K.props)}function B(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function q(K){var re={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(pe){return re[pe]})}var H=/\/+/g;function se(K,re){return typeof K=="object"&&K!==null&&K.key!=null?q(""+K.key):re.toString(36)}function Se(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(V,V):(K.status="pending",K.then(function(re){K.status==="pending"&&(K.status="fulfilled",K.value=re)},function(re){K.status==="pending"&&(K.status="rejected",K.reason=re)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function Q(K,re,pe,we,Ce){var Ve=typeof K;(Ve==="undefined"||Ve==="boolean")&&(K=null);var ze=!1;if(K===null)ze=!0;else switch(Ve){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(K.$$typeof){case t:case e:ze=!0;break;case m:return ze=K._init,Q(ze(K._payload),re,pe,we,Ce)}}if(ze)return Ce=Ce(K),ze=we===""?"."+se(K,0):we,j(Ce)?(pe="",ze!=null&&(pe=ze.replace(H,"$&/")+"/"),Q(Ce,re,pe,"",function(Fe){return Fe})):Ce!=null&&(B(Ce)&&(Ce=F(Ce,pe+(Ce.key==null||K&&K.key===Ce.key?"":(""+Ce.key).replace(H,"$&/")+"/")+ze)),re.push(Ce)),1;ze=0;var Mt=we===""?".":we+":";if(j(K))for(var oe=0;oe<K.length;oe++)we=K[oe],Ve=Mt+se(we,oe),ze+=Q(we,re,pe,Ve,Ce);else if(oe=x(K),typeof oe=="function")for(K=oe.call(K),oe=0;!(we=K.next()).done;)we=we.value,Ve=Mt+se(we,oe++),ze+=Q(we,re,pe,Ve,Ce);else if(Ve==="object"){if(typeof K.then=="function")return Q(Se(K),re,pe,we,Ce);throw re=String(K),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ue(K,re,pe){if(K==null)return K;var we=[],Ce=0;return Q(K,we,"","",function(Ve){return re.call(pe,Ve,Ce++)}),we}function be(K){if(K._status===-1){var re=K._result;re=re(),re.then(function(pe){(K._status===0||K._status===-1)&&(K._status=1,K._result=pe)},function(pe){(K._status===0||K._status===-1)&&(K._status=2,K._result=pe)}),K._status===-1&&(K._status=0,K._result=re)}if(K._status===1)return K._result.default;throw K._result}var De=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Ke={map:ue,forEach:function(K,re,pe){ue(K,function(){re.apply(this,arguments)},pe)},count:function(K){var re=0;return ue(K,function(){re++}),re},toArray:function(K){return ue(K,function(re){return re})||[]},only:function(K){if(!B(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return qe.Activity=p,qe.Children=Ke,qe.Component=N,qe.Fragment=n,qe.Profiler=i,qe.PureComponent=P,qe.StrictMode=r,qe.Suspense=u,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,qe.__COMPILER_RUNTIME={__proto__:null,c:function(K){return I.H.useMemoCache(K)}},qe.cache=function(K){return function(){return K.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(K,re,pe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var we=T({},K.props),Ce=K.key;if(re!=null)for(Ve in re.key!==void 0&&(Ce=""+re.key),re)!R.call(re,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&re.ref===void 0||(we[Ve]=re[Ve]);var Ve=arguments.length-2;if(Ve===1)we.children=pe;else if(1<Ve){for(var ze=Array(Ve),Mt=0;Mt<Ve;Mt++)ze[Mt]=arguments[Mt+2];we.children=ze}return U(K.type,Ce,we)},qe.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},qe.createElement=function(K,re,pe){var we,Ce={},Ve=null;if(re!=null)for(we in re.key!==void 0&&(Ve=""+re.key),re)R.call(re,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Ce[we]=re[we]);var ze=arguments.length-2;if(ze===1)Ce.children=pe;else if(1<ze){for(var Mt=Array(ze),oe=0;oe<ze;oe++)Mt[oe]=arguments[oe+2];Ce.children=Mt}if(K&&K.defaultProps)for(we in ze=K.defaultProps,ze)Ce[we]===void 0&&(Ce[we]=ze[we]);return U(K,Ve,Ce)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(K){return{$$typeof:c,render:K}},qe.isValidElement=B,qe.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:be}},qe.memo=function(K,re){return{$$typeof:d,type:K,compare:re===void 0?null:re}},qe.startTransition=function(K){var re=I.T,pe={};I.T=pe;try{var we=K(),Ce=I.S;Ce!==null&&Ce(pe,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(V,De)}catch(Ve){De(Ve)}finally{re!==null&&pe.types!==null&&(re.types=pe.types),I.T=re}},qe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},qe.use=function(K){return I.H.use(K)},qe.useActionState=function(K,re,pe){return I.H.useActionState(K,re,pe)},qe.useCallback=function(K,re){return I.H.useCallback(K,re)},qe.useContext=function(K){return I.H.useContext(K)},qe.useDebugValue=function(){},qe.useDeferredValue=function(K,re){return I.H.useDeferredValue(K,re)},qe.useEffect=function(K,re){return I.H.useEffect(K,re)},qe.useEffectEvent=function(K){return I.H.useEffectEvent(K)},qe.useId=function(){return I.H.useId()},qe.useImperativeHandle=function(K,re,pe){return I.H.useImperativeHandle(K,re,pe)},qe.useInsertionEffect=function(K,re){return I.H.useInsertionEffect(K,re)},qe.useLayoutEffect=function(K,re){return I.H.useLayoutEffect(K,re)},qe.useMemo=function(K,re){return I.H.useMemo(K,re)},qe.useOptimistic=function(K,re){return I.H.useOptimistic(K,re)},qe.useReducer=function(K,re,pe){return I.H.useReducer(K,re,pe)},qe.useRef=function(K){return I.H.useRef(K)},qe.useState=function(K){return I.H.useState(K)},qe.useSyncExternalStore=function(K,re,pe){return I.H.useSyncExternalStore(K,re,pe)},qe.useTransition=function(){return I.H.useTransition()},qe.version="19.2.0",qe}var Ok;function Zu(){return Ok||(Ok=1,gb.exports=FF()),gb.exports}var E=Zu();const Bi=Ma(E),BF=LF({__proto__:null,default:Bi},[E]);var yb={exports:{}},Pf={},vb={exports:{}},xb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function zF(){return Lk||(Lk=1,(function(t){function e(Q,ue){var be=Q.length;Q.push(ue);e:for(;0<be;){var De=be-1>>>1,Ke=Q[De];if(0<i(Ke,ue))Q[De]=ue,Q[be]=Ke,be=De;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ue=Q[0],be=Q.pop();if(be!==ue){Q[0]=be;e:for(var De=0,Ke=Q.length,K=Ke>>>1;De<K;){var re=2*(De+1)-1,pe=Q[re],we=re+1,Ce=Q[we];if(0>i(pe,be))we<Ke&&0>i(Ce,pe)?(Q[De]=Ce,Q[we]=be,De=we):(Q[De]=pe,Q[re]=be,De=re);else if(we<Ke&&0>i(Ce,be))Q[De]=Ce,Q[we]=be,De=we;else break e}}return ue}function i(Q,ue){var be=Q.sortIndex-ue.sortIndex;return be!==0?be:Q.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],m=1,p=null,y=3,x=!1,_=!1,T=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function L(Q){for(var ue=n(d);ue!==null;){if(ue.callback===null)r(d);else if(ue.startTime<=Q)r(d),ue.sortIndex=ue.expirationTime,e(u,ue);else break;ue=n(d)}}function j(Q){if(T=!1,L(Q),!_)if(n(u)!==null)_=!0,V||(V=!0,q());else{var ue=n(d);ue!==null&&Se(j,ue.startTime-Q)}}var V=!1,I=-1,R=5,U=-1;function F(){return C?!0:!(t.unstable_now()-U<R)}function B(){if(C=!1,V){var Q=t.unstable_now();U=Q;var ue=!0;try{e:{_=!1,T&&(T=!1,M(I),I=-1),x=!0;var be=y;try{t:{for(L(Q),p=n(u);p!==null&&!(p.expirationTime>Q&&F());){var De=p.callback;if(typeof De=="function"){p.callback=null,y=p.priorityLevel;var Ke=De(p.expirationTime<=Q);if(Q=t.unstable_now(),typeof Ke=="function"){p.callback=Ke,L(Q),ue=!0;break t}p===n(u)&&r(u),L(Q)}else r(u);p=n(u)}if(p!==null)ue=!0;else{var K=n(d);K!==null&&Se(j,K.startTime-Q),ue=!1}}break e}finally{p=null,y=be,x=!1}ue=void 0}}finally{ue?q():V=!1}}}var q;if(typeof P=="function")q=function(){P(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=B,q=function(){se.postMessage(null)}}else q=function(){N(B,0)};function Se(Q,ue){I=N(function(){Q(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(Q){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var be=y;y=ue;try{return Q()}finally{y=be}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(Q,ue){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var be=y;y=Q;try{return ue()}finally{y=be}},t.unstable_scheduleCallback=function(Q,ue,be){var De=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?De+be:De):be=De,Q){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=be+Ke,Q={id:m++,callback:ue,priorityLevel:Q,startTime:be,expirationTime:Ke,sortIndex:-1},be>De?(Q.sortIndex=be,e(d,Q),n(u)===null&&Q===n(d)&&(T?(M(I),I=-1):T=!0,Se(j,be-De))):(Q.sortIndex=Ke,e(u,Q),_||x||(_=!0,V||(V=!0,q()))),Q},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(Q){var ue=y;return function(){var be=y;y=ue;try{return Q.apply(this,arguments)}finally{y=be}}}})(xb)),xb}var Uk;function qF(){return Uk||(Uk=1,vb.exports=zF()),vb.exports}var bb={exports:{}},ir={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk;function HF(){if(Vk)return ir;Vk=1;var t=Zu();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ir.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ir.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,m)},ir.flushSync=function(u){var d=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=m,r.d.f()}},ir.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},ir.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},ir.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:x}):m==="script"&&r.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ir.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},ir.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,p=c(m,d.crossOrigin);r.d.L(u,m,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ir.preloadModule=function(u,d){if(typeof u=="string")if(d){var m=c(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},ir.requestFormReset=function(u){r.d.r(u)},ir.unstable_batchedUpdates=function(u,d){return u(d)},ir.useFormState=function(u,d,m){return o.H.useFormState(u,d,m)},ir.useFormStatus=function(){return o.H.useHostTransitionStatus()},ir.version="19.2.0",ir}var Fk;function vO(){if(Fk)return bb.exports;Fk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bb.exports=HF(),bb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bk;function $F(){if(Bk)return Pf;Bk=1;var t=qF(),e=Zu(),n=vO();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,h=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(h=l.return),s=l.return;while(s)}return l.tag===3?h:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(r(188))}function d(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var h=s,g=l;;){var w=h.return;if(w===null)break;var A=w.alternate;if(A===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===A.child){for(A=w.child;A;){if(A===h)return u(w),s;if(A===g)return u(w),l;A=A.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=A;else{for(var D=!1,z=w.child;z;){if(z===h){D=!0,h=w,g=A;break}if(z===g){D=!0,g=w,h=A;break}z=z.sibling}if(!D){for(z=A.child;z;){if(z===h){D=!0,h=A,g=w;break}if(z===g){D=!0,g=A,h=w;break}z=z.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?s:l}function m(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=m(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),P=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=B&&s[B]||s["@@iterator"],typeof s=="function"?s:null)}var H=Symbol.for("react.client.reference");function se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===H?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case N:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case V:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case P:return s.displayName||"Context";case M:return(s._context.displayName||"Context")+".Consumer";case L:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return l=s.displayName||null,l!==null?l:se(s.type)||"Memo";case R:l=s._payload,s=s._init;try{return se(s(l))}catch{}}return null}var Se=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},De=[],Ke=-1;function K(s){return{current:s}}function re(s){0>Ke||(s.current=De[Ke],De[Ke]=null,Ke--)}function pe(s,l){Ke++,De[Ke]=s.current,s.current=l}var we=K(null),Ce=K(null),Ve=K(null),ze=K(null);function Mt(s,l){switch(pe(Ve,l),pe(Ce,s),pe(we,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?nk(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=nk(l),s=rk(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(we),pe(we,s)}function oe(){re(we),re(Ce),re(Ve)}function Fe(s){s.memoizedState!==null&&pe(ze,s);var l=we.current,h=rk(l,s.type);l!==h&&(pe(Ce,s),pe(we,h))}function Ye(s){Ce.current===s&&(re(we),re(Ce)),ze.current===s&&(re(ze),Ef._currentValue=be)}var me,Yt;function Xe(s){if(me===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);me=l&&l[1]||"",Yt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+me+s+Yt}var Zt=!1;function Pt(s,l){if(!s||Zt)return"";Zt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var te=ie}Reflect.construct(s,[],de)}else{try{de.call()}catch(ie){te=ie}s.call(de.prototype)}}else{try{throw Error()}catch(ie){te=ie}(de=s())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),D=A[0],z=A[1];if(D&&z){var G=D.split(`
`),ee=z.split(`
`);for(w=g=0;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;for(;w<ee.length&&!ee[w].includes("DetermineComponentFrameRoot");)w++;if(g===G.length||w===ee.length)for(g=G.length-1,w=ee.length-1;1<=g&&0<=w&&G[g]!==ee[w];)w--;for(;1<=g&&0<=w;g--,w--)if(G[g]!==ee[w]){if(g!==1||w!==1)do if(g--,w--,0>w||G[g]!==ee[w]){var ae=`
`+G[g].replace(" at new "," at ");return s.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",s.displayName)),ae}while(1<=g&&0<=w);break}}}finally{Zt=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?Xe(h):""}function Ze(s,l){switch(s.tag){case 26:case 27:case 5:return Xe(s.type);case 16:return Xe("Lazy");case 13:return s.child!==l&&l!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Pt(s.type,!1);case 11:return Pt(s.type.render,!1);case 1:return Pt(s.type,!0);case 31:return Xe("Activity");default:return""}}function ti(s){try{var l="",h=null;do l+=Ze(s,h),h=s,s=s.return;while(s);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var dn=Object.prototype.hasOwnProperty,Nn=t.unstable_scheduleCallback,Vs=t.unstable_cancelCallback,g0=t.unstable_shouldYield,mm=t.unstable_requestPaint,yr=t.unstable_now,tl=t.unstable_getCurrentPriorityLevel,Nd=t.unstable_ImmediatePriority,kd=t.unstable_UserBlockingPriority,Fs=t.unstable_NormalPriority,y0=t.unstable_LowPriority,pm=t.unstable_IdlePriority,gm=t.log,ym=t.unstable_setDisableYieldValue,Ci=null,Kn=null;function ni(s){if(typeof gm=="function"&&ym(s),Kn&&typeof Kn.setStrictMode=="function")try{Kn.setStrictMode(Ci,s)}catch{}}var rn=Math.clz32?Math.clz32:xm,vm=Math.log,wc=Math.LN2;function xm(s){return s>>>=0,s===0?32:31-(vm(s)/wc|0)|0}var Ji=256,nl=262144,fn=4194304;function Qi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xi(s,l,h){var g=s.pendingLanes;if(g===0)return 0;var w=0,A=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var z=g&134217727;return z!==0?(g=z&~A,g!==0?w=Qi(g):(D&=z,D!==0?w=Qi(D):h||(h=z&~s,h!==0&&(w=Qi(h))))):(z=g&~A,z!==0?w=Qi(z):D!==0?w=Qi(D):h||(h=g&~s,h!==0&&(w=Qi(h)))),w===0?0:l!==0&&l!==w&&(l&A)===0&&(A=w&-w,h=l&-l,A>=h||A===32&&(h&4194048)!==0)?l:w}function Ni(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function v0(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bm(){var s=fn;return fn<<=1,(fn&62914560)===0&&(fn=4194304),s}function Zi(s){for(var l=[],h=0;31>h;h++)l.push(s);return l}function rl(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function x0(s,l,h,g,w,A){var D=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var z=s.entanglements,G=s.expirationTimes,ee=s.hiddenUpdates;for(h=D&~h;0<h;){var ae=31-rn(h),de=1<<ae;z[ae]=0,G[ae]=-1;var te=ee[ae];if(te!==null)for(ee[ae]=null,ae=0;ae<te.length;ae++){var ie=te[ae];ie!==null&&(ie.lane&=-536870913)}h&=~de}g!==0&&il(s,g,0),A!==0&&w===0&&s.tag!==0&&(s.suspendedLanes|=A&~(D&~l))}function il(s,l,h){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-rn(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|h&261930}function Id(s,l){var h=s.entangledLanes|=l;for(s=s.entanglements;h;){var g=31-rn(h),w=1<<g;w&l|s[g]&l&&(s[g]|=l),h&=~w}}function Pd(s,l){var h=l&-l;return h=(h&42)!==0?1:al(h),(h&(s.suspendedLanes|l))!==0?0:h}function al(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function La(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function wm(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:Ek(s.type))}function ki(s,l){var h=ue.p;try{return ue.p=s,l()}finally{ue.p=h}}var Ii=Math.random().toString(36).slice(2),hn="__reactFiber$"+Ii,Un="__reactProps$"+Ii,ea="__reactContainer$"+Ii,Sc="__reactEvents$"+Ii,b0="__reactListeners$"+Ii,Sm="__reactHandles$"+Ii,_m="__reactResources$"+Ii,ta="__reactMarker$"+Ii;function _c(s){delete s[hn],delete s[Un],delete s[Sc],delete s[b0],delete s[Sm]}function na(s){var l=s[hn];if(l)return l;for(var h=s.parentNode;h;){if(l=h[ea]||h[hn]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(s=uk(s);s!==null;){if(h=s[hn])return h;s=uk(s)}return l}s=h,h=s.parentNode}return null}function ri(s){if(s=s[hn]||s[ea]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Lr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function ra(s){var l=s[_m];return l||(l=s[_m]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function mn(s){s[ta]=!0}var Dd=new Set,Rd={};function ia(s,l){aa(s,l),aa(s+"Capture",l)}function aa(s,l){for(Rd[s]=l,s=0;s<l.length;s++)Dd.add(l[s])}var Md=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jd={},Od={};function Am(s){return dn.call(Od,s)?!0:dn.call(jd,s)?!1:Md.test(s)?Od[s]=!0:(jd[s]=!0,!1)}function Ac(s,l,h){if(Am(l))if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+h)}}function Ur(s,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+h)}}function pn(s,l,h,g){if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(l,h,""+g)}}function Vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Bs(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ld(s,l,h){var g=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var w=g.get,A=g.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return w.call(this)},set:function(D){h=""+D,A.call(this,D)}}),Object.defineProperty(s,l,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(D){h=""+D},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function yt(s){if(!s._valueTracker){var l=Bs(s)?"checked":"value";s._valueTracker=Ld(s,l,""+s[l])}}function sl(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return s&&(g=Bs(s)?s.checked?"true":"false":s.value),s=g,s!==h?(l.setValue(s),!0):!1}function sa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ol=/[\n"\\]/g;function Tr(s){return s.replace(ol,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Tc(s,l,h,g,w,A,D,z){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),l!=null?D==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Vn(l)):s.value!==""+Vn(l)&&(s.value=""+Vn(l)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),l!=null?Ud(s,D,Vn(l)):h!=null?Ud(s,D,Vn(h)):g!=null&&s.removeAttribute("value"),w==null&&A!=null&&(s.defaultChecked=!!A),w!=null&&(s.checked=w&&typeof w!="function"&&typeof w!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?s.name=""+Vn(z):s.removeAttribute("name")}function Tm(s,l,h,g,w,A,D,z){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),l!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||l!=null)){yt(s);return}h=h!=null?""+Vn(h):"",l=l!=null?""+Vn(l):h,z||l===s.value||(s.value=l),s.defaultValue=l}g=g??w,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=z?s.checked:!!g,s.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D),yt(s)}function Ud(s,l,h){l==="number"&&sa(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function zs(s,l,h,g){if(s=s.options,l){l={};for(var w=0;w<h.length;w++)l["$"+h[w]]=!0;for(h=0;h<s.length;h++)w=l.hasOwnProperty("$"+s[h].value),s[h].selected!==w&&(s[h].selected=w),w&&g&&(s[h].defaultSelected=!0)}else{for(h=""+Vn(h),l=null,w=0;w<s.length;w++){if(s[w].value===h){s[w].selected=!0,g&&(s[w].defaultSelected=!0);return}l!==null||s[w].disabled||(l=s[w])}l!==null&&(l.selected=!0)}}function Em(s,l,h){if(l!=null&&(l=""+Vn(l),l!==s.value&&(s.value=l),h==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=h!=null?""+Vn(h):""}function qs(s,l,h,g){if(l==null){if(g!=null){if(h!=null)throw Error(r(92));if(Se(g)){if(1<g.length)throw Error(r(93));g=g[0]}h=g}h==null&&(h=""),l=h}h=Vn(l),s.defaultValue=h,g=s.textContent,g===h&&g!==""&&g!==null&&(s.value=g),yt(s)}function Er(s,l){if(l){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=l;return}}s.textContent=l}var Cm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vd(s,l,h){var g=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,h):typeof h!="number"||h===0||Cm.has(l)?l==="float"?s.cssFloat=h:s[l]=(""+h).trim():s[l]=h+"px"}function Fd(s,l,h){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var w in l)g=l[w],l.hasOwnProperty(w)&&h[w]!==g&&Vd(s,w,g)}else for(var A in l)l.hasOwnProperty(A)&&Vd(s,A,l[A])}function Ec(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cc(s){return Hs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Pi(){}var Bd=null;function ii(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $s=null,oa=null;function ll(s){var l=ri(s);if(l&&(s=l.stateNode)){var h=s[Un]||null;e:switch(s=l.stateNode,l.type){case"input":if(Tc(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Tr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==s&&g.form===s.form){var w=g[Un]||null;if(!w)throw Error(r(90));Tc(g,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(l=0;l<h.length;l++)g=h[l],g.form===s.form&&sl(g)}break e;case"textarea":Em(s,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&zs(s,!!h.multiple,l,!1)}}}var Nc=!1;function Gs(s,l,h){if(Nc)return s(l,h);Nc=!0;try{var g=s(l);return g}finally{if(Nc=!1,($s!==null||oa!==null)&&(wp(),$s&&(l=$s,s=oa,oa=$s=null,ll(l),s)))for(l=0;l<s.length;l++)ll(s[l])}}function Di(s,l){var h=s.stateNode;if(h===null)return null;var g=h[Un]||null;if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(r(231,l,typeof h));return h}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cl=!1;if(ai)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){cl=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{cl=!1}var la=null,zd=null,ul=null;function qd(){if(ul)return ul;var s,l=zd,h=l.length,g,w="value"in la?la.value:la.textContent,A=w.length;for(s=0;s<h&&l[s]===w[s];s++);var D=h-s;for(g=1;g<=D&&l[h-g]===w[A-g];g++);return ul=w.slice(s,1<g?1-g:void 0)}function dl(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ua(){return!0}function Ri(){return!1}function Yn(s){function l(h,g,w,A,D){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=A,this.target=D,this.currentTarget=null;for(var z in s)s.hasOwnProperty(z)&&(h=s[z],this[z]=h?h(A):A[z]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ua:Ri,this.isPropagationStopped=Ri,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),l}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Yn(Va),Ks=p({},Va,{view:0,detail:0}),Hd=Yn(Ks),Ys,kc,ua,Ic=p({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ua&&(ua&&s.type==="mousemove"?(Ys=s.screenX-ua.screenX,kc=s.screenY-ua.screenY):kc=Ys=0,ua=s),Ys)},movementY:function(s){return"movementY"in s?s.movementY:kc}}),$d=Yn(Ic),fl=p({},Ic,{dataTransfer:0}),km=Yn(fl),Im=p({},Ks,{relatedTarget:0}),hl=Yn(Im),Gd=p({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),Pm=Yn(Gd),Pc=p({},Va,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Dm=Yn(Pc),Rm=p({},Va,{data:0}),da=Yn(Rm),Mm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lm(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=Om[s])?!!l[s]:!1}function Ws(){return Lm}var vr=p({},Ks,{key:function(s){if(s.key){var l=Mm[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=dl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?jm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(s){return s.type==="keypress"?dl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?dl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Um=Yn(vr),Vm=p({},Ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fa=Yn(Vm),b=p({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),k=Yn(b),O=p({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),$=Yn(O),X=p({},Ic,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=Yn(X),ve=p({},Va,{newState:0,oldState:0}),We=Yn(ve),an=[9,13,27,32],pt=ai&&"CompositionEvent"in window,Bt=null;ai&&"documentMode"in document&&(Bt=document.documentMode);var si=ai&&"TextEvent"in window&&!Bt,fa=ai&&(!pt||Bt&&8<Bt&&11>=Bt),Mi=" ",ji=!1;function ml(s,l){switch(s){case"keyup":return an.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rc=!1;function a9(s,l){switch(s){case"compositionend":return Dc(l);case"keypress":return l.which!==32?null:(ji=!0,Mi);case"textInput":return s=l.data,s===Mi&&ji?null:s;default:return null}}function s9(s,l){if(Rc)return s==="compositionend"||!pt&&ml(s,l)?(s=qd(),ul=zd=la=null,Rc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return fa&&l.locale!=="ko"?null:l.data;default:return null}}var o9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!o9[s.type]:l==="textarea"}function mE(s,l,h,g){$s?oa?oa.push(g):oa=[g]:$s=g,l=Np(l,"onChange"),0<l.length&&(h=new ca("onChange","change",null,h,g),s.push({event:h,listeners:l}))}var Kd=null,Yd=null;function l9(s){JN(s,0)}function Fm(s){var l=Lr(s);if(sl(l))return s}function pE(s,l){if(s==="change")return l}var gE=!1;if(ai){var w0;if(ai){var S0="oninput"in document;if(!S0){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),S0=typeof yE.oninput=="function"}w0=S0}else w0=!1;gE=w0&&(!document.documentMode||9<document.documentMode)}function vE(){Kd&&(Kd.detachEvent("onpropertychange",xE),Yd=Kd=null)}function xE(s){if(s.propertyName==="value"&&Fm(Yd)){var l=[];mE(l,Yd,s,ii(s)),Gs(l9,l)}}function c9(s,l,h){s==="focusin"?(vE(),Kd=l,Yd=h,Kd.attachEvent("onpropertychange",xE)):s==="focusout"&&vE()}function u9(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Fm(Yd)}function d9(s,l){if(s==="click")return Fm(l)}function f9(s,l){if(s==="input"||s==="change")return Fm(l)}function h9(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Vr=typeof Object.is=="function"?Object.is:h9;function Wd(s,l){if(Vr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var h=Object.keys(s),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!dn.call(l,w)||!Vr(s[w],l[w]))return!1}return!0}function bE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function wE(s,l){var h=bE(s);s=0;for(var g;h;){if(h.nodeType===3){if(g=s+h.textContent.length,s<=l&&g>=l)return{node:h,offset:l-s};s=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=bE(h)}}function SE(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?SE(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function _E(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=sa(s.document);l instanceof s.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)s=l.contentWindow;else break;l=sa(s.document)}return l}function _0(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var m9=ai&&"documentMode"in document&&11>=document.documentMode,Mc=null,A0=null,Jd=null,T0=!1;function AE(s,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;T0||Mc==null||Mc!==sa(g)||(g=Mc,"selectionStart"in g&&_0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Jd&&Wd(Jd,g)||(Jd=g,g=Np(A0,"onSelect"),0<g.length&&(l=new ca("onSelect","select",null,l,h),s.push({event:l,listeners:g}),l.target=Mc)))}function pl(s,l){var h={};return h[s.toLowerCase()]=l.toLowerCase(),h["Webkit"+s]="webkit"+l,h["Moz"+s]="moz"+l,h}var jc={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionrun:pl("Transition","TransitionRun"),transitionstart:pl("Transition","TransitionStart"),transitioncancel:pl("Transition","TransitionCancel"),transitionend:pl("Transition","TransitionEnd")},E0={},TE={};ai&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),"TransitionEvent"in window||delete jc.transitionend.transition);function gl(s){if(E0[s])return E0[s];if(!jc[s])return s;var l=jc[s],h;for(h in l)if(l.hasOwnProperty(h)&&h in TE)return E0[s]=l[h];return s}var EE=gl("animationend"),CE=gl("animationiteration"),NE=gl("animationstart"),p9=gl("transitionrun"),g9=gl("transitionstart"),y9=gl("transitioncancel"),kE=gl("transitionend"),IE=new Map,C0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");C0.push("scrollEnd");function Oi(s,l){IE.set(s,l),ia(l,[s])}var Bm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],Oc=0,N0=0;function zm(){for(var s=Oc,l=N0=Oc=0;l<s;){var h=oi[l];oi[l++]=null;var g=oi[l];oi[l++]=null;var w=oi[l];oi[l++]=null;var A=oi[l];if(oi[l++]=null,g!==null&&w!==null){var D=g.pending;D===null?w.next=w:(w.next=D.next,D.next=w),g.pending=w}A!==0&&PE(h,w,A)}}function qm(s,l,h,g){oi[Oc++]=s,oi[Oc++]=l,oi[Oc++]=h,oi[Oc++]=g,N0|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function k0(s,l,h,g){return qm(s,l,h,g),Hm(s)}function yl(s,l){return qm(s,null,null,l),Hm(s)}function PE(s,l,h){s.lanes|=h;var g=s.alternate;g!==null&&(g.lanes|=h);for(var w=!1,A=s.return;A!==null;)A.childLanes|=h,g=A.alternate,g!==null&&(g.childLanes|=h),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(w=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,w&&l!==null&&(w=31-rn(h),s=A.hiddenUpdates,g=s[w],g===null?s[w]=[l]:g.push(l),l.lane=h|536870912),A):null}function Hm(s){if(50<xf)throw xf=0,Ux=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Lc={};function v9(s,l,h,g){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(s,l,h,g){return new v9(s,l,h,g)}function I0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ba(s,l){var h=s.alternate;return h===null?(h=Fr(s.tag,l,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=l,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,l=s.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function DE(s,l){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,l=h.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function $m(s,l,h,g,w,A){var D=0;if(g=s,typeof s=="function")I0(s)&&(D=1);else if(typeof s=="string")D=_F(s,h,we.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Fr(31,h,l,w),s.elementType=U,s.lanes=A,s;case T:return vl(h.children,w,A,l);case C:D=8,w|=24;break;case N:return s=Fr(12,h,l,w|2),s.elementType=N,s.lanes=A,s;case j:return s=Fr(13,h,l,w),s.elementType=j,s.lanes=A,s;case V:return s=Fr(19,h,l,w),s.elementType=V,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:D=10;break e;case M:D=9;break e;case L:D=11;break e;case I:D=14;break e;case R:D=16,g=null;break e}D=29,h=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=Fr(D,h,l,w),l.elementType=s,l.type=g,l.lanes=A,l}function vl(s,l,h,g){return s=Fr(7,s,g,l),s.lanes=h,s}function P0(s,l,h){return s=Fr(6,s,null,l),s.lanes=h,s}function RE(s){var l=Fr(18,null,null,0);return l.stateNode=s,l}function D0(s,l,h){return l=Fr(4,s.children!==null?s.children:[],s.key,l),l.lanes=h,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var ME=new WeakMap;function li(s,l){if(typeof s=="object"&&s!==null){var h=ME.get(s);return h!==void 0?h:(l={value:s,source:l,stack:ti(l)},ME.set(s,l),l)}return{value:s,source:l,stack:ti(l)}}var Uc=[],Vc=0,Gm=null,Qd=0,ci=[],ui=0,Js=null,ha=1,ma="";function za(s,l){Uc[Vc++]=Qd,Uc[Vc++]=Gm,Gm=s,Qd=l}function jE(s,l,h){ci[ui++]=ha,ci[ui++]=ma,ci[ui++]=Js,Js=s;var g=ha;s=ma;var w=32-rn(g)-1;g&=~(1<<w),h+=1;var A=32-rn(l)+w;if(30<A){var D=w-w%5;A=(g&(1<<D)-1).toString(32),g>>=D,w-=D,ha=1<<32-rn(l)+w|h<<w|g,ma=A+s}else ha=1<<A|h<<w|g,ma=s}function R0(s){s.return!==null&&(za(s,1),jE(s,1,0))}function M0(s){for(;s===Gm;)Gm=Uc[--Vc],Uc[Vc]=null,Qd=Uc[--Vc],Uc[Vc]=null;for(;s===Js;)Js=ci[--ui],ci[ui]=null,ma=ci[--ui],ci[ui]=null,ha=ci[--ui],ci[ui]=null}function OE(s,l){ci[ui++]=ha,ci[ui++]=ma,ci[ui++]=Js,ha=l.id,ma=l.overflow,Js=s}var Wn=null,jt=null,st=!1,Qs=null,di=!1,j0=Error(r(519));function Xs(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xd(li(l,s)),j0}function LE(s){var l=s.stateNode,h=s.type,g=s.memoizedProps;switch(l[hn]=s,l[Un]=g,h){case"dialog":tt("cancel",l),tt("close",l);break;case"iframe":case"object":case"embed":tt("load",l);break;case"video":case"audio":for(h=0;h<wf.length;h++)tt(wf[h],l);break;case"source":tt("error",l);break;case"img":case"image":case"link":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"input":tt("invalid",l),Tm(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":tt("invalid",l);break;case"textarea":tt("invalid",l),qs(l,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||g.suppressHydrationWarning===!0||ek(l.textContent,h)?(g.popover!=null&&(tt("beforetoggle",l),tt("toggle",l)),g.onScroll!=null&&tt("scroll",l),g.onScrollEnd!=null&&tt("scrollend",l),g.onClick!=null&&(l.onclick=Pi),l=!0):l=!1,l||Xs(s,!0)}function UE(s){for(Wn=s.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:Wn=Wn.return}}function Fc(s){if(s!==Wn)return!1;if(!st)return UE(s),st=!0,!1;var l=s.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||Zx(s.type,s.memoizedProps)),h=!h),h&&jt&&Xs(s),UE(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));jt=ck(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));jt=ck(s)}else l===27?(l=jt,ho(s.type)?(s=ib,ib=null,jt=s):jt=l):jt=Wn?hi(s.stateNode.nextSibling):null;return!0}function xl(){jt=Wn=null,st=!1}function O0(){var s=Qs;return s!==null&&(Ir===null?Ir=s:Ir.push.apply(Ir,s),Qs=null),s}function Xd(s){Qs===null?Qs=[s]:Qs.push(s)}var L0=K(null),bl=null,qa=null;function Zs(s,l,h){pe(L0,l._currentValue),l._currentValue=h}function Ha(s){s._currentValue=L0.current,re(L0)}function U0(s,l,h){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===h)break;s=s.return}}function V0(s,l,h,g){var w=s.child;for(w!==null&&(w.return=s);w!==null;){var A=w.dependencies;if(A!==null){var D=w.child;A=A.firstContext;e:for(;A!==null;){var z=A;A=w;for(var G=0;G<l.length;G++)if(z.context===l[G]){A.lanes|=h,z=A.alternate,z!==null&&(z.lanes|=h),U0(A.return,h,s),g||(D=null);break e}A=z.next}}else if(w.tag===18){if(D=w.return,D===null)throw Error(r(341));D.lanes|=h,A=D.alternate,A!==null&&(A.lanes|=h),U0(D,h,s),D=null}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===s){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}}function Bc(s,l,h,g){s=null;for(var w=l,A=!1;w!==null;){if(!A){if((w.flags&524288)!==0)A=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var D=w.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var z=w.type;Vr(w.pendingProps.value,D.value)||(s!==null?s.push(z):s=[z])}}else if(w===ze.current){if(D=w.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(s!==null?s.push(Ef):s=[Ef])}w=w.return}s!==null&&V0(l,s,h,g),l.flags|=262144}function Km(s){for(s=s.firstContext;s!==null;){if(!Vr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function wl(s){bl=s,qa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Jn(s){return VE(bl,s)}function Ym(s,l){return bl===null&&wl(s),VE(s,l)}function VE(s,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},qa===null){if(s===null)throw Error(r(308));qa=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else qa=qa.next=l;return h}var x9=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(h,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(h){return h()})}},b9=t.unstable_scheduleCallback,w9=t.unstable_NormalPriority,gn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function F0(){return{controller:new x9,data:new Map,refCount:0}}function Zd(s){s.refCount--,s.refCount===0&&b9(w9,function(){s.controller.abort()})}var ef=null,B0=0,zc=0,qc=null;function S9(s,l){if(ef===null){var h=ef=[];B0=0,zc=Hx(),qc={status:"pending",value:void 0,then:function(g){h.push(g)}}}return B0++,l.then(FE,FE),l}function FE(){if(--B0===0&&ef!==null){qc!==null&&(qc.status="fulfilled");var s=ef;ef=null,zc=0,qc=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function _9(s,l){var h=[],g={status:"pending",value:null,reason:null,then:function(w){h.push(w)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var w=0;w<h.length;w++)(0,h[w])(l)},function(w){for(g.status="rejected",g.reason=w,w=0;w<h.length;w++)(0,h[w])(void 0)}),g}var BE=Q.S;Q.S=function(s,l){AN=yr(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&S9(s,l),BE!==null&&BE(s,l)};var Sl=K(null);function z0(){var s=Sl.current;return s!==null?s:Et.pooledCache}function Wm(s,l){l===null?pe(Sl,Sl.current):pe(Sl,l.pool)}function zE(){var s=z0();return s===null?null:{parent:gn._currentValue,pool:s}}var Hc=Error(r(460)),q0=Error(r(474)),Jm=Error(r(542)),Qm={then:function(){}};function qE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function HE(s,l,h){switch(h=s[h],h===void 0?s.push(l):h!==l&&(l.then(Pi,Pi),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,GE(s),s;default:if(typeof l.status=="string")l.then(Pi,Pi);else{if(s=Et,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var w=l;w.status="fulfilled",w.value=g}},function(g){if(l.status==="pending"){var w=l;w.status="rejected",w.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,GE(s),s}throw Al=l,Hc}}function _l(s){try{var l=s._init;return l(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Al=h,Hc):h}}var Al=null;function $E(){if(Al===null)throw Error(r(459));var s=Al;return Al=null,s}function GE(s){if(s===Hc||s===Jm)throw Error(r(483))}var $c=null,tf=0;function Xm(s){var l=tf;return tf+=1,$c===null&&($c=[]),HE($c,s,l)}function nf(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function Zm(s,l){throw l.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function KE(s){function l(W,Y){if(s){var Z=W.deletions;Z===null?(W.deletions=[Y],W.flags|=16):Z.push(Y)}}function h(W,Y){if(!s)return null;for(;Y!==null;)l(W,Y),Y=Y.sibling;return null}function g(W){for(var Y=new Map;W!==null;)W.key!==null?Y.set(W.key,W):Y.set(W.index,W),W=W.sibling;return Y}function w(W,Y){return W=Ba(W,Y),W.index=0,W.sibling=null,W}function A(W,Y,Z){return W.index=Z,s?(Z=W.alternate,Z!==null?(Z=Z.index,Z<Y?(W.flags|=67108866,Y):Z):(W.flags|=67108866,Y)):(W.flags|=1048576,Y)}function D(W){return s&&W.alternate===null&&(W.flags|=67108866),W}function z(W,Y,Z,le){return Y===null||Y.tag!==6?(Y=P0(Z,W.mode,le),Y.return=W,Y):(Y=w(Y,Z),Y.return=W,Y)}function G(W,Y,Z,le){var Re=Z.type;return Re===T?ae(W,Y,Z.props.children,le,Z.key):Y!==null&&(Y.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&_l(Re)===Y.type)?(Y=w(Y,Z.props),nf(Y,Z),Y.return=W,Y):(Y=$m(Z.type,Z.key,Z.props,null,W.mode,le),nf(Y,Z),Y.return=W,Y)}function ee(W,Y,Z,le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=D0(Z,W.mode,le),Y.return=W,Y):(Y=w(Y,Z.children||[]),Y.return=W,Y)}function ae(W,Y,Z,le,Re){return Y===null||Y.tag!==7?(Y=vl(Z,W.mode,le,Re),Y.return=W,Y):(Y=w(Y,Z),Y.return=W,Y)}function de(W,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=P0(""+Y,W.mode,Z),Y.return=W,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Z=$m(Y.type,Y.key,Y.props,null,W.mode,Z),nf(Z,Y),Z.return=W,Z;case _:return Y=D0(Y,W.mode,Z),Y.return=W,Y;case R:return Y=_l(Y),de(W,Y,Z)}if(Se(Y)||q(Y))return Y=vl(Y,W.mode,Z,null),Y.return=W,Y;if(typeof Y.then=="function")return de(W,Xm(Y),Z);if(Y.$$typeof===P)return de(W,Ym(W,Y),Z);Zm(W,Y)}return null}function te(W,Y,Z,le){var Re=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Re!==null?null:z(W,Y,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return Z.key===Re?G(W,Y,Z,le):null;case _:return Z.key===Re?ee(W,Y,Z,le):null;case R:return Z=_l(Z),te(W,Y,Z,le)}if(Se(Z)||q(Z))return Re!==null?null:ae(W,Y,Z,le,null);if(typeof Z.then=="function")return te(W,Y,Xm(Z),le);if(Z.$$typeof===P)return te(W,Y,Ym(W,Z),le);Zm(W,Z)}return null}function ie(W,Y,Z,le,Re){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return W=W.get(Z)||null,z(Y,W,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return W=W.get(le.key===null?Z:le.key)||null,G(Y,W,le,Re);case _:return W=W.get(le.key===null?Z:le.key)||null,ee(Y,W,le,Re);case R:return le=_l(le),ie(W,Y,Z,le,Re)}if(Se(le)||q(le))return W=W.get(Z)||null,ae(Y,W,le,Re,null);if(typeof le.then=="function")return ie(W,Y,Z,Xm(le),Re);if(le.$$typeof===P)return ie(W,Y,Z,Ym(Y,le),Re);Zm(Y,le)}return null}function Ne(W,Y,Z,le){for(var Re=null,dt=null,Pe=Y,Qe=Y=0,it=null;Pe!==null&&Qe<Z.length;Qe++){Pe.index>Qe?(it=Pe,Pe=null):it=Pe.sibling;var ft=te(W,Pe,Z[Qe],le);if(ft===null){Pe===null&&(Pe=it);break}s&&Pe&&ft.alternate===null&&l(W,Pe),Y=A(ft,Y,Qe),dt===null?Re=ft:dt.sibling=ft,dt=ft,Pe=it}if(Qe===Z.length)return h(W,Pe),st&&za(W,Qe),Re;if(Pe===null){for(;Qe<Z.length;Qe++)Pe=de(W,Z[Qe],le),Pe!==null&&(Y=A(Pe,Y,Qe),dt===null?Re=Pe:dt.sibling=Pe,dt=Pe);return st&&za(W,Qe),Re}for(Pe=g(Pe);Qe<Z.length;Qe++)it=ie(Pe,W,Qe,Z[Qe],le),it!==null&&(s&&it.alternate!==null&&Pe.delete(it.key===null?Qe:it.key),Y=A(it,Y,Qe),dt===null?Re=it:dt.sibling=it,dt=it);return s&&Pe.forEach(function(vo){return l(W,vo)}),st&&za(W,Qe),Re}function Me(W,Y,Z,le){if(Z==null)throw Error(r(151));for(var Re=null,dt=null,Pe=Y,Qe=Y=0,it=null,ft=Z.next();Pe!==null&&!ft.done;Qe++,ft=Z.next()){Pe.index>Qe?(it=Pe,Pe=null):it=Pe.sibling;var vo=te(W,Pe,ft.value,le);if(vo===null){Pe===null&&(Pe=it);break}s&&Pe&&vo.alternate===null&&l(W,Pe),Y=A(vo,Y,Qe),dt===null?Re=vo:dt.sibling=vo,dt=vo,Pe=it}if(ft.done)return h(W,Pe),st&&za(W,Qe),Re;if(Pe===null){for(;!ft.done;Qe++,ft=Z.next())ft=de(W,ft.value,le),ft!==null&&(Y=A(ft,Y,Qe),dt===null?Re=ft:dt.sibling=ft,dt=ft);return st&&za(W,Qe),Re}for(Pe=g(Pe);!ft.done;Qe++,ft=Z.next())ft=ie(Pe,W,Qe,ft.value,le),ft!==null&&(s&&ft.alternate!==null&&Pe.delete(ft.key===null?Qe:ft.key),Y=A(ft,Y,Qe),dt===null?Re=ft:dt.sibling=ft,dt=ft);return s&&Pe.forEach(function(MF){return l(W,MF)}),st&&za(W,Qe),Re}function At(W,Y,Z,le){if(typeof Z=="object"&&Z!==null&&Z.type===T&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:e:{for(var Re=Z.key;Y!==null;){if(Y.key===Re){if(Re=Z.type,Re===T){if(Y.tag===7){h(W,Y.sibling),le=w(Y,Z.props.children),le.return=W,W=le;break e}}else if(Y.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&_l(Re)===Y.type){h(W,Y.sibling),le=w(Y,Z.props),nf(le,Z),le.return=W,W=le;break e}h(W,Y);break}else l(W,Y);Y=Y.sibling}Z.type===T?(le=vl(Z.props.children,W.mode,le,Z.key),le.return=W,W=le):(le=$m(Z.type,Z.key,Z.props,null,W.mode,le),nf(le,Z),le.return=W,W=le)}return D(W);case _:e:{for(Re=Z.key;Y!==null;){if(Y.key===Re)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){h(W,Y.sibling),le=w(Y,Z.children||[]),le.return=W,W=le;break e}else{h(W,Y);break}else l(W,Y);Y=Y.sibling}le=D0(Z,W.mode,le),le.return=W,W=le}return D(W);case R:return Z=_l(Z),At(W,Y,Z,le)}if(Se(Z))return Ne(W,Y,Z,le);if(q(Z)){if(Re=q(Z),typeof Re!="function")throw Error(r(150));return Z=Re.call(Z),Me(W,Y,Z,le)}if(typeof Z.then=="function")return At(W,Y,Xm(Z),le);if(Z.$$typeof===P)return At(W,Y,Ym(W,Z),le);Zm(W,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(h(W,Y.sibling),le=w(Y,Z),le.return=W,W=le):(h(W,Y),le=P0(Z,W.mode,le),le.return=W,W=le),D(W)):h(W,Y)}return function(W,Y,Z,le){try{tf=0;var Re=At(W,Y,Z,le);return $c=null,Re}catch(Pe){if(Pe===Hc||Pe===Jm)throw Pe;var dt=Fr(29,Pe,null,W.mode);return dt.lanes=le,dt.return=W,dt}finally{}}}var Tl=KE(!0),YE=KE(!1),eo=!1;function H0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $0(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function to(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function no(s,l,h){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(gt&2)!==0){var w=g.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),g.pending=l,l=Hm(s),PE(s,null,h),l}return qm(s,g,l,h),Hm(s)}function rf(s,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,Id(s,h)}}function G0(s,l){var h=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?w=A=D:A=A.next=D,h=h.next}while(h!==null);A===null?w=A=l:A=A.next=l}else w=A=l;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=l:s.next=l,h.lastBaseUpdate=l}var K0=!1;function af(){if(K0){var s=qc;if(s!==null)throw s}}function sf(s,l,h,g){K0=!1;var w=s.updateQueue;eo=!1;var A=w.firstBaseUpdate,D=w.lastBaseUpdate,z=w.shared.pending;if(z!==null){w.shared.pending=null;var G=z,ee=G.next;G.next=null,D===null?A=ee:D.next=ee,D=G;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,z=ae.lastBaseUpdate,z!==D&&(z===null?ae.firstBaseUpdate=ee:z.next=ee,ae.lastBaseUpdate=G))}if(A!==null){var de=w.baseState;D=0,ae=ee=G=null,z=A;do{var te=z.lane&-536870913,ie=te!==z.lane;if(ie?(rt&te)===te:(g&te)===te){te!==0&&te===zc&&(K0=!0),ae!==null&&(ae=ae.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Ne=s,Me=z;te=l;var At=h;switch(Me.tag){case 1:if(Ne=Me.payload,typeof Ne=="function"){de=Ne.call(At,de,te);break e}de=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Me.payload,te=typeof Ne=="function"?Ne.call(At,de,te):Ne,te==null)break e;de=p({},de,te);break e;case 2:eo=!0}}te=z.callback,te!==null&&(s.flags|=64,ie&&(s.flags|=8192),ie=w.callbacks,ie===null?w.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ae===null?(ee=ae=ie,G=de):ae=ae.next=ie,D|=te;if(z=z.next,z===null){if(z=w.shared.pending,z===null)break;ie=z,z=ie.next,ie.next=null,w.lastBaseUpdate=ie,w.shared.pending=null}}while(!0);ae===null&&(G=de),w.baseState=G,w.firstBaseUpdate=ee,w.lastBaseUpdate=ae,A===null&&(w.shared.lanes=0),oo|=D,s.lanes=D,s.memoizedState=de}}function WE(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function JE(s,l){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)WE(h[s],l)}var Gc=K(null),ep=K(0);function QE(s,l){s=Za,pe(ep,s),pe(Gc,l),Za=s|l.baseLanes}function Y0(){pe(ep,Za),pe(Gc,Gc.current)}function W0(){Za=ep.current,re(Gc),re(ep)}var Br=K(null),fi=null;function ro(s){var l=s.alternate;pe(sn,sn.current&1),pe(Br,s),fi===null&&(l===null||Gc.current!==null||l.memoizedState!==null)&&(fi=s)}function J0(s){pe(sn,sn.current),pe(Br,s),fi===null&&(fi=s)}function XE(s){s.tag===22?(pe(sn,sn.current),pe(Br,s),fi===null&&(fi=s)):io()}function io(){pe(sn,sn.current),pe(Br,Br.current)}function zr(s){re(Br),fi===s&&(fi=null),re(sn)}var sn=K(0);function tp(s){for(var l=s;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||nb(h)||rb(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var $a=0,Je=null,St=null,yn=null,np=!1,Kc=!1,El=!1,rp=0,of=0,Yc=null,A9=0;function en(){throw Error(r(321))}function Q0(s,l){if(l===null)return!1;for(var h=0;h<l.length&&h<s.length;h++)if(!Vr(s[h],l[h]))return!1;return!0}function X0(s,l,h,g,w,A){return $a=A,Je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Q.H=s===null||s.memoizedState===null?jC:hx,El=!1,A=h(g,w),El=!1,Kc&&(A=eC(l,h,g,w)),ZE(s),A}function ZE(s){Q.H=uf;var l=St!==null&&St.next!==null;if($a=0,yn=St=Je=null,np=!1,of=0,Yc=null,l)throw Error(r(300));s===null||vn||(s=s.dependencies,s!==null&&Km(s)&&(vn=!0))}function eC(s,l,h,g){Je=s;var w=0;do{if(Kc&&(Yc=null),of=0,Kc=!1,25<=w)throw Error(r(301));if(w+=1,yn=St=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}Q.H=OC,A=l(h,g)}while(Kc);return A}function T9(){var s=Q.H,l=s.useState()[0];return l=typeof l.then=="function"?lf(l):l,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Je.flags|=1024),l}function Z0(){var s=rp!==0;return rp=0,s}function ex(s,l,h){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~h}function tx(s){if(np){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}np=!1}$a=0,yn=St=Je=null,Kc=!1,of=rp=0,Yc=null}function xr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Je.memoizedState=yn=s:yn=yn.next=s,yn}function on(){if(St===null){var s=Je.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var l=yn===null?Je.memoizedState:yn.next;if(l!==null)yn=l,St=s;else{if(s===null)throw Je.alternate===null?Error(r(467)):Error(r(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},yn===null?Je.memoizedState=yn=s:yn=yn.next=s}return yn}function ip(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lf(s){var l=of;return of+=1,Yc===null&&(Yc=[]),s=HE(Yc,s,l),l=Je,(yn===null?l.memoizedState:yn.next)===null&&(l=l.alternate,Q.H=l===null||l.memoizedState===null?jC:hx),s}function ap(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lf(s);if(s.$$typeof===P)return Jn(s)}throw Error(r(438,String(s)))}function nx(s){var l=null,h=Je.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(w){return w.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=ip(),Je.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(s),g=0;g<s;g++)h[g]=F;return l.index++,h}function Ga(s,l){return typeof l=="function"?l(s):l}function sp(s){var l=on();return rx(l,St,s)}function rx(s,l,h){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=h;var w=s.baseQueue,A=g.pending;if(A!==null){if(w!==null){var D=w.next;w.next=A.next,A.next=D}l.baseQueue=w=A,g.pending=null}if(A=s.baseState,w===null)s.memoizedState=A;else{l=w.next;var z=D=null,G=null,ee=l,ae=!1;do{var de=ee.lane&-536870913;if(de!==ee.lane?(rt&de)===de:($a&de)===de){var te=ee.revertLane;if(te===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),de===zc&&(ae=!0);else if(($a&te)===te){ee=ee.next,te===zc&&(ae=!0);continue}else de={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},G===null?(z=G=de,D=A):G=G.next=de,Je.lanes|=te,oo|=te;de=ee.action,El&&h(A,de),A=ee.hasEagerState?ee.eagerState:h(A,de)}else te={lane:de,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},G===null?(z=G=te,D=A):G=G.next=te,Je.lanes|=de,oo|=de;ee=ee.next}while(ee!==null&&ee!==l);if(G===null?D=A:G.next=z,!Vr(A,s.memoizedState)&&(vn=!0,ae&&(h=qc,h!==null)))throw h;s.memoizedState=A,s.baseState=D,s.baseQueue=G,g.lastRenderedState=A}return w===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function ix(s){var l=on(),h=l.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=s;var g=h.dispatch,w=h.pending,A=l.memoizedState;if(w!==null){h.pending=null;var D=w=w.next;do A=s(A,D.action),D=D.next;while(D!==w);Vr(A,l.memoizedState)||(vn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),h.lastRenderedState=A}return[A,g]}function tC(s,l,h){var g=Je,w=on(),A=st;if(A){if(h===void 0)throw Error(r(407));h=h()}else h=l();var D=!Vr((St||w).memoizedState,h);if(D&&(w.memoizedState=h,vn=!0),w=w.queue,ox(iC.bind(null,g,w,s),[s]),w.getSnapshot!==l||D||yn!==null&&yn.memoizedState.tag&1){if(g.flags|=2048,Wc(9,{destroy:void 0},rC.bind(null,g,w,h,l),null),Et===null)throw Error(r(349));A||($a&127)!==0||nC(g,l,h)}return h}function nC(s,l,h){s.flags|=16384,s={getSnapshot:l,value:h},l=Je.updateQueue,l===null?(l=ip(),Je.updateQueue=l,l.stores=[s]):(h=l.stores,h===null?l.stores=[s]:h.push(s))}function rC(s,l,h,g){l.value=h,l.getSnapshot=g,aC(l)&&sC(s)}function iC(s,l,h){return h(function(){aC(l)&&sC(s)})}function aC(s){var l=s.getSnapshot;s=s.value;try{var h=l();return!Vr(s,h)}catch{return!0}}function sC(s){var l=yl(s,2);l!==null&&Pr(l,s,2)}function ax(s){var l=xr();if(typeof s=="function"){var h=s;if(s=h(),El){ni(!0);try{h()}finally{ni(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:s},l}function oC(s,l,h,g){return s.baseState=h,rx(s,St,typeof g=="function"?g:Ga)}function E9(s,l,h,g,w){if(cp(s))throw Error(r(485));if(s=l.action,s!==null){var A={payload:w,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){A.listeners.push(D)}};Q.T!==null?h(!0):A.isTransition=!1,g(A),h=l.pending,h===null?(A.next=l.pending=A,lC(l,A)):(A.next=h.next,l.pending=h.next=A)}}function lC(s,l){var h=l.action,g=l.payload,w=s.state;if(l.isTransition){var A=Q.T,D={};Q.T=D;try{var z=h(w,g),G=Q.S;G!==null&&G(D,z),cC(s,l,z)}catch(ee){sx(s,l,ee)}finally{A!==null&&D.types!==null&&(A.types=D.types),Q.T=A}}else try{A=h(w,g),cC(s,l,A)}catch(ee){sx(s,l,ee)}}function cC(s,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){uC(s,l,g)},function(g){return sx(s,l,g)}):uC(s,l,h)}function uC(s,l,h){l.status="fulfilled",l.value=h,dC(l),s.state=h,l=s.pending,l!==null&&(h=l.next,h===l?s.pending=null:(h=h.next,l.next=h,lC(s,h)))}function sx(s,l,h){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=h,dC(l),l=l.next;while(l!==g)}s.action=null}function dC(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function fC(s,l){return l}function hC(s,l){if(st){var h=Et.formState;if(h!==null){e:{var g=Je;if(st){if(jt){t:{for(var w=jt,A=di;w.nodeType!==8;){if(!A){w=null;break t}if(w=hi(w.nextSibling),w===null){w=null;break t}}A=w.data,w=A==="F!"||A==="F"?w:null}if(w){jt=hi(w.nextSibling),g=w.data==="F!";break e}}Xs(g)}g=!1}g&&(l=h[0])}}return h=xr(),h.memoizedState=h.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fC,lastRenderedState:l},h.queue=g,h=DC.bind(null,Je,g),g.dispatch=h,g=ax(!1),A=fx.bind(null,Je,!1,g.queue),g=xr(),w={state:l,dispatch:null,action:s,pending:null},g.queue=w,h=E9.bind(null,Je,w,A,h),w.dispatch=h,g.memoizedState=s,[l,h,!1]}function mC(s){var l=on();return pC(l,St,s)}function pC(s,l,h){if(l=rx(s,l,fC)[0],s=sp(Ga)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=lf(l)}catch(D){throw D===Hc?Jm:D}else g=l;l=on();var w=l.queue,A=w.dispatch;return h!==l.memoizedState&&(Je.flags|=2048,Wc(9,{destroy:void 0},C9.bind(null,w,h),null)),[g,A,s]}function C9(s,l){s.action=l}function gC(s){var l=on(),h=St;if(h!==null)return pC(l,h,s);on(),l=l.memoizedState,h=on();var g=h.queue.dispatch;return h.memoizedState=s,[l,g,!1]}function Wc(s,l,h,g){return s={tag:s,create:h,deps:g,inst:l,next:null},l=Je.updateQueue,l===null&&(l=ip(),Je.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=s.next=s:(g=h.next,h.next=s,s.next=g,l.lastEffect=s),s}function yC(){return on().memoizedState}function op(s,l,h,g){var w=xr();Je.flags|=s,w.memoizedState=Wc(1|l,{destroy:void 0},h,g===void 0?null:g)}function lp(s,l,h,g){var w=on();g=g===void 0?null:g;var A=w.memoizedState.inst;St!==null&&g!==null&&Q0(g,St.memoizedState.deps)?w.memoizedState=Wc(l,A,h,g):(Je.flags|=s,w.memoizedState=Wc(1|l,A,h,g))}function vC(s,l){op(8390656,8,s,l)}function ox(s,l){lp(2048,8,s,l)}function N9(s){Je.flags|=4;var l=Je.updateQueue;if(l===null)l=ip(),Je.updateQueue=l,l.events=[s];else{var h=l.events;h===null?l.events=[s]:h.push(s)}}function xC(s){var l=on().memoizedState;return N9({ref:l,nextImpl:s}),function(){if((gt&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function bC(s,l){return lp(4,2,s,l)}function wC(s,l){return lp(4,4,s,l)}function SC(s,l){if(typeof l=="function"){s=s();var h=l(s);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function _C(s,l,h){h=h!=null?h.concat([s]):null,lp(4,4,SC.bind(null,l,s),h)}function lx(){}function AC(s,l){var h=on();l=l===void 0?null:l;var g=h.memoizedState;return l!==null&&Q0(l,g[1])?g[0]:(h.memoizedState=[s,l],s)}function TC(s,l){var h=on();l=l===void 0?null:l;var g=h.memoizedState;if(l!==null&&Q0(l,g[1]))return g[0];if(g=s(),El){ni(!0);try{s()}finally{ni(!1)}}return h.memoizedState=[g,l],g}function cx(s,l,h){return h===void 0||($a&1073741824)!==0&&(rt&261930)===0?s.memoizedState=l:(s.memoizedState=h,s=EN(),Je.lanes|=s,oo|=s,h)}function EC(s,l,h,g){return Vr(h,l)?h:Gc.current!==null?(s=cx(s,h,g),Vr(s,l)||(vn=!0),s):($a&42)===0||($a&1073741824)!==0&&(rt&261930)===0?(vn=!0,s.memoizedState=h):(s=EN(),Je.lanes|=s,oo|=s,l)}function CC(s,l,h,g,w){var A=ue.p;ue.p=A!==0&&8>A?A:8;var D=Q.T,z={};Q.T=z,fx(s,!1,l,h);try{var G=w(),ee=Q.S;if(ee!==null&&ee(z,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ae=_9(G,g);cf(s,l,ae,$r(s))}else cf(s,l,g,$r(s))}catch(de){cf(s,l,{then:function(){},status:"rejected",reason:de},$r())}finally{ue.p=A,D!==null&&z.types!==null&&(D.types=z.types),Q.T=D}}function k9(){}function ux(s,l,h,g){if(s.tag!==5)throw Error(r(476));var w=NC(s).queue;CC(s,w,l,be,h===null?k9:function(){return kC(s),h(g)})}function NC(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:be},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:h},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function kC(s){var l=NC(s);l.next===null&&(l=s.alternate.memoizedState),cf(s,l.next.queue,{},$r())}function dx(){return Jn(Ef)}function IC(){return on().memoizedState}function PC(){return on().memoizedState}function I9(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var h=$r();s=to(h);var g=no(l,s,h);g!==null&&(Pr(g,l,h),rf(g,l,h)),l={cache:F0()},s.payload=l;return}l=l.return}}function P9(s,l,h){var g=$r();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},cp(s)?RC(l,h):(h=k0(s,l,h,g),h!==null&&(Pr(h,s,g),MC(h,l,g)))}function DC(s,l,h){var g=$r();cf(s,l,h,g)}function cf(s,l,h,g){var w={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(cp(s))RC(l,w);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var D=l.lastRenderedState,z=A(D,h);if(w.hasEagerState=!0,w.eagerState=z,Vr(z,D))return qm(s,l,w,0),Et===null&&zm(),!1}catch{}finally{}if(h=k0(s,l,w,g),h!==null)return Pr(h,s,g),MC(h,l,g),!0}return!1}function fx(s,l,h,g){if(g={lane:2,revertLane:Hx(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},cp(s)){if(l)throw Error(r(479))}else l=k0(s,h,g,2),l!==null&&Pr(l,s,2)}function cp(s){var l=s.alternate;return s===Je||l!==null&&l===Je}function RC(s,l){Kc=np=!0;var h=s.pending;h===null?l.next=l:(l.next=h.next,h.next=l),s.pending=l}function MC(s,l,h){if((h&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,h|=g,l.lanes=h,Id(s,h)}}var uf={readContext:Jn,use:ap,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};uf.useEffectEvent=en;var jC={readContext:Jn,use:ap,useCallback:function(s,l){return xr().memoizedState=[s,l===void 0?null:l],s},useContext:Jn,useEffect:vC,useImperativeHandle:function(s,l,h){h=h!=null?h.concat([s]):null,op(4194308,4,SC.bind(null,l,s),h)},useLayoutEffect:function(s,l){return op(4194308,4,s,l)},useInsertionEffect:function(s,l){op(4,2,s,l)},useMemo:function(s,l){var h=xr();l=l===void 0?null:l;var g=s();if(El){ni(!0);try{s()}finally{ni(!1)}}return h.memoizedState=[g,l],g},useReducer:function(s,l,h){var g=xr();if(h!==void 0){var w=h(l);if(El){ni(!0);try{h(l)}finally{ni(!1)}}}else w=l;return g.memoizedState=g.baseState=w,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:w},g.queue=s,s=s.dispatch=P9.bind(null,Je,s),[g.memoizedState,s]},useRef:function(s){var l=xr();return s={current:s},l.memoizedState=s},useState:function(s){s=ax(s);var l=s.queue,h=DC.bind(null,Je,l);return l.dispatch=h,[s.memoizedState,h]},useDebugValue:lx,useDeferredValue:function(s,l){var h=xr();return cx(h,s,l)},useTransition:function(){var s=ax(!1);return s=CC.bind(null,Je,s.queue,!0,!1),xr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,h){var g=Je,w=xr();if(st){if(h===void 0)throw Error(r(407));h=h()}else{if(h=l(),Et===null)throw Error(r(349));(rt&127)!==0||nC(g,l,h)}w.memoizedState=h;var A={value:h,getSnapshot:l};return w.queue=A,vC(iC.bind(null,g,A,s),[s]),g.flags|=2048,Wc(9,{destroy:void 0},rC.bind(null,g,A,h,l),null),h},useId:function(){var s=xr(),l=Et.identifierPrefix;if(st){var h=ma,g=ha;h=(g&~(1<<32-rn(g)-1)).toString(32)+h,l="_"+l+"R_"+h,h=rp++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=A9++,l="_"+l+"r_"+h.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:dx,useFormState:hC,useActionState:hC,useOptimistic:function(s){var l=xr();l.memoizedState=l.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=fx.bind(null,Je,!0,h),h.dispatch=l,[s,l]},useMemoCache:nx,useCacheRefresh:function(){return xr().memoizedState=I9.bind(null,Je)},useEffectEvent:function(s){var l=xr(),h={impl:s};return l.memoizedState=h,function(){if((gt&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},hx={readContext:Jn,use:ap,useCallback:AC,useContext:Jn,useEffect:ox,useImperativeHandle:_C,useInsertionEffect:bC,useLayoutEffect:wC,useMemo:TC,useReducer:sp,useRef:yC,useState:function(){return sp(Ga)},useDebugValue:lx,useDeferredValue:function(s,l){var h=on();return EC(h,St.memoizedState,s,l)},useTransition:function(){var s=sp(Ga)[0],l=on().memoizedState;return[typeof s=="boolean"?s:lf(s),l]},useSyncExternalStore:tC,useId:IC,useHostTransitionStatus:dx,useFormState:mC,useActionState:mC,useOptimistic:function(s,l){var h=on();return oC(h,St,s,l)},useMemoCache:nx,useCacheRefresh:PC};hx.useEffectEvent=xC;var OC={readContext:Jn,use:ap,useCallback:AC,useContext:Jn,useEffect:ox,useImperativeHandle:_C,useInsertionEffect:bC,useLayoutEffect:wC,useMemo:TC,useReducer:ix,useRef:yC,useState:function(){return ix(Ga)},useDebugValue:lx,useDeferredValue:function(s,l){var h=on();return St===null?cx(h,s,l):EC(h,St.memoizedState,s,l)},useTransition:function(){var s=ix(Ga)[0],l=on().memoizedState;return[typeof s=="boolean"?s:lf(s),l]},useSyncExternalStore:tC,useId:IC,useHostTransitionStatus:dx,useFormState:gC,useActionState:gC,useOptimistic:function(s,l){var h=on();return St!==null?oC(h,St,s,l):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:nx,useCacheRefresh:PC};OC.useEffectEvent=xC;function mx(s,l,h,g){l=s.memoizedState,h=h(g,l),h=h==null?l:p({},l,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var px={enqueueSetState:function(s,l,h){s=s._reactInternals;var g=$r(),w=to(g);w.payload=l,h!=null&&(w.callback=h),l=no(s,w,g),l!==null&&(Pr(l,s,g),rf(l,s,g))},enqueueReplaceState:function(s,l,h){s=s._reactInternals;var g=$r(),w=to(g);w.tag=1,w.payload=l,h!=null&&(w.callback=h),l=no(s,w,g),l!==null&&(Pr(l,s,g),rf(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var h=$r(),g=to(h);g.tag=2,l!=null&&(g.callback=l),l=no(s,g,h),l!==null&&(Pr(l,s,h),rf(l,s,h))}};function LC(s,l,h,g,w,A,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,A,D):l.prototype&&l.prototype.isPureReactComponent?!Wd(h,g)||!Wd(w,A):!0}function UC(s,l,h,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==s&&px.enqueueReplaceState(l,l.state,null)}function Cl(s,l){var h=l;if("ref"in l){h={};for(var g in l)g!=="ref"&&(h[g]=l[g])}if(s=s.defaultProps){h===l&&(h=p({},h));for(var w in s)h[w]===void 0&&(h[w]=s[w])}return h}function VC(s){Bm(s)}function FC(s){console.error(s)}function BC(s){Bm(s)}function up(s,l){try{var h=s.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function zC(s,l,h){try{var g=s.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function gx(s,l,h){return h=to(h),h.tag=3,h.payload={element:null},h.callback=function(){up(s,l)},h}function qC(s){return s=to(s),s.tag=3,s}function HC(s,l,h,g){var w=h.type.getDerivedStateFromError;if(typeof w=="function"){var A=g.value;s.payload=function(){return w(A)},s.callback=function(){zC(l,h,g)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){zC(l,h,g),typeof w!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var z=g.stack;this.componentDidCatch(g.value,{componentStack:z!==null?z:""})})}function D9(s,l,h,g,w){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=h.alternate,l!==null&&Bc(l,h,w,!0),h=Br.current,h!==null){switch(h.tag){case 31:case 13:return fi===null?Sp():h.alternate===null&&tn===0&&(tn=3),h.flags&=-257,h.flags|=65536,h.lanes=w,g===Qm?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([g]):l.add(g),Bx(s,g,w)),!1;case 22:return h.flags|=65536,g===Qm?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([g]):h.add(g)),Bx(s,g,w)),!1}throw Error(r(435,h.tag))}return Bx(s,g,w),Sp(),!1}if(st)return l=Br.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=w,g!==j0&&(s=Error(r(422),{cause:g}),Xd(li(s,h)))):(g!==j0&&(l=Error(r(423),{cause:g}),Xd(li(l,h))),s=s.current.alternate,s.flags|=65536,w&=-w,s.lanes|=w,g=li(g,h),w=gx(s.stateNode,g,w),G0(s,w),tn!==4&&(tn=2)),!1;var A=Error(r(520),{cause:g});if(A=li(A,h),vf===null?vf=[A]:vf.push(A),tn!==4&&(tn=2),l===null)return!0;g=li(g,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,s=w&-w,h.lanes|=s,s=gx(h.stateNode,g,s),G0(h,s),!1;case 1:if(l=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(lo===null||!lo.has(A))))return h.flags|=65536,w&=-w,h.lanes|=w,w=qC(w),HC(w,s,h,g),G0(h,w),!1}h=h.return}while(h!==null);return!1}var yx=Error(r(461)),vn=!1;function Qn(s,l,h,g){l.child=s===null?YE(l,null,h,g):Tl(l,s.child,h,g)}function $C(s,l,h,g,w){h=h.render;var A=l.ref;if("ref"in g){var D={};for(var z in g)z!=="ref"&&(D[z]=g[z])}else D=g;return wl(l),g=X0(s,l,h,D,A,w),z=Z0(),s!==null&&!vn?(ex(s,l,w),Ka(s,l,w)):(st&&z&&R0(l),l.flags|=1,Qn(s,l,g,w),l.child)}function GC(s,l,h,g,w){if(s===null){var A=h.type;return typeof A=="function"&&!I0(A)&&A.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=A,KC(s,l,A,g,w)):(s=$m(h.type,null,g,l,l.mode,w),s.ref=l.ref,s.return=l,l.child=s)}if(A=s.child,!Tx(s,w)){var D=A.memoizedProps;if(h=h.compare,h=h!==null?h:Wd,h(D,g)&&s.ref===l.ref)return Ka(s,l,w)}return l.flags|=1,s=Ba(A,g),s.ref=l.ref,s.return=l,l.child=s}function KC(s,l,h,g,w){if(s!==null){var A=s.memoizedProps;if(Wd(A,g)&&s.ref===l.ref)if(vn=!1,l.pendingProps=g=A,Tx(s,w))(s.flags&131072)!==0&&(vn=!0);else return l.lanes=s.lanes,Ka(s,l,w)}return vx(s,l,h,g,w)}function YC(s,l,h,g){var w=g.children,A=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,s!==null){for(g=l.child=s.child,w=0;g!==null;)w=w|g.lanes|g.childLanes,g=g.sibling;g=w&~A}else g=0,l.child=null;return WC(s,l,A,h,g)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Wm(l,A!==null?A.cachePool:null),A!==null?QE(l,A):Y0(),XE(l);else return g=l.lanes=536870912,WC(s,l,A!==null?A.baseLanes|h:h,h,g)}else A!==null?(Wm(l,A.cachePool),QE(l,A),io(),l.memoizedState=null):(s!==null&&Wm(l,null),Y0(),io());return Qn(s,l,w,h),l.child}function df(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function WC(s,l,h,g,w){var A=z0();return A=A===null?null:{parent:gn._currentValue,pool:A},l.memoizedState={baseLanes:h,cachePool:A},s!==null&&Wm(l,null),Y0(),XE(l),s!==null&&Bc(s,l,g,!0),l.childLanes=w,null}function dp(s,l){return l=hp({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function JC(s,l,h){return Tl(l,s.child,null,h),s=dp(l,l.pendingProps),s.flags|=2,zr(l),l.memoizedState=null,s}function R9(s,l,h){var g=l.pendingProps,w=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(st){if(g.mode==="hidden")return s=dp(l,g),l.lanes=536870912,df(null,s);if(J0(l),(s=jt)?(s=lk(s,di),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Js!==null?{id:ha,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},h=RE(s),h.return=l,l.child=h,Wn=l,jt=null)):s=null,s===null)throw Xs(l);return l.lanes=536870912,null}return dp(l,g)}var A=s.memoizedState;if(A!==null){var D=A.dehydrated;if(J0(l),w)if(l.flags&256)l.flags&=-257,l=JC(s,l,h);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(vn||Bc(s,l,h,!1),w=(h&s.childLanes)!==0,vn||w){if(g=Et,g!==null&&(D=Pd(g,h),D!==0&&D!==A.retryLane))throw A.retryLane=D,yl(s,D),Pr(g,s,D),yx;Sp(),l=JC(s,l,h)}else s=A.treeContext,jt=hi(D.nextSibling),Wn=l,st=!0,Qs=null,di=!1,s!==null&&OE(l,s),l=dp(l,g),l.flags|=4096;return l}return s=Ba(s.child,{mode:g.mode,children:g.children}),s.ref=l.ref,l.child=s,s.return=l,s}function fp(s,l){var h=l.ref;if(h===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(s===null||s.ref!==h)&&(l.flags|=4194816)}}function vx(s,l,h,g,w){return wl(l),h=X0(s,l,h,g,void 0,w),g=Z0(),s!==null&&!vn?(ex(s,l,w),Ka(s,l,w)):(st&&g&&R0(l),l.flags|=1,Qn(s,l,h,w),l.child)}function QC(s,l,h,g,w,A){return wl(l),l.updateQueue=null,h=eC(l,g,h,w),ZE(s),g=Z0(),s!==null&&!vn?(ex(s,l,A),Ka(s,l,A)):(st&&g&&R0(l),l.flags|=1,Qn(s,l,h,A),l.child)}function XC(s,l,h,g,w){if(wl(l),l.stateNode===null){var A=Lc,D=h.contextType;typeof D=="object"&&D!==null&&(A=Jn(D)),A=new h(g,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=px,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=g,A.state=l.memoizedState,A.refs={},H0(l),D=h.contextType,A.context=typeof D=="object"&&D!==null?Jn(D):Lc,A.state=l.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(mx(l,h,D,g),A.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(D=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),D!==A.state&&px.enqueueReplaceState(A,A.state,null),sf(l,g,A,w),af(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){A=l.stateNode;var z=l.memoizedProps,G=Cl(h,z);A.props=G;var ee=A.context,ae=h.contextType;D=Lc,typeof ae=="object"&&ae!==null&&(D=Jn(ae));var de=h.getDerivedStateFromProps;ae=typeof de=="function"||typeof A.getSnapshotBeforeUpdate=="function",z=l.pendingProps!==z,ae||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(z||ee!==D)&&UC(l,A,g,D),eo=!1;var te=l.memoizedState;A.state=te,sf(l,g,A,w),af(),ee=l.memoizedState,z||te!==ee||eo?(typeof de=="function"&&(mx(l,h,de,g),ee=l.memoizedState),(G=eo||LC(l,h,G,g,te,ee,D))?(ae||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ee),A.props=g,A.state=ee,A.context=D,g=G):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{A=l.stateNode,$0(s,l),D=l.memoizedProps,ae=Cl(h,D),A.props=ae,de=l.pendingProps,te=A.context,ee=h.contextType,G=Lc,typeof ee=="object"&&ee!==null&&(G=Jn(ee)),z=h.getDerivedStateFromProps,(ee=typeof z=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==de||te!==G)&&UC(l,A,g,G),eo=!1,te=l.memoizedState,A.state=te,sf(l,g,A,w),af();var ie=l.memoizedState;D!==de||te!==ie||eo||s!==null&&s.dependencies!==null&&Km(s.dependencies)?(typeof z=="function"&&(mx(l,h,z,g),ie=l.memoizedState),(ae=eo||LC(l,h,ae,g,te,ie,G)||s!==null&&s.dependencies!==null&&Km(s.dependencies))?(ee||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,ie,G),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,ie,G)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||D===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ie),A.props=g,A.state=ie,A.context=G,g=ae):(typeof A.componentDidUpdate!="function"||D===s.memoizedProps&&te===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&te===s.memoizedState||(l.flags|=1024),g=!1)}return A=g,fp(s,l),g=(l.flags&128)!==0,A||g?(A=l.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,s!==null&&g?(l.child=Tl(l,s.child,null,w),l.child=Tl(l,null,h,w)):Qn(s,l,h,w),l.memoizedState=A.state,s=l.child):s=Ka(s,l,w),s}function ZC(s,l,h,g){return xl(),l.flags|=256,Qn(s,l,h,g),l.child}var xx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bx(s){return{baseLanes:s,cachePool:zE()}}function wx(s,l,h){return s=s!==null?s.childLanes&~h:0,l&&(s|=Hr),s}function eN(s,l,h){var g=l.pendingProps,w=!1,A=(l.flags&128)!==0,D;if((D=A)||(D=s!==null&&s.memoizedState===null?!1:(sn.current&2)!==0),D&&(w=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,s===null){if(st){if(w?ro(l):io(),(s=jt)?(s=lk(s,di),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:Js!==null?{id:ha,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},h=RE(s),h.return=l,l.child=h,Wn=l,jt=null)):s=null,s===null)throw Xs(l);return rb(s)?l.lanes=32:l.lanes=536870912,null}var z=g.children;return g=g.fallback,w?(io(),w=l.mode,z=hp({mode:"hidden",children:z},w),g=vl(g,w,h,null),z.return=l,g.return=l,z.sibling=g,l.child=z,g=l.child,g.memoizedState=bx(h),g.childLanes=wx(s,D,h),l.memoizedState=xx,df(null,g)):(ro(l),Sx(l,z))}var G=s.memoizedState;if(G!==null&&(z=G.dehydrated,z!==null)){if(A)l.flags&256?(ro(l),l.flags&=-257,l=_x(s,l,h)):l.memoizedState!==null?(io(),l.child=s.child,l.flags|=128,l=null):(io(),z=g.fallback,w=l.mode,g=hp({mode:"visible",children:g.children},w),z=vl(z,w,h,null),z.flags|=2,g.return=l,z.return=l,g.sibling=z,l.child=g,Tl(l,s.child,null,h),g=l.child,g.memoizedState=bx(h),g.childLanes=wx(s,D,h),l.memoizedState=xx,l=df(null,g));else if(ro(l),rb(z)){if(D=z.nextSibling&&z.nextSibling.dataset,D)var ee=D.dgst;D=ee,g=Error(r(419)),g.stack="",g.digest=D,Xd({value:g,source:null,stack:null}),l=_x(s,l,h)}else if(vn||Bc(s,l,h,!1),D=(h&s.childLanes)!==0,vn||D){if(D=Et,D!==null&&(g=Pd(D,h),g!==0&&g!==G.retryLane))throw G.retryLane=g,yl(s,g),Pr(D,s,g),yx;nb(z)||Sp(),l=_x(s,l,h)}else nb(z)?(l.flags|=192,l.child=s.child,l=null):(s=G.treeContext,jt=hi(z.nextSibling),Wn=l,st=!0,Qs=null,di=!1,s!==null&&OE(l,s),l=Sx(l,g.children),l.flags|=4096);return l}return w?(io(),z=g.fallback,w=l.mode,G=s.child,ee=G.sibling,g=Ba(G,{mode:"hidden",children:g.children}),g.subtreeFlags=G.subtreeFlags&65011712,ee!==null?z=Ba(ee,z):(z=vl(z,w,h,null),z.flags|=2),z.return=l,g.return=l,g.sibling=z,l.child=g,df(null,g),g=l.child,z=s.child.memoizedState,z===null?z=bx(h):(w=z.cachePool,w!==null?(G=gn._currentValue,w=w.parent!==G?{parent:G,pool:G}:w):w=zE(),z={baseLanes:z.baseLanes|h,cachePool:w}),g.memoizedState=z,g.childLanes=wx(s,D,h),l.memoizedState=xx,df(s.child,g)):(ro(l),h=s.child,s=h.sibling,h=Ba(h,{mode:"visible",children:g.children}),h.return=l,h.sibling=null,s!==null&&(D=l.deletions,D===null?(l.deletions=[s],l.flags|=16):D.push(s)),l.child=h,l.memoizedState=null,h)}function Sx(s,l){return l=hp({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function hp(s,l){return s=Fr(22,s,null,l),s.lanes=0,s}function _x(s,l,h){return Tl(l,s.child,null,h),s=Sx(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function tN(s,l,h){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),U0(s.return,l,h)}function Ax(s,l,h,g,w,A){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w,treeForkCount:A}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=g,D.tail=h,D.tailMode=w,D.treeForkCount=A)}function nN(s,l,h){var g=l.pendingProps,w=g.revealOrder,A=g.tail;g=g.children;var D=sn.current,z=(D&2)!==0;if(z?(D=D&1|2,l.flags|=128):D&=1,pe(sn,D),Qn(s,l,g,h),g=st?Qd:0,!z&&s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&tN(s,h,l);else if(s.tag===19)tN(s,h,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(w){case"forwards":for(h=l.child,w=null;h!==null;)s=h.alternate,s!==null&&tp(s)===null&&(w=h),h=h.sibling;h=w,h===null?(w=l.child,l.child=null):(w=h.sibling,h.sibling=null),Ax(l,!1,w,h,A,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,w=l.child,l.child=null;w!==null;){if(s=w.alternate,s!==null&&tp(s)===null){l.child=w;break}s=w.sibling,w.sibling=h,h=w,w=s}Ax(l,!0,h,null,A,g);break;case"together":Ax(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Ka(s,l,h){if(s!==null&&(l.dependencies=s.dependencies),oo|=l.lanes,(h&l.childLanes)===0)if(s!==null){if(Bc(s,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,h=Ba(s,s.pendingProps),l.child=h,h.return=l;s.sibling!==null;)s=s.sibling,h=h.sibling=Ba(s,s.pendingProps),h.return=l;h.sibling=null}return l.child}function Tx(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Km(s)))}function M9(s,l,h){switch(l.tag){case 3:Mt(l,l.stateNode.containerInfo),Zs(l,gn,s.memoizedState.cache),xl();break;case 27:case 5:Fe(l);break;case 4:Mt(l,l.stateNode.containerInfo);break;case 10:Zs(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,J0(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(ro(l),l.flags|=128,null):(h&l.child.childLanes)!==0?eN(s,l,h):(ro(l),s=Ka(s,l,h),s!==null?s.sibling:null);ro(l);break;case 19:var w=(s.flags&128)!==0;if(g=(h&l.childLanes)!==0,g||(Bc(s,l,h,!1),g=(h&l.childLanes)!==0),w){if(g)return nN(s,l,h);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),pe(sn,sn.current),g)break;return null;case 22:return l.lanes=0,YC(s,l,h,l.pendingProps);case 24:Zs(l,gn,s.memoizedState.cache)}return Ka(s,l,h)}function rN(s,l,h){if(s!==null)if(s.memoizedProps!==l.pendingProps)vn=!0;else{if(!Tx(s,h)&&(l.flags&128)===0)return vn=!1,M9(s,l,h);vn=(s.flags&131072)!==0}else vn=!1,st&&(l.flags&1048576)!==0&&jE(l,Qd,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(s=_l(l.elementType),l.type=s,typeof s=="function")I0(s)?(g=Cl(s,g),l.tag=1,l=XC(null,l,s,g,h)):(l.tag=0,l=vx(null,l,s,g,h));else{if(s!=null){var w=s.$$typeof;if(w===L){l.tag=11,l=$C(null,l,s,g,h);break e}else if(w===I){l.tag=14,l=GC(null,l,s,g,h);break e}}throw l=se(s)||s,Error(r(306,l,""))}}return l;case 0:return vx(s,l,l.type,l.pendingProps,h);case 1:return g=l.type,w=Cl(g,l.pendingProps),XC(s,l,g,w,h);case 3:e:{if(Mt(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var A=l.memoizedState;w=A.element,$0(s,l),sf(l,g,null,h);var D=l.memoizedState;if(g=D.cache,Zs(l,gn,g),g!==A.cache&&V0(l,[gn],h,!0),af(),g=D.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=ZC(s,l,g,h);break e}else if(g!==w){w=li(Error(r(424)),l),Xd(w),l=ZC(s,l,g,h);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(jt=hi(s.firstChild),Wn=l,st=!0,Qs=null,di=!0,h=YE(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(xl(),g===w){l=Ka(s,l,h);break e}Qn(s,l,g,h)}l=l.child}return l;case 26:return fp(s,l),s===null?(h=mk(l.type,null,l.pendingProps,null))?l.memoizedState=h:st||(h=l.type,s=l.pendingProps,g=kp(Ve.current).createElement(h),g[hn]=l,g[Un]=s,Xn(g,h,s),mn(g),l.stateNode=g):l.memoizedState=mk(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Fe(l),s===null&&st&&(g=l.stateNode=dk(l.type,l.pendingProps,Ve.current),Wn=l,di=!0,w=jt,ho(l.type)?(ib=w,jt=hi(g.firstChild)):jt=w),Qn(s,l,l.pendingProps.children,h),fp(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&st&&((w=g=jt)&&(g=uF(g,l.type,l.pendingProps,di),g!==null?(l.stateNode=g,Wn=l,jt=hi(g.firstChild),di=!1,w=!0):w=!1),w||Xs(l)),Fe(l),w=l.type,A=l.pendingProps,D=s!==null?s.memoizedProps:null,g=A.children,Zx(w,A)?g=null:D!==null&&Zx(w,D)&&(l.flags|=32),l.memoizedState!==null&&(w=X0(s,l,T9,null,null,h),Ef._currentValue=w),fp(s,l),Qn(s,l,g,h),l.child;case 6:return s===null&&st&&((s=h=jt)&&(h=dF(h,l.pendingProps,di),h!==null?(l.stateNode=h,Wn=l,jt=null,s=!0):s=!1),s||Xs(l)),null;case 13:return eN(s,l,h);case 4:return Mt(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Tl(l,null,g,h):Qn(s,l,g,h),l.child;case 11:return $C(s,l,l.type,l.pendingProps,h);case 7:return Qn(s,l,l.pendingProps,h),l.child;case 8:return Qn(s,l,l.pendingProps.children,h),l.child;case 12:return Qn(s,l,l.pendingProps.children,h),l.child;case 10:return g=l.pendingProps,Zs(l,l.type,g.value),Qn(s,l,g.children,h),l.child;case 9:return w=l.type._context,g=l.pendingProps.children,wl(l),w=Jn(w),g=g(w),l.flags|=1,Qn(s,l,g,h),l.child;case 14:return GC(s,l,l.type,l.pendingProps,h);case 15:return KC(s,l,l.type,l.pendingProps,h);case 19:return nN(s,l,h);case 31:return R9(s,l,h);case 22:return YC(s,l,h,l.pendingProps);case 24:return wl(l),g=Jn(gn),s===null?(w=z0(),w===null&&(w=Et,A=F0(),w.pooledCache=A,A.refCount++,A!==null&&(w.pooledCacheLanes|=h),w=A),l.memoizedState={parent:g,cache:w},H0(l),Zs(l,gn,w)):((s.lanes&h)!==0&&($0(s,l),sf(l,null,null,h),af()),w=s.memoizedState,A=l.memoizedState,w.parent!==g?(w={parent:g,cache:g},l.memoizedState=w,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=w),Zs(l,gn,g)):(g=A.cache,Zs(l,gn,g),g!==w.cache&&V0(l,[gn],h,!0))),Qn(s,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Ya(s){s.flags|=4}function Ex(s,l,h,g,w){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(w&335544128)===w)if(s.stateNode.complete)s.flags|=8192;else if(IN())s.flags|=8192;else throw Al=Qm,q0}else s.flags&=-16777217}function iN(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xk(l))if(IN())s.flags|=8192;else throw Al=Qm,q0}function mp(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?bm():536870912,s.lanes|=l,Zc|=l)}function ff(s,l){if(!st)switch(s.tailMode){case"hidden":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function Ot(s){var l=s.alternate!==null&&s.alternate.child===s.child,h=0,g=0;if(l)for(var w=s.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&65011712,g|=w.flags&65011712,w.return=s,w=w.sibling;else for(w=s.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=s,w=w.sibling;return s.subtreeFlags|=g,s.childLanes=h,l}function j9(s,l,h){var g=l.pendingProps;switch(M0(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(l),null;case 1:return Ot(l),null;case 3:return h=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Ha(gn),oe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Fc(l)?Ya(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,O0())),Ot(l),null;case 26:var w=l.type,A=l.memoizedState;return s===null?(Ya(l),A!==null?(Ot(l),iN(l,A)):(Ot(l),Ex(l,w,null,g,h))):A?A!==s.memoizedState?(Ya(l),Ot(l),iN(l,A)):(Ot(l),l.flags&=-16777217):(s=s.memoizedProps,s!==g&&Ya(l),Ot(l),Ex(l,w,s,g,h)),null;case 27:if(Ye(l),h=Ve.current,w=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&Ya(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Ot(l),null}s=we.current,Fc(l)?LE(l):(s=dk(w,g,h),l.stateNode=s,Ya(l))}return Ot(l),null;case 5:if(Ye(l),w=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&Ya(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return Ot(l),null}if(A=we.current,Fc(l))LE(l);else{var D=kp(Ve.current);switch(A){case 1:A=D.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:A=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":A=D.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":A=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":A=D.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof g.is=="string"?D.createElement("select",{is:g.is}):D.createElement("select"),g.multiple?A.multiple=!0:g.size&&(A.size=g.size);break;default:A=typeof g.is=="string"?D.createElement(w,{is:g.is}):D.createElement(w)}}A[hn]=l,A[Un]=g;e:for(D=l.child;D!==null;){if(D.tag===5||D.tag===6)A.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===l)break e;for(;D.sibling===null;){if(D.return===null||D.return===l)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}l.stateNode=A;e:switch(Xn(A,w,g),w){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ya(l)}}return Ot(l),Ex(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,h),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&Ya(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=Ve.current,Fc(l)){if(s=l.stateNode,h=l.memoizedProps,g=null,w=Wn,w!==null)switch(w.tag){case 27:case 5:g=w.memoizedProps}s[hn]=l,s=!!(s.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||ek(s.nodeValue,h)),s||Xs(l,!0)}else s=kp(s).createTextNode(g),s[hn]=l,l.stateNode=s}return Ot(l),null;case 31:if(h=l.memoizedState,s===null||s.memoizedState!==null){if(g=Fc(l),h!==null){if(s===null){if(!g)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[hn]=l}else xl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ot(l),s=!1}else h=O0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return l.flags&256?(zr(l),l):(zr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return Ot(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(w=Fc(l),g!==null&&g.dehydrated!==null){if(s===null){if(!w)throw Error(r(318));if(w=l.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[hn]=l}else xl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ot(l),w=!1}else w=O0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=w),w=!0;if(!w)return l.flags&256?(zr(l),l):(zr(l),null)}return zr(l),(l.flags&128)!==0?(l.lanes=h,l):(h=g!==null,s=s!==null&&s.memoizedState!==null,h&&(g=l.child,w=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(w=g.alternate.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==w&&(g.flags|=2048)),h!==s&&h&&(l.child.flags|=8192),mp(l,l.updateQueue),Ot(l),null);case 4:return oe(),s===null&&Yx(l.stateNode.containerInfo),Ot(l),null;case 10:return Ha(l.type),Ot(l),null;case 19:if(re(sn),g=l.memoizedState,g===null)return Ot(l),null;if(w=(l.flags&128)!==0,A=g.rendering,A===null)if(w)ff(g,!1);else{if(tn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(A=tp(s),A!==null){for(l.flags|=128,ff(g,!1),s=A.updateQueue,l.updateQueue=s,mp(l,s),l.subtreeFlags=0,s=h,h=l.child;h!==null;)DE(h,s),h=h.sibling;return pe(sn,sn.current&1|2),st&&za(l,g.treeForkCount),l.child}s=s.sibling}g.tail!==null&&yr()>xp&&(l.flags|=128,w=!0,ff(g,!1),l.lanes=4194304)}else{if(!w)if(s=tp(A),s!==null){if(l.flags|=128,w=!0,s=s.updateQueue,l.updateQueue=s,mp(l,s),ff(g,!0),g.tail===null&&g.tailMode==="hidden"&&!A.alternate&&!st)return Ot(l),null}else 2*yr()-g.renderingStartTime>xp&&h!==536870912&&(l.flags|=128,w=!0,ff(g,!1),l.lanes=4194304);g.isBackwards?(A.sibling=l.child,l.child=A):(s=g.last,s!==null?s.sibling=A:l.child=A,g.last=A)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=yr(),s.sibling=null,h=sn.current,pe(sn,w?h&1|2:h&1),st&&za(l,g.treeForkCount),s):(Ot(l),null);case 22:case 23:return zr(l),W0(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(h&536870912)!==0&&(l.flags&128)===0&&(Ot(l),l.subtreeFlags&6&&(l.flags|=8192)):Ot(l),h=l.updateQueue,h!==null&&mp(l,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048),s!==null&&re(Sl),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Ha(gn),Ot(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function O9(s,l){switch(M0(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ha(gn),oe(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ye(l),null;case 31:if(l.memoizedState!==null){if(zr(l),l.alternate===null)throw Error(r(340));xl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(zr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));xl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return re(sn),null;case 4:return oe(),null;case 10:return Ha(l.type),null;case 22:case 23:return zr(l),W0(),s!==null&&re(Sl),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ha(gn),null;case 25:return null;default:return null}}function aN(s,l){switch(M0(l),l.tag){case 3:Ha(gn),oe();break;case 26:case 27:case 5:Ye(l);break;case 4:oe();break;case 31:l.memoizedState!==null&&zr(l);break;case 13:zr(l);break;case 19:re(sn);break;case 10:Ha(l.type);break;case 22:case 23:zr(l),W0(),s!==null&&re(Sl);break;case 24:Ha(gn)}}function hf(s,l){try{var h=l.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&s)===s){g=void 0;var A=h.create,D=h.inst;g=A(),D.destroy=g}h=h.next}while(h!==w)}}catch(z){xt(l,l.return,z)}}function ao(s,l,h){try{var g=l.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var A=w.next;g=A;do{if((g.tag&s)===s){var D=g.inst,z=D.destroy;if(z!==void 0){D.destroy=void 0,w=l;var G=h,ee=z;try{ee()}catch(ae){xt(w,G,ae)}}}g=g.next}while(g!==A)}}catch(ae){xt(l,l.return,ae)}}function sN(s){var l=s.updateQueue;if(l!==null){var h=s.stateNode;try{JE(l,h)}catch(g){xt(s,s.return,g)}}}function oN(s,l,h){h.props=Cl(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(g){xt(s,l,g)}}function mf(s,l){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof h=="function"?s.refCleanup=h(g):h.current=g}}catch(w){xt(s,l,w)}}function pa(s,l){var h=s.ref,g=s.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(w){xt(s,l,w)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(w){xt(s,l,w)}else h.current=null}function lN(s){var l=s.type,h=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(w){xt(s,s.return,w)}}function Cx(s,l,h){try{var g=s.stateNode;iF(g,s.type,h,l),g[Un]=l}catch(w){xt(s,s.return,w)}}function cN(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ho(s.type)||s.tag===4}function Nx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||cN(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ho(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kx(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(s),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Pi));else if(g!==4&&(g===27&&ho(s.type)&&(h=s.stateNode,l=null),s=s.child,s!==null))for(kx(s,l,h),s=s.sibling;s!==null;)kx(s,l,h),s=s.sibling}function pp(s,l,h){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?h.insertBefore(s,l):h.appendChild(s);else if(g!==4&&(g===27&&ho(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(pp(s,l,h),s=s.sibling;s!==null;)pp(s,l,h),s=s.sibling}function uN(s){var l=s.stateNode,h=s.memoizedProps;try{for(var g=s.type,w=l.attributes;w.length;)l.removeAttributeNode(w[0]);Xn(l,g,h),l[hn]=s,l[Un]=h}catch(A){xt(s,s.return,A)}}var Wa=!1,xn=!1,Ix=!1,dN=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function L9(s,l){if(s=s.containerInfo,Qx=Op,s=_E(s),_0(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var D=0,z=-1,G=-1,ee=0,ae=0,de=s,te=null;t:for(;;){for(var ie;de!==h||w!==0&&de.nodeType!==3||(z=D+w),de!==A||g!==0&&de.nodeType!==3||(G=D+g),de.nodeType===3&&(D+=de.nodeValue.length),(ie=de.firstChild)!==null;)te=de,de=ie;for(;;){if(de===s)break t;if(te===h&&++ee===w&&(z=D),te===A&&++ae===g&&(G=D),(ie=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ie}h=z===-1||G===-1?null:{start:z,end:G}}else h=null}h=h||{start:0,end:0}}else h=null;for(Xx={focusedElem:s,selectionRange:h},Op=!1,Fn=l;Fn!==null;)if(l=Fn,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Fn=s;else for(;Fn!==null;){switch(l=Fn,A=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)w=s[h],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,h=l,w=A.memoizedProps,A=A.memoizedState,g=h.stateNode;try{var Ne=Cl(h.type,w);s=g.getSnapshotBeforeUpdate(Ne,A),g.__reactInternalSnapshotBeforeUpdate=s}catch(Me){xt(h,h.return,Me)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,h=s.nodeType,h===9)tb(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":tb(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Fn=s;break}Fn=l.return}}function fN(s,l,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:Qa(s,h),g&4&&hf(5,h);break;case 1:if(Qa(s,h),g&4)if(s=h.stateNode,l===null)try{s.componentDidMount()}catch(D){xt(h,h.return,D)}else{var w=Cl(h.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(w,l,s.__reactInternalSnapshotBeforeUpdate)}catch(D){xt(h,h.return,D)}}g&64&&sN(h),g&512&&mf(h,h.return);break;case 3:if(Qa(s,h),g&64&&(s=h.updateQueue,s!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{JE(s,l)}catch(D){xt(h,h.return,D)}}break;case 27:l===null&&g&4&&uN(h);case 26:case 5:Qa(s,h),l===null&&g&4&&lN(h),g&512&&mf(h,h.return);break;case 12:Qa(s,h);break;case 31:Qa(s,h),g&4&&pN(s,h);break;case 13:Qa(s,h),g&4&&gN(s,h),g&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=G9.bind(null,h),fF(s,h))));break;case 22:if(g=h.memoizedState!==null||Wa,!g){l=l!==null&&l.memoizedState!==null||xn,w=Wa;var A=xn;Wa=g,(xn=l)&&!A?Xa(s,h,(h.subtreeFlags&8772)!==0):Qa(s,h),Wa=w,xn=A}break;case 30:break;default:Qa(s,h)}}function hN(s){var l=s.alternate;l!==null&&(s.alternate=null,hN(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&_c(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var zt=null,Cr=!1;function Ja(s,l,h){for(h=h.child;h!==null;)mN(s,l,h),h=h.sibling}function mN(s,l,h){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Ci,h)}catch{}switch(h.tag){case 26:xn||pa(h,l),Ja(s,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:xn||pa(h,l);var g=zt,w=Cr;ho(h.type)&&(zt=h.stateNode,Cr=!1),Ja(s,l,h),_f(h.stateNode),zt=g,Cr=w;break;case 5:xn||pa(h,l);case 6:if(g=zt,w=Cr,zt=null,Ja(s,l,h),zt=g,Cr=w,zt!==null)if(Cr)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(h.stateNode)}catch(A){xt(h,l,A)}else try{zt.removeChild(h.stateNode)}catch(A){xt(h,l,A)}break;case 18:zt!==null&&(Cr?(s=zt,sk(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),ou(s)):sk(zt,h.stateNode));break;case 4:g=zt,w=Cr,zt=h.stateNode.containerInfo,Cr=!0,Ja(s,l,h),zt=g,Cr=w;break;case 0:case 11:case 14:case 15:ao(2,h,l),xn||ao(4,h,l),Ja(s,l,h);break;case 1:xn||(pa(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"&&oN(h,l,g)),Ja(s,l,h);break;case 21:Ja(s,l,h);break;case 22:xn=(g=xn)||h.memoizedState!==null,Ja(s,l,h),xn=g;break;default:Ja(s,l,h)}}function pN(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ou(s)}catch(h){xt(l,l.return,h)}}}function gN(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ou(s)}catch(h){xt(l,l.return,h)}}function U9(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new dN),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new dN),l;default:throw Error(r(435,s.tag))}}function gp(s,l){var h=U9(s);l.forEach(function(g){if(!h.has(g)){h.add(g);var w=K9.bind(null,s,g);g.then(w,w)}})}function Nr(s,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g],A=s,D=l,z=D;e:for(;z!==null;){switch(z.tag){case 27:if(ho(z.type)){zt=z.stateNode,Cr=!1;break e}break;case 5:zt=z.stateNode,Cr=!1;break e;case 3:case 4:zt=z.stateNode.containerInfo,Cr=!0;break e}z=z.return}if(zt===null)throw Error(r(160));mN(A,D,w),zt=null,Cr=!1,A=w.alternate,A!==null&&(A.return=null),w.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)yN(l,s),l=l.sibling}var Li=null;function yN(s,l){var h=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Nr(l,s),kr(s),g&4&&(ao(3,s,s.return),hf(3,s),ao(5,s,s.return));break;case 1:Nr(l,s),kr(s),g&512&&(xn||h===null||pa(h,h.return)),g&64&&Wa&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var w=Li;if(Nr(l,s),kr(s),g&512&&(xn||h===null||pa(h,h.return)),g&4){var A=h!==null?h.memoizedState:null;if(g=s.memoizedState,h===null)if(g===null)if(s.stateNode===null){e:{g=s.type,h=s.memoizedProps,w=w.ownerDocument||w;t:switch(g){case"title":A=w.getElementsByTagName("title")[0],(!A||A[ta]||A[hn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=w.createElement(g),w.head.insertBefore(A,w.querySelector("head > title"))),Xn(A,g,h),A[hn]=s,mn(A),g=A;break e;case"link":var D=yk("link","href",w).get(g+(h.href||""));if(D){for(var z=0;z<D.length;z++)if(A=D[z],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(z,1);break t}}A=w.createElement(g),Xn(A,g,h),w.head.appendChild(A);break;case"meta":if(D=yk("meta","content",w).get(g+(h.content||""))){for(z=0;z<D.length;z++)if(A=D[z],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(z,1);break t}}A=w.createElement(g),Xn(A,g,h),w.head.appendChild(A);break;default:throw Error(r(468,g))}A[hn]=s,mn(A),g=A}s.stateNode=g}else vk(w,s.type,s.stateNode);else s.stateNode=gk(w,g,s.memoizedProps);else A!==g?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,g===null?vk(w,s.type,s.stateNode):gk(w,g,s.memoizedProps)):g===null&&s.stateNode!==null&&Cx(s,s.memoizedProps,h.memoizedProps)}break;case 27:Nr(l,s),kr(s),g&512&&(xn||h===null||pa(h,h.return)),h!==null&&g&4&&Cx(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Nr(l,s),kr(s),g&512&&(xn||h===null||pa(h,h.return)),s.flags&32){w=s.stateNode;try{Er(w,"")}catch(Ne){xt(s,s.return,Ne)}}g&4&&s.stateNode!=null&&(w=s.memoizedProps,Cx(s,w,h!==null?h.memoizedProps:w)),g&1024&&(Ix=!0);break;case 6:if(Nr(l,s),kr(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,h=s.stateNode;try{h.nodeValue=g}catch(Ne){xt(s,s.return,Ne)}}break;case 3:if(Dp=null,w=Li,Li=Ip(l.containerInfo),Nr(l,s),Li=w,kr(s),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ou(l.containerInfo)}catch(Ne){xt(s,s.return,Ne)}Ix&&(Ix=!1,vN(s));break;case 4:g=Li,Li=Ip(s.stateNode.containerInfo),Nr(l,s),kr(s),Li=g;break;case 12:Nr(l,s),kr(s);break;case 31:Nr(l,s),kr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,gp(s,g)));break;case 13:Nr(l,s),kr(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(vp=yr()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,gp(s,g)));break;case 22:w=s.memoizedState!==null;var G=h!==null&&h.memoizedState!==null,ee=Wa,ae=xn;if(Wa=ee||w,xn=ae||G,Nr(l,s),xn=ae,Wa=ee,kr(s),g&8192)e:for(l=s.stateNode,l._visibility=w?l._visibility&-2:l._visibility|1,w&&(h===null||G||Wa||xn||Nl(s)),h=null,l=s;;){if(l.tag===5||l.tag===26){if(h===null){G=h=l;try{if(A=G.stateNode,w)D=A.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{z=G.stateNode;var de=G.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;z.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){xt(G,G.return,Ne)}}}else if(l.tag===6){if(h===null){G=l;try{G.stateNode.nodeValue=w?"":G.memoizedProps}catch(Ne){xt(G,G.return,Ne)}}}else if(l.tag===18){if(h===null){G=l;try{var ie=G.stateNode;w?ok(ie,!0):ok(G.stateNode,!1)}catch(Ne){xt(G,G.return,Ne)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,gp(s,h))));break;case 19:Nr(l,s),kr(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,gp(s,g)));break;case 30:break;case 21:break;default:Nr(l,s),kr(s)}}function kr(s){var l=s.flags;if(l&2){try{for(var h,g=s.return;g!==null;){if(cN(g)){h=g;break}g=g.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var w=h.stateNode,A=Nx(s);pp(s,A,w);break;case 5:var D=h.stateNode;h.flags&32&&(Er(D,""),h.flags&=-33);var z=Nx(s);pp(s,z,D);break;case 3:case 4:var G=h.stateNode.containerInfo,ee=Nx(s);kx(s,ee,G);break;default:throw Error(r(161))}}catch(ae){xt(s,s.return,ae)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function vN(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;vN(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Qa(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)fN(s,l.alternate,l),l=l.sibling}function Nl(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ao(4,l,l.return),Nl(l);break;case 1:pa(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&oN(l,l.return,h),Nl(l);break;case 27:_f(l.stateNode);case 26:case 5:pa(l,l.return),Nl(l);break;case 22:l.memoizedState===null&&Nl(l);break;case 30:Nl(l);break;default:Nl(l)}s=s.sibling}}function Xa(s,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,w=s,A=l,D=A.flags;switch(A.tag){case 0:case 11:case 15:Xa(w,A,h),hf(4,A);break;case 1:if(Xa(w,A,h),g=A,w=g.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(ee){xt(g,g.return,ee)}if(g=A,w=g.updateQueue,w!==null){var z=g.stateNode;try{var G=w.shared.hiddenCallbacks;if(G!==null)for(w.shared.hiddenCallbacks=null,w=0;w<G.length;w++)WE(G[w],z)}catch(ee){xt(g,g.return,ee)}}h&&D&64&&sN(A),mf(A,A.return);break;case 27:uN(A);case 26:case 5:Xa(w,A,h),h&&g===null&&D&4&&lN(A),mf(A,A.return);break;case 12:Xa(w,A,h);break;case 31:Xa(w,A,h),h&&D&4&&pN(w,A);break;case 13:Xa(w,A,h),h&&D&4&&gN(w,A);break;case 22:A.memoizedState===null&&Xa(w,A,h),mf(A,A.return);break;case 30:break;default:Xa(w,A,h)}l=l.sibling}}function Px(s,l){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&Zd(h))}function Dx(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zd(s))}function Ui(s,l,h,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)xN(s,l,h,g),l=l.sibling}function xN(s,l,h,g){var w=l.flags;switch(l.tag){case 0:case 11:case 15:Ui(s,l,h,g),w&2048&&hf(9,l);break;case 1:Ui(s,l,h,g);break;case 3:Ui(s,l,h,g),w&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Zd(s)));break;case 12:if(w&2048){Ui(s,l,h,g),s=l.stateNode;try{var A=l.memoizedProps,D=A.id,z=A.onPostCommit;typeof z=="function"&&z(D,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(G){xt(l,l.return,G)}}else Ui(s,l,h,g);break;case 31:Ui(s,l,h,g);break;case 13:Ui(s,l,h,g);break;case 23:break;case 22:A=l.stateNode,D=l.alternate,l.memoizedState!==null?A._visibility&2?Ui(s,l,h,g):pf(s,l):A._visibility&2?Ui(s,l,h,g):(A._visibility|=2,Jc(s,l,h,g,(l.subtreeFlags&10256)!==0||!1)),w&2048&&Px(D,l);break;case 24:Ui(s,l,h,g),w&2048&&Dx(l.alternate,l);break;default:Ui(s,l,h,g)}}function Jc(s,l,h,g,w){for(w=w&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var A=s,D=l,z=h,G=g,ee=D.flags;switch(D.tag){case 0:case 11:case 15:Jc(A,D,z,G,w),hf(8,D);break;case 23:break;case 22:var ae=D.stateNode;D.memoizedState!==null?ae._visibility&2?Jc(A,D,z,G,w):pf(A,D):(ae._visibility|=2,Jc(A,D,z,G,w)),w&&ee&2048&&Px(D.alternate,D);break;case 24:Jc(A,D,z,G,w),w&&ee&2048&&Dx(D.alternate,D);break;default:Jc(A,D,z,G,w)}l=l.sibling}}function pf(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=s,g=l,w=g.flags;switch(g.tag){case 22:pf(h,g),w&2048&&Px(g.alternate,g);break;case 24:pf(h,g),w&2048&&Dx(g.alternate,g);break;default:pf(h,g)}l=l.sibling}}var gf=8192;function Qc(s,l,h){if(s.subtreeFlags&gf)for(s=s.child;s!==null;)bN(s,l,h),s=s.sibling}function bN(s,l,h){switch(s.tag){case 26:Qc(s,l,h),s.flags&gf&&s.memoizedState!==null&&AF(h,Li,s.memoizedState,s.memoizedProps);break;case 5:Qc(s,l,h);break;case 3:case 4:var g=Li;Li=Ip(s.stateNode.containerInfo),Qc(s,l,h),Li=g;break;case 22:s.memoizedState===null&&(g=s.alternate,g!==null&&g.memoizedState!==null?(g=gf,gf=16777216,Qc(s,l,h),gf=g):Qc(s,l,h));break;default:Qc(s,l,h)}}function wN(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function yf(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];Fn=g,_N(g,s)}wN(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)SN(s),s=s.sibling}function SN(s){switch(s.tag){case 0:case 11:case 15:yf(s),s.flags&2048&&ao(9,s,s.return);break;case 3:yf(s);break;case 12:yf(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,yp(s)):yf(s);break;default:yf(s)}}function yp(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];Fn=g,_N(g,s)}wN(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ao(8,l,l.return),yp(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,yp(l));break;default:yp(l)}s=s.sibling}}function _N(s,l){for(;Fn!==null;){var h=Fn;switch(h.tag){case 0:case 11:case 15:ao(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Zd(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,Fn=g;else e:for(h=s;Fn!==null;){g=Fn;var w=g.sibling,A=g.return;if(hN(g),g===h){Fn=null;break e}if(w!==null){w.return=A,Fn=w;break e}Fn=A}}}var V9={getCacheForType:function(s){var l=Jn(gn),h=l.data.get(s);return h===void 0&&(h=s(),l.data.set(s,h)),h},cacheSignal:function(){return Jn(gn).controller.signal}},F9=typeof WeakMap=="function"?WeakMap:Map,gt=0,Et=null,et=null,rt=0,vt=0,qr=null,so=!1,Xc=!1,Rx=!1,Za=0,tn=0,oo=0,kl=0,Mx=0,Hr=0,Zc=0,vf=null,Ir=null,jx=!1,vp=0,AN=0,xp=1/0,bp=null,lo=null,kn=0,co=null,eu=null,es=0,Ox=0,Lx=null,TN=null,xf=0,Ux=null;function $r(){return(gt&2)!==0&&rt!==0?rt&-rt:Q.T!==null?Hx():wm()}function EN(){if(Hr===0)if((rt&536870912)===0||st){var s=nl;nl<<=1,(nl&3932160)===0&&(nl=262144),Hr=s}else Hr=536870912;return s=Br.current,s!==null&&(s.flags|=32),Hr}function Pr(s,l,h){(s===Et&&(vt===2||vt===9)||s.cancelPendingCommit!==null)&&(tu(s,0),uo(s,rt,Hr,!1)),rl(s,h),((gt&2)===0||s!==Et)&&(s===Et&&((gt&2)===0&&(kl|=h),tn===4&&uo(s,rt,Hr,!1)),ga(s))}function CN(s,l,h){if((gt&6)!==0)throw Error(r(327));var g=!h&&(l&127)===0&&(l&s.expiredLanes)===0||Ni(s,l),w=g?q9(s,l):Fx(s,l,!0),A=g;do{if(w===0){Xc&&!g&&uo(s,l,0,!1);break}else{if(h=s.current.alternate,A&&!B9(h)){w=Fx(s,l,!1),A=!1;continue}if(w===2){if(A=l,s.errorRecoveryDisabledLanes&A)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var z=s;w=vf;var G=z.current.memoizedState.isDehydrated;if(G&&(tu(z,D).flags|=256),D=Fx(z,D,!1),D!==2){if(Rx&&!G){z.errorRecoveryDisabledLanes|=A,kl|=A,w=4;break e}A=Ir,Ir=w,A!==null&&(Ir===null?Ir=A:Ir.push.apply(Ir,A))}w=D}if(A=!1,w!==2)continue}}if(w===1){tu(s,0),uo(s,l,0,!0);break}e:{switch(g=s,A=w,A){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:uo(g,l,Hr,!so);break e;case 2:Ir=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(w=vp+300-yr(),10<w)){if(uo(g,l,Hr,!so),Xi(g,0,!0)!==0)break e;es=l,g.timeoutHandle=ik(NN.bind(null,g,h,Ir,bp,jx,l,Hr,kl,Zc,so,A,"Throttled",-0,0),w);break e}NN(g,h,Ir,bp,jx,l,Hr,kl,Zc,so,A,null,-0,0)}}break}while(!0);ga(s)}function NN(s,l,h,g,w,A,D,z,G,ee,ae,de,te,ie){if(s.timeoutHandle=-1,de=l.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},bN(l,A,de);var Ne=(A&62914560)===A?vp-yr():(A&4194048)===A?AN-yr():0;if(Ne=TF(de,Ne),Ne!==null){es=A,s.cancelPendingCommit=Ne(ON.bind(null,s,l,A,h,g,w,D,z,G,ae,de,null,te,ie)),uo(s,A,D,!ee);return}}ON(s,l,A,h,g,w,D,z,G)}function B9(s){for(var l=s;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var w=h[g],A=w.getSnapshot;w=w.value;try{if(!Vr(A(),w))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function uo(s,l,h,g){l&=~Mx,l&=~kl,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var w=l;0<w;){var A=31-rn(w),D=1<<A;g[A]=-1,w&=~D}h!==0&&il(s,h,l)}function wp(){return(gt&6)===0?(bf(0),!1):!0}function Vx(){if(et!==null){if(vt===0)var s=et.return;else s=et,qa=bl=null,tx(s),$c=null,tf=0,s=et;for(;s!==null;)aN(s.alternate,s),s=s.return;et=null}}function tu(s,l){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,oF(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),es=0,Vx(),Et=s,et=h=Ba(s.current,null),rt=l,vt=0,qr=null,so=!1,Xc=Ni(s,l),Rx=!1,Zc=Hr=Mx=kl=oo=tn=0,Ir=vf=null,jx=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var w=31-rn(g),A=1<<w;l|=s[w],g&=~A}return Za=l,zm(),h}function kN(s,l){Je=null,Q.H=uf,l===Hc||l===Jm?(l=$E(),vt=3):l===q0?(l=$E(),vt=4):vt=l===yx?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,qr=l,et===null&&(tn=1,up(s,li(l,s.current)))}function IN(){var s=Br.current;return s===null?!0:(rt&4194048)===rt?fi===null:(rt&62914560)===rt||(rt&536870912)!==0?s===fi:!1}function PN(){var s=Q.H;return Q.H=uf,s===null?uf:s}function DN(){var s=Q.A;return Q.A=V9,s}function Sp(){tn=4,so||(rt&4194048)!==rt&&Br.current!==null||(Xc=!0),(oo&134217727)===0&&(kl&134217727)===0||Et===null||uo(Et,rt,Hr,!1)}function Fx(s,l,h){var g=gt;gt|=2;var w=PN(),A=DN();(Et!==s||rt!==l)&&(bp=null,tu(s,l)),l=!1;var D=tn;e:do try{if(vt!==0&&et!==null){var z=et,G=qr;switch(vt){case 8:Vx(),D=6;break e;case 3:case 2:case 9:case 6:Br.current===null&&(l=!0);var ee=vt;if(vt=0,qr=null,nu(s,z,G,ee),h&&Xc){D=0;break e}break;default:ee=vt,vt=0,qr=null,nu(s,z,G,ee)}}z9(),D=tn;break}catch(ae){kN(s,ae)}while(!0);return l&&s.shellSuspendCounter++,qa=bl=null,gt=g,Q.H=w,Q.A=A,et===null&&(Et=null,rt=0,zm()),D}function z9(){for(;et!==null;)RN(et)}function q9(s,l){var h=gt;gt|=2;var g=PN(),w=DN();Et!==s||rt!==l?(bp=null,xp=yr()+500,tu(s,l)):Xc=Ni(s,l);e:do try{if(vt!==0&&et!==null){l=et;var A=qr;t:switch(vt){case 1:vt=0,qr=null,nu(s,l,A,1);break;case 2:case 9:if(qE(A)){vt=0,qr=null,MN(l);break}l=function(){vt!==2&&vt!==9||Et!==s||(vt=7),ga(s)},A.then(l,l);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:qE(A)?(vt=0,qr=null,MN(l)):(vt=0,qr=null,nu(s,l,A,7));break;case 5:var D=null;switch(et.tag){case 26:D=et.memoizedState;case 5:case 27:var z=et;if(D?xk(D):z.stateNode.complete){vt=0,qr=null;var G=z.sibling;if(G!==null)et=G;else{var ee=z.return;ee!==null?(et=ee,_p(ee)):et=null}break t}}vt=0,qr=null,nu(s,l,A,5);break;case 6:vt=0,qr=null,nu(s,l,A,6);break;case 8:Vx(),tn=6;break e;default:throw Error(r(462))}}H9();break}catch(ae){kN(s,ae)}while(!0);return qa=bl=null,Q.H=g,Q.A=w,gt=h,et!==null?0:(Et=null,rt=0,zm(),tn)}function H9(){for(;et!==null&&!g0();)RN(et)}function RN(s){var l=rN(s.alternate,s,Za);s.memoizedProps=s.pendingProps,l===null?_p(s):et=l}function MN(s){var l=s,h=l.alternate;switch(l.tag){case 15:case 0:l=QC(h,l,l.pendingProps,l.type,void 0,rt);break;case 11:l=QC(h,l,l.pendingProps,l.type.render,l.ref,rt);break;case 5:tx(l);default:aN(h,l),l=et=DE(l,Za),l=rN(h,l,Za)}s.memoizedProps=s.pendingProps,l===null?_p(s):et=l}function nu(s,l,h,g){qa=bl=null,tx(l),$c=null,tf=0;var w=l.return;try{if(D9(s,w,l,h,rt)){tn=1,up(s,li(h,s.current)),et=null;return}}catch(A){if(w!==null)throw et=w,A;tn=1,up(s,li(h,s.current)),et=null;return}l.flags&32768?(st||g===1?s=!0:Xc||(rt&536870912)!==0?s=!1:(so=s=!0,(g===2||g===9||g===3||g===6)&&(g=Br.current,g!==null&&g.tag===13&&(g.flags|=16384))),jN(l,s)):_p(l)}function _p(s){var l=s;do{if((l.flags&32768)!==0){jN(l,so);return}s=l.return;var h=j9(l.alternate,l,Za);if(h!==null){et=h;return}if(l=l.sibling,l!==null){et=l;return}et=l=s}while(l!==null);tn===0&&(tn=5)}function jN(s,l){do{var h=O9(s.alternate,s);if(h!==null){h.flags&=32767,et=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(s=s.sibling,s!==null)){et=s;return}et=s=h}while(s!==null);tn=6,et=null}function ON(s,l,h,g,w,A,D,z,G){s.cancelPendingCommit=null;do Ap();while(kn!==0);if((gt&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(A=l.lanes|l.childLanes,A|=N0,x0(s,h,A,D,z,G),s===Et&&(et=Et=null,rt=0),eu=l,co=s,es=h,Ox=A,Lx=w,TN=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Y9(Fs,function(){return BN(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=Q.T,Q.T=null,w=ue.p,ue.p=2,D=gt,gt|=4;try{L9(s,l,h)}finally{gt=D,ue.p=w,Q.T=g}}kn=1,LN(),UN(),VN()}}function LN(){if(kn===1){kn=0;var s=co,l=eu,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null;var g=ue.p;ue.p=2;var w=gt;gt|=4;try{yN(l,s);var A=Xx,D=_E(s.containerInfo),z=A.focusedElem,G=A.selectionRange;if(D!==z&&z&&z.ownerDocument&&SE(z.ownerDocument.documentElement,z)){if(G!==null&&_0(z)){var ee=G.start,ae=G.end;if(ae===void 0&&(ae=ee),"selectionStart"in z)z.selectionStart=ee,z.selectionEnd=Math.min(ae,z.value.length);else{var de=z.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ne=z.textContent.length,Me=Math.min(G.start,Ne),At=G.end===void 0?Me:Math.min(G.end,Ne);!ie.extend&&Me>At&&(D=At,At=Me,Me=D);var W=wE(z,Me),Y=wE(z,At);if(W&&Y&&(ie.rangeCount!==1||ie.anchorNode!==W.node||ie.anchorOffset!==W.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var Z=de.createRange();Z.setStart(W.node,W.offset),ie.removeAllRanges(),Me>At?(ie.addRange(Z),ie.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),ie.addRange(Z))}}}}for(de=[],ie=z;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<de.length;z++){var le=de[z];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Op=!!Qx,Xx=Qx=null}finally{gt=w,ue.p=g,Q.T=h}}s.current=l,kn=2}}function UN(){if(kn===2){kn=0;var s=co,l=eu,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=Q.T,Q.T=null;var g=ue.p;ue.p=2;var w=gt;gt|=4;try{fN(s,l.alternate,l)}finally{gt=w,ue.p=g,Q.T=h}}kn=3}}function VN(){if(kn===4||kn===3){kn=0,mm();var s=co,l=eu,h=es,g=TN;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?kn=5:(kn=0,eu=co=null,FN(s,s.pendingLanes));var w=s.pendingLanes;if(w===0&&(lo=null),La(h),l=l.stateNode,Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Ci,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=Q.T,w=ue.p,ue.p=2,Q.T=null;try{for(var A=s.onRecoverableError,D=0;D<g.length;D++){var z=g[D];A(z.value,{componentStack:z.stack})}}finally{Q.T=l,ue.p=w}}(es&3)!==0&&Ap(),ga(s),w=s.pendingLanes,(h&261930)!==0&&(w&42)!==0?s===Ux?xf++:(xf=0,Ux=s):xf=0,bf(0)}}function FN(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Zd(l)))}function Ap(){return LN(),UN(),VN(),BN()}function BN(){if(kn!==5)return!1;var s=co,l=Ox;Ox=0;var h=La(es),g=Q.T,w=ue.p;try{ue.p=32>h?32:h,Q.T=null,h=Lx,Lx=null;var A=co,D=es;if(kn=0,eu=co=null,es=0,(gt&6)!==0)throw Error(r(331));var z=gt;if(gt|=4,SN(A.current),xN(A,A.current,D,h),gt=z,bf(0,!1),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Ci,A)}catch{}return!0}finally{ue.p=w,Q.T=g,FN(s,l)}}function zN(s,l,h){l=li(h,l),l=gx(s.stateNode,l,2),s=no(s,l,2),s!==null&&(rl(s,2),ga(s))}function xt(s,l,h){if(s.tag===3)zN(s,s,h);else for(;l!==null;){if(l.tag===3){zN(l,s,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(lo===null||!lo.has(g))){s=li(h,s),h=qC(2),g=no(l,h,2),g!==null&&(HC(h,g,l,s),rl(g,2),ga(g));break}}l=l.return}}function Bx(s,l,h){var g=s.pingCache;if(g===null){g=s.pingCache=new F9;var w=new Set;g.set(l,w)}else w=g.get(l),w===void 0&&(w=new Set,g.set(l,w));w.has(h)||(Rx=!0,w.add(h),s=$9.bind(null,s,l,h),l.then(s,s))}function $9(s,l,h){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Et===s&&(rt&h)===h&&(tn===4||tn===3&&(rt&62914560)===rt&&300>yr()-vp?(gt&2)===0&&tu(s,0):Mx|=h,Zc===rt&&(Zc=0)),ga(s)}function qN(s,l){l===0&&(l=bm()),s=yl(s,l),s!==null&&(rl(s,l),ga(s))}function G9(s){var l=s.memoizedState,h=0;l!==null&&(h=l.retryLane),qN(s,h)}function K9(s,l){var h=0;switch(s.tag){case 31:case 13:var g=s.stateNode,w=s.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),qN(s,h)}function Y9(s,l){return Nn(s,l)}var Tp=null,ru=null,zx=!1,Ep=!1,qx=!1,fo=0;function ga(s){s!==ru&&s.next===null&&(ru===null?Tp=ru=s:ru=ru.next=s),Ep=!0,zx||(zx=!0,J9())}function bf(s,l){if(!qx&&Ep){qx=!0;do for(var h=!1,g=Tp;g!==null;){if(s!==0){var w=g.pendingLanes;if(w===0)var A=0;else{var D=g.suspendedLanes,z=g.pingedLanes;A=(1<<31-rn(42|s)+1)-1,A&=w&~(D&~z),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,KN(g,A))}else A=rt,A=Xi(g,g===Et?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||Ni(g,A)||(h=!0,KN(g,A));g=g.next}while(h);qx=!1}}function W9(){HN()}function HN(){Ep=zx=!1;var s=0;fo!==0&&sF()&&(s=fo);for(var l=yr(),h=null,g=Tp;g!==null;){var w=g.next,A=$N(g,l);A===0?(g.next=null,h===null?Tp=w:h.next=w,w===null&&(ru=h)):(h=g,(s!==0||(A&3)!==0)&&(Ep=!0)),g=w}kn!==0&&kn!==5||bf(s),fo!==0&&(fo=0)}function $N(s,l){for(var h=s.suspendedLanes,g=s.pingedLanes,w=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var D=31-rn(A),z=1<<D,G=w[D];G===-1?((z&h)===0||(z&g)!==0)&&(w[D]=v0(z,l)):G<=l&&(s.expiredLanes|=z),A&=~z}if(l=Et,h=rt,h=Xi(s,s===l?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,h===0||s===l&&(vt===2||vt===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&Vs(g),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||Ni(s,h)){if(l=h&-h,l===s.callbackPriority)return l;switch(g!==null&&Vs(g),La(h)){case 2:case 8:h=kd;break;case 32:h=Fs;break;case 268435456:h=pm;break;default:h=Fs}return g=GN.bind(null,s),h=Nn(h,g),s.callbackPriority=l,s.callbackNode=h,l}return g!==null&&g!==null&&Vs(g),s.callbackPriority=2,s.callbackNode=null,2}function GN(s,l){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Ap()&&s.callbackNode!==h)return null;var g=rt;return g=Xi(s,s===Et?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(CN(s,g,l),$N(s,yr()),s.callbackNode!=null&&s.callbackNode===h?GN.bind(null,s):null)}function KN(s,l){if(Ap())return null;CN(s,l,!0)}function J9(){lF(function(){(gt&6)!==0?Nn(Nd,W9):HN()})}function Hx(){if(fo===0){var s=zc;s===0&&(s=Ji,Ji<<=1,(Ji&261888)===0&&(Ji=256)),fo=s}return fo}function YN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Cc(""+s)}function WN(s,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,s.id&&h.setAttribute("form",s.id),l.parentNode.insertBefore(h,l),s=new FormData(s),h.parentNode.removeChild(h),s}function Q9(s,l,h,g,w){if(l==="submit"&&h&&h.stateNode===w){var A=YN((w[Un]||null).action),D=g.submitter;D&&(l=(l=D[Un]||null)?YN(l.formAction):D.getAttribute("formAction"),l!==null&&(A=l,D=null));var z=new ca("action","action",null,g,w);s.push({event:z,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(fo!==0){var G=D?WN(w,D):new FormData(w);ux(h,{pending:!0,data:G,method:w.method,action:A},null,G)}}else typeof A=="function"&&(z.preventDefault(),G=D?WN(w,D):new FormData(w),ux(h,{pending:!0,data:G,method:w.method,action:A},A,G))},currentTarget:w}]})}}for(var $x=0;$x<C0.length;$x++){var Gx=C0[$x],X9=Gx.toLowerCase(),Z9=Gx[0].toUpperCase()+Gx.slice(1);Oi(X9,"on"+Z9)}Oi(EE,"onAnimationEnd"),Oi(CE,"onAnimationIteration"),Oi(NE,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(p9,"onTransitionRun"),Oi(g9,"onTransitionStart"),Oi(y9,"onTransitionCancel"),Oi(kE,"onTransitionEnd"),aa("onMouseEnter",["mouseout","mouseover"]),aa("onMouseLeave",["mouseout","mouseover"]),aa("onPointerEnter",["pointerout","pointerover"]),aa("onPointerLeave",["pointerout","pointerover"]),ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wf));function JN(s,l){l=(l&4)!==0;for(var h=0;h<s.length;h++){var g=s[h],w=g.event;g=g.listeners;e:{var A=void 0;if(l)for(var D=g.length-1;0<=D;D--){var z=g[D],G=z.instance,ee=z.currentTarget;if(z=z.listener,G!==A&&w.isPropagationStopped())break e;A=z,w.currentTarget=ee;try{A(w)}catch(ae){Bm(ae)}w.currentTarget=null,A=G}else for(D=0;D<g.length;D++){if(z=g[D],G=z.instance,ee=z.currentTarget,z=z.listener,G!==A&&w.isPropagationStopped())break e;A=z,w.currentTarget=ee;try{A(w)}catch(ae){Bm(ae)}w.currentTarget=null,A=G}}}}function tt(s,l){var h=l[Sc];h===void 0&&(h=l[Sc]=new Set);var g=s+"__bubble";h.has(g)||(QN(l,s,2,!1),h.add(g))}function Kx(s,l,h){var g=0;l&&(g|=4),QN(h,s,g,l)}var Cp="_reactListening"+Math.random().toString(36).slice(2);function Yx(s){if(!s[Cp]){s[Cp]=!0,Dd.forEach(function(h){h!=="selectionchange"&&(eF.has(h)||Kx(h,!1,s),Kx(h,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Cp]||(l[Cp]=!0,Kx("selectionchange",!1,l))}}function QN(s,l,h,g){switch(Ek(l)){case 2:var w=NF;break;case 8:w=kF;break;default:w=cb}h=w.bind(null,l,h,s),w=void 0,!cl||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),g?w!==void 0?s.addEventListener(l,h,{capture:!0,passive:w}):s.addEventListener(l,h,!0):w!==void 0?s.addEventListener(l,h,{passive:w}):s.addEventListener(l,h,!1)}function Wx(s,l,h,g,w){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var z=g.stateNode.containerInfo;if(z===w)break;if(D===4)for(D=g.return;D!==null;){var G=D.tag;if((G===3||G===4)&&D.stateNode.containerInfo===w)return;D=D.return}for(;z!==null;){if(D=na(z),D===null)return;if(G=D.tag,G===5||G===6||G===26||G===27){g=A=D;continue e}z=z.parentNode}}g=g.return}Gs(function(){var ee=A,ae=ii(h),de=[];e:{var te=IE.get(s);if(te!==void 0){var ie=ca,Ne=s;switch(s){case"keypress":if(dl(h)===0)break e;case"keydown":case"keyup":ie=Um;break;case"focusin":Ne="focus",ie=hl;break;case"focusout":Ne="blur",ie=hl;break;case"beforeblur":case"afterblur":ie=hl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=$d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=k;break;case EE:case CE:case NE:ie=Pm;break;case kE:ie=$;break;case"scroll":case"scrollend":ie=Hd;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=Dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Fa;break;case"toggle":case"beforetoggle":ie=We}var Me=(l&4)!==0,At=!Me&&(s==="scroll"||s==="scrollend"),W=Me?te!==null?te+"Capture":null:te;Me=[];for(var Y=ee,Z;Y!==null;){var le=Y;if(Z=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Z===null||W===null||(le=Di(Y,W),le!=null&&Me.push(Sf(Y,le,Z))),At)break;Y=Y.return}0<Me.length&&(te=new ie(te,Ne,null,h,ae),de.push({event:te,listeners:Me}))}}if((l&7)===0){e:{if(te=s==="mouseover"||s==="pointerover",ie=s==="mouseout"||s==="pointerout",te&&h!==Bd&&(Ne=h.relatedTarget||h.fromElement)&&(na(Ne)||Ne[ea]))break e;if((ie||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ne=h.relatedTarget||h.toElement,ie=ee,Ne=Ne?na(Ne):null,Ne!==null&&(At=a(Ne),Me=Ne.tag,Ne!==At||Me!==5&&Me!==27&&Me!==6)&&(Ne=null)):(ie=null,Ne=ee),ie!==Ne)){if(Me=$d,le="onMouseLeave",W="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Me=Fa,le="onPointerLeave",W="onPointerEnter",Y="pointer"),At=ie==null?te:Lr(ie),Z=Ne==null?te:Lr(Ne),te=new Me(le,Y+"leave",ie,h,ae),te.target=At,te.relatedTarget=Z,le=null,na(ae)===ee&&(Me=new Me(W,Y+"enter",Ne,h,ae),Me.target=Z,Me.relatedTarget=At,le=Me),At=le,ie&&Ne)t:{for(Me=tF,W=ie,Y=Ne,Z=0,le=W;le;le=Me(le))Z++;le=0;for(var Re=Y;Re;Re=Me(Re))le++;for(;0<Z-le;)W=Me(W),Z--;for(;0<le-Z;)Y=Me(Y),le--;for(;Z--;){if(W===Y||Y!==null&&W===Y.alternate){Me=W;break t}W=Me(W),Y=Me(Y)}Me=null}else Me=null;ie!==null&&XN(de,te,ie,Me,!1),Ne!==null&&At!==null&&XN(de,At,Ne,Me,!0)}}e:{if(te=ee?Lr(ee):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var dt=pE;else if(hE(te))if(gE)dt=f9;else{dt=u9;var Pe=c9}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Ec(ee.elementType)&&(dt=pE):dt=d9;if(dt&&(dt=dt(s,ee))){mE(de,dt,h,ae);break e}Pe&&Pe(s,te,ee),s==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Ud(te,"number",te.value)}switch(Pe=ee?Lr(ee):window,s){case"focusin":(hE(Pe)||Pe.contentEditable==="true")&&(Mc=Pe,A0=ee,Jd=null);break;case"focusout":Jd=A0=Mc=null;break;case"mousedown":T0=!0;break;case"contextmenu":case"mouseup":case"dragend":T0=!1,AE(de,h,ae);break;case"selectionchange":if(m9)break;case"keydown":case"keyup":AE(de,h,ae)}var Qe;if(pt)e:{switch(s){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Rc?ml(s,h)&&(it="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(it="onCompositionStart");it&&(fa&&h.locale!=="ko"&&(Rc||it!=="onCompositionStart"?it==="onCompositionEnd"&&Rc&&(Qe=qd()):(la=ae,zd="value"in la?la.value:la.textContent,Rc=!0)),Pe=Np(ee,it),0<Pe.length&&(it=new da(it,s,null,h,ae),de.push({event:it,listeners:Pe}),Qe?it.data=Qe:(Qe=Dc(h),Qe!==null&&(it.data=Qe)))),(Qe=si?a9(s,h):s9(s,h))&&(it=Np(ee,"onBeforeInput"),0<it.length&&(Pe=new da("onBeforeInput","beforeinput",null,h,ae),de.push({event:Pe,listeners:it}),Pe.data=Qe)),Q9(de,s,ee,h,ae)}JN(de,l)})}function Sf(s,l,h){return{instance:s,listener:l,currentTarget:h}}function Np(s,l){for(var h=l+"Capture",g=[];s!==null;){var w=s,A=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||A===null||(w=Di(s,h),w!=null&&g.unshift(Sf(s,w,A)),w=Di(s,l),w!=null&&g.push(Sf(s,w,A))),s.tag===3)return g;s=s.return}return[]}function tF(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function XN(s,l,h,g,w){for(var A=l._reactName,D=[];h!==null&&h!==g;){var z=h,G=z.alternate,ee=z.stateNode;if(z=z.tag,G!==null&&G===g)break;z!==5&&z!==26&&z!==27||ee===null||(G=ee,w?(ee=Di(h,A),ee!=null&&D.unshift(Sf(h,ee,G))):w||(ee=Di(h,A),ee!=null&&D.push(Sf(h,ee,G)))),h=h.return}D.length!==0&&s.push({event:l,listeners:D})}var nF=/\r\n?/g,rF=/\u0000|\uFFFD/g;function ZN(s){return(typeof s=="string"?s:""+s).replace(nF,`
`).replace(rF,"")}function ek(s,l){return l=ZN(l),ZN(s)===l}function _t(s,l,h,g,w,A){switch(h){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Er(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Er(s,""+g);break;case"className":Ur(s,"class",g);break;case"tabIndex":Ur(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ur(s,h,g);break;case"style":Fd(s,g,A);break;case"data":if(l!=="object"){Ur(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||h!=="href")){s.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(h);break}g=Cc(""+g),s.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(l!=="input"&&_t(s,l,"name",w.name,w,null),_t(s,l,"formEncType",w.formEncType,w,null),_t(s,l,"formMethod",w.formMethod,w,null),_t(s,l,"formTarget",w.formTarget,w,null)):(_t(s,l,"encType",w.encType,w,null),_t(s,l,"method",w.method,w,null),_t(s,l,"target",w.target,w,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(h);break}g=Cc(""+g),s.setAttribute(h,g);break;case"onClick":g!=null&&(s.onclick=Pi);break;case"onScroll":g!=null&&tt("scroll",s);break;case"onScrollEnd":g!=null&&tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}h=Cc(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(h,""+g):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":g===!0?s.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(h,g):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(h,g):s.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(h):s.setAttribute(h,g);break;case"popover":tt("beforetoggle",s),tt("toggle",s),Ac(s,"popover",g);break;case"xlinkActuate":pn(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":pn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":pn(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":pn(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":pn(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":pn(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":pn(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":pn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":pn(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ac(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Nm.get(h)||h,Ac(s,h,g))}}function Jx(s,l,h,g,w,A){switch(h){case"style":Fd(s,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(h=g.__html,h!=null){if(w.children!=null)throw Error(r(60));s.innerHTML=h}}break;case"children":typeof g=="string"?Er(s,g):(typeof g=="number"||typeof g=="bigint")&&Er(s,""+g);break;case"onScroll":g!=null&&tt("scroll",s);break;case"onScrollEnd":g!=null&&tt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(w=h.endsWith("Capture"),l=h.slice(2,w?h.length-7:void 0),A=s[Un]||null,A=A!=null?A[h]:null,typeof A=="function"&&s.removeEventListener(l,A,w),typeof g=="function")){typeof A!="function"&&A!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(l,g,w);break e}h in s?s[h]=g:g===!0?s.setAttribute(h,""):Ac(s,h,g)}}}function Xn(s,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",s),tt("load",s);var g=!1,w=!1,A;for(A in h)if(h.hasOwnProperty(A)){var D=h[A];if(D!=null)switch(A){case"src":g=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_t(s,l,A,D,h,null)}}w&&_t(s,l,"srcSet",h.srcSet,h,null),g&&_t(s,l,"src",h.src,h,null);return;case"input":tt("invalid",s);var z=A=D=w=null,G=null,ee=null;for(g in h)if(h.hasOwnProperty(g)){var ae=h[g];if(ae!=null)switch(g){case"name":w=ae;break;case"type":D=ae;break;case"checked":G=ae;break;case"defaultChecked":ee=ae;break;case"value":A=ae;break;case"defaultValue":z=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,l));break;default:_t(s,l,g,ae,h,null)}}Tm(s,A,z,G,ee,D,w,!1);return;case"select":tt("invalid",s),g=D=A=null;for(w in h)if(h.hasOwnProperty(w)&&(z=h[w],z!=null))switch(w){case"value":A=z;break;case"defaultValue":D=z;break;case"multiple":g=z;default:_t(s,l,w,z,h,null)}l=A,h=D,s.multiple=!!g,l!=null?zs(s,!!g,l,!1):h!=null&&zs(s,!!g,h,!0);return;case"textarea":tt("invalid",s),A=w=g=null;for(D in h)if(h.hasOwnProperty(D)&&(z=h[D],z!=null))switch(D){case"value":g=z;break;case"defaultValue":w=z;break;case"children":A=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:_t(s,l,D,z,h,null)}qs(s,g,w,A);return;case"option":for(G in h)if(h.hasOwnProperty(G)&&(g=h[G],g!=null))switch(G){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:_t(s,l,G,g,h,null)}return;case"dialog":tt("beforetoggle",s),tt("toggle",s),tt("cancel",s),tt("close",s);break;case"iframe":case"object":tt("load",s);break;case"video":case"audio":for(g=0;g<wf.length;g++)tt(wf[g],s);break;case"image":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"embed":case"source":case"link":tt("error",s),tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in h)if(h.hasOwnProperty(ee)&&(g=h[ee],g!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:_t(s,l,ee,g,h,null)}return;default:if(Ec(l)){for(ae in h)h.hasOwnProperty(ae)&&(g=h[ae],g!==void 0&&Jx(s,l,ae,g,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(g=h[z],g!=null&&_t(s,l,z,g,h,null))}function iF(s,l,h,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,A=null,D=null,z=null,G=null,ee=null,ae=null;for(ie in h){var de=h[ie];if(h.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":G=de;default:g.hasOwnProperty(ie)||_t(s,l,ie,null,g,de)}}for(var te in g){var ie=g[te];if(de=h[te],g.hasOwnProperty(te)&&(ie!=null||de!=null))switch(te){case"type":A=ie;break;case"name":w=ie;break;case"checked":ee=ie;break;case"defaultChecked":ae=ie;break;case"value":D=ie;break;case"defaultValue":z=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,l));break;default:ie!==de&&_t(s,l,te,ie,g,de)}}Tc(s,D,z,G,ee,ae,A,w);return;case"select":ie=D=z=te=null;for(A in h)if(G=h[A],h.hasOwnProperty(A)&&G!=null)switch(A){case"value":break;case"multiple":ie=G;default:g.hasOwnProperty(A)||_t(s,l,A,null,g,G)}for(w in g)if(A=g[w],G=h[w],g.hasOwnProperty(w)&&(A!=null||G!=null))switch(w){case"value":te=A;break;case"defaultValue":z=A;break;case"multiple":D=A;default:A!==G&&_t(s,l,w,A,g,G)}l=z,h=D,g=ie,te!=null?zs(s,!!h,te,!1):!!g!=!!h&&(l!=null?zs(s,!!h,l,!0):zs(s,!!h,h?[]:"",!1));return;case"textarea":ie=te=null;for(z in h)if(w=h[z],h.hasOwnProperty(z)&&w!=null&&!g.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:_t(s,l,z,null,g,w)}for(D in g)if(w=g[D],A=h[D],g.hasOwnProperty(D)&&(w!=null||A!=null))switch(D){case"value":te=w;break;case"defaultValue":ie=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==A&&_t(s,l,D,w,g,A)}Em(s,te,ie);return;case"option":for(var Ne in h)if(te=h[Ne],h.hasOwnProperty(Ne)&&te!=null&&!g.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:_t(s,l,Ne,null,g,te)}for(G in g)if(te=g[G],ie=h[G],g.hasOwnProperty(G)&&te!==ie&&(te!=null||ie!=null))switch(G){case"selected":s.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:_t(s,l,G,te,g,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in h)te=h[Me],h.hasOwnProperty(Me)&&te!=null&&!g.hasOwnProperty(Me)&&_t(s,l,Me,null,g,te);for(ee in g)if(te=g[ee],ie=h[ee],g.hasOwnProperty(ee)&&te!==ie&&(te!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:_t(s,l,ee,te,g,ie)}return;default:if(Ec(l)){for(var At in h)te=h[At],h.hasOwnProperty(At)&&te!==void 0&&!g.hasOwnProperty(At)&&Jx(s,l,At,void 0,g,te);for(ae in g)te=g[ae],ie=h[ae],!g.hasOwnProperty(ae)||te===ie||te===void 0&&ie===void 0||Jx(s,l,ae,te,g,ie);return}}for(var W in h)te=h[W],h.hasOwnProperty(W)&&te!=null&&!g.hasOwnProperty(W)&&_t(s,l,W,null,g,te);for(de in g)te=g[de],ie=h[de],!g.hasOwnProperty(de)||te===ie||te==null&&ie==null||_t(s,l,de,te,g,ie)}function tk(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aF(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var w=h[g],A=w.transferSize,D=w.initiatorType,z=w.duration;if(A&&z&&tk(D)){for(D=0,z=w.responseEnd,g+=1;g<h.length;g++){var G=h[g],ee=G.startTime;if(ee>z)break;var ae=G.transferSize,de=G.initiatorType;ae&&tk(de)&&(G=G.responseEnd,D+=ae*(G<z?1:(z-ee)/(G-ee)))}if(--g,l+=8*(A+D)/(w.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Qx=null,Xx=null;function kp(s){return s.nodeType===9?s:s.ownerDocument}function nk(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rk(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Zx(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var eb=null;function sF(){var s=window.event;return s&&s.type==="popstate"?s===eb?!1:(eb=s,!0):(eb=null,!1)}var ik=typeof setTimeout=="function"?setTimeout:void 0,oF=typeof clearTimeout=="function"?clearTimeout:void 0,ak=typeof Promise=="function"?Promise:void 0,lF=typeof queueMicrotask=="function"?queueMicrotask:typeof ak<"u"?function(s){return ak.resolve(null).then(s).catch(cF)}:ik;function cF(s){setTimeout(function(){throw s})}function ho(s){return s==="head"}function sk(s,l){var h=l,g=0;do{var w=h.nextSibling;if(s.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"||h==="/&"){if(g===0){s.removeChild(w),ou(l);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")_f(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,_f(h);for(var A=h.firstChild;A;){var D=A.nextSibling,z=A.nodeName;A[ta]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=D}}else h==="body"&&_f(s.ownerDocument.body);h=w}while(h);ou(l)}function ok(s,l){var h=s;s=0;do{var g=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=g}while(h)}function tb(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":tb(h),_c(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function uF(s,l,h,g){for(;s.nodeType===1;){var w=h;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[ta])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==w.rel||s.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||s.getAttribute("title")!==(w.title==null?null:w.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(w.src==null?null:w.src)||s.getAttribute("type")!==(w.type==null?null:w.type)||s.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var A=w.name==null?null:""+w.name;if(w.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function dF(s,l,h){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=hi(s.nextSibling),s===null))return null;return s}function lk(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=hi(s.nextSibling),s===null))return null;return s}function nb(s){return s.data==="$?"||s.data==="$~"}function rb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function fF(s,l){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||h.readyState!=="loading")l();else{var g=function(){l(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function hi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var ib=null;function ck(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(l===0)return hi(s.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}s=s.nextSibling}return null}function uk(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return s;l--}else h!=="/$"&&h!=="/&"||l++}s=s.previousSibling}return null}function dk(s,l,h){switch(l=kp(h),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function _f(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);_c(s)}var mi=new Map,fk=new Set;function Ip(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ts=ue.d;ue.d={f:hF,r:mF,D:pF,C:gF,L:yF,m:vF,X:bF,S:xF,M:wF};function hF(){var s=ts.f(),l=wp();return s||l}function mF(s){var l=ri(s);l!==null&&l.tag===5&&l.type==="form"?kC(l):ts.r(s)}var iu=typeof document>"u"?null:document;function hk(s,l,h){var g=iu;if(g&&typeof l=="string"&&l){var w=Tr(l);w='link[rel="'+s+'"][href="'+w+'"]',typeof h=="string"&&(w+='[crossorigin="'+h+'"]'),fk.has(w)||(fk.add(w),s={rel:s,crossOrigin:h,href:l},g.querySelector(w)===null&&(l=g.createElement("link"),Xn(l,"link",s),mn(l),g.head.appendChild(l)))}}function pF(s){ts.D(s),hk("dns-prefetch",s,null)}function gF(s,l){ts.C(s,l),hk("preconnect",s,l)}function yF(s,l,h){ts.L(s,l,h);var g=iu;if(g&&s&&l){var w='link[rel="preload"][as="'+Tr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(w+='[imagesrcset="'+Tr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(w+='[imagesizes="'+Tr(h.imageSizes)+'"]')):w+='[href="'+Tr(s)+'"]';var A=w;switch(l){case"style":A=au(s);break;case"script":A=su(s)}mi.has(A)||(s=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:s,as:l},h),mi.set(A,s),g.querySelector(w)!==null||l==="style"&&g.querySelector(Af(A))||l==="script"&&g.querySelector(Tf(A))||(l=g.createElement("link"),Xn(l,"link",s),mn(l),g.head.appendChild(l)))}}function vF(s,l){ts.m(s,l);var h=iu;if(h&&s){var g=l&&typeof l.as=="string"?l.as:"script",w='link[rel="modulepreload"][as="'+Tr(g)+'"][href="'+Tr(s)+'"]',A=w;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=su(s)}if(!mi.has(A)&&(s=p({rel:"modulepreload",href:s},l),mi.set(A,s),h.querySelector(w)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Tf(A)))return}g=h.createElement("link"),Xn(g,"link",s),mn(g),h.head.appendChild(g)}}}function xF(s,l,h){ts.S(s,l,h);var g=iu;if(g&&s){var w=ra(g).hoistableStyles,A=au(s);l=l||"default";var D=w.get(A);if(!D){var z={loading:0,preload:null};if(D=g.querySelector(Af(A)))z.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},h),(h=mi.get(A))&&ab(s,h);var G=D=g.createElement("link");mn(G),Xn(G,"link",s),G._p=new Promise(function(ee,ae){G.onload=ee,G.onerror=ae}),G.addEventListener("load",function(){z.loading|=1}),G.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Pp(D,l,g)}D={type:"stylesheet",instance:D,count:1,state:z},w.set(A,D)}}}function bF(s,l){ts.X(s,l);var h=iu;if(h&&s){var g=ra(h).hoistableScripts,w=su(s),A=g.get(w);A||(A=h.querySelector(Tf(w)),A||(s=p({src:s,async:!0},l),(l=mi.get(w))&&sb(s,l),A=h.createElement("script"),mn(A),Xn(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(w,A))}}function wF(s,l){ts.M(s,l);var h=iu;if(h&&s){var g=ra(h).hoistableScripts,w=su(s),A=g.get(w);A||(A=h.querySelector(Tf(w)),A||(s=p({src:s,async:!0,type:"module"},l),(l=mi.get(w))&&sb(s,l),A=h.createElement("script"),mn(A),Xn(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(w,A))}}function mk(s,l,h,g){var w=(w=Ve.current)?Ip(w):null;if(!w)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=au(h.href),h=ra(w).hoistableStyles,g=h.get(l),g||(g={type:"style",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=au(h.href);var A=ra(w).hoistableStyles,D=A.get(s);if(D||(w=w.ownerDocument||w,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,D),(A=w.querySelector(Af(s)))&&!A._p&&(D.instance=A,D.state.loading=5),mi.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},mi.set(s,h),A||SF(w,s,h,D.state))),l&&g===null)throw Error(r(528,""));return D}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=su(h),h=ra(w).hoistableScripts,g=h.get(l),g||(g={type:"script",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function au(s){return'href="'+Tr(s)+'"'}function Af(s){return'link[rel="stylesheet"]['+s+"]"}function pk(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function SF(s,l,h,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Xn(l,"link",h),mn(l),s.head.appendChild(l))}function su(s){return'[src="'+Tr(s)+'"]'}function Tf(s){return"script[async]"+s}function gk(s,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+Tr(h.href)+'"]');if(g)return l.instance=g,mn(g),g;var w=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),mn(g),Xn(g,"style",w),Pp(g,h.precedence,s),l.instance=g;case"stylesheet":w=au(h.href);var A=s.querySelector(Af(w));if(A)return l.state.loading|=4,l.instance=A,mn(A),A;g=pk(h),(w=mi.get(w))&&ab(g,w),A=(s.ownerDocument||s).createElement("link"),mn(A);var D=A;return D._p=new Promise(function(z,G){D.onload=z,D.onerror=G}),Xn(A,"link",g),l.state.loading|=4,Pp(A,h.precedence,s),l.instance=A;case"script":return A=su(h.src),(w=s.querySelector(Tf(A)))?(l.instance=w,mn(w),w):(g=h,(w=mi.get(A))&&(g=p({},h),sb(g,w)),s=s.ownerDocument||s,w=s.createElement("script"),mn(w),Xn(w,"link",g),s.head.appendChild(w),l.instance=w);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,Pp(g,h.precedence,s));return l.instance}function Pp(s,l,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=g.length?g[g.length-1]:null,A=w,D=0;D<g.length;D++){var z=g[D];if(z.dataset.precedence===l)A=z;else if(A!==w)break}A?A.parentNode.insertBefore(s,A.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(s,l.firstChild))}function ab(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function sb(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Dp=null;function yk(s,l,h){if(Dp===null){var g=new Map,w=Dp=new Map;w.set(h,g)}else w=Dp,g=w.get(h),g||(g=new Map,w.set(h,g));if(g.has(s))return g;for(g.set(s,null),h=h.getElementsByTagName(s),w=0;w<h.length;w++){var A=h[w];if(!(A[ta]||A[hn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var D=A.getAttribute(l)||"";D=s+D;var z=g.get(D);z?z.push(A):g.set(D,[A])}}return g}function vk(s,l,h){s=s.ownerDocument||s,s.head.insertBefore(h,l==="title"?s.querySelector("head > title"):null)}function _F(s,l,h){if(h===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function xk(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function AF(s,l,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var w=au(g.href),A=l.querySelector(Af(w));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=Rp.bind(s),l.then(s,s)),h.state.loading|=4,h.instance=A,mn(A);return}A=l.ownerDocument||l,g=pk(g),(w=mi.get(w))&&ab(g,w),A=A.createElement("link"),mn(A);var D=A;D._p=new Promise(function(z,G){D.onload=z,D.onerror=G}),Xn(A,"link",g),h.instance=A}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=Rp.bind(s),l.addEventListener("load",h),l.addEventListener("error",h))}}var ob=0;function TF(s,l){return s.stylesheets&&s.count===0&&jp(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var g=setTimeout(function(){if(s.stylesheets&&jp(s,s.stylesheets),s.unsuspend){var A=s.unsuspend;s.unsuspend=null,A()}},6e4+l);0<s.imgBytes&&ob===0&&(ob=62500*aF());var w=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&jp(s,s.stylesheets),s.unsuspend)){var A=s.unsuspend;s.unsuspend=null,A()}},(s.imgBytes>ob?50:800)+l);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(g),clearTimeout(w)}}:null}function Rp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Mp=null;function jp(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Mp=new Map,l.forEach(EF,s),Mp=null,Rp.call(s))}function EF(s,l){if(!(l.state.loading&4)){var h=Mp.get(s);if(h)var g=h.get(null);else{h=new Map,Mp.set(s,h);for(var w=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<w.length;A++){var D=w[A];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),g=D)}g&&h.set(null,g)}w=l.instance,D=w.getAttribute("data-precedence"),A=h.get(D)||g,A===g&&h.set(null,w),h.set(D,w),this.count++,g=Rp.bind(this),w.addEventListener("load",g),w.addEventListener("error",g),A?A.parentNode.insertBefore(w,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(w,s.firstChild)),l.state.loading|=4}}var Ef={$$typeof:P,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function CF(s,l,h,g,w,A,D,z,G){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.hiddenUpdates=Zi(null),this.identifierPrefix=g,this.onUncaughtError=w,this.onCaughtError=A,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function bk(s,l,h,g,w,A,D,z,G,ee,ae,de){return s=new CF(s,l,h,D,G,ee,ae,de,z),l=1,A===!0&&(l|=24),A=Fr(3,null,null,l),s.current=A,A.stateNode=s,l=F0(),l.refCount++,s.pooledCache=l,l.refCount++,A.memoizedState={element:g,isDehydrated:h,cache:l},H0(A),s}function wk(s){return s?(s=Lc,s):Lc}function Sk(s,l,h,g,w,A){w=wk(w),g.context===null?g.context=w:g.pendingContext=w,g=to(l),g.payload={element:h},A=A===void 0?null:A,A!==null&&(g.callback=A),h=no(s,g,l),h!==null&&(Pr(h,s,l),rf(h,s,l))}function _k(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<l?h:l}}function lb(s,l){_k(s,l),(s=s.alternate)&&_k(s,l)}function Ak(s){if(s.tag===13||s.tag===31){var l=yl(s,67108864);l!==null&&Pr(l,s,67108864),lb(s,67108864)}}function Tk(s){if(s.tag===13||s.tag===31){var l=$r();l=al(l);var h=yl(s,l);h!==null&&Pr(h,s,l),lb(s,l)}}var Op=!0;function NF(s,l,h,g){var w=Q.T;Q.T=null;var A=ue.p;try{ue.p=2,cb(s,l,h,g)}finally{ue.p=A,Q.T=w}}function kF(s,l,h,g){var w=Q.T;Q.T=null;var A=ue.p;try{ue.p=8,cb(s,l,h,g)}finally{ue.p=A,Q.T=w}}function cb(s,l,h,g){if(Op){var w=ub(g);if(w===null)Wx(s,l,g,Lp,h),Ck(s,g);else if(PF(w,s,l,h,g))g.stopPropagation();else if(Ck(s,g),l&4&&-1<IF.indexOf(s)){for(;w!==null;){var A=ri(w);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var D=Qi(A.pendingLanes);if(D!==0){var z=A;for(z.pendingLanes|=2,z.entangledLanes|=2;D;){var G=1<<31-rn(D);z.entanglements[1]|=G,D&=~G}ga(A),(gt&6)===0&&(xp=yr()+500,bf(0))}}break;case 31:case 13:z=yl(A,2),z!==null&&Pr(z,A,2),wp(),lb(A,2)}if(A=ub(g),A===null&&Wx(s,l,g,Lp,h),A===w)break;w=A}w!==null&&g.stopPropagation()}else Wx(s,l,g,null,h)}}function ub(s){return s=ii(s),db(s)}var Lp=null;function db(s){if(Lp=null,s=na(s),s!==null){var l=a(s);if(l===null)s=null;else{var h=l.tag;if(h===13){if(s=o(l),s!==null)return s;s=null}else if(h===31){if(s=c(l),s!==null)return s;s=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Lp=s,null}function Ek(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tl()){case Nd:return 2;case kd:return 8;case Fs:case y0:return 32;case pm:return 268435456;default:return 32}default:return 32}}var fb=!1,mo=null,po=null,go=null,Cf=new Map,Nf=new Map,yo=[],IF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ck(s,l){switch(s){case"focusin":case"focusout":mo=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":Cf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nf.delete(l.pointerId)}}function kf(s,l,h,g,w,A){return s===null||s.nativeEvent!==A?(s={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:A,targetContainers:[w]},l!==null&&(l=ri(l),l!==null&&Ak(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),s)}function PF(s,l,h,g,w){switch(l){case"focusin":return mo=kf(mo,s,l,h,g,w),!0;case"dragenter":return po=kf(po,s,l,h,g,w),!0;case"mouseover":return go=kf(go,s,l,h,g,w),!0;case"pointerover":var A=w.pointerId;return Cf.set(A,kf(Cf.get(A)||null,s,l,h,g,w)),!0;case"gotpointercapture":return A=w.pointerId,Nf.set(A,kf(Nf.get(A)||null,s,l,h,g,w)),!0}return!1}function Nk(s){var l=na(s.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=o(h),l!==null){s.blockedOn=l,ki(s.priority,function(){Tk(h)});return}}else if(l===31){if(l=c(h),l!==null){s.blockedOn=l,ki(s.priority,function(){Tk(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Up(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var h=ub(s.nativeEvent);if(h===null){h=s.nativeEvent;var g=new h.constructor(h.type,h);Bd=g,h.target.dispatchEvent(g),Bd=null}else return l=ri(h),l!==null&&Ak(l),s.blockedOn=h,!1;l.shift()}return!0}function kk(s,l,h){Up(s)&&h.delete(l)}function DF(){fb=!1,mo!==null&&Up(mo)&&(mo=null),po!==null&&Up(po)&&(po=null),go!==null&&Up(go)&&(go=null),Cf.forEach(kk),Nf.forEach(kk)}function Vp(s,l){s.blockedOn===l&&(s.blockedOn=null,fb||(fb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,DF)))}var Fp=null;function Ik(s){Fp!==s&&(Fp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fp===s&&(Fp=null);for(var l=0;l<s.length;l+=3){var h=s[l],g=s[l+1],w=s[l+2];if(typeof g!="function"){if(db(g||h)===null)continue;break}var A=ri(h);A!==null&&(s.splice(l,3),l-=3,ux(A,{pending:!0,data:w,method:h.method,action:g},g,w))}}))}function ou(s){function l(G){return Vp(G,s)}mo!==null&&Vp(mo,s),po!==null&&Vp(po,s),go!==null&&Vp(go,s),Cf.forEach(l),Nf.forEach(l);for(var h=0;h<yo.length;h++){var g=yo[h];g.blockedOn===s&&(g.blockedOn=null)}for(;0<yo.length&&(h=yo[0],h.blockedOn===null);)Nk(h),h.blockedOn===null&&yo.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var w=h[g],A=h[g+1],D=w[Un]||null;if(typeof A=="function")D||Ik(h);else if(D){var z=null;if(A&&A.hasAttribute("formAction")){if(w=A,D=A[Un]||null)z=D.formAction;else if(db(w)!==null)continue}else z=D.action;typeof z=="function"?h[g+1]=z:(h.splice(g,3),g-=3),Ik(h)}}}function Pk(){function s(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(D){return w=D})},focusReset:"manual",scroll:"manual"})}function l(){w!==null&&(w(),w=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,w=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),w!==null&&(w(),w=null)}}}function hb(s){this._internalRoot=s}Bp.prototype.render=hb.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var h=l.current,g=$r();Sk(h,g,s,l,null,null)},Bp.prototype.unmount=hb.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Sk(s.current,2,null,s,null,null),wp(),l[ea]=null}};function Bp(s){this._internalRoot=s}Bp.prototype.unstable_scheduleHydration=function(s){if(s){var l=wm();s={blockedOn:null,target:s,priority:l};for(var h=0;h<yo.length&&l!==0&&l<yo[h].priority;h++);yo.splice(h,0,s),h===0&&Nk(s)}};var Dk=e.version;if(Dk!=="19.2.0")throw Error(r(527,Dk,"19.2.0"));ue.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=d(l),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var RF={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zp.isDisabled&&zp.supportsFiber)try{Ci=zp.inject(RF),Kn=zp}catch{}}return Pf.createRoot=function(s,l){if(!i(s))throw Error(r(299));var h=!1,g="",w=VC,A=FC,D=BC;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError)),l=bk(s,1,!1,null,null,h,g,null,w,A,D,Pk),s[ea]=l.current,Yx(s),new hb(l)},Pf.hydrateRoot=function(s,l,h){if(!i(s))throw Error(r(299));var g=!1,w="",A=VC,D=FC,z=BC,G=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.formState!==void 0&&(G=h.formState)),l=bk(s,1,!0,l,h??null,g,w,G,A,D,z,Pk),l.context=wk(null),h=l.current,g=$r(),g=al(g),w=to(g),w.callback=null,no(h,w,g),h=g,l.current.lanes=h,rl(l,h),ga(l),s[ea]=l.current,Yx(s),new Bp(l)},Pf.version="19.2.0",Pf}var zk;function GF(){if(zk)return yb.exports;zk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yb.exports=$F(),yb.exports}var KF=GF();const YF=Ma(KF),qk=t=>{let e;const n=new Set,r=(d,m)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const y=e;e=m??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(x=>x(e,y))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,c);return c},WF=(t=>t?qk(t):qk),JF=t=>t;function QF(t,e=JF){const n=Bi.useSyncExternalStore(t.subscribe,Bi.useCallback(()=>e(t.getState()),[t,e]),Bi.useCallback(()=>e(t.getInitialState()),[t,e]));return Bi.useDebugValue(n),n}const Hk=t=>{const e=WF(t),n=r=>QF(e,r);return Object.assign(n,e),n},h1=(t=>t?Hk(t):Hk),XF=JSON.parse('[{"id":"proj-6","name":"NHRA Bahrain Accreditation Cycle 2025","programId":"prog-nhra","status":"Not Started","startDate":"2024-10-01","endDate":null,"projectLead":{"id":"user-2","name":"Marcus Thorne","email":"m.thorne@healthcare.com","role":"Project Lead"},"activityLog":[{"id":"log-6-1","timestamp":"2024-07-15T09:00:00Z","user":"Dr. Evelyn Reed","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-6-1","standardId":"NHRA.FMS.1","item":"The organization has a written fire prevention plan.","status":"NonCompliant","assignedTo":"user-3","notes":"Draft plan needs to be reviewed by safety committee.","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-6-2","standardId":"NHRA.MR.2","item":"Each medical record contains a unique identifier.","status":"Partially Compliant","assignedTo":"user-4","notes":"System generates unique MRN, but process for manual record creation needs to be standardized.","evidenceFiles":[],"actionPlan":null,"comments":[]}]},{"id":"proj-5","name":"OSAHI Clinical Services Review 2024","programId":"prog-osahi","status":"In Progress","startDate":"2024-06-01","endDate":null,"projectLead":{"id":"user-2","name":"Marcus Thorne","email":"m.thorne@healthcare.com","role":"Project Lead"},"activityLog":[{"id":"log-5-1","timestamp":"2024-06-01T10:00:00Z","user":"Marcus Thorne","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-5-1","standardId":"SMCS.1.a","item":"The hospital uses a variety of methods to display information, such as posters, brochures, media, MOH portals, or websites, with methods of how to access its services.","status":"Compliant","assignedTo":"user-3","notes":"Brochures updated and distributed. Website information verified.","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-5-2","standardId":"SMCS.1.b","item":"All hospital staff are oriented to these services, mainly the staff in reception, outpatient department, and in-patient departments.","status":"Partially Compliant","assignedTo":"user-4","notes":"Orientation sessions scheduled for next week.","evidenceFiles":[],"actionPlan":"1. Finalize orientation material. 2. Schedule sessions with department heads. 3. Track attendance.","comments":[]},{"id":"cl-5-3","standardId":"SMCS.2.a","item":"Patients care is provided according to the policies, laws and regulations.","status":"NonCompliant","assignedTo":"user-2","notes":"Needs audit of 10 patient records to verify.","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-5-4","standardId":"SMCS.2.c","item":"Every patient has an individualized care plan based on their initial assessment and reassessment.","status":"NonCompliant","assignedTo":"user-3","notes":"","evidenceFiles":[],"actionPlan":null,"comments":[]}]},{"id":"proj-1","name":"2024 JCI Triennial Survey","programId":"prog-jci","status":"In Progress","startDate":"2024-01-15","endDate":null,"projectLead":{"id":"user-2","name":"Marcus Thorne","email":"m.thorne@healthcare.com","role":"Project Lead"},"activityLog":[{"id":"log-1-1","timestamp":"2024-01-15T09:00:00Z","user":"Dr. Evelyn Reed","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[{"id":"survey-1","date":"2024-07-20T10:00:00Z","surveyorId":"user-1","status":"In Progress","results":[{"checklistItemId":"cl-1-1a","result":"Pass","notes":"Observed correct procedure in 3/3 cases."}]}],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-1-1a","standardId":"JCI.IPSG.1.A","item":"Use at least two patient identifiers when providing care, treatment, and services.","status":"Partially Compliant","assignedTo":null,"notes":"","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-1-1b","standardId":"JCI.IPSG.1.B","item":"Label containers used for blood and other specimens in the presence of the patient.","status":"Compliant","assignedTo":null,"notes":"","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-1-2","standardId":"JCI.IPSG.2","item":"Implement a process for taking verbal or telephone orders or for reporting critical test results.","status":"NonCompliant","assignedTo":"user-4","notes":"Read-back procedure needs reinforcement in the ER department.","evidenceFiles":[],"actionPlan":"1. Conduct mandatory refresher training for all ER staff on the read-back policy by next Friday.\\n2. Implement weekly random audits of verbal orders in the ER, providing immediate feedback.\\n3. Update the orientation checklist for new hires to include a competency validation for this procedure.","comments":[]},{"id":"cl-1-3","standardId":"JCI.ACC.1","item":"Ensure admission process is standardized across all entry points.","status":"Compliant","assignedTo":"user-2","notes":"Reviewing the admission forms for completeness.","evidenceFiles":[],"actionPlan":null,"comments":[]}]},{"id":"proj-2","name":"DNV Annual Accreditation","programId":"prog-dnv","status":"Finalized","startDate":"2023-05-01","endDate":"2024-04-30","projectLead":{"id":"user-2","name":"Marcus Thorne","email":"m.thorne@healthcare.com","role":"Project Lead"},"finalizedBy":"Dr. Evelyn Reed","finalizationDate":"2024-05-01T10:00:00Z","activityLog":[{"id":"log-2-1","timestamp":"2023-05-01T11:30:00Z","user":"Dr. Evelyn Reed","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-2-1","standardId":"DNV.QM.1","item":"Annual review of the Quality Management System documentation.","status":"Compliant","assignedTo":"user-2","notes":"Completed by the quality committee on 04/15/2024.","evidenceFiles":["doc-2"],"actionPlan":null,"comments":[]},{"id":"cl-2-2","standardId":"DNV.PC.5","item":"Audit of medication storage and labeling in all patient care areas.","status":"Compliant","assignedTo":"user-3","notes":"Audit passed with 98% compliance. Report attached.","evidenceFiles":["doc-3"],"actionPlan":null,"comments":[]}]},{"id":"proj-4","name":"Saudi CBAHI National Survey","programId":"prog-cbahi","status":"In Progress","startDate":"2024-03-01","endDate":null,"projectLead":{"id":"user-1","name":"Dr. Evelyn Reed","email":"e.reed@healthcare.com","role":"Admin"},"activityLog":[{"id":"log-4-1","timestamp":"2024-03-01T14:00:00Z","user":"Dr. Evelyn Reed","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-4-1","standardId":"CBAHI.LD.1","item":"Review and update leadership job descriptions and qualifications.","status":"Compliant","assignedTo":"user-1","notes":"All leadership profiles updated in HR system.","evidenceFiles":[],"actionPlan":null,"comments":[]},{"id":"cl-4-2","standardId":"CBAHI.IM.3","item":"Conduct a random audit of 100 patient records for completeness.","status":"NonCompliant","assignedTo":"user-2","notes":"Audit in progress, 45 records reviewed so far.","evidenceFiles":[],"actionPlan":null,"comments":[]}]},{"id":"proj-3","name":"HFAP Initial Accreditation Prep","programId":"prog-hfap","status":"Not Started","startDate":"2024-09-01","endDate":null,"projectLead":{"id":"user-2","name":"Marcus Thorne","email":"m.thorne@healthcare.com","role":"Project Lead"},"activityLog":[{"id":"log-3-1","timestamp":"2024-02-20T10:00:00Z","user":"Dr. Evelyn Reed","action":{"en":"Project Created","ar":"  "}}],"mockSurveys":[],"capaReports":[],"designControls":[],"checklist":[{"id":"cl-3-1","standardId":"HFAP.01.01.01","item":"Formalize governing body charter and meeting schedules.","status":"NotApplicable","assignedTo":null,"notes":"Draft charter to be presented in next board meeting.","evidenceFiles":[],"actionPlan":null,"comments":[]}]}]'),ZF=JSON.parse(`[{"standardId":"JCI.IPSG.1","programId":"prog-jci","section":"Patient Safety Goals","description":"Identify patients correctly.","criticality":"High","subStandards":[{"id":"JCI.IPSG.1.A","description":"Use at least two patient identifiers when providing care, treatment, and services."},{"id":"JCI.IPSG.1.B","description":"Label containers used for blood and other specimens in the presence of the patient."}]},{"standardId":"JCI.IPSG.2","programId":"prog-jci","section":"Patient Safety Goals","description":"Improve effective communication.","criticality":"High"},{"standardId":"JCI.ACC.1","programId":"prog-jci","section":"Access and Continuity","description":"The organization has a process for patient admission.","criticality":"Medium"},{"standardId":"DNV.QM.1","programId":"prog-dnv","section":"Quality Management","description":"Establish a quality management system.","criticality":"High"},{"standardId":"DNV.PC.5","programId":"prog-dnv","section":"Patient Care","description":"Medication management processes are in place.","criticality":"Medium"},{"standardId":"HFAP.01.01.01","programId":"prog-hfap","section":"Governing Body","description":"The hospital has an effective governing body."},{"standardId":"CBAHI.LD.1","programId":"prog-cbahi","section":"Leadership","description":"The organization is managed by qualified leaders.","criticality":"High"},{"standardId":"CBAHI.IM.3","programId":"prog-cbahi","section":"Information Management","description":"Patient clinical records are complete and accurate."},{"standardId":"SMCS.1","programId":"prog-osahi","section":"Provision of Care","description":"The hospital displays information to patients and families on services provided.","totalMeasures":3,"criticality":"Low","subStandards":[{"id":"SMCS.1.a","description":"The hospital uses a variety of methods to display information, such as posters, brochures, media, MOH portals, or websites, with methods of how to access its services."},{"id":"SMCS.1.b","description":"All hospital staff are oriented to these services, mainly the staff in reception, outpatient department, and in-patient departments."},{"id":"SMCS.1.c","description":"The hospital uses appropriate language and format to provide information about its services to patients, families, and community."}]},{"standardId":"SMCS.2","programId":"prog-osahi","section":"Provision of Care","description":"The hospital implements a mechanism to ensure the provision of a unified standard of care to patients.","totalMeasures":6,"criticality":"High","subStandards":[{"id":"SMCS.2.a","description":"Patients care is provided according to the policies, laws and regulations."},{"id":"SMCS.2.b","description":"Department leaders ensure that all patients receive the same standards of care throughout the hospital departments, all the time (during the morning, afternoon, or night, working hours, or off-hours, regardless of their race, gender, or religion and whether they can pay or not."},{"id":"SMCS.2.c","description":"Every patient has an individualized care plan based on their initial assessment and reassessment."},{"id":"SMCS.2.d","description":"Each patient attending in-patient or outpatient services receives awareness about their rights and responsibilities."},{"id":"SMCS.2.e","description":"The hospital designs and carries out processes to provide continuity of patient care services in the hospital and coordination among health care providers."},{"id":"SMCS.2.f","description":"The hospital has qualified professionals responsible for the patients care during all phases of in-patient care."}]},{"standardId":"SMCS.3","programId":"prog-osahi","section":"Provision of Care","description":"The hospital has a standardized method for registration and admission of patients within its scope of services that meet patients' health needs.","totalMeasures":14,"criticality":"Medium","subStandards":[{"id":"SMCS.3.a","description":"The hospital has a clear policy and procedures describing the process used for admission in various departments, including: Roles and responsibilities, Elective vs. Emergency admissions, Day care, Outpatient registration, Managing bed unavailability, and Admission pathways."},{"id":"SMCS.3.b","description":"All staff are oriented about the standardized process of admission of patients to various hospital settings."},{"id":"SMCS.3.c","description":"Each patient has a unique registration identification number through the process of admission."},{"id":"SMCS.3.d","description":"Patients are accepted only if the hospital can provide the services."},{"id":"SMCS.3.e","description":"Hospital department leaders conduct monitoring audits to assess staff compliance to policies and procedures."},{"id":"SMCS.3.f","description":"The staff are oriented to the admission policy and procedure to ensure a consistent admission process."},{"id":"SMCS.3.g","description":"Each department has an admission criterion designed for their scope of service."},{"id":"SMCS.3.h","description":"There is a regular audit conducted to monitor compliance of the admission process by healthcare staff to ensure standardized practice."}]},{"standardId":"SMCS.4","programId":"prog-osahi","section":"Provision of Care","description":"The hospital has a clear mechanism for patient transfer.","totalMeasures":6,"subStandards":[{"id":"SMCS.4.a","description":"The hospital has a documented transfer policy for patients' intra and inter-hospital transfers."},{"id":"SMCS.4.b","description":"Hospital staff are oriented about the transfer process."},{"id":"SMCS.4.c","description":"Hospital leaders and staff are responsible for providing detailed information on patient assessments, reason for transfer, clinical findings, and medication use."},{"id":"SMCS.4.d","description":"A unified checklist is recommended to structure the transfer process and mitigate risks."},{"id":"SMCS.4.e","description":"The receiving unit staff is responsible for assessing the patients condition on arrival to ensure safety and appropriate service transfer."},{"id":"SMCS.4.f","description":"The hospital monitors staff compliance with the transfer policy to ensure standardized practice."}]},{"standardId":"SMCS.5","programId":"prog-osahi","section":"Provision of Care","description":"The hospital has a clear process for assessment of patients throughout the care process.","totalMeasures":16,"criticality":"High","subStandards":[{"id":"SMCS.5.a","description":"Hospital has clear policies for patient physical assessment, re-assessment, time frames, and content for various care settings (Inpatient, Outpatient, Critical Care, Emergency)."},{"id":"SMCS.5.b","description":"The policy defines the scope and content of assessment by each discipline (physicians, nurses, social services, dietitians, etc.)."},{"id":"SMCS.5.c","description":"The hospital ensures training for relevant staff on proper assessment policies and procedures."},{"id":"SMCS.5.d","description":"Assessment includes discharge planning, required diagnostic testing, and care level priorities."},{"id":"SMCS.5.e","description":"Evidence ensures all patients are reassessed at appropriate intervals to determine treatment response and plan further care."},{"id":"SMCS.5.f","description":"The hospital uses standardized assessment tools (Pain score, Fall risk, Nutritional assessment, Physical assessments, Skin assessment)."},{"id":"SMCS.5.g","description":"Patients are reassessed to confirm the effectiveness of care plans and response to treatment."},{"id":"SMCS.5.h","description":"Documentation of the patients care plan is maintained in electronic medical records."},{"id":"SMCS.5.i","description":"Department heads conduct regular monitoring to ensure staff compliance with policies and procedures."}]},{"standardId":"SMCS.17","programId":"prog-osahi","section":"Laboratory","description":"The hospital has laboratory services that are applicable to national laws and regulations, to meet patient needs.","totalMeasures":4,"subStandards":[{"id":"SMCS.17.a","description":"The hospital has laboratory services that are under national standards, laws, and regulations."},{"id":"SMCS.17.b","description":"The laboratory services unit has a clear scope of services to meet the needs related to the hospital mission and patient populations, emergency needs, covering twenty-four hours a day, seven days a week."},{"id":"SMCS.17.c","description":"Essential, simple laboratory services are available twenty-four hours a day, seven days a week. This includes hematology services, biochemistry, and blood bank)."},{"id":"SMCS.17.d","description":"When special diagnostic tests are not available, there is clear process for referral and follow up of diagnostic tests."}]},{"standardId":"SMCS.28","programId":"prog-osahi","section":"Diagnostic Imaging Services (RD)","description":"The radiology department is well staffed with qualified, trained, experienced staff.","totalMeasures":5,"subStandards":[{"id":"SMCS.28.a","description":"The director/ head of radiology department is qualified, trained, skilled and experienced radiologist."},{"id":"SMCS.28.b","description":"The radiology department staff have proper qualifications, training, and experience."},{"id":"SMCS.28.c","description":"Hospital has twenty-four-hour radiology service coverage"},{"id":"SMCS.28.d","description":"The radiology department has a mechanism on developing human resources."},{"id":"SMCS.28.e","description":"The radiology department have records of staff trained in Basic Life Support (BLS)."}]},{"standardId":"OHAP.PR.1","programId":"prog-ohap","section":"Patient Rights","description":"The organization upholds and protects patient rights and responsibilities.","subStandards":[{"id":"OHAP.PR.1.A","description":"Patients are informed of their rights and responsibilities upon admission in a language and manner they understand."},{"id":"OHAP.PR.1.B","description":"The organization has a clear process for handling patient complaints and grievances."}]},{"standardId":"OHAP.LD.1","programId":"prog-ohap","section":"Leadership","description":"The organization's leaders create a culture of quality and patient safety."},{"standardId":"OHAP.FMS.1","programId":"prog-ohap","section":"Facility Management and Safety","description":"The organization provides a safe and functional environment for patients, staff, and visitors.","subStandards":[{"id":"OHAP.FMS.1.A","description":"A documented fire safety plan is in place and regularly tested."},{"id":"OHAP.FMS.1.B","description":"Medical equipment is managed, maintained, and inspected regularly."}]},{"standardId":"NHRA.FMS.1","programId":"prog-nhra","section":"Facility Management & Safety","description":"The organization has a written fire prevention plan.","criticality":"High"},{"standardId":"NHRA.MR.2","programId":"prog-nhra","section":"Medical Records","description":"Each medical record contains a unique identifier.","criticality":"High"}]`),eB=[{id:"user-1",name:"Dr. Evelyn Reed",email:"e.reed@healthcare.com",role:"Admin",departmentId:"dep-7",jobTitle:"Chief Medical Officer",hireDate:"2018-03-12",competencies:[{competencyId:"comp-cphq",issueDate:"2020-05-15",expiryDate:"2025-05-14"}],trainingAssignments:[]},{id:"user-2",name:"Marcus Thorne",email:"m.thorne@healthcare.com",role:"Project Lead",departmentId:"dep-5",jobTitle:"Quality Improvement Manager",hireDate:"2021-09-01",competencies:[],trainingAssignments:[]},{id:"user-3",name:"Lena Petrova",email:"l.petrova@healthcare.com",role:"Team Member",departmentId:"dep-1",jobTitle:"Registered Nurse, ICU",hireDate:"2022-02-20",competencies:[{competencyId:"comp-bls",issueDate:"2023-01-10",expiryDate:"2025-01-09"},{competencyId:"comp-acls",issueDate:"2023-02-15",expiryDate:"2025-02-14"}],trainingAssignments:[{trainingId:"train-1",assignedBy:"user-1",assignedDate:"2024-07-01T10:00:00Z",dueDate:"2024-08-01T10:00:00Z"}]},{id:"user-4",name:"Samuel Chen",email:"s.chen@healthcare.com",role:"Team Member",departmentId:"dep-2",jobTitle:"Clinical Pharmacist",hireDate:"2020-11-05",competencies:[],trainingAssignments:[]}],tB=[{id:"doc-1",name:{en:"Patient Identification Policy",ar:"   "},type:"Policy",isControlled:!0,uploadedAt:"2023-10-26",status:"Approved",currentVersion:3,reviewDate:"2024-10-25",approvedBy:"Dr. Evelyn Reed",approvalDate:"2023-10-26T10:00:00Z",versionHistory:[{version:3,date:"2023-10-26",uploadedBy:"Dr. Evelyn Reed",content:{}},{version:2,date:"2023-08-15",uploadedBy:"Dr. Evelyn Reed",content:{}}],content:{en:"<h3>1. Purpose</h3><p>To ensure accurate patient identification to prevent medical errors.</p><h3>2. Policy</h3><p>At least two patient identifiers (e.g., full name and date of birth) must be used before administering medications, blood, or any other treatments.</p>",ar:"<h3>. </h3><p>       .</p><h3>. </h3><p>      (    )         .</p>"}},{id:"doc-2",name:{en:"QMS Annual Review Minutes",ar:"     "},type:"Report",isControlled:!0,uploadedAt:"2024-04-15",status:"Draft",currentVersion:1,versionHistory:[{version:1,date:"2024-04-15",uploadedBy:"Marcus Thorne",content:{}}],content:{en:"<h4>Meeting Minutes: QMS Annual Review</h4><p>Date: April 15, 2024</p><p>Attendees: Dr. Reed, M. Thorne</p><p>Key Discussion Points: Reviewed DNV compliance. All major standards met. Minor improvements suggested for medication labeling.</p>",ar:"<h4> :     </h4><p>:   </p><p>: . , . </p><p>  :     DNV.     .       .</p>"}},{id:"doc-3",name:{en:"Medication Storage Area Audit",ar:"   "},type:"Evidence",isControlled:!1,uploadedAt:"2024-04-20",status:"Pending Review",currentVersion:1,versionHistory:[{version:1,date:"2024-04-20",uploadedBy:"Lena Petrova",content:{}}],content:{en:"<p>Audit conducted on April 20, 2024. All medication storage areas found to be compliant with temperature and labeling requirements. No major deficiencies noted.</p>",ar:"<p>      .            .      .</p>"}}],nB=[{id:"dep-1",name:{en:"Nursing",ar:""},requiredCompetencyIds:["comp-bls","comp-acls"]},{id:"dep-2",name:{en:"Pharmacy",ar:""}},{id:"dep-3",name:{en:"Laboratory",ar:""}},{id:"dep-4",name:{en:"Radiology",ar:""}},{id:"dep-5",name:{en:"Quality Management",ar:" "},requiredCompetencyIds:["comp-cphq"]},{id:"dep-6",name:{en:"Infection Control",ar:" "},requiredCompetencyIds:["comp-cic"]},{id:"dep-7",name:{en:"Administration",ar:""}}],rB=[{id:"train-1",title:{en:"Hand Hygiene and Infection Control",ar:"   "},description:{en:"Learn the fundamental principles of hand hygiene and its critical role in preventing healthcare-associated infections.",ar:"             ."},content:{en:"<h3>Introduction</h3><p>Hand hygiene is the single most important factor in preventing the spread of infections. This module covers the WHO's '5 Moments for Hand Hygiene'.</p><h3>Key Concepts</h3><ul><li>Moment 1: Before touching a patient.</li><li>Moment 2: Before a clean/aseptic procedure.</li><li>Moment 3: After body fluid exposure risk.</li><li>Moment 4: After touching a patient.</li><li>Moment 5: After touching patient surroundings.</li></ul><p>Proper technique involves using an alcohol-based handrub or soap and water, covering all surfaces of the hands, and rubbing for at least 20 seconds.</p>",ar:"<h3></h3><p>         .    '   '   .</p><h3> </h3><ul><li> 1:   .</li><li> 2:   /.</li><li> 3:     .</li><li> 4:   .</li><li> 5:    .</li></ul><p>                20   .</p>"},passingScore:80,quiz:[{id:"q1-1",question:{en:"Which of the following is NOT one of the '5 Moments for Hand Hygiene'?",ar:"     '   '"},options:[{en:"Before touching a patient",ar:"  "},{en:"After using the restroom",ar:"   "},{en:"After touching patient surroundings",ar:"   "}],correctOptionIndex:1},{id:"q1-2",question:{en:"What is the minimum recommended time for rubbing hands with soap and water?",ar:"          "},options:[{en:"5 seconds",ar:"5 "},{en:"10 seconds",ar:"10 "},{en:"20 seconds",ar:"20 "}],correctOptionIndex:2}]},{id:"train-2",title:{en:"Patient Identification",ar:"  "},description:{en:"Master the correct procedures for patient identification to ensure patient safety as per JCI standards.",ar:"             ."},content:{en:"<h3>Core Principle</h3><p>The core principle of patient identification is to reliably identify the individual as the person for whom the service or treatment is intended and to match the service or treatment to that individual.</p><h3>Procedure</h3><p>At least two patient identifiers must be used when administering medications, blood, or other treatments. Acceptable identifiers include:</p><ul><li>Patient's full name</li><li>Date of birth</li><li>Medical record number</li></ul><p>The patient's room number or location is NOT an acceptable identifier.</p>",ar:"<h3> </h3><p>                      .</p><h3></h3><p>             .   :</p><ul><li>  </li><li> </li><li>  </li></ul><p>       .</p>"},passingScore:100,quiz:[{id:"q2-1",question:{en:"How many patient identifiers are required at minimum before administering medication?",ar:"         "},options:[{en:"One",ar:""},{en:"Two",ar:""},{en:"Three",ar:""}],correctOptionIndex:1},{id:"q2-2",question:{en:"Which of the following is NOT an acceptable patient identifier?",ar:"      "},options:[{en:"Full Name",ar:" "},{en:"Date of Birth",ar:" "},{en:"Room Number",ar:" "}],correctOptionIndex:2}]}],iB=[{id:"prog-jci",name:"JCI",description:{en:"Joint Commission International standards for patient safety and quality of care.",ar:"       ."}},{id:"prog-dnv",name:"DNV",description:{en:"DNV GL standards, integrating ISO 9001 quality management with CMS Conditions of Participation.",ar:" DNV GL     ISO 9001     CMS."}},{id:"prog-hfap",name:"HFAP",description:{en:"Healthcare Facilities Accreditation Program standards, now part of the ACHC.",ar:"         ACHC."}},{id:"prog-cbahi",name:"CBAHI",description:{en:"Saudi Central Board for Accreditation of Healthcare Institutions national standards.",ar:"      ."}},{id:"prog-osahi",name:"OSAHI",description:{en:"Organization for Safety & Accreditation in Healthcare Institutions, focusing on clinical service standards.",ar:"          ."}},{id:"prog-ohap",name:"OHAP",description:{en:"Oman Healthcare Accreditation Program standards, focusing on enhancing quality and patient safety in the Sultanate of Oman.",ar:"               ."}},{id:"prog-nhra",name:"NHRA",description:{en:"National Health Regulatory Authority standards for the Kingdom of Bahrain.",ar:"        ."}}],aB="AccreditEx",sB="",oB="#4f46e5",lB="en",cB="TeamMember",uB={minLength:8,requireUppercase:!1,requireNumber:!1,requireSymbol:!1},dB={baseColor:"#1e293b",markerColor:"#818cf8",glowColor:"#4f46e5",scale:2.5,darkness:.9,lightIntensity:1.2,rotationSpeed:.02},$k={appName:aB,logoUrl:sB,primaryColor:oB,defaultLanguage:lB,defaultUserRole:cB,passwordPolicy:uB,globeSettings:dB},fB=[{id:"comp-bls",name:{en:"Basic Life Support (BLS)",ar:"   (BLS)"},description:{en:"Certification in providing basic life support, including CPR and AED usage.",ar:"                ."}},{id:"comp-acls",name:{en:"Advanced Cardiovascular Life Support (ACLS)",ar:"     (ACLS)"},description:{en:"Certification for managing cardiovascular emergencies.",ar:"     ."}},{id:"comp-cphq",name:{en:"Certified Professional in Healthcare Quality (CPHQ)",ar:"      (CPHQ)"},description:{en:"Professional certification for healthcare quality management professionals.",ar:"      ."}},{id:"comp-cic",name:{en:"Certification in Infection Control (CIC)",ar:"    (CIC)"},description:{en:"Certification for professionals in infection prevention and control.",ar:"       ."}}],hB=[{id:"risk-1",title:"Single point of failure in primary lab analyzer",description:"The main hematology analyzer is old and has no backup. If it fails, all routine blood tests will be delayed, impacting patient care.",likelihood:4,impact:5,status:"Open",ownerId:"user-2",mitigationPlan:"1. Schedule preventative maintenance immediately. 2. Begin procurement process for a new or backup analyzer. 3. Establish an SLA with a nearby reference lab for emergency sample processing.",createdAt:"2024-05-10T10:00:00Z"},{id:"risk-2",title:"Upcoming changes to data privacy regulations (HIPAA equivalent)",description:"New national data privacy laws are expected within 6 months. Our current patient data handling may not be compliant.",likelihood:5,impact:4,status:"Open",ownerId:"user-1",mitigationPlan:"1. Legal team to review draft regulations. 2. IT department to perform a gap analysis on current systems. 3. Develop a project plan for necessary updates.",createdAt:"2024-06-01T14:30:00Z"},{id:"risk-3",title:"Shortage of specialized ICU nurses",description:"High turnover and difficulty in recruiting have led to a shortage of experienced ICU nurses, potentially affecting patient-to-nurse ratios and quality of care.",likelihood:3,impact:5,status:"Mitigated",ownerId:"user-3",mitigationPlan:"Implemented a retention bonus program and partnered with a specialized nursing agency for temporary staff. Continuing to monitor ratios daily.",createdAt:"2024-04-20T09:00:00Z"}];var Vt=(t=>(t.Admin="Admin",t.ProjectLead="ProjectLead",t.TeamMember="TeamMember",t.Auditor="Auditor",t))(Vt||{}),ur=(t=>(t.NotStarted="Not Started",t.InProgress="In Progress",t.OnHold="On Hold",t.Completed="Completed",t.Finalized="Finalized",t))(ur||{}),Ue=(t=>(t.Compliant="Compliant",t.PartiallyCompliant="Partially Compliant",t.NonCompliant="Non-Compliant",t.NotApplicable="Not Applicable",t))(Ue||{}),Bf=(t=>(t.High="High",t.Medium="Medium",t.Low="Low",t))(Bf||{});class mB{constructor(){this._projects=[],this._standards=[],this._users=[],this._documents=[],this._departments=[],this._trainings=[],this._programs=[],this._settings=$k,this._competencies=[],this._risks=[],this._incidents=[],this._customEvents=[],this._notifications=[],this._userTrainingStatuses={},this._certificates=[],this.getProjects=()=>this._projects,this.updateProject=e=>(this._projects=this._projects.map(n=>n.id===e.id?e:n),e),this.addProject=e=>{const n=this._standards.filter(i=>i.programId===e.programId),r={id:`proj-${Date.now()}`,...e,progress:0,activityLog:[{id:`log-${Date.now()}`,timestamp:new Date().toISOString(),user:e.projectLead.name,action:{en:"Project Created",ar:"  "}}],mockSurveys:[],capaReports:[],designControls:[],checklist:n.flatMap(i=>i.subStandards&&i.subStandards.length>0?i.subStandards.map(a=>({id:`cl-${Date.now()}-${a.id}`,item:a.description,standardId:a.id,status:Ue.NonCompliant,assignedTo:null,dueDate:null,actionPlan:"",notes:"",evidenceFiles:[],comments:[]})):[{id:`cl-${Date.now()}-${i.standardId}`,item:i.description,standardId:i.standardId,status:Ue.NonCompliant,assignedTo:null,dueDate:null,actionPlan:"",notes:"",evidenceFiles:[],comments:[]}])};return this._projects.push(r),r},this.deleteProject=e=>{this._projects=this._projects.filter(n=>n.id!==e)},this.finalizeProject=(e,n)=>{const r=this._projects.find(i=>i.id===e);if(!r)throw new Error("Project not found");return r.status=ur.Finalized,r.finalizedBy=n,r.finalizationDate=new Date().toISOString(),{status:r.status,finalizedBy:r.finalizedBy,finalizationDate:r.finalizationDate}},this.updateChecklistItem=(e,n,r)=>{},this.addCommentToChecklistItem=(e,n,r,i)=>({id:`comment-${Date.now()}`,userId:i.id,userName:i.name,timestamp:new Date().toISOString(),text:r}),this.createEvidenceAndLink=(e,n,r)=>{const i={name:r.name,type:"Evidence",isControlled:!1,status:"Approved",content:{en:`<p>Uploaded file: ${r.uploadedFile.name}</p>`,ar:`<p> : ${r.uploadedFile.name}</p>`},currentVersion:1,uploadedAt:new Date().toISOString()},a=this.addDocument(i),o=this._projects.find(u=>u.id===e);return o.checklist.find(u=>u.id===n).evidenceFiles.push(a.id),{newDocument:a,updatedProject:o}},this.updateCapaReport=(e,n)=>{},this.addMockSurvey=(e,n)=>{const r=this._projects.find(a=>a.id===e);if(!r)throw new Error("Project not found");const i={id:`survey-${Date.now()}`,date:new Date().toISOString(),surveyorId:n,status:"In Progress",results:[]};return r.mockSurveys.push(i),r},this.updateMockSurvey=(e,n,r)=>{const i=this._projects.find(o=>o.id===e);if(!i)throw new Error("Project not found");const a=i.mockSurveys.findIndex(o=>o.id===n);if(a===-1)throw new Error("Survey not found");return i.mockSurveys[a]={...i.mockSurveys[a],...r},i},this.getUsers=()=>this._users,this.addUser=e=>{const n={id:`user-${Date.now()}`,competencies:[],trainingAssignments:[],...e};return this._users.push(n),n},this.updateUser=e=>(this._users=this._users.map(n=>n.id===e.id?e:n),e),this.deleteUser=e=>{this._users=this._users.filter(n=>n.id!==e)},this.getDocuments=()=>this._documents,this.addDocument=e=>{const n={id:`doc-${Date.now()}`,versionHistory:[],...e};return this._documents.push(n),n},this.updateDocument=e=>(this._documents=this._documents.map(n=>n.id===e.id?e:n),e),this.deleteDocument=e=>{this._documents=this._documents.filter(n=>n.id!==e)},this.approveDocument=(e,n)=>{const r=this._documents.find(i=>i.id===e);if(!r)throw new Error("Document not found");return r.status="Approved",r.approvedBy=n,r.approvalDate=new Date().toISOString(),r},this.addProcessMap=e=>{const n={id:`procmap-${Date.now()}`,name:e.name,type:"Process Map",isControlled:!0,status:"Draft",content:{en:"",ar:""},processMapContent:{nodes:[],edges:[]},currentVersion:1,versionHistory:[],uploadedAt:new Date().toISOString()};return this._documents.push(n),n},this.getStandards=()=>this._standards,this.getPrograms=()=>this._programs,this.addProgram=e=>{const n={id:`prog-${Date.now()}`,...e};return this._programs.push(n),n},this.updateProgram=e=>(this._programs=this._programs.map(n=>n.id===e.id?e:n),e),this.deleteProgram=e=>{this._programs=this._programs.filter(n=>n.id!==e)},this.addStandard=e=>(this._standards.push(e),e),this.updateStandard=e=>(this._standards=this._standards.map(n=>n.programId===e.programId&&n.standardId===e.standardId?e:n),e),this.deleteStandard=(e,n)=>{this._standards=this._standards.filter(r=>r.programId!==e||r.standardId!==n)},this.importStandards=(e,n)=>{const r=n.map(i=>({...i,programId:e}));return this._standards.push(...r),r},this.getDepartments=()=>this._departments,this.addDepartment=e=>{const n={id:`dept-${Date.now()}`,...e};return this._departments.push(n),n},this.updateDepartment=e=>(this._departments=this._departments.map(n=>n.id===e.id?e:n),e),this.deleteDepartment=e=>{this._departments=this._departments.filter(n=>n.id!==e)},this.getCompetencies=()=>this._competencies,this.addCompetency=e=>{const n={id:`comp-${Date.now()}`,...e};return this._competencies.push(n),n},this.updateCompetency=e=>(this._competencies=this._competencies.map(n=>n.id===e.id?e:n),e),this.deleteCompetency=e=>{this._competencies=this._competencies.filter(n=>n.id!==e)},this.getTrainings=()=>this._trainings,this.addTraining=e=>{const n={id:`train-${Date.now()}`,...e};return this._trainings.push(n),n},this.updateTraining=e=>(this._trainings=this._trainings.map(n=>n.id===e.id?e:n),e),this.deleteTraining=e=>{this._trainings=this._trainings.filter(n=>n.id!==e)},this.assignTraining=e=>{const n=new Set(e.userIds);this._users.forEach(i=>{e.departmentIds.includes(i.departmentId)&&n.add(i.id)});const r=[];return this._users.forEach(i=>{if(n.has(i.id)){const a={trainingId:e.trainingId,assignedDate:new Date().toISOString(),dueDate:e.dueDate};i.trainingAssignments.find(o=>o.trainingId===e.trainingId)||(i.trainingAssignments.push(a),r.push(i))}}),r},this.getRisks=()=>this._risks,this.addRisk=e=>{const n={id:`risk-${Date.now()}`,...e};return this._risks.push(n),n},this.updateRisk=e=>(this._risks=this._risks.map(n=>n.id===e.id?e:n),e),this.deleteRisk=e=>{this._risks=this._risks.filter(n=>n.id!==e)},this.getIncidents=()=>this._incidents,this.addIncident=e=>{const n={id:`inc-${Date.now()}`,...e};return this._incidents.push(n),n},this.updateIncident=e=>(this._incidents=this._incidents.map(n=>n.id===e.id?e:n),e),this.deleteIncident=e=>{this._incidents=this._incidents.filter(n=>n.id!==e)},this.getCustomEvents=()=>this._customEvents,this.addCustomEvent=e=>{const n={id:`event-${Date.now()}`,type:"Custom",...e};return this._customEvents.push(n),n},this.updateCustomEvent=e=>(this._customEvents=this._customEvents.map(n=>n.id===e.id?e:n),e),this.deleteCustomEvent=e=>{this._customEvents=this._customEvents.filter(n=>n.id!==e)},this.getAppSettings=()=>this._settings,this.updateAppSettings=e=>{this._settings=e},this.updateUserTrainingStatus=(e,n,r,i)=>(this._userTrainingStatuses[e]||(this._userTrainingStatuses[e]={}),this._userTrainingStatuses[e][n]={...this._userTrainingStatuses[e][n],status:r,score:i,completionDate:r==="Completed"?new Date().toISOString():void 0},this._userTrainingStatuses[e]),this.generateCertificate=(e,n,r)=>{const i=this._users.find(u=>u.id===e),a=this._trainings.find(u=>u.id===n);if(!i||!a)throw new Error("User or training not found");const o={id:`cert-${Date.now()}`,userId:e,userName:i.name,trainingId:n,trainingTitle:a.title,completionDate:new Date().toISOString(),score:r};this._certificates.push(o);const c=this.updateUserTrainingStatus(e,n,"Completed",r);return c[n].certificateId=o.id,{updatedStatus:c,newCertificate:o}},this._projects=JSON.parse(JSON.stringify(XF)),this._standards=JSON.parse(JSON.stringify(ZF)),this._users=JSON.parse(JSON.stringify(eB)),this._documents=JSON.parse(JSON.stringify(tB)),this._departments=JSON.parse(JSON.stringify(nB)),this._trainings=JSON.parse(JSON.stringify(rB)),this._programs=JSON.parse(JSON.stringify(iB)),this._settings=JSON.parse(JSON.stringify($k)),this._competencies=JSON.parse(JSON.stringify(fB)),this._risks=JSON.parse(JSON.stringify(hB)),this._initializeTrainingStatuses()}_initializeTrainingStatuses(){this._users.forEach(e=>{var r;const n={};(r=e.trainingAssignments)==null||r.forEach(i=>{n[i.trainingId]={status:"Not Started"}}),this._userTrainingStatuses[e.id]=n})}loadInitialData(){return{projects:this._projects,standards:this._standards,users:this._users,documents:this._documents,departments:this._departments,trainings:this._trainings,programs:this._programs,appSettings:this._settings,competencies:this._competencies,risks:this._risks,incidents:this._incidents,customEvents:this._customEvents,notifications:this._notifications,userTrainingStatuses:this._userTrainingStatuses,certificates:this._certificates}}findUserByCredentials(e,n){if(n==="password123")return this._users.find(r=>r.email.toLowerCase()===e.toLowerCase())}}const he=new mB,Pn=h1((t,e)=>({currentUser:null,isLoggingIn:!1,notifications:[],userTrainingStatuses:{},certificates:[],initialize:n=>t(n),setCurrentUser:n=>t({currentUser:n,isLoggingIn:!1}),login:n=>t({currentUser:n}),logout:()=>{t({currentUser:null})},markNotificationAsRead:n=>{t(r=>({notifications:r.notifications.map(i=>n==="all"||i.id===n?{...i,read:!0}:i)}))},updateTrainingStatus:(n,r,i,a)=>{const o=he.updateUserTrainingStatus(n,r,i,a);t(c=>({userTrainingStatuses:{...c.userTrainingStatuses,[n]:o}}))},generateCertificate:(n,r,i)=>{const{updatedStatus:a,newCertificate:o}=he.generateCertificate(n,r,i);t(c=>({userTrainingStatuses:{...c.userTrainingStatuses,[n]:a},certificates:[...c.certificates,o]}))}})),Rt=h1((t,e)=>({navigation:{view:"dashboard"},appSettings:null,users:[],documents:[],standards:[],programs:[],departments:[],competencies:[],trainings:[],customEvents:[],risks:[],incidents:[],initialize:n=>t(n),setNavigation:n=>t({navigation:n}),updateAppSettings:n=>{he.updateAppSettings(n),t({appSettings:n})},addUser:n=>{const r=he.addUser(n);t(i=>({users:[...i.users,r]}))},updateUser:n=>{const r=he.updateUser(n);t(a=>({users:a.users.map(o=>o.id===n.id?r:o)}));const i=Pn.getState().currentUser;i&&i.id===n.id&&Pn.getState().login(r)},deleteUser:n=>{he.deleteUser(n),t(r=>({users:r.users.filter(i=>i.id!==n)}))},addDocument:n=>{const r=he.addDocument(n);t(i=>({documents:[...i.documents,r]}))},updateDocument:n=>{const r=he.updateDocument(n);t(i=>({documents:i.documents.map(a=>a.id===n.id?r:a)}))},deleteDocument:n=>{he.deleteDocument(n),t(r=>({documents:r.documents.filter(i=>i.id!==n)}))},approveDocument:(n,r)=>{const i=he.approveDocument(n,r);t(a=>({documents:a.documents.map(o=>o.id===n?i:o)}))},addProcessMap:n=>{const r=he.addProcessMap(n);t(i=>({documents:[...i.documents,r]}))},addProgram:n=>{const r=he.addProgram(n);t(i=>({programs:[...i.programs,r]}))},updateProgram:n=>{const r=he.updateProgram(n);t(i=>({programs:i.programs.map(a=>a.id===n.id?r:a)}))},deleteProgram:n=>{he.deleteProgram(n),t(r=>({programs:r.programs.filter(i=>i.id!==n)}))},addStandard:n=>{const r=he.addStandard(n);t(i=>({standards:[...i.standards,r]}))},updateStandard:n=>{const r=he.updateStandard(n);t(i=>({standards:i.standards.map(a=>a.programId===n.programId&&a.standardId===n.standardId?r:a)}))},deleteStandard:(n,r)=>{he.deleteStandard(n,r),t(i=>({standards:i.standards.filter(a=>a.programId!==n||a.standardId!==r)}))},importStandards:(n,r)=>{const i=he.importStandards(n,r);t(a=>({standards:[...a.standards,...i]}))},addDepartment:n=>{const r=he.addDepartment(n);t(i=>({departments:[...i.departments,r]}))},updateDepartment:n=>{const r=he.updateDepartment(n);t(i=>({departments:i.departments.map(a=>a.id===n.id?r:a)}))},deleteDepartment:n=>{he.deleteDepartment(n),t(r=>({departments:r.departments.filter(i=>i.id!==n)}))},addCompetency:n=>{const r=he.addCompetency(n);t(i=>({competencies:[...i.competencies,r]}))},updateCompetency:n=>{const r=he.updateCompetency(n);t(i=>({competencies:i.competencies.map(a=>a.id===n.id?r:a)}))},deleteCompetency:n=>{he.deleteCompetency(n),t(r=>({competencies:r.competencies.filter(i=>i.id!==n)}))},addTraining:async n=>{const r=he.addTraining(n);t(i=>({trainings:[...i.trainings,r]}))},updateTraining:async n=>{const r=he.updateTraining(n);t(i=>({trainings:i.trainings.map(a=>a.id===n.id?r:a)}))},deleteTraining:async n=>{he.deleteTraining(n),t(r=>({trainings:r.trainings.filter(i=>i.id!==n)}))},assignTraining:async n=>{const r=he.assignTraining(n);t(i=>({users:i.users.map(a=>r.find(o=>o.id===a.id)||a)}))},addCustomEvent:n=>{const r=he.addCustomEvent(n);t(i=>({customEvents:[...i.customEvents,r]}))},updateCustomEvent:n=>{const r=he.updateCustomEvent(n);t(i=>({customEvents:i.customEvents.map(a=>a.id===n.id?r:a)}))},deleteCustomEvent:n=>{he.deleteCustomEvent(n),t(r=>({customEvents:r.customEvents.filter(i=>i.id!==n)}))},addRisk:n=>{const r=he.addRisk(n);t(i=>({risks:[...i.risks,r]}))},updateRisk:n=>{const r=he.updateRisk(n);t(i=>({risks:i.risks.map(a=>a.id===n.id?r:a)}))},deleteRisk:n=>{he.deleteRisk(n),t(r=>({risks:r.risks.filter(i=>i.id!==n)}))},addIncident:n=>{const r=he.addIncident(n);t(i=>({incidents:[...i.incidents,r]}))},updateIncident:n=>{const r=he.updateIncident(n);t(i=>({incidents:i.incidents.map(a=>a.id===n.id?r:a)}))},deleteIncident:n=>{he.deleteIncident(n),t(r=>({incidents:r.incidents.filter(i=>i.id!==n)}))}})),m1=E.createContext({lang:"en",dir:"ltr",toggleLang:()=>{}}),pB=({children:t})=>{const[e,n]=E.useState("en"),[r,i]=E.useState("ltr");E.useEffect(()=>{const o=e==="ar"?"rtl":"ltr";i(o),document.documentElement.lang=e,document.documentElement.dir=o},[e]);const a=E.useCallback(()=>{n(o=>o==="en"?"ar":"en")},[]);return f.jsx(m1.Provider,{value:{lang:e,dir:r,toggleLang:a},children:t})},xO=E.createContext(void 0),gB=({children:t})=>{const[e,n]=E.useState("light");E.useEffect(()=>{const i=localStorage.getItem("accreditex-theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;i?n(i):a&&n("dark")},[]),E.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("accreditex-theme",e)},[e]);const r=E.useCallback(()=>{n(i=>i==="light"?"dark":"light")},[]);return f.jsx(xO.Provider,{value:{theme:e,toggleTheme:r},children:t})},Ti=()=>{const t=E.useContext(xO);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},bO=E.createContext(void 0),Zr=()=>{const t=E.useContext(bO);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},yB=t=>f.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M12 2L2 7V17L12 22L22 17V7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-brand-primary dark:text-indigo-400"}),f.jsx("path",{d:"M2 7L12 12L22 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-brand-primary dark:text-indigo-400"}),f.jsx("path",{d:"M12 22V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-brand-text-secondary dark:text-slate-500"}),f.jsx("path",{d:"M17 4.5L7 9.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-brand-text-secondary dark:text-slate-500 opacity-50"})]}),ed=yB,Oe=t=>e=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:t}),Le={Bars3Icon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}),FolderIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"}),PlusIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}),SearchIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),CheckCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),XCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),MinusCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"}),SlashCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"}),SparklesIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 21.75l-.648-1.188a2.25 2.25 0 00-1.49-1.49L12.75 18.75l1.188-.648a2.25 2.25 0 001.49-1.49l.648-1.188.648 1.188a2.25 2.25 0 001.49 1.49l1.188.648-1.188.648a2.25 2.25 0 00-1.49 1.49z"}),PaperClipIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3.375 3.375 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.687 7.687a1.125 1.125 0 01-1.591-1.591l7.687-7.687a1.125 1.125 0 011.591 1.591z"}),CircleStackIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}),ChartPieIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),ClipboardDocumentCheckIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"}),DocumentTextIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),ClipboardDocumentSearchIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2.25-4h.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 18V6.75c0-.621.504-1.125 1.125-1.125h.375m12.158 3.842l-3.328-3.328A2.25 2.25 0 0012.158 6H9"}),BeakerIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 01-.21 1.002L7.5 15.25l-2.04-5.426a2.25 2.25 0 01-.21-1.002V3.104a2.25 2.25 0 012.25-2.25h1.5a2.25 2.25 0 012.25 2.25zM15 3.75a2.25 2.25 0 012.25 2.25v11.25a2.25 2.25 0 01-2.25 2.25h-9a2.25 2.25 0 01-2.25-2.25V6a2.25 2.25 0 012.25-2.25m9 0h-9"}),ShieldCheckIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z"}),ExclamationTriangleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}),ClockIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"}),XMarkIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}),Cog6ToothIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h3m-6.75 3h13.5M3.75 12h16.5m-16.5 3H12m-8.25 3h13.5",transform:"rotate(45 12 12)"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12c0 4.142-3.358 7.5-7.5 7.5s-7.5-3.358-7.5-7.5 3.358-7.5 7.5-7.5 7.5 3.358 7.5 7.5z"})]}),AcademicCapIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-3.376 3.376a59.942 59.942 0 003.376-3.376z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.25 10.399a48.567 48.567 0 01-2.658-.813m15.482 0a48.567 48.567 0 00-2.658-.813M12 21.75V3.493"})]}),ChartBarSquareIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"}),CalendarDaysIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008zm-3 0h.008v.008H9v-.008zm-3 0h.008v.008H6v-.008zm-3 0h.008v.008H3v-.008zm6 3h.008v.008H9v-.008zm-3 0h.008v.008H6v-.008zm6 0h.008v.008H12v-.008zm-3 0h.008v.008H9v-.008z"}),UsersIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 00-12 0m12 0a9.094 9.094 0 01-12 0m12 0v-2.25a6 6 0 00-12 0v2.25m12 0a9.094 9.094 0 01-12 0M12 12.75a4.5 4.5 0 110-9 4.5 4.5 0 010 9z"}),LightBulbIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a2.4 2.4 0 01-3.75 0M14.25 18v-5.25m0 0a6.01 6.01 0 00-1.5-.189m1.5.189a6.01 6.01 0 011.5-.189m-3.75 7.478a12.06 12.06 0 014.5 0M12 4.5a3.75 3.75 0 00-3.75 3.75v1.5a3.75 3.75 0 007.5 0v-1.5A3.75 3.75 0 0012 4.5z"}),PencilIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"}),TrashIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}),BuildingOffice2Icon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12M6.75 3v.75m.75-.75v.75m-.75 0h.75m5.25 0h.75m-.75 0v.75m.75-.75v.75M9 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m-4.5 0H9"}),CheckBadgeIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.745 3.745 0 013.296-1.043A3.745 3.745 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.745 3.745 0 011.043 3.296A3.745 3.745 0 0121 12z"}),MagnifyingGlassIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),InformationCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),MoonIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"}),SunIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"}),BellIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.31 5.632l-.01.012a23.848 23.848 0 005.454 1.31M15 17.25a3 3 0 01-6 0m4.5 0a9 9 0 00-9 0"}),EyeIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),EyeSlashIcon:f.jsx(f.Fragment,{children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243l-4.243-4.243"})}),SpinnerIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-11.667-11.667l3.181 3.183A8.25 8.25 0 0118.015 15a8.25 8.25 0 01-11.667 0l-3.181-3.183"}),IdentificationIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}),ArrowPathIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.667 0l3.181-3.183m-11.667-11.667l3.181 3.183A8.25 8.25 0 0118.015 15a8.25 8.25 0 01-11.667 0l-3.181-3.183"}),ChevronLeftIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}),ChevronRightIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}),ChevronDownIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"}),ShareIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 100-2.186m0 2.186a2.25 2.25 0 100-2.186"}),PlayCircleIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"})]}),UserCircleIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"}),GlobeAltIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 16.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 013 12c0-.778.099-1.533.284-2.253m0 0a11.953 11.953 0 0119.432 0"}),PhotoIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}),UploadIcon:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"}),ServerStackIcon:f.jsxs(f.Fragment,{children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 21H3a2.25 2.25 0 01-2.25-2.25V5.25A2.25 2.25 0 013 3h18a2.25 2.25 0 012.25 2.25v13.5A2.25 2.25 0 0121 21h-3.75m-10.5 0V12.75m10.5 0V21"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 9.75h.75"})]})},vB=Oe(Le.Bars3Icon),zi=Oe(Le.FolderIcon),Rn=Oe(Le.PlusIcon),Ko=Oe(Le.SearchIcon),ja=Oe(Le.CheckCircleIcon),Nh=Oe(Le.XCircleIcon),wO=Oe(Le.MinusCircleIcon),SO=Oe(Le.SlashCircleIcon),ah=Oe(Le.SparklesIcon),xB=Oe(Le.PaperClipIcon),fs=Oe(Le.CircleStackIcon),kh=Oe(Le.ChartPieIcon),hs=Oe(Le.ClipboardDocumentCheckIcon),Mu=Oe(Le.DocumentTextIcon),_a=Oe(Le.ClipboardDocumentSearchIcon),TS=Oe(Le.BeakerIcon),sh=Oe(Le.ShieldCheckIcon),Yo=Oe(Le.ExclamationTriangleIcon),oh=Oe(Le.ClockIcon),td=Oe(Le.XMarkIcon),Gy=Oe(Le.Cog6ToothIcon),Aa=Oe(Le.AcademicCapIcon),Ky=Oe(Le.ChartBarSquareIcon),Ih=Oe(Le.CalendarDaysIcon),nd=Oe(Le.UsersIcon),Ph=Oe(Le.LightBulbIcon),jr=Oe(Le.PencilIcon),Ar=Oe(Le.TrashIcon),Ql=Oe(Le.BuildingOffice2Icon),_O=Oe(Le.CheckBadgeIcon),AO=Oe(Le.MagnifyingGlassIcon),TO=Oe(Le.InformationCircleIcon),bB=Oe(Le.MoonIcon),wB=Oe(Le.SunIcon),SB=Oe(Le.BellIcon),_B=Oe(Le.EyeIcon),AB=Oe(Le.EyeSlashIcon),EO=Oe(Le.SpinnerIcon),CO=Oe(Le.IdentificationIcon),NO=Oe(Le.ArrowPathIcon),Pg=Oe(Le.ChevronLeftIcon),Dg=Oe(Le.ChevronRightIcon),Yy=Oe(Le.ChevronDownIcon),TB=Oe(Le.ShareIcon),kO=Oe(Le.PlayCircleIcon),EB=Oe(Le.UserCircleIcon),p1=Oe(Le.GlobeAltIcon),CB=Oe(Le.PhotoIcon),NB=Oe(Le.UploadIcon),kB=Oe(Le.ServerStackIcon),IB={success:f.jsx(ja,{className:"w-6 h-6 text-white"}),error:f.jsx(Nh,{className:"w-6 h-6 text-white"}),info:f.jsx(TO,{className:"w-6 h-6 text-white"})},PB={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"},DB=({message:t,onDismiss:e})=>(E.useEffect(()=>{const n=setTimeout(()=>{e(t.id)},5e3);return()=>clearTimeout(n)},[t,e]),f.jsxs("div",{className:`flex items-center p-4 rounded-lg shadow-lg text-white ${PB[t.type]}`,children:[f.jsx("div",{className:"flex-shrink-0",children:IB[t.type]}),f.jsx("div",{className:"mx-3 text-sm font-medium",children:t.message}),f.jsx("button",{onClick:()=>e(t.id),className:"ml-auto -mx-1.5 -my-1.5 p-1.5 rounded-lg inline-flex h-8 w-8 hover:bg-white/20",children:f.jsx(td,{className:"w-5 h-5"})})]})),RB=({children:t})=>{const[e,n]=E.useState([]),r=E.useCallback((d,m)=>{const p=Date.now();n(y=>[...y,{id:p,message:d,type:m}])},[]),i=E.useCallback(d=>{n(m=>m.filter(p=>p.id!==d))},[]),a=E.useCallback(d=>r(d,"success"),[r]),o=E.useCallback(d=>r(d,"error"),[r]),c=E.useCallback(d=>r(d,"info"),[r]),u=E.useMemo(()=>({success:a,error:o,info:c}),[a,o,c]);return f.jsxs(bO.Provider,{value:u,children:[t,f.jsx("div",{className:"fixed bottom-5 right-5 z-50 w-full max-w-xs space-y-4",children:e.map(d=>f.jsx(DB,{message:d,onDismiss:i},d.id))})]})},MB={appName:"AccreditEx",login:"Login",logout:"Logout",email:"Email",password:"Password",dashboard:"Dashboard",projects:"Projects",documents:"Documents",analytics:"Analytics",settings:"Settings",search:"Search",searchAnything:"Search anything...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",add:"Add",addNew:"Add New",name:"Name",description:"Description",status:"Status",actions:"Actions",close:"Close",areYouSure:"Are you sure?",confirmAction:"I understand, confirm action",confirmActionPrompt:'To confirm this action, please type "<strong>{text}</strong>" in the box below.',role:"Role",admin:"Admin",projectLead:"Project Lead",teamMember:"Team Member",auditor:"Auditor",notStarted:"Not Started",inProgress:"In Progress",onHold:"On Hold",completed:"Completed",finalized:"Finalized",open:"Open",closed:"Closed",compliant:"Compliant",partiallyCompliant:"Partially Compliant",nonCompliant:"Non-Compliant",notApplicable:"Not Applicable",compliance:"Compliance",myProfile:"My Profile",myTasks:"My Tasks",qualityInsights:"Quality Insights",calendar:"Calendar",riskHub:"Risk Hub",auditHub:"Audit Hub",documentControl:"Document Control",departments:"Departments",trainingHub:"Training Hub",qualityInsightsHub:"Quality Insights Hub",dashboardOverview:"Dashboard Overview",editProject:"Edit Project",userProfile:"User Profile",trainingDetailTitle:"Training Module",certificateTitle:"Certificate",mockSurvey:"Mock Survey",surveyReport:"Survey Report",analyticsHub:"Analytics Hub",designControls:"Design Controls",auditLog:"Audit Log",viewDetails:"View Details",loading:"Loading...",allStatuses:"All Statuses",unassigned:"Unassigned",assignedTo:"Assigned To",allAssignees:"All Assignees",previous:"Previous",next:"Next",preview:"Preview Mode",backToCurrent:"Back to Current Version",department:"Department",document:"Document",capa:"CAPA",timestamp:"Timestamp",user:"User",action:"Action",allProjects:"All Projects",newItem:"New Item",userNeed:"User Need",designInput:"Design Input",designOutput:"Design Output",noActivity:"No activity records found.",success:"Success",error:"Error",pleaseFillRequired:"Please fill all required fields.",settingsUpdated:"Settings updated successfully."},jB={appName:"",login:" ",logout:" ",email:" ",password:" ",dashboard:" ",projects:"",documents:"",analytics:"",settings:"",search:"",searchAnything:"    ...",save:"",cancel:"",edit:"",delete:"",add:"",addNew:" ",name:"",description:"",status:"",actions:"",close:"",areYouSure:"  ",confirmAction:"    ",confirmActionPrompt:'     "<strong>{text}</strong>"   .',role:"",admin:"",projectLead:" ",teamMember:" ",auditor:"",notStarted:" ",inProgress:" ",onHold:"",completed:"",finalized:"",open:"",closed:"",compliant:"",partiallyCompliant:" ",nonCompliant:" ",notApplicable:" ",compliance:"",myProfile:" ",myTasks:"",qualityInsights:" ",calendar:"",riskHub:" ",auditHub:" ",documentControl:" ",departments:"",trainingHub:" ",qualityInsightsHub:"  ",dashboardOverview:"    ",editProject:" ",userProfile:" ",trainingDetailTitle:" ",certificateTitle:"",mockSurvey:" ",surveyReport:" ",analyticsHub:" ",designControls:" ",auditLog:" ",viewDetails:" ",loading:" ...",allStatuses:" ",unassigned:" ",assignedTo:" ",allAssignees:"  ",previous:"",next:"",preview:" ",backToCurrent:"   ",department:"",document:"",capa:" ",timestamp:" ",user:"",action:"",allProjects:" ",newItem:" ",userNeed:" ",designInput:" ",designOutput:" ",noActivity:"     .",success:"",error:"",pleaseFillRequired:"    .",settingsUpdated:"   ."},OB={welcomeBack:"Welcome back, {name}!",dashboardGreeting:"Here's your quality and compliance overview for today.",quickActions:"Quick Actions",viewMyTasks:"View My Tasks",totalProjects:"Total Projects",inProgress:"In Progress",completed:"Completed",overallCompliance:"Overall Compliance",openCapaReports:"Open CAPA Reports",upcomingDeadlines:"Upcoming Deadlines (30 Days)",projectComplianceRate:"Project Compliance Rate (%)",complianceRate:"Compliance Rate",projectStatusDistribution:"Project Status Distribution",pendingTasks:"Pending Tasks",inProject:"in project",noOpenCapa:"No open CAPA reports. Great job maintaining compliance!",projectLeadDashboardTitle:"Project Lead Dashboard",myProjects:"My Projects",teamCompliance:"Team Compliance",teamMemberDashboardTitle:"My Dashboard",myOpenTasks:"My Open Tasks",myComplianceRate:"My Compliance Rate",tasksCompleted:"Tasks Completed",overdue:"Overdue",barChartTooltip:"Click to view project",daysRemaining:"Days Remaining",taskStatus:"Task Status",recentActivity:"Recent Activity"},LB={welcomeBack:"  {name}!",dashboardGreeting:"      .",quickActions:" ",viewMyTasks:" ",totalProjects:" ",inProgress:" ",completed:"",overallCompliance:" ",openCapaReports:" CAPA ",upcomingDeadlines:"   (30 )",projectComplianceRate:"   (%)",complianceRate:" ",projectStatusDistribution:"  ",pendingTasks:" ",inProject:" ",noOpenCapa:"   CAPA .      !",projectLeadDashboardTitle:"   ",myProjects:"",teamCompliance:" ",teamMemberDashboardTitle:"   ",myOpenTasks:" ",myComplianceRate:" ",tasksCompleted:" ",overdue:"",barChartTooltip:"  ",daysRemaining:" ",taskStatus:" ",recentActivity:" "},UB={analyticsHubDescription:"Gain data-driven insights into your accreditation landscape.",filterByDateRange:"Date Range",filterByProgram:"Program",filterByDepartment:"Department",allTime:"All Time",last30Days:"Last 30 Days",last90Days:"Last 90 Days",overallComplianceRate:"Overall Compliance Rate",avgMockSurveyScore:"Avg. Mock Survey Score",mostFailedStandard:"Most Failed Standard",complianceOverTime:"Compliance Over Time",departmentalPerformance:"Departmental Performance",top5ProblematicStandards:"Top 5 Problematic Standards",topProblematicStandardsChart:"Top Problematic Standards",failureCount:"Non-Compliant Items",noDataAvailable:"No data available for the selected filters.",notApplicableShort:"N/A",capaResolutionRate:"CAPA Resolution Rate",capaStatusAnalysis:"CAPA Status Analysis",totalTasksTooltip:"Total Tasks",controlPanel:"Control Panel",barChartTooltip:"Click bar to view department details",tasksCompliant:"compliant tasks",resolved:"resolved",capaRootCause:"CAPA Root Cause Analysis",taskStatusDistribution:"Task Status Distribution",tasks:"Tasks",totalActiveProjects:"Total Active Projects",totalOverdueTasks:"Total Overdue Tasks",taskDistributionByUser:"Open Task Distribution by User",taskCount:"Task Count",user:"User",allPrograms:"All Programs",allDepartments:"All Departments"},VB={analyticsHubDescription:"          .",filterByDateRange:" ",filterByProgram:"",filterByDepartment:"",allTime:" ",last30Days:" 30 ",last90Days:" 90 ",overallComplianceRate:"  ",avgMockSurveyScore:"   ",mostFailedStandard:"  ",complianceOverTime:"  ",departmentalPerformance:" ",top5ProblematicStandards:" 5  ",topProblematicStandardsChart:"  ",failureCount:"  ",noDataAvailable:"     .",notApplicableShort:"/",capaResolutionRate:"   ",capaStatusAnalysis:"   ",totalTasksTooltip:" ",controlPanel:" ",barChartTooltip:"     ",tasksCompliant:" ",resolved:" ",capaRootCause:"    CAPA",taskStatusDistribution:"  ",tasks:"",totalActiveProjects:"  ",totalOverdueTasks:"  ",taskDistributionByUser:"    ",taskCount:" ",user:"",allPrograms:" ",allDepartments:" "},FB={qualityInsightsDescription:"Strategic TQM dashboards for continuous improvement.",rootCauseAnalysisDashboard:"Root Cause Analysis Dashboard",competencyGapAnalysis:"Competency Gap Analysis",requiredCompetencies:"Required Competencies",staffWithCompetency:"Staff with Competency",gap:"Gap",compliantUsers:"Compliant Users",totalUsers:"Total Users",pendingEffectivenessChecks:"Pending Effectiveness Checks",pendingAcknowledgements:"Pending Document Acknowledgements",trainingEffectiveness:"Training Effectiveness Analysis",totalIssues:"Total Issues",trainingCompletionRate:"Training Completion Rate",issueDetails:"Issue Details",issueType:"Issue Type",rootCause:"Root Cause",aiQualityBriefing:"AI-Powered Quality Briefing",aiQualityBriefingDescription:"Get an instant, AI-generated executive summary of your organization's quality and compliance posture.",generateBriefing:"Generate Briefing",generatingBriefing:"Generating Briefing...",strengths:"Strengths",areasForImprovement:"Areas for Improvement",recommendations:"Recommendations",briefingError:"The AI briefing could not be generated. Please ensure your API key is configured correctly.",actionPlanError:"Failed to get AI suggestion. Please check your API key and try again.",rootCauseError:"Failed to get AI suggestion for root cause. Please try again."},BB={qualityInsightsDescription:"         .",rootCauseAnalysisDashboard:"    ",competencyGapAnalysis:"  ",requiredCompetencies:" ",staffWithCompetency:"   ",gap:"",compliantUsers:" ",totalUsers:" ",pendingEffectivenessChecks:"  ",pendingAcknowledgements:"  ",trainingEffectiveness:"  ",totalIssues:" ",trainingCompletionRate:"  ",issueDetails:" ",issueType:" ",rootCause:" ",aiQualityBriefing:"    ",aiQualityBriefingDescription:"              .",generateBriefing:" ",generatingBriefing:"  ...",strengths:" ",areasForImprovement:" ",recommendations:"",briefingError:"    .      API    .",actionPlanError:"   .     API   .",rootCauseError:"   .    ."},zB={month:"Month",agenda:"Agenda",year:"Year",today:"Today",noEventsForDay:"No events scheduled for this day.",noEventsForMonth:"No events scheduled for this month.",createEvent:"Create Event",editEvent:"Edit Event",eventDate:"Event Date",eventTitleEn:"Event Title (English)",eventTitleAr:"Event Title (Arabic)",eventDescriptionEn:"Description (English)",eventDescriptionAr:"Description (Arabic)",areYouSureDeleteEvent:"Are you sure you want to delete this event?",dueDate:"Due Date",review:"Review",complianceCalendar:"Compliance Calendar"},qB={month:"",agenda:"",year:"",today:"",noEventsForDay:"     .",noEventsForMonth:"     .",createEvent:" ",editEvent:" ",eventDate:" ",eventTitleEn:"  ()",eventTitleAr:"  ()",eventDescriptionEn:" ()",eventDescriptionAr:" ()",areYouSureDeleteEvent:"       ",dueDate:" ",review:"",complianceCalendar:" "},HB={accreditationProjects:"Accreditation Projects",projectsPageDescription:"Manage all your accreditation initiatives from a centralized hub.",createNewProject:"Create New Project",searchProjects:"Search projects...",noProjectsFound:"No Projects Found",noProjectsFoundMessage:"Get started by creating a new accreditation project.",createProjectDescription:"Fill in the details below to set up your new project.",projectName:"Project Name",projectDescription:"Project Description",accreditationProgram:"Accreditation Program",selectProgram:"Select a program",projectLead:"Project Lead",selectUser:"Select a user",startDate:"Start Date",targetEndDate:"Target End Date",createProject:"Create Project",projectCreatedSuccess:"Project created successfully!",projectDetails:"Project Details",finalizeProject:"Finalize Project",generateReport:"Generate Report",signedBy:"Signed by {name} on {date}",overallCompliance:"Overall Compliance",overview:"Overview",checklist:"Checklist",auditLog:"Audit Log",mockSurveys:"Mock Surveys",designControls:"Design Controls",searchChecklist:"Search checklist items or standard IDs...",standard:"Standard",actionPlan:"Action Plan",getAiSuggestion:"Suggest with AI",generating:"Generating...",evidence:"Evidence",uploadEvidence:"Upload Evidence",comments:"Comments",addComment:"Add a comment",projectFinalizedSuccess:"Project has been finalized successfully.",projectNotFound:"Project not found.",mockSurveysHub:"Mock Surveys Hub",mockSurveysHubDescription:"View and conduct all internal audits and mock surveys.",surveyDate:"Survey Date",surveyor:"Surveyor",noSurveys:"No Mock Surveys",noSurveysMessage:"Create a survey from a project's detail page to begin.",viewReport:"View Report",startSurvey:"Start Survey",surveyNotFound:"Survey not found.",conductingSurvey:"Conducting Survey",saveProgress:"Save Progress",finalizeSurvey:"Finalize & Score Survey",progressSaved:"Survey progress saved.",surveyFinalized:"Survey finalized successfully.",pass:"Pass",fail:"Fail",surveyorNotes:"Surveyor Notes...",overallScore:"Overall Score",detailedFindings:"Detailed Findings",selectProject:"Select a project"},$B={accreditationProjects:" ",projectsPageDescription:"        .",createNewProject:"  ",searchProjects:"  ...",noProjectsFound:"    ",noProjectsFoundMessage:"    .",createProjectDescription:"     .",projectName:" ",projectDescription:" ",accreditationProgram:" ",selectProgram:" ",projectLead:" ",selectUser:" ",startDate:" ",targetEndDate:"  ",createProject:" ",projectCreatedSuccess:"   !",projectDetails:" ",finalizeProject:" ",generateReport:" ",signedBy:"  {name}  {date}",overallCompliance:" ",overview:" ",checklist:" ",auditLog:" ",mockSurveys:" ",designControls:" ",searchChecklist:"      ...",standard:"",actionPlan:" ",getAiSuggestion:"  ",generating:" ...",evidence:"",uploadEvidence:" ",comments:"",addComment:" ",projectFinalizedSuccess:"   .",projectNotFound:"  .",mockSurveysHub:"  ",mockSurveysHubDescription:"       .",surveyDate:" ",surveyor:"",noSurveys:"   ",noSurveysMessage:"      .",viewReport:" ",startSurvey:" ",surveyNotFound:"  .",conductingSurvey:" ",saveProgress:" ",finalizeSurvey:"  ",progressSaved:"   .",surveyFinalized:"   .",pass:"",fail:"",surveyorNotes:" ...",overallScore:" ",detailedFindings:" ",selectProject:" "},GB={documentControlHubDescription:"Manage controlled documents, policies, and procedures.",documentName:"Document Name",version:"Version",reviewDate:"Review Date",approve:"Approve",documentType:"Document Type",policy:"Policy",procedure:"Procedure",report:"Report",evidence:"Evidence",processMap:"Process Map",noControlledDocuments:"No controlled documents found.",draft:"Draft",pendingReview:"Pending Review",approved:"Approved",rejected:"Rejected",archived:"Archived",addNewDocument:"Add New Document",documentNameEn:"Document Name (English)",documentNameAr:"Document Name (Arabic)",complianceSummaryReport:"Compliance Summary Report",reportGeneratedSuccess:"Report generated and added to documents.",editDocument:"Edit Document",viewMode:"View Mode",aiAssistant:"AI Assistant",selectStandard:"Generate from Standard...",improveWriting:"Improve Writing",translate:"Translate to other language",versionHistory:"Version History",errorGeneratingContent:"Error generating content from standard.",newVersionPrompt:"Editing an approved document will create a new draft version. The current approved version will be archived. Do you want to continue?",fileName:"File Name",requestApproval:"Request Approval",saveChanges:"Save Changes",generate:"Generate",totalDocuments:"Total Documents",drafts:"Drafts"},KB={documentControlHubDescription:"     .",documentName:" ",version:"",reviewDate:" ",approve:"",documentType:" ",policy:"",procedure:"",report:"",evidence:"",processMap:" ",noControlledDocuments:"      .",draft:"",pendingReview:" ",approved:"",rejected:"",archived:"",addNewDocument:"  ",documentNameEn:"  ()",documentNameAr:"  ()",complianceSummaryReport:"  ",reportGeneratedSuccess:"     .",editDocument:" ",viewMode:" ",aiAssistant:"  ",selectStandard:"  ...",improveWriting:" ",translate:"   ",versionHistory:" ",errorGeneratingContent:"     .",newVersionPrompt:"        .     .   ",fileName:" ",requestApproval:" ",saveChanges:" ",generate:"",totalDocuments:" ",drafts:""},YB={myTasksDescription:"A list of all tasks assigned to you across all projects.",taskDescription:"Task Description",project:"Project",pending:"Pending",noTasksAssigned:"You have no tasks assigned to you. Great job!",measuresCompliant:"{count} of {total} Measures Compliant",projectInvolvement:"Project Involvement",noProjectsAssigned:"This user is not yet involved in any projects.",searchTasks:"Search tasks..."},WB={myTasksDescription:"       .",taskDescription:" ",project:"",pending:"",noTasksAssigned:"    .  !",measuresCompliant:"{count}  {total}  ",projectInvolvement:"  ",noProjectsAssigned:"       .",searchTasks:"  ..."},JB={riskHubTitle:"Risk Management Hub",riskHubDescription:"Centralize risk assessment, incident reporting, and corrective actions.",riskRegister:"Risk Register",incidentReporting:"Incident Reporting",capaReports:"CAPA Reports",effectivenessChecks:"Effectiveness Checks",addNewRisk:"Add New Risk",riskMatrix:"Risk Matrix",riskTitle:"Risk Title",likelihood:"Likelihood",impact:"Impact",owner:"Owner",deleteRisk:"Delete Risk",areYouSureDeleteRisk:"Are you sure you want to delete this risk? This action cannot be undone.",mitigationPlan:"Mitigation Plan",rootCauseCategory:"Root Cause Category",selectCategory:"Select a category",processFailure:"Process Failure",humanError:"Human Error",equipmentMalfunction:"Equipment Malfunction",externalFactors:"External Factors",other:"Other",recommendedTraining:"Recommended Training",noTrainingRecommended:"No training recommended",mitigated:"Mitigated",reportNewIncident:"Report New Incident",incidentDate:"Incident Date",location:"Location",incidentType:"Incident Type",patientSafety:"Patient Safety",staffInjury:"Staff Injury",facilityIssue:"Facility Issue",medicationError:"Medication Error",severity:"Severity",minor:"Minor",moderate:"Moderate",severe:"Severe",sentinelEvent:"Sentinel Event",deleteIncident:"Delete Incident",areYouSureDeleteIncident:"Are you sure you want to delete this incident report?",editIncident:"Edit Incident Report",underInvestigation:"Under Investigation",capaReport:"CAPA Report",rootCauseAnalysis:"Root Cause Analysis",noCapaReports:"No CAPA reports found.",noEffectivenessChecks:"No pending effectiveness checks found.",completeCheck:"Complete Check",completeEffectivenessCheck:"Complete Effectiveness Check",effectivenessCheckNotes:"Effectiveness Check Notes",checkDueDate:"Check Due Date",source:"Source"},QB={riskHubTitle:"  ",riskHubDescription:"       .",riskRegister:" ",incidentReporting:"  ",capaReports:" CAPA",effectivenessChecks:" ",addNewRisk:"  ",riskMatrix:" ",riskTitle:" ",likelihood:"",impact:"",owner:"",deleteRisk:" ",areYouSureDeleteRisk:"             .",mitigationPlan:" ",rootCauseCategory:"  ",selectCategory:" ",processFailure:" ",humanError:" ",equipmentMalfunction:"  ",externalFactors:" ",other:"",recommendedTraining:"  ",noTrainingRecommended:"    ",mitigated:" ",reportNewIncident:"   ",incidentDate:" ",location:"",incidentType:" ",patientSafety:" ",staffInjury:" ",facilityIssue:"  ",medicationError:" ",severity:"",minor:"",moderate:"",severe:"",sentinelEvent:" ",deleteIncident:"  ",areYouSureDeleteIncident:"        ",editIncident:"  ",underInvestigation:" ",capaReport:" CAPA",rootCauseAnalysis:"  ",noCapaReports:"     CAPA.",noEffectivenessChecks:"      .",completeCheck:" ",completeEffectivenessCheck:"  ",effectivenessCheckNotes:"  ",checkDueDate:"  ",source:""},XB={departmentsHub:"Departments Hub",departmentsHubDescription:"Organize users and track performance by department.",addNewDepartment:"Add New Department",noDepartments:"No Departments Found",noDepartmentsMessage:"Create a new department to start organizing your teams.",teamMembers:"Team Members",tasksAssigned:"Tasks Assigned",editDepartment:"Edit Department",deleteDepartment:"Delete Department",areYouSureDeleteDepartment:"Are you sure you want to delete this department? Users in this department will become unassigned.",departmentNameEn:"Department Name (English)",departmentNameAr:"Department Name (Arabic)",departmentDetails:"Department Details",totalMembers:"Total Members",totalTasks:"Total Tasks",departmentMembers:"Department Members",noUsersInDepartment:"There are no users in this department.",searchByTask:"Search by task or standard ID...",noTasksForDepartment:"No tasks are currently assigned to this department.",assignedUsers:"Assigned Users"},ZB={departmentsHub:" ",departmentsHubDescription:"     .",addNewDepartment:"  ",noDepartments:"    ",noDepartmentsMessage:"     .",teamMembers:" ",tasksAssigned:" ",editDepartment:" ",deleteDepartment:" ",areYouSureDeleteDepartment:"              .",departmentNameEn:"  ()",departmentNameAr:"  ()",departmentDetails:" ",totalMembers:" ",totalTasks:" ",departmentMembers:" ",noUsersInDepartment:"     .",searchByTask:"    ...",noTasksForDepartment:"      .",assignedUsers:" "},e7={trainingPageDescription:"Manage and complete assigned training modules.",myTraining:"My Training",trainingAdministration:"Training Administration",pendingTraining:"Pending Training",completedTraining:"Completed Training",noPendingTraining:"You have no pending training assignments.",noCompletedTraining:"You have not completed any training yet.",trainingHubTitle:"Training Hub",assignTraining:"Assign Training",createNewTraining:"Create New Training",trainingTitle:"Training Title",quizQuestions:"Quiz Questions",areYouSureDeleteTraining:"Are you sure you want to delete this training program?",editTraining:"Edit Training Program",trainingDescription:"Training Description",content:"Content (HTML)",quizSection:"Quiz Section",passingScore:"Passing Score",addQuestion:"Add Question",addOption:"Add Option",trainingModule:"Training Module",selectTraining:"Select a training module",assignToUsers:"Assign to Specific Users (Optional)",assignToDepartments:"Assign to Departments (Optional)",assignmentDueDate:"Assignment Due Date (Optional)",assign:"Assign",pleaseFillRequired:"Please select a training module and at least one user or department.",trainingAssignedSuccess:"Training assigned successfully.",startTraining:"Start Training",continueTraining:"Continue Training",viewCertificate:"View Certificate",retakeQuiz:"Retake Quiz",submitAnswers:"Submit Answers",quizResults:"Quiz Results",yourScore:"Your Score",result:"Result",passed:"Passed",failed:"Failed",backToHub:"Back to Training Hub",quiz:"Quiz",statusNotStarted:"Not Started",statusInProgress:"In Progress",statusCompleted:"Completed",completedOn:"Completed on",score:"Score",dueOn:"Due on",certificateOfCompletion:"Certificate of Completion",thisCertifiesThat:"This certifies that",hasSuccessfullyCompleted:"has successfully completed the training module",on:"on",withAScoreOf:"with a score of",trainingHistory:"Training History",assignedOn:"Assigned on"},t7={trainingPageDescription:"    .",myTraining:"",trainingAdministration:" ",pendingTraining:" ",completedTraining:" ",noPendingTraining:"     .",noCompletedTraining:"    .",trainingHubTitle:" ",assignTraining:" ",createNewTraining:"  ",trainingTitle:" ",quizQuestions:" ",areYouSureDeleteTraining:"        ",editTraining:"  ",trainingDescription:" ",content:" (HTML)",quizSection:" ",passingScore:" ",addQuestion:" ",addOption:" ",trainingModule:" ",selectTraining:"  ",assignToUsers:"   ()",assignToDepartments:"  ()",assignmentDueDate:"   ()",assign:"",pleaseFillRequired:"         .",trainingAssignedSuccess:"   .",startTraining:" ",continueTraining:" ",viewCertificate:" ",retakeQuiz:" ",submitAnswers:" ",quizResults:" ",yourScore:"",result:"",passed:"",failed:"",backToHub:"   ",quiz:"",statusNotStarted:" ",statusInProgress:" ",statusCompleted:"",completedOn:" ",score:"",dueOn:" ",certificateOfCompletion:" ",thisCertifiesThat:"   ",hasSuccessfullyCompleted:"    ",on:"",withAScoreOf:"",trainingHistory:" ",assignedOn:" "},n7={general:"General",profile:"Profile",security:"Security",userManagement:"User Management",accreditationHub:"Accreditation Hub",competencies:"Competencies",data:"Data",about:"About",branding:"Branding",brandingDescription:"Customize the look and feel of your application.",appName:"Application Name",appLogo:"Application Logo",change:"Change",primaryColor:"Primary Color",loginPageGlobe:"Login Page Globe",loginPageGlobeDescription:"Customize the interactive globe on the login page.",glowColor:"Glow Color",darkness:"Darkness",saveChanges:"Save Changes",personalInformation:"Personal Information",personalInformationDescription:"Update your personal details.",updatePassword:"Update Password",toggleTheme:"Toggle theme"},r7={general:"",profile:" ",security:"",userManagement:" ",accreditationHub:" ",competencies:"",data:"",about:"",branding:" ",brandingDescription:"   .",appName:" ",appLogo:" ",change:"",primaryColor:" ",loginPageGlobe:"  ",loginPageGlobeDescription:"      .",glowColor:" ",darkness:"",personalInformation:" ",personalInformationDescription:"  .",updatePassword:"  ",passwordDescription:"          .",newPassword:"  ",confirmPassword:"   ",profileUpdated:"    .",passwordUpdated:"    .",passwordsDoNotMatch:"   .",passwordPolicy:"  ",passwordPolicyDescription:"     .",minLength:"  ",requireUppercase:"  ",requireNumber:" ",requireSymbol:" ",users:"",searchUsers:"    ...",allRoles:" ",addNewUser:"  ",editUser:" ",deleteUser:" ",areYouSureDeleteUser:"       {name}",userAdded:"   .",userUpdated:"   .",userDeleted:"   .",userEmail:" ",newPasswordOptional:"   ()",leaveBlank:"      ",lastAdminRoleChange:"     .",accreditationHubTitle:" ",addNewProgram:"  ",editProgram:" ",deleteProgram:" ",areYouSureDeleteProgram:"              .",programName:" ",programDescriptionEn:" ()",programDescriptionAr:" ()",totalStandards:" ",manageStandards:" ",programStandards:" ",addStandard:" ",editStandard:" ",deleteStandard:" ",areYouSureDeleteStandard:"       ",standardId:" ",section:"",criticality:"",high:"",medium:"",low:"",subStandards:" ",addSubStandard:"  ",import:"",importStandards:" ",importToProgram:"  ",standardsFound:"  {count}   .",competencyLibrary:" ",addCompetency:" ",editCompetency:" ",deleteCompetency:" ",areYouSureDeleteCompetency:"       ",competencyNameEn:"  ()",competencyNameAr:"  ()",competencyDescriptionEn:" ()",competencyDescriptionAr:" ()",selectCompetency:" ",issueDate:" ",expiryDate:"  ",competenciesCerts:" ",active:"",expired:" ",expiringSoon:" ",noCompetencies:"        .",dataManagement:" ",dataManagementDescription:"         .",exportData:" ",exportDataDescription:"      JSON .",export:"",dataExported:"   .",importData:" ",importDataDescription:"    JSON   .       .",importStarted:" .     .",resetData:"   ",resetDataDescription:"             .      .",reset:" ",confirmReset:"             .",appVersion:" ",toggleTheme:" "},i7={welcomeToAccreditEx:"Welcome to AccreditEx!",onboardingWelcomeMessage:"Your all-in-one solution for healthcare accreditation management. Let's take a quick tour of the key features to get you started.",onboardingDashboardTitle:"The Dashboard",onboardingDashboardMessage:"Get a high-level overview of your projects, compliance rates, and upcoming deadlines right when you log in. It's your command center for quality management.",onboardingProjectsTitle:"Projects Hub",onboardingProjectsMessage:"Create, manage, and track all your accreditation projects. Each project comes with a detailed checklist based on your selected standards.",onboardingAccreditationTitle:"Accreditation Hub",onboardingAccreditationMessage:"This is your central library for all accreditation programs (like JCI, DNV) and their standards. You can add, edit, and manage them here.",onboardingUsersTitle:"User & Department Management",onboardingUsersMessage:"Easily manage users, assign roles, and organize them into departments to streamline task assignments and track performance.",onboardingAiTitle:"AI-Powered Assistance",onboardingAiMessage:"Leverage the power of AI to suggest action plans for non-compliant items and help draft policy documents, saving you time and effort.",getStarted:"Get Started"},a7={welcomeToAccreditEx:"   !",onboardingWelcomeMessage:"     .       .",onboardingDashboardTitle:" ",onboardingDashboardMessage:"              .     .",onboardingProjectsTitle:" ",onboardingProjectsMessage:"       .            .",onboardingAccreditationTitle:" ",onboardingAccreditationMessage:"       ( JCI DNV) .     .",onboardingUsersTitle:"  ",onboardingUsersMessage:"            .",onboardingAiTitle:"   ",onboardingAiMessage:"                    .",getStarted:" "},s7={eSignature:"Electronic Signature",enterPasswordToSign:"Enter your password to sign",signatureStatementProject:"By signing, I attest that I have reviewed this project and confirm its contents are accurate and complete to the best of my knowledge.",signatureStatementDocument:"By signing, I attest that I have reviewed this document and approve it for use.",signAndFinalize:"Sign & Finalize",signAndApprove:"Sign & Approve",incorrectPassword:"Incorrect password. Please try again.",commandPalette:"Command Palette",searchAnything:"Search for projects, users, documents...",noResults:"No results found.",goTo:"Go to...",notifications:"Notifications",notificationPreferences:"Notification Preferences",emailNotifications:"Email Notifications",noNewNotifications:"No new notifications.",markAsRead:"Mark as read",markAllAsRead:"Mark all as read",newTaskAssignment:'New Task: You have been assigned to "{task}" in project "{project}".',documentReviewUpcoming:'Document Review: "{document}" is due for review soon.',capaOverdue:'CAPA Overdue: CAPA for standard "{standard}" in project "{project}" is overdue.',linkLiveData:"Link Live Data",linkedDataSources:"Linked Data Sources",syncWithHris:"Sync with HRIS",syncing:"Syncing...",syncSuccess:"Competencies synced successfully!",liveDataTooltip:"This metric can be linked to a live data source (e.g., FHIR) for real-time updates.",dataHub:"Data Hub",dataHubDescription:"Orchestrate data flow and manage system integrations.",integrationStrategy:"Integration Strategy",integrationStrategyDescription:"AccreditEx is designed with an API-first, standards-based approach to ensure seamless integration into your existing hospital information ecosystem. We leverage modern standards like FHIR to reduce manual data entry and provide real-time insights.",fhirFoundation:"FHIR Foundation",fhirFoundationDescription:"Our platform speaks the universal language of modern healthcare data: FHIR (Fast Healthcare Interoperability Resources). This allows AccreditEx to connect to any FHIR-compliant LIS, HIS, or data warehouse, creating a single source of truth for compliance evidence.",exampleResource:"Example FHIR Resource:",apiArchitecture:"API-Driven Architecture",apiArchitectureDescription:"AccreditEx exposes a secure, well-documented RESTful API. Your hospital's IT department can use a standard integration engine (e.g., Mirth Connect, Rhapsody) to transform data from internal systems into the FHIR format and push it directly to our platform, ensuring data integrity and security.",exampleApiCall:"Example API Call:",apiServices:"API Services",apiStatus:"API Status: Operational",connected:"Status: Connected",lastSynced:"Last Synced: 5 mins ago",runHealthCheck:"Run Health Check",checking:"Checking...",lastChecked:"Last checked",liveDataFeed:"Live Data Feed",fhirResourceReceived:"FHIR Resource Received",newObservation:"New Observation (Lab Result)",patientRecordUpdated:"Patient Record Updated",measureReportReceived:"MeasureReport (Quality Metric)",waitingForData:"Waiting for incoming data...",selectDate:"Select a date"},o7={eSignature:" ",enterPasswordToSign:"   ",signatureStatementProject:"            .",signatureStatementDocument:"        .",signAndFinalize:" ",signAndApprove:" ",incorrectPassword:"   .    .",commandPalette:" ",searchAnything:"    ...",noResults:"    .",goTo:" ...",notifications:"",notificationPreferences:" ",emailNotifications:"  ",noNewNotifications:"   .",markAsRead:"  ",markAllAsRead:"    ",newTaskAssignment:' :    "{task}"   "{project}".',documentReviewUpcoming:' :  "{document}"   .',capaOverdue:' CAPA:    "{standard}"   "{project}" .',linkLiveData:"  ",linkedDataSources:"  ",syncWithHris:"     ",syncing:" ...",syncSuccess:"   !",liveDataTooltip:"       ( FHIR)      .",dataHub:" ",dataHubDescription:"     .",integrationStrategy:" ",integrationStrategyDescription:"  AccreditEx                 .       FHIR         .",fhirFoundation:" FHIR",fhirFoundationDescription:"       : FHIR (     ).    AccreditEx    LIS  HIS      FHIR       .",exampleResource:"   FHIR:",apiArchitecture:"     ",apiArchitectureDescription:" AccreditEx     RESTful   .             ( Mirth Connect  Rhapsody)        FHIR         .",exampleApiCall:"   API:",apiServices:" API",apiStatus:" API:  ",connected:": ",lastSynced:" :  5 ",runHealthCheck:"  ",checking:" ...",lastChecked:" ",liveDataFeed:"  ",fhirResourceReceived:"   FHIR",newObservation:"  ( )",patientRecordUpdated:"   ",measureReportReceived:"    ( )",waitingForData:"   ...",selectDate:" "},l7={auditHubDescription:"Manage internal audit plans and track audit results.",newAuditPlan:"New Audit Plan",areYouSureDeleteAuditPlan:"Are you sure you want to delete this audit plan?",auditPlans:"Audit Plans",runAudit:"Run Audit",noAuditPlans:"No audit plans have been created yet.",editAuditPlan:"Edit Audit Plan",planName:"Plan Name",targetProject:"Target Project",frequency:"Frequency",weekly:"Weekly",monthly:"Monthly",itemsToAudit:"Items to Audit",assignAuditor:"Assign Auditor",auditLogDescription:"View a comprehensive, time-stamped log of all significant activities across all projects.",searchLogs:"Search logs by user, action, or project...",designControlsHubDescription:"A central repository for all design control items across all projects.",noDesignControls:"No design control items have been created yet.",deleteAuditPlan:"Delete Audit Plan"},c7={auditHubDescription:"      .",newAuditPlan:"  ",areYouSureDeleteAuditPlan:"         ",auditPlans:" ",runAudit:" ",noAuditPlans:"      .",editAuditPlan:"  ",planName:" ",targetProject:" ",frequency:"",weekly:"",monthly:"",itemsToAudit:"  ",assignAuditor:" ",auditLogDescription:"          .",searchLogs:"        ...",designControlsHubDescription:"         .",noDesignControls:"        .",deleteAuditPlan:"  "},u7={en:{...MB,...OB,...UB,...FB,...zB,...HB,...GB,...YB,...JB,...XB,...e7,...n7,...i7,...s7,...l7},ar:{...jB,...LB,...VB,...BB,...qB,...$B,...KB,...WB,...QB,...ZB,...t7,...r7,...a7,...o7,...c7}},ce=()=>{const{lang:t}=E.useContext(m1);return{t:n=>u7[t][n]||n,lang:t,dir:t==="ar"?"rtl":"ltr"}};var Gk=["x","y","z"],ns=function(t){Object.assign(this,{uniforms:{},geometry:{vertices:[{x:0,y:0,z:0}]},mode:0,modifiers:{},attributes:[],multiplier:1,buffers:[]}),Object.assign(this,t),this.prepareProgram(),this.prepareUniforms(),this.prepareAttributes()};ns.prototype.compileShader=function(t,e){var n=this.gl.createShader(t);return this.gl.shaderSource(n,e),this.gl.compileShader(n),n},ns.prototype.prepareProgram=function(){var t=this.gl,e=this.vertex,n=this.fragment,r=t.createProgram();t.attachShader(r,this.compileShader(35633,e)),t.attachShader(r,this.compileShader(35632,n)),t.linkProgram(r),t.useProgram(r),this.program=r},ns.prototype.prepareUniforms=function(){for(var t=Object.keys(this.uniforms),e=0;e<t.length;e+=1){var n=this.gl.getUniformLocation(this.program,t[e]);this.uniforms[t[e]].location=n}},ns.prototype.prepareAttributes=function(){this.geometry.vertices!==void 0&&this.attributes.push({name:"aPosition",size:3}),this.geometry.normal!==void 0&&this.attributes.push({name:"aNormal",size:3}),this.attributeKeys=[];for(var t=0;t<this.attributes.length;t+=1)this.attributeKeys.push(this.attributes[t].name),this.prepareAttribute(this.attributes[t])},ns.prototype.prepareAttribute=function(t){for(var e=this.geometry,n=this.multiplier,r=e.vertices,i=e.normal,a=new Float32Array(n*r.length*t.size),o=0;o<n;o+=1)for(var c=t.data&&t.data(o,n),u=o*r.length*t.size,d=0;d<r.length;d+=1)for(var m=0;m<t.size;m+=1){var p=this.modifiers[t.name];a[u]=p!==void 0?p(c,d,m,this):t.name==="aPosition"?r[d][Gk[m]]:t.name==="aNormal"?i[d][Gk[m]]:c[m],u+=1}this.attributes[this.attributeKeys.indexOf(t.name)].data=a,this.prepareBuffer(this.attributes[this.attributeKeys.indexOf(t.name)])},ns.prototype.prepareBuffer=function(t){var e=t.data,n=t.name,r=t.size,i=this.gl.createBuffer();this.gl.bindBuffer(34962,i),this.gl.bufferData(34962,e,35044);var a=this.gl.getAttribLocation(this.program,n);this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,r,5126,!1,0,0),this.buffers[this.attributeKeys.indexOf(t.name)]={buffer:i,location:a,size:r}},ns.prototype.render=function(t){var e=this,n=this.uniforms,r=this.multiplier,i=this.gl;i.useProgram(this.program);for(var a=0;a<this.buffers.length;a+=1){var o=this.buffers[a],c=o.location,u=o.buffer,d=o.size;i.enableVertexAttribArray(c),i.bindBuffer(34962,u),i.vertexAttribPointer(c,d,5126,!1,0,0)}Object.keys(t).forEach(function(m){n[m].value=t[m].value}),Object.keys(n).forEach(function(m){var p=n[m];e.uniformMap[p.type](p.location,p.value)}),i.drawArrays(this.mode,0,r*this.geometry.vertices.length),this.onRender&&this.onRender(this)},ns.prototype.destroy=function(){for(var t=0;t<this.buffers.length;t+=1)this.gl.deleteBuffer(this.buffers[t].buffer);this.gl.deleteProgram(this.program),this.gl=null};var Pl=function(t){var e=this,n=t||{},r=n.canvas;r===void 0&&(r=document.querySelector("canvas"));var i=n.context;i===void 0&&(i={});var a=n.contextType;a===void 0&&(a="experimental-webgl");var o=n.settings;o===void 0&&(o={});var c=r.getContext(a,Object.assign({alpha:!1,antialias:!1},i));Object.assign(this,{gl:c,canvas:r,uniforms:{},instances:new Map,shouldRender:!0}),Object.assign(this,{devicePixelRatio:1,clearColor:[1,1,1,1],position:{x:0,y:0,z:2},clip:[.001,100]}),Object.assign(this,o),this.uniformMap={float:function(u,d){return c.uniform1f(u,d)},vec2:function(u,d){return c.uniform2fv(u,d)},vec3:function(u,d){return c.uniform3fv(u,d)},vec4:function(u,d){return c.uniform4fv(u,d)},mat2:function(u,d){return c.uniformMatrix2fv(u,!1,d)},mat3:function(u,d){return c.uniformMatrix3fv(u,!1,d)},mat4:function(u,d){return c.uniformMatrix4fv(u,!1,d)}},c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),c.getContextAttributes().alpha===!1&&(c.clearColor.apply(c,this.clearColor),c.clearDepth(1)),this.onSetup&&this.onSetup(c),window.addEventListener("resize",function(){return e.resize()}),this.resize(),this.render()};Pl.prototype.resize=function(){var t=this.gl,e=this.canvas,n=this.devicePixelRatio,r=this.position;e.width=e.clientWidth*n,e.height=e.clientHeight*n;var i=t.drawingBufferWidth,a=t.drawingBufferHeight,o=i/a;t.viewport(0,0,i,a);var c=Math.tan(Math.PI/180*22.5),u=[1,0,0,0,0,1,0,0,0,0,1,0,r.x,r.y,(o<1?1:o)*-r.z,1];this.uniforms.uProjectionMatrix={type:"mat4",value:[.5/c,0,0,0,0,o/c*.5,0,0,0,0,-(this.clip[1]+this.clip[0])/(this.clip[1]-this.clip[0]),-1,0,0,-2*this.clip[1]*(this.clip[0]/(this.clip[1]-this.clip[0])),0]},this.uniforms.uViewMatrix={type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},this.uniforms.uModelMatrix={type:"mat4",value:u}},Pl.prototype.toggle=function(t){t!==this.shouldRender&&(this.shouldRender=t!==void 0?t:!this.shouldRender,this.shouldRender&&this.render())},Pl.prototype.render=function(){var t=this;this.gl.clear(16640),this.instances.forEach(function(e){e.render(t.uniforms)}),this.onRender&&this.onRender(this),this.shouldRender&&requestAnimationFrame(function(){return t.render()})},Pl.prototype.add=function(t,e){e===void 0&&(e={uniforms:{}}),e.uniforms===void 0&&(e.uniforms={}),Object.assign(e.uniforms,JSON.parse(JSON.stringify(this.uniforms))),Object.assign(e,{gl:this.gl,uniformMap:this.uniformMap});var n=new ns(e);return this.instances.set(t,n),n},Pl.prototype.remove=function(t){var e=this.instances.get(t);e!==void 0&&(e.destroy(),this.instances.delete(t))},Pl.prototype.destroy=function(){var t=this;this.instances.forEach(function(e,n){e.destroy(),t.instances.delete(n)}),this.toggle(!1)};var IO="phi",PO="theta",Dl="mapSamples",DO="mapBrightness",RO="baseColor",MO="markerColor",jO="glowColor",Il="markers",OO="diffuse",Kk="devicePixelRatio",LO="dark",UO="offset",VO="scale",FO="opacity",BO="mapBaseBrightness",Yk={[IO]:"z",[PO]:"A",[Dl]:"k",[DO]:"D",[RO]:"S",[MO]:"T",[jO]:"y",[OO]:"E",[LO]:"F",[UO]:"x",[VO]:"B",[FO]:"U",[BO]:"G"},{PI:Kf,sin:ES,cos:CS,sqrt:Wk,atan2:d7,floor:lu,max:f7,pow:h7,log2:m7}=Math,Jk=2.23606797749979,Qk=1.618033988749895,p7=.7202100452062783,wb=6.283185307179586,Xk=3.8832220774509327,Sb=.618033988749895,g7=(t,e)=>{let n=[t[0],t[2],t[1]],r=1/e,i=f7(2,lu(m7(Jk*e*Kf*(1-n[2]*n[2]))*p7)),a=h7(Qk,i)/Jk,o=[lu(a+.5),lu(a*Qk+.5)],c=[(o[0]+1)*Sb%1*wb-Xk,(o[1]+1)*Sb%1*wb-Xk],u=[-2*o[0],-2*o[1]],d=[d7(n[1],n[0]),n[2]-1],m=c[0]*u[1]-u[0]*c[1],p=[lu((u[1]*d[0]-c[1]*(d[1]*e+1))/m),lu((-u[0]*d[0]+c[0]*(d[1]*e+1))/m)],y=Kf,x=[0,0,0];for(let _=0;_<4;_++){let T=o[0]*(p[0]+_%2)+o[1]*(p[1]+lu(_*.5));if(T>e)continue;let C=T*Sb%1*wb,N=1-2*T*r,M=Wk(1-N*N),P=[CS(C)*M,ES(C)*M,N],L=Wk((n[0]-P[0])**2+(n[1]-P[1])**2+(n[2]-P[2])**2);L<y&&(y=L,x=P)}return[x[0],x[2],x[1]]},_b=(t,e)=>[].concat(...t.map(n=>{let[r,i]=n.location;r=r*Kf/180,i=i*Kf/180-Kf;let a=CS(r),o=[-a*CS(i),ES(r),a*ES(i)];return[...g7(o,e),n.size,...n.color?[...n.color,1]:[0,0,0,0]]}),[0,0,0,0,0,0,0,0]),y7=(t,e)=>{let n=(a,o,c)=>({type:a,value:typeof e[o]>"u"?c:e[o]}),r=t.getContext("webgl2")?"webgl2":t.getContext("webgl")?"webgl":"experimental-webgl",i=new Pl({canvas:t,contextType:r,context:{alpha:!0,stencil:!1,antialias:!0,depth:!1,preserveDrawingBuffer:!1,...e.context},settings:{[Kk]:e[Kk]||1,onSetup:a=>{let o=a.RGB,c=a.UNSIGNED_BYTE,u=a.TEXTURE_2D,d=a.createTexture();a.bindTexture(u,d),a.texImage2D(u,0,o,1,1,0,o,c,new Uint8Array([0,0,0,0]));let m=new Image;m.onload=()=>{a.bindTexture(u,d),a.texImage2D(u,0,o,o,c,m),a.generateMipmap(u);let p=a.getParameter(a.CURRENT_PROGRAM),y=a.getUniformLocation(p,"H");a.texParameteri(u,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(u,a.TEXTURE_MAG_FILTER,a.NEAREST),a.uniform1i(y,0)},m.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAACAAQAAAADMzoqnAAAAAXNSR0IArs4c6QAABA5JREFUeNrV179uHEUAx/Hf3JpbF+E2VASBsmVKTBcpKJs3SMEDcDwBiVJAAewYEBUivIHT0uUBIt0YCovKD0CRjUC4QfHYh8hYXu+P25vZ2Zm9c66gMd/GJ/tz82d3bk8GN4SrByYF2366FNTACIAkivVAAazQdnf3MvAlbNUQfOPAdQDvSAimMWhwy4I2g4SU+Kp04ISLpPBAKLxPyic3O/CCi+Y7rUJbiodcpDOFY7CgxCEXmdYD2EYK2s5lApOx5pEDDYCUwM1XdJUwBV11QQMg59kePSCaPAASQMEL2hwo6TJFgxpg+TgC2ymXPbuvc40awr3D1QCFfbH9kcoqAOkZozpQo0aqAGQRKCog/+tjkgbNFEtg2FffBvBGlSxHoAaAa1u6X4PBAwDiR8FFsrQgeUhfJTSALaB9jy5NCybJPn1SVFiWk7ywN+KzhH1aKAuydhGkbEF4lWohLXDXavlyFgHY7LBnLRdlAP6BS5Cc8RfVDXbkwN/oIvmY+6obbNeBP0JwTuMGu9gTzy1Q4RS/cWpfzszeYwd+CAFrtBW/Hur0gLbJGlD+/OjVwe/drfBxkbbg63dndEDfiEBlAd7ac0BPe1D6Jd8dfbLH+RI0OzseFB5s01/M+gMdAeluLOCAuaUA9Lezo/vSgXoCX9rtEiXnp7Q1W/CNyWcd8DXoS6jH/YZ5vAJEWY2dXFQe2TUgaFaNejCzJ98g6HnlVrsE58sDcYqg+9XY75fPqdoh/kRQWiXKg8MWlJQxUFMPjqnyujhFBE7UxIMjyszk0QwQlFsezImsyvUYYYVED2pk6m0Tg8T04Fwjk2kdAwSACqlM6gRRt3vQYAFGX0Ah7Ebx1H+MDRI5ui0QldH4j7FGcm90XdxD2Jg1AOEAVAKhEFXSn4cKUELurIAKwJ3MArypPscQaLhJFICJ0ohjDySAdH8AhDtCiTuMycH8CXzhH9jUACAO5uMhoAwA5i+T6WAKmmAqnLy80wxHqIPFYpqCwxGaYLt4Dyievg5kEoVEUAhs6pqKgFtDQYOuaXypaWKQfIuwwoGSZgfLsu/XAtI8cGN+h7Cc1A5oLOMhwlIPXuhu48AIvsSBkvtV9wsJRKCyYLfq5lTrQMFd1a262oqBck9K1V0YjQg0iEYYgpS1A9GlXQV5cykwm4A7BzVsxQqo7E+zCegO7Ma7yKgsuOcfKbMBwLC8wvVNYDsANYalEpOAa6zpWjTeMKGwEwC1CiQewJc5EKfgy7GmRAZA4vUVGwE2dPM/g0xuAInE/yG5aZ8ISxWGfYigUVbdyBElTHh2uCwGdfCkOLGgQVBh3Ewp+/QK4CDlR5Ws/Zf7yhCf8pH7vinWAvoVCQ6zz0NX5V/6GkAVV+2/5qsJ/gU8bsxpM8IeAQAAAABJRU5ErkJggg=="}}});return i.add("",{vertex:"attribute vec3 aPosition;uniform mat4 uProjectionMatrix;uniform mat4 uModelMatrix;uniform mat4 uViewMatrix;void main(){gl_Position=uProjectionMatrix*uModelMatrix*uViewMatrix*vec4(aPosition,1.);}",fragment:"precision highp float;uniform vec2 w,x;uniform vec3 S,T,y;uniform vec4 u[64*2];uniform float z,A,k,B,C,D,E,F,U,G;uniform sampler2D H;float I=1./k;mat3 J(float a,float b){float c=cos(a),d=cos(b),e=sin(a),f=sin(b);return mat3(d,f*e,-f*c,0.,c,e,f,d*-e,d*c);}vec3 K(vec3 c,out float v){c=c.xzy;float p=max(2.,floor(log2(2.236068*k*3.141593*(1.-c.z*c.z))*.72021));vec2 g=floor(pow(1.618034,p)/2.236068*vec2(1,1.618034)+.5),d=fract((g+1.)*.618034)*6.283185-3.883222,e=-2.*g,f=vec2(atan(c.y,c.x),c.z-1.),q=floor(vec2(e.y*f.x-d.y*(f.y*k+1.),-e.x*f.x+d.x*(f.y*k+1.))/(d.x*e.y-e.x*d.y));float n=3.141593;vec3 r;for(float h=0.;h<4.;h+=1.){vec2 s=vec2(mod(h,2.),floor(h*.5));float j=dot(g,q+s);if(j>k)continue;float a=j,b=0.;if(a>=524288.)a-=524288.,b+=.803894;if(a>=262144.)a-=262144.,b+=.901947;if(a>=131072.)a-=131072.,b+=.950973;if(a>=65536.)a-=65536.,b+=.475487;if(a>=32768.)a-=32768.,b+=.737743;if(a>=16384.)a-=16384.,b+=.868872;if(a>=8192.)a-=8192.,b+=.934436;if(a>=4096.)a-=4096.,b+=.467218;if(a>=2048.)a-=2048.,b+=.733609;if(a>=1024.)a-=1024.,b+=.866804;if(a>=512.)a-=512.,b+=.433402;if(a>=256.)a-=256.,b+=.216701;if(a>=128.)a-=128.,b+=.108351;if(a>=64.)a-=64.,b+=.554175;if(a>=32.)a-=32.,b+=.777088;if(a>=16.)a-=16.,b+=.888544;if(a>=8.)a-=8.,b+=.944272;if(a>=4.)a-=4.,b+=.472136;if(a>=2.)a-=2.,b+=.236068;if(a>=1.)a-=1.,b+=.618034;float l=fract(b)*6.283185,i=1.-2.*j*I,m=sqrt(1.-i*i);vec3 o=vec3(cos(l)*m,sin(l)*m,i);float t=length(c-o);if(t<n)n=t,r=o;}v=n;return r.xzy;}void main(){vec2 f=1./w,a=(gl_FragCoord.xy*f*2.-1.)/B-x*vec2(1,-1)*f;a.x*=w.x*f.y;float c=dot(a,a);vec4 t=vec4(0);float j=0.;int V=int(C);if(c<=.64){float b;vec4 e=vec4(0);vec3 v=vec3(0,0,1),l=normalize(vec3(a,sqrt(.64-c)));mat3 L=J(A,z);float g=dot(l,v);vec3 m=l*L,h=K(m,b);float n=asin(h.y),i=acos(-h.x/cos(n));i=h.z<0.?-i:i;float M=max(texture2D(H,vec2(i*.5/3.141593,-(n/3.141593+.5))).x,G),N=smoothstep(8e-3,0.,b),o=pow(g,E)*D,p=M*N*o,W=mix((1.-p)*pow(g,.4),p,F)+.1;e+=vec4(S*W,1.);float X=0.;for(int d=0;d<128;d+=2){if(d>=V)break;vec4 q=u[d],O=u[d+1];vec3 P=q.xyz;float r=q.w;vec3 Y=P-m;b=length(Y);if(b<r){float Q=r*.5,s=smoothstep(Q,0.,b);X+=s,e.xyz=O.w>.5?mix(e.xyz,O.xyz,s*o):mix(e.xyz,T,s*o);}}e.xyz+=pow(1.-g,4.)*y,t+=e*(1.+U)*.5,j=pow(dot(normalize(vec3(-a,sqrt(1.-c))),vec3(0,0,1)),4.)*smoothstep(0.,1.,.2/(c-.64));}else{float R=sqrt(.2/(c-.64));j=smoothstep(.5,1.,R/(R+1.));}gl_FragColor=t+vec4(j*y,j);}",uniforms:{w:{type:"vec2",value:[e.width,e.height]},z:n("float",IO),A:n("float",PO),k:n("float",Dl),D:n("float",DO),G:n("float",BO),S:n("vec3",RO),T:n("vec3",MO),E:n("float",OO),y:n("vec3",jO),F:n("float",LO),u:{type:"vec4",value:_b(e[Il],e[Dl])},C:{type:"float",value:e[Il].length*2},x:n("vec2",UO,[0,0]),B:n("float",VO,1),U:n("float",FO,1)},mode:4,geometry:{vertices:[{x:-100,y:100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0},{x:100,y:-100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0}]},onRender:({uniforms:a})=>{let o={};if(e.onRender){o=e.onRender(o)||o;for(let c in Yk)o[c]!==void 0&&(a[Yk[c]].value=o[c]);if(o[Il]!==void 0){let c=o[Dl]!==void 0?o[Dl]:a.k.value;a.u.value=_b(o[Il],c),a.C.value=o[Il].length}o.width&&o.height&&(a.w.value=[o.width,o.height]),o[Dl]!==void 0&&(a.u.value=_b(o[Il]||e[Il],o[Dl]))}}}),i};function v7(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const zO=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),x7=typeof window<"u",b7=x7?E.useLayoutEffect:E.useEffect,Dh=t=>t;let qO=Dh;const g1=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},y1=t=>t*1e3,bu=t=>t/1e3,w7={useManualTiming:!1};function S7(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){a.has(d)&&(u.schedule(d),t()),d(o)}const u={schedule:(d,m=!1,p=!1)=>{const x=p&&r?e:n;return m&&a.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(c),e.clear(),r=!1,i&&(i=!1,u.process(d))}};return u}const qp=["read","resolveKeyframes","update","preRender","render","postRender"],_7=40;function A7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=qp.reduce((N,M)=>(N[M]=S7(a),N),{}),{read:c,resolveKeyframes:u,update:d,preRender:m,render:p,postRender:y}=o,x=()=>{const N=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,_7),1),i.timestamp=N,i.isProcessing=!0,c.process(i),u.process(i),d.process(i),m.process(i),p.process(i),y.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},_=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:qp.reduce((N,M)=>{const P=o[M];return N[M]=(L,j=!1,V=!1)=>(n||_(),P.schedule(L,j,V)),N},{}),cancel:N=>{for(let M=0;M<qp.length;M++)o[qp[M]].cancel(N)},state:i,steps:o}}const{schedule:lh,cancel:T7,state:ch}=A7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dh,!0),Zk=t=>!!t,HO=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"];new Set(HO);const E7=t=>e=>typeof e=="string"&&e.startsWith(t),C7=E7("var(--"),N7=t=>C7(t)?k7.test(t.split("/*")[0].trim()):!1,k7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xl=(t,e,n)=>n>e?e:n<t?t:n,$O={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},GO={...$O,transform:t=>Xl(0,1,t)},I7=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),eI=I7("%"),NS=2e4;function KO(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<NS;)e+=n,r=t.next(e);return e>=NS?1/0:e}function YO(t){return typeof t=="function"}const P7=t=>Array.isArray(t)&&typeof t[0]=="number",D7=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(g1(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};let pg;function R7(){pg=void 0}const zl={now:()=>(pg===void 0&&zl.set(ch.isProcessing||w7.useManualTiming?ch.timestamp:performance.now()),pg),set:t=>{pg=t,queueMicrotask(R7)}};function M7(t,e){t.indexOf(e)===-1&&t.push(e)}function j7(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class O7{constructor(){this.subscriptions=[]}add(e){return M7(this.subscriptions,e),()=>j7(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function WO(t,e){return e?t*(1e3/e):0}const tI=30,L7=t=>!isNaN(parseFloat(t));class U7{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=zl.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=zl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=L7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new O7);const r=this.events[e].add(n);return e==="change"?()=>{r(),lh.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tI);return WO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function V7(t,e){return new U7(t,e)}const JO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,F7=1e-7,B7=12;function z7(t,e,n,r,i){let a,o,c=0;do o=e+(n-e)/2,a=JO(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>F7&&++c<B7);return o}function Rh(t,e,n,r){if(t===e&&n===r)return Dh;const i=a=>z7(a,0,1,t,n);return a=>a===0||a===1?a:JO(i(a),e,r)}const QO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XO=t=>e=>1-t(1-e),ZO=Rh(.33,1.53,.69,.99),v1=XO(ZO),q7=QO(v1),H7=t=>(t*=2)<1?.5*v1(t):.5*(2-Math.pow(2,-10*(t-1))),x1=t=>1-Math.sin(Math.acos(t)),$7=XO(x1),G7=QO(x1),Yf=t=>Math.round(t*1e5)/1e5,e5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function K7(t){return t==null}const Y7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,b1=(t,e)=>n=>!!(typeof n=="string"&&Y7.test(n)&&n.startsWith(t)||e&&!K7(n)&&Object.prototype.hasOwnProperty.call(n,e)),t5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,c]=r.match(e5);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},W7=t=>Xl(0,255,t),Ab={...$O,transform:t=>Math.round(W7(t))},Ll={test:b1("rgb","red"),parse:t5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ab.transform(t)+", "+Ab.transform(e)+", "+Ab.transform(n)+", "+Yf(GO.transform(r))+")"};function J7(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kS={test:b1("#"),parse:J7,transform:Ll.transform},pu={test:b1("hsl","hue"),parse:t5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+eI.transform(Yf(e))+", "+eI.transform(Yf(n))+", "+Yf(GO.transform(r))+")"},uh={test:t=>Ll.test(t)||kS.test(t)||pu.test(t),parse:t=>Ll.test(t)?Ll.parse(t):pu.test(t)?pu.parse(t):kS.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ll.transform(t):pu.transform(t)},Q7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function X7(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(e5))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Q7))===null||n===void 0?void 0:n.length)||0)>0}const n5="number",r5="color",Z7="var",ez="var(",nI="${}",tz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rg(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(tz,u=>(uh.test(u)?(r.color.push(a),i.push(r5),n.push(uh.parse(u))):u.startsWith(ez)?(r.var.push(a),i.push(Z7),n.push(u)):(r.number.push(a),i.push(n5),n.push(parseFloat(u))),++a,nI)).split(nI);return{values:n,split:c,indexes:r,types:i}}function i5(t){return Rg(t).values}function a5(t){const{split:e,types:n}=Rg(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const c=n[o];c===n5?a+=Yf(i[o]):c===r5?a+=uh.transform(i[o]):a+=i[o]}return a}}const nz=t=>typeof t=="number"?0:t;function rz(t){const e=i5(t);return a5(t)(e.map(nz))}const s5={test:X7,parse:i5,createTransformer:a5,getAnimatableNone:rz},iz=new Set(["x","y","z"]),az=HO.filter(t=>!iz.has(t));function sz(t){const e=[];return az.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ql=new Set;let IS=!1,PS=!1;function o5(){if(PS){const t=Array.from(ql).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=sz(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}PS=!1,IS=!1,ql.forEach(t=>t.complete()),ql.clear()}function l5(){ql.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(PS=!0)})}function oz(){l5(),o5()}class lz{constructor(e,n,r,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ql.add(this),IS||(IS=!0,lh.read(l5),lh.resolveKeyframes(o5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ql.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ql.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(s5.test(t)||t==="0")&&!t.startsWith("url("));function cz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function uz(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=rI(i,e),c=rI(a,e);return!o||!c?!1:cz(t)||(n==="spring"||YO(n))&&r}const dz=t=>t!==null;function c5(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(dz),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const fz=40;class hz{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=zl.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>fz?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&oz(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=zl.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:o,onComplete:c,onUpdate:u,isGenerator:d}=this.options;if(!d&&!uz(e,r,i,a))if(o)this.options.duration=0;else{u&&u(c5(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Wy=(t,e,n)=>t+(e-t)*n;function Tb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;i=Tb(u,c,t+1/3),a=Tb(u,c,t),o=Tb(u,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Mg(t,e){return n=>n>0?e:t}const Eb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pz=[kS,Ll,pu],gz=t=>pz.find(e=>e.test(t));function iI(t){const e=gz(t);if(!e)return!1;let n=e.parse(t);return e===pu&&(n=mz(n)),n}const aI=(t,e)=>{const n=iI(t),r=iI(e);if(!n||!r)return Mg(t,e);const i={...n};return a=>(i.red=Eb(n.red,r.red,a),i.green=Eb(n.green,r.green,a),i.blue=Eb(n.blue,r.blue,a),i.alpha=Wy(n.alpha,r.alpha,a),Ll.transform(i))},yz=(t,e)=>n=>e(t(n)),w1=(...t)=>t.reduce(yz),DS=new Set(["none","hidden"]);function vz(t,e){return DS.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xz(t,e){return n=>Wy(t,e,n)}function S1(t){return typeof t=="number"?xz:typeof t=="string"?N7(t)?Mg:uh.test(t)?aI:Sz:Array.isArray(t)?u5:typeof t=="object"?uh.test(t)?aI:bz:Mg}function u5(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>S1(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function bz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=S1(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function wz(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],c=t.indexes[o][i[o]],u=(n=t.values[c])!==null&&n!==void 0?n:0;r[a]=u,i[o]++}return r}const Sz=(t,e)=>{const n=s5.createTransformer(e),r=Rg(t),i=Rg(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?DS.has(t)&&!i.values.length||DS.has(e)&&!r.values.length?vz(t,e):w1(u5(wz(r,i),i.values),n):Mg(t,e)};function d5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wy(t,e,n):S1(t)(t,e)}const _z=5;function f5(t,e,n){const r=Math.max(e-_z,0);return WO(n-t(r),e-r)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Cb=.001;function Az({duration:t=nn.duration,bounce:e=nn.bounce,velocity:n=nn.velocity,mass:r=nn.mass}){let i,a,o=1-e;o=Xl(nn.minDamping,nn.maxDamping,o),t=Xl(nn.minDuration,nn.maxDuration,bu(t)),o<1?(i=d=>{const m=d*o,p=m*t,y=m-n,x=RS(d,o),_=Math.exp(-p);return Cb-y/x*_},a=d=>{const p=d*o*t,y=p*n+n,x=Math.pow(o,2)*Math.pow(d,2)*t,_=Math.exp(-p),T=RS(Math.pow(d,2),o);return(-i(d)+Cb>0?-1:1)*((y-x)*_)/T}):(i=d=>{const m=Math.exp(-d*t),p=(d-n)*t+1;return-Cb+m*p},a=d=>{const m=Math.exp(-d*t),p=(n-d)*(t*t);return m*p});const c=5/t,u=Ez(i,a,c);if(t=y1(t),isNaN(u))return{stiffness:nn.stiffness,damping:nn.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const Tz=12;function Ez(t,e,n){let r=n;for(let i=1;i<Tz;i++)r=r-t(r)/e(r);return r}function RS(t,e){return t*Math.sqrt(1-e*e)}const Cz=["duration","bounce"],Nz=["stiffness","damping","mass"];function sI(t,e){return e.some(n=>t[n]!==void 0)}function kz(t){let e={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...t};if(!sI(t,Nz)&&sI(t,Cz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Xl(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:nn.mass,stiffness:i,damping:a}}else{const n=Az(t);e={...e,...n,mass:nn.mass},e.isResolvedFromDuration=!0}return e}function h5(t=nn.visualDuration,e=nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:d,mass:m,duration:p,velocity:y,isResolvedFromDuration:x}=kz({...n,velocity:-bu(n.velocity||0)}),_=y||0,T=d/(2*Math.sqrt(u*m)),C=o-a,N=bu(Math.sqrt(u/m)),M=Math.abs(C)<5;r||(r=M?nn.restSpeed.granular:nn.restSpeed.default),i||(i=M?nn.restDelta.granular:nn.restDelta.default);let P;if(T<1){const j=RS(N,T);P=V=>{const I=Math.exp(-T*N*V);return o-I*((_+T*N*C)/j*Math.sin(j*V)+C*Math.cos(j*V))}}else if(T===1)P=j=>o-Math.exp(-N*j)*(C+(_+N*C)*j);else{const j=N*Math.sqrt(T*T-1);P=V=>{const I=Math.exp(-T*N*V),R=Math.min(j*V,300);return o-I*((_+T*N*C)*Math.sinh(R)+j*C*Math.cosh(R))/j}}const L={calculatedDuration:x&&p||null,next:j=>{const V=P(j);if(x)c.done=j>=p;else{let I=0;T<1&&(I=j===0?y1(_):f5(P,j,V));const R=Math.abs(I)<=r,U=Math.abs(o-V)<=i;c.done=R&&U}return c.value=c.done?o:V,c},toString:()=>{const j=Math.min(KO(L),NS),V=D7(I=>L.next(j*I).value,j,30);return j+"ms "+V}};return L}function oI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:d=.5,restSpeed:m}){const p=t[0],y={done:!1,value:p},x=R=>c!==void 0&&R<c||u!==void 0&&R>u,_=R=>c===void 0?u:u===void 0||Math.abs(c-R)<Math.abs(u-R)?c:u;let T=n*e;const C=p+T,N=o===void 0?C:o(C);N!==C&&(T=N-p);const M=R=>-T*Math.exp(-R/r),P=R=>N+M(R),L=R=>{const U=M(R),F=P(R);y.done=Math.abs(U)<=d,y.value=y.done?N:F};let j,V;const I=R=>{x(y.value)&&(j=R,V=h5({keyframes:[y.value,_(y.value)],velocity:f5(P,R,y.value),damping:i,stiffness:a,restDelta:d,restSpeed:m}))};return I(0),{calculatedDuration:null,next:R=>{let U=!1;return!V&&j===void 0&&(U=!0,L(R),I(R)),j!==void 0&&R>=j?V.next(R-j):(!U&&L(R),y)}}}const Iz=Rh(.42,0,1,1),Pz=Rh(0,0,.58,1),m5=Rh(.42,0,.58,1),Dz=t=>Array.isArray(t)&&typeof t[0]!="number",Rz={linear:Dh,easeIn:Iz,easeInOut:m5,easeOut:Pz,circIn:x1,circInOut:G7,circOut:$7,backIn:v1,backInOut:q7,backOut:ZO,anticipate:H7},lI=t=>{if(P7(t)){qO(t.length===4);const[e,n,r,i]=t;return Rh(e,n,r,i)}else if(typeof t=="string")return Rz[t];return t};function Mz(t,e,n){const r=[],i=n||d5,a=t.length-1;for(let o=0;o<a;o++){let c=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Dh:e;c=w1(u,c)}r.push(c)}return r}function jz(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(qO(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Mz(e,r,i),u=c.length,d=m=>{if(o&&m<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const y=g1(t[p],t[p+1],m);return c[p](y)};return n?m=>d(Xl(t[0],t[a-1],m)):d}function Oz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=g1(0,e,r);t.push(Wy(n,1,i))}}function Lz(t){const e=[0];return Oz(e,t.length-1),e}function Uz(t,e){return t.map(n=>n*e)}function Vz(t,e){return t.map(()=>e||m5).splice(0,t.length-1)}function jg({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Dz(r)?r.map(lI):lI(r),a={done:!1,value:e[0]},o=Uz(n&&n.length===e.length?n:Lz(e),t),c=jz(o,e,{ease:Array.isArray(i)?i:Vz(e,i)});return{calculatedDuration:t,next:u=>(a.value=c(u),a.done=u>=t,a)}}const Fz=t=>{const e=({timestamp:n})=>t(n);return{start:()=>lh.update(e,!0),stop:()=>T7(e),now:()=>ch.isProcessing?ch.timestamp:zl.now()}},Bz={decay:oI,inertia:oI,tween:jg,keyframes:jg,spring:h5},zz=t=>t/100;class qz extends hz{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:u}=this.options;u&&u()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||lz,c=(u,d)=>this.onKeyframesResolved(u,d);this.resolver=new o(a,c,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,c=YO(n)?n:Bz[n]||jg;let u,d;c!==jg&&typeof e[0]!="number"&&(u=w1(zz,d5(e[0],e[1])),e=[0,100]);const m=c({...this.options,keyframes:e});a==="mirror"&&(d=c({...this.options,keyframes:[...e].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=KO(m));const{calculatedDuration:p}=m,y=p+i,x=y*(r+1)-i;return{generator:m,mirroredGenerator:d,mapPercentToKeyframes:u,calculatedDuration:p,resolvedDuration:y,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:u,calculatedDuration:d,totalDuration:m,resolvedDuration:p}=r;if(this.startTime===null)return a.next(0);const{delay:y,repeat:x,repeatType:_,repeatDelay:T,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const N=this.currentTime-y*(this.speed>=0?1:-1),M=this.speed>=0?N<0:N>m;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let P=this.currentTime,L=a;if(x){const R=Math.min(this.currentTime,m)/p;let U=Math.floor(R),F=R%1;!F&&R>=1&&(F=1),F===1&&U--,U=Math.min(U,x+1),!!(U%2)&&(_==="reverse"?(F=1-F,T&&(F-=T/p)):_==="mirror"&&(L=o)),P=Xl(0,1,F)*p}const j=M?{done:!1,value:u[0]}:L.next(P);c&&(j.value=c(j.value));let{done:V}=j;!M&&d!==null&&(V=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return I&&i!==void 0&&(j.value=c5(u,this.options,i)),C&&C(j.value),I&&this.finish(),j}get duration(){const{resolved:e}=this;return e?bu(e.calculatedDuration):0}get time(){return bu(this.currentTime)}set time(e){e=y1(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=bu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Fz,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}function Hz(t){return new qz(t)}function $z(t){const e=v7(()=>V7(t)),{isStatic:n}=E.useContext(zO);if(n){const[,r]=E.useState(t);E.useEffect(()=>e.on("change",r),[])}return e}function cI(t){return typeof t=="number"?t:parseFloat(t)}function Gz(t,e={}){const{isStatic:n}=E.useContext(zO),r=E.useRef(null),i=$z(Zk(t)?cI(t.get()):t),a=E.useRef(i.get()),o=E.useRef(()=>{}),c=()=>{const d=r.current;d&&d.time===0&&d.sample(ch.delta),u(),r.current=Hz({keyframes:[i.get(),a.current],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:o.current})},u=()=>{r.current&&r.current.stop()};return E.useInsertionEffect(()=>i.attach((d,m)=>n?m(d):(a.current=d,o.current=m,lh.update(c),i.get()),u),[JSON.stringify(e)]),b7(()=>{if(Zk(t))return t.on("change",d=>i.set(cI(d)))},[i]),i}const Nb=t=>{if(!t)return[0,0,0];const e=parseInt(t.slice(1,3),16)/255,n=parseInt(t.slice(3,5),16)/255,r=parseInt(t.slice(5,7),16)/255;return[e,n,r]},Kz=({width:t,height:e,baseColor:n,markerColor:r,glowColor:i,scale:a,darkness:o,lightIntensity:c,rotationSpeed:u,userLocation:d})=>{const m=E.useRef(null),p=(M,P)=>[Math.PI/180*M,Math.PI/180*P],y=E.useRef(null),x=E.useRef(0),_=Gz(0,{mass:1,stiffness:280,damping:40}),T=E.useMemo(()=>Nb(n),[n]),C=E.useMemo(()=>Nb(r),[r]),N=E.useMemo(()=>Nb(i),[i]);return E.useEffect(()=>{let M=0,P=0;const L=()=>m.current&&(P=m.current.offsetWidth);if(window.addEventListener("resize",L),L(),!m.current)return;let j=0,V=.3;const R=[{location:[37.7595,-122.4367],size:.03},{location:[40.7128,-74.006],size:.1},{location:[51.5074,-.1278],size:.1},{location:[25.2048,55.2708],size:.1},{location:[35.6762,139.6503],size:.1},{location:[-33.8688,151.2093],size:.05}].map(F=>({...F,offset:Math.random()*Math.PI*2}));if(d){const[F,B]=p(d.lat,d.long);j=B,V=F,R.push({location:[d.lat,d.long],size:.1,isUser:!0,offset:0})}const U=y7(m.current,{devicePixelRatio:2,width:P*2,height:P*2,phi:j,theta:V,dark:o,diffuse:c,mapSamples:16e3,mapBrightness:6,baseColor:T,markerColor:C,glowColor:N,markers:R,scale:a,onRender:F=>{F.phi=M+_.get(),M+=u,F.width=P*2,F.height=P*2;const B=Date.now()/1500;R.forEach(q=>{q.isUser?q.size=.1+Math.abs(Math.sin(B*3))*.08:q.size=.05+Math.sin(B*2+q.offset)*.02})}});return setTimeout(()=>m.current&&(m.current.style.opacity="1")),()=>{U.destroy(),window.removeEventListener("resize",L)}},[T,C,N,a,o,c,u,_,d]),f.jsx("div",{style:{width:t,height:e,aspectRatio:1,maxWidth:"100%",maxHeight:"100%"},children:f.jsx("canvas",{ref:m,onPointerDown:M=>{y.current=M.clientX-x.current,m.current&&(m.current.style.cursor="grabbing")},onPointerUp:()=>{y.current=null,m.current&&(m.current.style.cursor="grab")},onPointerOut:()=>{y.current=null,m.current&&(m.current.style.cursor="grab")},onMouseMove:M=>{if(y.current!==null){const P=M.clientX-y.current;x.current=P,_.set(P/200)}},onTouchMove:M=>{if(y.current!==null&&M.touches[0]){const P=M.touches[0].clientX-y.current;x.current=P,_.set(P/100)}},style:{width:"100%",height:"100%",cursor:"grab",contain:"layout paint size",opacity:0,transition:"opacity 1s ease"}})})},Yz=({onLogin:t,isLoggingIn:e})=>{const{t:n}=ce(),{appSettings:r}=Rt(),[i,a]=E.useState("e.reed@healthcare.com"),[o,c]=E.useState("password123"),[u,d]=E.useState(!1),m=p=>{p.preventDefault(),t(i,o)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-center mb-8",children:[r!=null&&r.logoUrl?f.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-12"}):f.jsx(ed,{className:"h-12 w-12 text-brand-primary"}),f.jsxs("h1",{className:"text-4xl font-bold ml-3",children:[f.jsx("span",{className:"text-brand-text-primary dark:text-dark-brand-text-primary",children:"Accredit"}),f.jsx("span",{className:"text-brand-primary",children:"Ex"})]})]}),f.jsx("h2",{className:"text-2xl font-semibold text-center text-brand-text-primary dark:text-dark-brand-text-primary",children:n("login")}),f.jsx("p",{className:"text-sm text-center text-brand-text-secondary dark:text-dark-brand-text-secondary mt-2 mb-8",children:n("welcomeBack")}),f.jsxs("form",{onSubmit:m,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("email")}),f.jsx("input",{type:"email",id:"email",value:i,onChange:p=>a(p.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-primary focus:border-brand-primary sm:text-sm bg-white dark:bg-gray-700 dark:text-white",required:!0,autoComplete:"email"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("password")}),f.jsxs("div",{className:"relative mt-1",children:[f.jsx("input",{type:u?"text":"password",id:"password",value:o,onChange:p=>c(p.target.value),className:"block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-primary focus:border-brand-primary sm:text-sm bg-white dark:bg-gray-700 dark:text-white",required:!0,autoComplete:"current-password"}),f.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400",children:u?f.jsx(AB,{className:"h-5 w-5"}):f.jsx(_B,{className:"h-5 w-5"})})]})]}),f.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-brand-primary hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary disabled:bg-indigo-400",children:e?f.jsx(EO,{className:"animate-spin h-5 w-5 text-white"}):n("login")})]})]})},Wz=({onLogin:t})=>{ce();const{appSettings:e}=Rt(),{isLoggingIn:n}=Pn(),[r,i]=E.useState();return E.useEffect(()=>{navigator.geolocation.getCurrentPosition(a=>i({lat:a.coords.latitude,long:a.coords.longitude}),()=>console.warn("Could not get user location for globe."))},[]),e?f.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-2",children:[f.jsxs("div",{className:"relative hidden lg:flex items-center justify-center bg-dark-brand-background dot-grid",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/50 to-transparent"}),f.jsx("div",{className:"relative z-10 w-full h-full max-w-2xl max-h-screen flex items-center justify-center",children:f.jsx(Kz,{width:800,height:800,...e.globeSettings,userLocation:r})})]}),f.jsx("div",{className:"flex flex-col items-center justify-center bg-brand-surface dark:bg-dark-brand-surface p-8",children:f.jsx("div",{className:"w-full max-w-sm",children:f.jsx(Yz,{onLogin:t,isLoggingIn:n})})})]}):null},Jz=({onComplete:t})=>{const{t:e,dir:n}=ce(),[r,i]=E.useState(0),a=[{icon:ed,titleKey:"welcomeToAccreditEx",descriptionKey:"onboardingWelcomeMessage"},{icon:kh,titleKey:"onboardingDashboardTitle",descriptionKey:"onboardingDashboardMessage"},{icon:zi,titleKey:"onboardingProjectsTitle",descriptionKey:"onboardingProjectsMessage"},{icon:sh,titleKey:"onboardingAccreditationTitle",descriptionKey:"onboardingAccreditationMessage"},{icon:nd,titleKey:"onboardingUsersTitle",descriptionKey:"onboardingUsersMessage"},{icon:ah,titleKey:"onboardingAiTitle",descriptionKey:"onboardingAiMessage"}],o=a[r].icon,c=r===a.length-1,u=()=>i(m=>Math.min(m+1,a.length-1)),d=()=>i(m=>Math.max(m-1,0));return f.jsx("div",{className:"min-h-screen bg-brand-background dark:bg-dark-brand-background flex flex-col items-center justify-center p-4 transition-colors duration-300",children:f.jsxs("div",{className:"w-full max-w-2xl bg-brand-surface dark:bg-dark-brand-surface rounded-2xl shadow-2xl overflow-hidden animate-[scaleIn_0.5s_ease-out_forwards]",children:[f.jsx("div",{className:"p-8 sm:p-12 text-center",children:f.jsxs("div",{className:"animate-[fadeInUp_0.5s_ease-out]",children:[f.jsx(o,{className:"w-16 h-16 mx-auto text-brand-primary"}),f.jsx("h1",{className:"text-3xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary mt-6",children:e(a[r].titleKey)}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-4 max-w-md mx-auto",children:e(a[r].descriptionKey)})]},r)}),f.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[f.jsx("div",{className:"flex items-center gap-2",children:a.map((m,p)=>f.jsx("button",{onClick:()=>i(p),className:`w-2 h-2 rounded-full transition-colors ${p===r?"bg-brand-primary scale-125":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400"}`,"aria-label":`Go to step ${p+1}`},p))}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("button",{onClick:d,disabled:r===0,className:"px-4 py-2 text-sm font-semibold text-brand-text-secondary dark:text-dark-brand-text-secondary rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n==="ltr"?f.jsx(Pg,{className:"w-4 h-4"}):f.jsx(Dg,{className:"w-4 h-4"}),f.jsx("span",{children:e("previous")})]}),c?f.jsx("button",{onClick:t,className:"px-6 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-indigo-700 transition-colors shadow-lg",children:e("getStarted")}):f.jsxs("button",{onClick:u,className:"px-4 py-2 text-sm font-semibold text-white bg-brand-primary rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[f.jsx("span",{children:e("next")}),n==="ltr"?f.jsx(Dg,{className:"w-4 h-4"}):f.jsx(Pg,{className:"w-4 h-4"})]})]})]})]})})},Qz={dashboard:kh,analytics:Ky,qualityInsights:Ph,calendar:Ih,projects:zi,projectDetail:zi,createProject:zi,editProject:zi,documentControl:Mu,myTasks:hs,risk:Yo,auditHub:_a,dataHub:fs,departments:Ql,departmentDetail:Ql,trainingHub:Aa,trainingDetail:Aa,certificate:Aa,standards:sh,mockSurvey:_a,surveyReport:_a,settings:Gy,userProfile:nd},Xz=({navigation:t})=>{const{t:e}=ce(),n=()=>{let a="";switch(t.view){case"dashboard":a=e("dashboardOverview");break;case"projects":a=e("accreditationProjects");break;case"projectDetail":a=e("projectDetails");break;case"createProject":a=e("createNewProject");break;case"editProject":a=e("editProject");break;case"standards":a=e("programStandards");break;case"myTasks":a=e("myTasks");break;case"departments":a=e("departmentsHub");break;case"departmentDetail":a=e("departmentDetails");break;case"settings":switch(t.section){case"users":a=e("userManagement");break;case"accreditationHub":a=e("accreditationHubTitle");break;case"security":a=e("security");break;case"general":a=e("general");break;case"profile":a=e("profile");break;case"competencies":a=e("competencies");break;case"data":a=e("dataManagement");break;case"about":a=e("about");break;default:a=e("settings")}break;case"userProfile":a=e("userProfile");break;case"trainingHub":a=e("trainingHubTitle");break;case"trainingDetail":a=e("trainingDetailTitle");break;case"certificate":a=e("certificateTitle");break;case"mockSurvey":a=e("mockSurvey");break;case"surveyReport":a=e("surveyReport");break;case"analytics":a=e("analyticsHub");break;case"calendar":a=e("complianceCalendar");break;case"risk":a=e("riskHubTitle");break;case"auditHub":a=e("auditHub");break;case"documentControl":a=e("documentControl");break;case"qualityInsights":a=e("qualityInsightsHub");break;case"dataHub":a=e("dataHub");break;default:a="AccreditEx"}const o={users:nd,accreditationHub:p1,competencies:CO};let c=Qz[t.view];return t.view==="settings"&&t.section&&o[t.section]&&(c=o[t.section]),{title:a,Icon:c}},{title:r,Icon:i}=n();return f.jsxs("div",{className:"flex items-center gap-3",children:[i&&f.jsx(i,{className:"h-6 w-6 text-brand-primary hidden sm:block"}),f.jsx("h1",{className:"text-xl font-semibold text-brand-text-primary dark:text-dark-brand-text-primary ltr:sm:ml-0 rtl:sm:mr-0 ltr:ml-2 rtl:mr-2 truncate",children:r})]})},Zz=({onOpenCommandPalette:t})=>{const{t:e}=ce(),{lang:n,toggleLang:r}=Bi.useContext(m1),{theme:i,toggleTheme:a}=Ti();return Bi.useEffect(()=>{const o=c=>{(c.ctrlKey||c.metaKey)&&c.key==="k"&&(c.preventDefault(),t())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t]),f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",children:[f.jsx(AO,{className:"h-5 w-5"}),f.jsx("span",{className:"hidden md:inline",children:e("searchAnything")}),f.jsx("kbd",{className:"hidden md:inline font-sans text-xs text-slate-400 dark:text-slate-500 border border-slate-300 dark:border-slate-700 rounded-md px-1.5 py-0.5",children:"Ctrl K"})]}),f.jsx("button",{onClick:r,className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline hidden sm:block",children:n==="en"?"":"English"}),f.jsx("button",{onClick:a,className:"text-brand-text-secondary dark:text-dark-brand-text-secondary hover:text-brand-primary-600 dark:hover:text-white p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":e("toggleTheme"),children:i==="light"?f.jsx(bB,{className:"h-5 w-5"}):f.jsx(wB,{className:"h-5 w-5"})})]})},eq=({isOpen:t,onClose:e,notifications:n,setNavigation:r,onMarkAsRead:i})=>{const{t:a,lang:o}=ce();if(!t)return null;const c=d=>{i(d.id),r(d.link),e()},u=n.filter(d=>!d.read);return f.jsxs("div",{className:"absolute top-full ltr:right-0 rtl:left-0 mt-2 w-80 bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-2xl border border-brand-border dark:border-dark-brand-border z-50 animate-[fadeInUp_0.2s_ease-out]",onClick:d=>d.stopPropagation(),children:[f.jsxs("div",{className:"p-3 border-b border-brand-border dark:border-dark-brand-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-semibold",children:a("notifications")}),u.length>0&&f.jsx("button",{onClick:()=>i("all"),className:"text-xs text-brand-primary hover:underline",children:a("markAllAsRead")})]}),f.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length>0?n.map(d=>f.jsxs("div",{onClick:()=>c(d),className:`p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer border-b border-brand-border dark:border-dark-brand-border last:border-b-0 ${d.read?"":"bg-indigo-50 dark:bg-indigo-900/20"}`,children:[f.jsx("p",{className:`text-sm ${d.read?"":"font-semibold"}`,children:d.message[o]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(d.timestamp).toLocaleString()})]},d.id)):f.jsx("p",{className:"text-sm text-center text-gray-500 p-8",children:a("noNewNotifications")})})]})},tq=({notifications:t,setNavigation:e,onMarkAsRead:n,navigation:r})=>{const[i,a]=E.useState(!1),o=Bi.useRef(null),c=E.useMemo(()=>t.filter(u=>!u.read).length,[t]);return E.useEffect(()=>{const u=d=>{o.current&&!o.current.contains(d.target)&&a(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),E.useEffect(()=>{a(!1)},[r]),f.jsxs("div",{className:"relative",ref:o,children:[f.jsxs("button",{onClick:()=>a(!i),className:"relative text-brand-text-secondary dark:text-dark-brand-text-secondary hover:text-brand-primary-600 dark:hover:text-white p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800","aria-haspopup":"true","aria-expanded":i,"aria-controls":"notification-center",id:"notification-button",children:[f.jsx(SB,{className:"h-5 w-5"}),c>0&&f.jsx("span",{className:"absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-brand-surface dark:ring-dark-brand-surface"})]}),f.jsx(eq,{isOpen:i,onClose:()=>a(!1),notifications:t,setNavigation:e,onMarkAsRead:n})]})},nq=({onLogout:t,setNavigation:e})=>{const{currentUser:n}=Pn(),{t:r}=ce(),[i,a]=E.useState(!1),o=E.useRef(null);if(E.useEffect(()=>{const u=d=>{o.current&&!o.current.contains(d.target)&&a(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),!n)return null;const c=u=>{e(u),a(!1)};return f.jsxs("div",{className:"relative",ref:o,children:[f.jsxs("button",{onClick:()=>a(!i),className:"flex items-center space-x-2 rtl:space-x-reverse focus:outline-none",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-brand-primary to-indigo-700 text-white flex items-center justify-center font-bold",children:n.name.charAt(0)}),f.jsxs("div",{className:"hidden sm:block text-left",children:[f.jsx("div",{className:"text-sm font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:n.name}),f.jsx("div",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n.role})]})]}),i&&f.jsxs("div",{className:"absolute top-full ltr:right-0 rtl:left-0 mt-2 w-48 bg-brand-surface dark:bg-dark-brand-surface rounded-md shadow-2xl border border-brand-border dark:border-dark-brand-border z-50 animate-[fadeInUp_0.2s_ease-out]",children:[f.jsxs("div",{className:"p-2",children:[f.jsx("button",{onClick:()=>c({view:"userProfile",userId:n.id}),className:"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:r("myProfile")}),f.jsx("button",{onClick:()=>c({view:"settings"}),className:"w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:r("settings")})]}),f.jsx("div",{className:"border-t border-brand-border dark:border-dark-brand-border p-2",children:f.jsx("button",{onClick:t,className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20",children:r("logout")})})]})]})},rq=({navigation:t,notifications:e,onToggleMobileMenu:n,onOpenCommandPalette:r,setNavigation:i,onMarkAsRead:a,onLogout:o})=>{const[c,u]=Bi.useState(navigator.onLine);return Bi.useEffect(()=>{const d=()=>u(!0),m=()=>u(!1);return window.addEventListener("online",d),window.addEventListener("offline",m),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",m)}},[]),f.jsxs("header",{className:"h-16 bg-brand-surface dark:bg-dark-brand-surface border-b border-brand-border dark:border-dark-brand-border flex items-center justify-between px-4 sm:px-6 flex-shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:n,className:"sm:hidden p-2 text-brand-text-secondary dark:text-dark-brand-text-secondary",children:f.jsx(vB,{className:"h-6 w-6"})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Xz,{navigation:t}),!c&&f.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300 animate-pulse",children:"Offline"})]})]}),f.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 rtl:space-x-reverse",children:[f.jsx(Zz,{onOpenCommandPalette:r}),f.jsx(tq,{notifications:e,setNavigation:i,onMarkAsRead:a,navigation:t}),f.jsx(nq,{onLogout:o,setNavigation:i})]})]})},uI=({item:t,isActive:e,isExpanded:n,onClick:r})=>f.jsx("li",{children:f.jsxs("button",{onClick:r,className:`w-full flex items-center h-12 px-4 rounded-lg transition-colors duration-200 group ${e?"bg-brand-primary text-white":"text-slate-500 dark:text-slate-400 hover:bg-brand-primary/10 dark:hover:bg-brand-primary/20 hover:text-brand-primary"}`,children:[f.jsx(t.icon,{className:"h-6 w-6 flex-shrink-0"}),f.jsx("span",{className:`transition-opacity duration-200 font-semibold whitespace-nowrap ${n?"opacity-100 ltr:ml-4 rtl:mr-4":"opacity-0"}`,children:t.label})]})}),iq=({setNavigation:t,navigation:e,isExpanded:n,setIsExpanded:r})=>{const{t:i}=ce(),a=Pn(_=>_.currentUser),o=Rt(_=>_.appSettings),c=e.view,u=e.view==="projects"||e.view==="projectDetail"||e.view==="createProject",d=[{nav:{view:"dashboard"},key:"dashboard",label:i("dashboard"),icon:kh},{nav:{view:"analytics"},key:"analytics",label:i("analytics"),icon:Ky},{nav:{view:"qualityInsights"},key:"qualityInsights",label:i("qualityInsights"),icon:Ph},{nav:{view:"calendar"},key:"calendar",label:i("calendar"),icon:Ih},{nav:{view:"projects"},key:"projects",label:i("projects"),icon:zi},{nav:{view:"documentControl"},key:"documentControl",label:i("documentControl"),icon:Mu},{nav:{view:"myTasks"},key:"myTasks",label:i("myTasks"),icon:hs},{nav:{view:"risk"},key:"risk",label:i("riskHub"),icon:Yo},{nav:{view:"auditHub"},key:"auditHub",label:i("auditHub"),icon:_a,adminOnly:!0},{nav:{view:"dataHub"},key:"dataHub",label:i("dataHub"),icon:fs,adminOnly:!0},{nav:{view:"departments"},key:"departments",label:i("departments"),icon:Ql,adminOnly:!0},{nav:{view:"trainingHub"},key:"trainingHub",label:i("trainingHub"),icon:Aa}],m=[{nav:{view:"settings"},key:"settings",label:i("settings"),icon:Gy,adminOnly:!0}],p=d.filter(_=>!_.adminOnly||(a==null?void 0:a.role)===Vt.Admin),y=m.filter(_=>!_.adminOnly||(a==null?void 0:a.role)===Vt.Admin),x=_=>_==="projects"?u:e.view==="settings"?_==="settings":c===_;return f.jsxs("aside",{className:`fixed top-0 ltr:left-0 rtl:right-0 h-full bg-brand-surface dark:bg-dark-brand-surface border-r border-brand-border dark:border-dark-brand-border flex flex-col py-4 transition-all duration-300 z-30 ${n?"w-64":"w-20"}`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[f.jsxs("div",{className:`flex items-center justify-center h-16 mb-4 flex-shrink-0 ${n?"px-4":""}`,children:[o!=null&&o.logoUrl?f.jsx("img",{src:o.logoUrl,alt:"App Logo",className:"h-8 w-8 flex-shrink-0"}):f.jsx(ed,{className:"h-8 w-8 flex-shrink-0"}),f.jsxs("h1",{className:`text-2xl font-bold transition-opacity duration-200 whitespace-nowrap ${n?"opacity-100 ltr:ml-3 rtl:mr-3":"opacity-0"}`,children:[f.jsx("span",{className:"text-brand-text-primary dark:text-dark-brand-text-primary",children:"Accredit"}),f.jsx("span",{className:"text-brand-primary",children:"Ex"})]})]}),f.jsx("nav",{className:"flex-1 px-3 overflow-y-auto min-h-0",children:f.jsx("ul",{className:"space-y-2",children:p.map(_=>f.jsx(uI,{item:_,isActive:x(_.key),isExpanded:n,onClick:()=>t(_.nav)},_.key))})}),f.jsx("div",{className:"px-3",children:f.jsx("ul",{className:"space-y-2",children:y.map(_=>f.jsx(uI,{item:_,isActive:x(_.key),isExpanded:n,onClick:()=>t(_.nav)},_.key))})})]})},dI=({item:t,isActive:e,onClick:n})=>f.jsx("li",{children:f.jsxs("button",{onClick:n,className:`w-full flex items-center h-12 px-4 rounded-lg transition-colors duration-200 group ${e?"bg-brand-primary text-white":"text-slate-500 dark:text-slate-400 hover:bg-brand-primary/10 dark:hover:bg-brand-primary/20 hover:text-brand-primary"}`,children:[f.jsx(t.icon,{className:"h-6 w-6 flex-shrink-0"}),f.jsx("span",{className:"ltr:ml-4 rtl:mr-4 font-semibold whitespace-nowrap",children:t.label})]})}),aq=({isOpen:t,setIsOpen:e,navigation:n,setNavigation:r})=>{const{t:i}=ce(),a=Pn(T=>T.currentUser),o=Rt(T=>T.appSettings),c=n.view,u=n.view==="projects"||n.view==="projectDetail"||n.view==="createProject",d=[{nav:{view:"dashboard"},key:"dashboard",label:i("dashboard"),icon:kh},{nav:{view:"analytics"},key:"analytics",label:i("analytics"),icon:Ky},{nav:{view:"qualityInsights"},key:"qualityInsights",label:i("qualityInsights"),icon:Ph},{nav:{view:"calendar"},key:"calendar",label:i("calendar"),icon:Ih},{nav:{view:"projects"},key:"projects",label:i("projects"),icon:zi},{nav:{view:"documentControl"},key:"documentControl",label:i("documentControl"),icon:Mu},{nav:{view:"myTasks"},key:"myTasks",label:i("myTasks"),icon:hs},{nav:{view:"risk"},key:"risk",label:i("riskHub"),icon:Yo},{nav:{view:"auditHub"},key:"auditHub",label:i("auditHub"),icon:_a,adminOnly:!0},{nav:{view:"dataHub"},key:"dataHub",label:i("dataHub"),icon:fs,adminOnly:!0},{nav:{view:"departments"},key:"departments",label:i("departments"),icon:Ql,adminOnly:!0},{nav:{view:"trainingHub"},key:"trainingHub",label:i("trainingHub"),icon:Aa}],m=[{nav:{view:"settings"},key:"settings",label:i("settings"),icon:Gy,adminOnly:!0}],p=d.filter(T=>!T.adminOnly||(a==null?void 0:a.role)===Vt.Admin),y=m.filter(T=>!T.adminOnly||(a==null?void 0:a.role)===Vt.Admin),x=T=>T==="projects"?u:n.view==="settings"?T==="settings":c===T,_=T=>{r(T),e(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`fixed inset-0 bg-black/60 z-30 transition-opacity lg:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>e(!1)}),f.jsxs("div",{className:`fixed top-0 bottom-0 z-40 w-64 bg-brand-surface dark:bg-dark-brand-surface transition-transform duration-300 ease-in-out lg:hidden ${t?"ltr:translate-x-0 rtl:-translate-x-0":"ltr:-translate-x-full rtl:translate-x-full"}`,children:[f.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-brand-border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[o!=null&&o.logoUrl?f.jsx("img",{src:o.logoUrl,alt:"App Logo",className:"h-8 w-8"}):f.jsx(ed,{className:"h-8 w-8"}),f.jsxs("h1",{className:"text-xl font-bold",children:[f.jsx("span",{className:"text-brand-text-primary dark:text-dark-brand-text-primary",children:"Accredit"}),f.jsx("span",{className:"text-brand-primary",children:"Ex"})]})]}),f.jsx("button",{onClick:()=>e(!1),className:"p-2",children:f.jsx(td,{className:"w-6 h-6"})})]}),f.jsx("nav",{className:"flex-1 px-3 py-4 overflow-y-auto",children:f.jsx("ul",{className:"space-y-2",children:p.map(T=>f.jsx(dI,{item:T,isActive:x(T.key),onClick:()=>_(T.nav)},T.key))})}),f.jsx("div",{className:"px-3 py-4 border-t border-brand-border dark:border-dark-brand-border",children:f.jsx("ul",{className:"space-y-2",children:y.map(T=>f.jsx(dI,{item:T,isActive:x(T.key),onClick:()=>_(T.nav)},T.key))})})]})]})},Hp=t=>{const e=t.filter(r=>r.status!==Ue.NotApplicable);return e.length===0?0:e.reduce((r,i)=>i.status===Ue.Compliant?r+1:i.status===Ue.PartiallyCompliant?r+.5:r,0)/e.length*100},Or=h1((t,e)=>({projects:[],initialize:n=>t({projects:n.projects.map(r=>({...r,progress:Hp(r.checklist)}))}),addProject:n=>{const r=he.addProject(n);t(i=>({projects:[...i.projects,{...r,progress:Hp(r.checklist)}]}))},finalizeProject:(n,r)=>{const i=he.finalizeProject(n,r);t(a=>({projects:a.projects.map(o=>o.id===n?{...o,...i}:o)}))},updateChecklistItem:(n,r,i)=>{const a=e().projects.find(u=>u.id===n);if(!a)return;const o=a.checklist.map(u=>u.id===r?{...u,...i}:u),c={...a,checklist:o,progress:Hp(o)};he.updateProject(c),t(u=>({projects:u.projects.map(d=>d.id===n?c:d)}))},addCommentToChecklistItem:(n,r,i)=>{const a=Pn.getState().currentUser;if(!a)return;const o=e().projects.find(m=>m.id===n);if(!o)return;const c=he.addCommentToChecklistItem(n,r,i,a),u=o.checklist.map(m=>m.id===r?{...m,comments:[...m.comments,c]}:m),d={...o,checklist:u};he.updateProject(d),t(m=>({projects:m.projects.map(p=>p.id===n?d:p)}))},createEvidenceAndLink:(n,r,i)=>{const{newDocument:a,updatedProject:o}=he.createEvidenceAndLink(n,r,i);Rt.getState().addDocument(a),t(c=>({projects:c.projects.map(u=>u.id===n?{...o,progress:Hp(o.checklist)}:u)}))},addMockSurvey:(n,r)=>{const i=he.addMockSurvey(n,r);t(a=>({projects:a.projects.map(o=>o.id===n?i:o)}))},updateMockSurvey:(n,r,i)=>{const a=he.updateMockSurvey(n,r,i);t(o=>({projects:o.projects.map(c=>c.id===n?a:c)}))}})),sq=({projects:t,users:e})=>{const{t:n}=ce();return f.jsxs("div",{className:"p-4 bg-brand-surface dark:bg-dark-brand-surface rounded-lg",children:[f.jsxs("h3",{className:"font-bold text-lg",children:[n("admin")," ",n("dashboard")]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("totalProjects")}),f.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("users")}),f.jsx("p",{className:"text-2xl font-bold",children:e.length})]})]})]})},oq=({currentUser:t,allProjects:e})=>{const{t:n}=ce(),r=e.filter(i=>i.projectLead.id===t.id);return f.jsxs("div",{className:"p-4 bg-brand-surface dark:bg-dark-brand-surface rounded-lg",children:[f.jsx("h3",{className:"font-bold text-lg",children:n("projectLeadDashboardTitle")}),f.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("myProjects")}),f.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]})},lq=({currentUser:t,allProjects:e})=>{const{t:n}=ce(),r=e.flatMap(i=>i.checklist.filter(a=>a.assignedTo===t.id&&a.status!==Ue.Compliant&&a.status!==Ue.NotApplicable));return f.jsxs("div",{className:"p-4 bg-brand-surface dark:bg-dark-brand-surface rounded-lg",children:[f.jsx("h3",{className:"font-bold text-lg",children:n("teamMemberDashboardTitle")}),f.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("myOpenTasks")}),f.jsx("p",{className:"text-2xl font-bold",children:r.length})]})})]})},cq=({currentUser:t,setNavigation:e})=>{const{t:n}=ce();return f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:n("welcomeBack").replace("{name}",t.name.split(" ")[0])}),f.jsx("p",{className:"mt-1 text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("dashboardGreeting")})]})},fI=()=>{const{currentUser:t}=Pn(),{projects:e}=Or(),{users:n,setNavigation:r}=Rt();if(!t)return null;const i=()=>{switch(t.role){case Vt.Admin:return f.jsx(sq,{projects:e,users:n});case Vt.ProjectLead:return f.jsx(oq,{currentUser:t,allProjects:e});case Vt.TeamMember:return f.jsx(lq,{currentUser:t,allProjects:e});default:return f.jsx("div",{children:"Unsupported user role"})}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx(cq,{currentUser:t,setNavigation:r}),i()]})},fr=({title:t,value:e,icon:n,color:r,isLiveLinkable:i})=>{const{t:a}=ce();return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-5 rounded-xl shadow-sm border border-brand-border dark:border-dark-brand-border flex flex-col justify-between transition-all hover:shadow-md hover:-translate-y-1 relative group",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary text-sm font-semibold",children:t}),f.jsx("p",{className:"text-3xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary mt-2",children:e})]}),n&&f.jsx("div",{className:`text-white p-3 rounded-lg ${r||"bg-brand-primary"} shadow-md`,children:f.jsx(n,{className:"h-6 w-6"})})]}),i&&f.jsx("div",{className:"absolute top-2 right-2 opacity-50 group-hover:opacity-100 transition-opacity",title:a("liveDataTooltip"),children:f.jsx(fs,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})})]})};function p5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=p5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=p5(t))&&(r&&(r+=" "),r+=e);return r}var uq=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function _1(t){if(typeof t!="string")return!1;var e=uq;return e.includes(t)}var dq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function g5(t){if(typeof t!="string")return!1;var e=dq;return e.includes(t)}function y5(t){return typeof t=="string"&&t.startsWith("data-")}function Mn(t){var e=Object.entries(t).filter(n=>{var[r]=n;return g5(r)||y5(r)});return Object.fromEntries(e)}function ms(t){if(t==null)return null;if(E.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Mn(e)}return typeof t=="object"&&!Array.isArray(t)?Mn(t):null}function Hn(t){var e=Object.entries(t).filter(n=>{var[r]=n;return g5(r)||y5(r)||_1(r)});return Object.fromEntries(e)}function fq(t){return t==null?null:E.isValidElement(t)?Hn(t.props):typeof t=="object"&&!Array.isArray(t)?Hn(t):null}var hq=["children","width","height","viewBox","className","style","title","desc"];function MS(){return MS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MS.apply(null,arguments)}function mq(t,e){if(t==null)return{};var n,r,i=pq(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pq(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var A1=E.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:c,title:u,desc:d}=t,m=mq(t,hq),p=a||{width:r,height:i,x:0,y:0},y=nt("recharts-surface",o);return E.createElement("svg",MS({},Hn(m),{className:y,width:r,height:i,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),E.createElement("title",null,u),E.createElement("desc",null,d),n)}),gq=["children","className"];function jS(){return jS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jS.apply(null,arguments)}function yq(t,e){if(t==null)return{};var n,r,i=vq(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vq(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kt=E.forwardRef((t,e)=>{var{children:n,className:r}=t,i=yq(t,gq),a=nt("recharts-layer",r);return E.createElement("g",jS({className:a},Hn(i),{ref:e}),n)}),v5=vO(),x5=E.createContext(null),xq=()=>E.useContext(x5);function Dt(t){return function(){return t}}const b5=Math.cos,Og=Math.sin,Ki=Math.sqrt,Lg=Math.PI,Jy=2*Lg,OS=Math.PI,LS=2*OS,Rl=1e-6,bq=LS-Rl;function w5(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function wq(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return w5;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Sq{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?w5:wq(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,u=r-e,d=i-n,m=o-e,p=c-n,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>Rl)if(!(Math.abs(p*u-d*m)>Rl)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-o,_=i-c,T=u*u+d*d,C=x*x+_*_,N=Math.sqrt(T),M=Math.sqrt(y),P=a*Math.tan((OS-Math.acos((T+y-C)/(2*N*M)))/2),L=P/M,j=P/N;Math.abs(L-1)>Rl&&this._append`L${e+L*m},${n+L*p}`,this._append`A${a},${a},0,0,${+(p*x>m*_)},${this._x1=e+j*u},${this._y1=n+j*d}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),u=r*Math.sin(i),d=e+c,m=n+u,p=1^o,y=o?i-a:a-i;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>Rl||Math.abs(this._y1-m)>Rl)&&this._append`L${d},${m}`,r&&(y<0&&(y=y%LS+LS),y>bq?this._append`A${r},${r},0,1,${p},${e-c},${n-u}A${r},${r},0,1,${p},${this._x1=d},${this._y1=m}`:y>Rl&&this._append`A${r},${r},0,${+(y>=OS)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function T1(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Sq(e)}function E1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function S5(t){this._context=t}S5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qy(t){return new S5(t)}function _5(t){return t[0]}function A5(t){return t[1]}function T5(t,e){var n=Dt(!0),r=null,i=Qy,a=null,o=T1(c);t=typeof t=="function"?t:t===void 0?_5:Dt(t),e=typeof e=="function"?e:e===void 0?A5:Dt(e);function c(u){var d,m=(u=E1(u)).length,p,y=!1,x;for(r==null&&(a=i(x=o())),d=0;d<=m;++d)!(d<m&&n(p=u[d],d,u))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(p,d,u),+e(p,d,u));if(x)return a=null,x+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:Dt(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:Dt(+u),c):e},c.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dt(!!u),c):n},c.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),c):i},c.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),c):r},c}function $p(t,e,n){var r=null,i=Dt(!0),a=null,o=Qy,c=null,u=T1(d);t=typeof t=="function"?t:t===void 0?_5:Dt(+t),e=typeof e=="function"?e:Dt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?A5:Dt(+n);function d(p){var y,x,_,T=(p=E1(p)).length,C,N=!1,M,P=new Array(T),L=new Array(T);for(a==null&&(c=o(M=u())),y=0;y<=T;++y){if(!(y<T&&i(C=p[y],y,p))===N)if(N=!N)x=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),_=y-1;_>=x;--_)c.point(P[_],L[_]);c.lineEnd(),c.areaEnd()}N&&(P[y]=+t(C,y,p),L[y]=+e(C,y,p),c.point(r?+r(C,y,p):P[y],n?+n(C,y,p):L[y]))}if(M)return c=null,M+""||null}function m(){return T5().defined(i).curve(o).context(a)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Dt(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Dt(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Dt(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Dt(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Dt(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dt(+p),d):n},d.lineX0=d.lineY0=function(){return m().x(t).y(e)},d.lineY1=function(){return m().x(t).y(n)},d.lineX1=function(){return m().x(r).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Dt(!!p),d):i},d.curve=function(p){return arguments.length?(o=p,a!=null&&(c=o(a)),d):o},d.context=function(p){return arguments.length?(p==null?a=c=null:c=o(a=p),d):a},d}class E5{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function _q(t){return new E5(t,!0)}function Aq(t){return new E5(t,!1)}const C1={draw(t,e){const n=Ki(e/Lg);t.moveTo(n,0),t.arc(0,0,n,0,Jy)}},Tq={draw(t,e){const n=Ki(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},C5=Ki(1/3),Eq=C5*2,Cq={draw(t,e){const n=Ki(e/Eq),r=n*C5;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Nq={draw(t,e){const n=Ki(e),r=-n/2;t.rect(r,r,n,n)}},kq=.8908130915292852,N5=Og(Lg/10)/Og(7*Lg/10),Iq=Og(Jy/10)*N5,Pq=-b5(Jy/10)*N5,Dq={draw(t,e){const n=Ki(e*kq),r=Iq*n,i=Pq*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=Jy*a/5,c=b5(o),u=Og(o);t.lineTo(u*n,-c*n),t.lineTo(c*r-u*i,u*r+c*i)}t.closePath()}},kb=Ki(3),Rq={draw(t,e){const n=-Ki(e/(kb*3));t.moveTo(0,n*2),t.lineTo(-kb*n,-n),t.lineTo(kb*n,-n),t.closePath()}},pi=-.5,gi=Ki(3)/2,US=1/Ki(12),Mq=(US/2+1)*3,jq={draw(t,e){const n=Ki(e/Mq),r=n/2,i=n*US,a=r,o=n*US+n,c=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo(pi*r-gi*i,gi*r+pi*i),t.lineTo(pi*a-gi*o,gi*a+pi*o),t.lineTo(pi*c-gi*u,gi*c+pi*u),t.lineTo(pi*r+gi*i,pi*i-gi*r),t.lineTo(pi*a+gi*o,pi*o-gi*a),t.lineTo(pi*c+gi*u,pi*u-gi*c),t.closePath()}};function Oq(t,e){let n=null,r=T1(i);t=typeof t=="function"?t:Dt(t||C1),e=typeof e=="function"?e:Dt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Ug(){}function Vg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function k5(t){this._context=t}k5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lq(t){return new k5(t)}function I5(t){this._context=t}I5.prototype={areaStart:Ug,areaEnd:Ug,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Vg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Uq(t){return new I5(t)}function P5(t){this._context=t}P5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Vg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vq(t){return new P5(t)}function D5(t){this._context=t}D5.prototype={areaStart:Ug,areaEnd:Ug,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Fq(t){return new D5(t)}function hI(t){return t<0?-1:1}function mI(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),c=(a*i+o*r)/(r+i);return(hI(a)+hI(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function pI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ib(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-r)/3;t._context.bezierCurveTo(r+c,i+c*e,a-c,o-c*n,a,o)}function Fg(t){this._context=t}Fg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ib(this,this._t0,pI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ib(this,pI(this,n=mI(this,t,e)),n);break;default:Ib(this,this._t0,n=mI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function R5(t){this._context=new M5(t)}(R5.prototype=Object.create(Fg.prototype)).point=function(t,e){Fg.prototype.point.call(this,e,t)};function M5(t){this._context=t}M5.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Bq(t){return new Fg(t)}function zq(t){return new R5(t)}function j5(t){this._context=t}j5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=gI(t),i=gI(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gI(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function qq(t){return new j5(t)}function Xy(t,e){this._context=t,this._t=e}Xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Hq(t){return new Xy(t,.5)}function $q(t){return new Xy(t,0)}function Gq(t){return new Xy(t,1)}function ju(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,c=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<c;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function VS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Kq(t,e){return t[e]}function Yq(t){const e=[];return e.key=t,e}function Wq(){var t=Dt([]),e=VS,n=ju,r=Kq;function i(a){var o=Array.from(t.apply(this,arguments),Yq),c,u=o.length,d=-1,m;for(const p of a)for(c=0,++d;c<u;++c)(o[c][d]=[0,+r(p,o[c].key,d,a)]).data=p;for(c=0,m=E1(e(o));c<u;++c)o[m[c]].index=c;return n(o,m),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Dt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?VS:typeof a=="function"?a:Dt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??ju,i):n},i}function Jq(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}ju(t,e)}}function Qq(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,c=0;o<i;++o)c+=t[o][n][1]||0;r[n][1]+=r[n][0]=-c/2}ju(t,e)}}function Xq(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var c=0,u=0,d=0;c<o;++c){for(var m=t[e[c]],p=m[r][1]||0,y=m[r-1][1]||0,x=(p-y)/2,_=0;_<c;++_){var T=t[e[_]],C=T[r][1]||0,N=T[r-1][1]||0;x+=C-N}u+=p,d+=x*p}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,ju(t,e)}}var Pb={},Db={},yI;function Zq(){return yI||(yI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Db)),Db}var Rb={},vI;function O5(){return vI||(vI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Rb)),Rb}var Mb={},xI;function N1(){return xI||(xI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(Mb)),Mb}var jb={},Ob={},bI;function eH(){return bI||(bI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(Ob)),Ob}var wI;function k1(){return wI||(wI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eH(),n=N1();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],o=i.length;if(o===0)return a;let c=0,u="",d="",m=!1;for(i.charCodeAt(0)===46&&(a.push(""),c++);c<o;){const p=i[c];d?p==="\\"&&c+1<o?(c++,u+=i[c]):p===d?d="":u+=p:m?p==='"'||p==="'"?d=p:p==="]"?(m=!1,a.push(u),u=""):u+=p:p==="["?(m=!0,u&&(a.push(u),u="")):p==="."?u&&(a.push(u),u=""):u+=p,c++}return u&&a.push(u),a}t.toPath=r})(jb)),jb}var SI;function I1(){return SI||(SI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zq(),n=O5(),r=N1(),i=k1();function a(c,u,d){if(c==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const m=c[u];return m===void 0?n.isDeepKey(u)?a(c,i.toPath(u),d):d:m}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const m=c[u];return m===void 0?d:m}default:{if(Array.isArray(u))return o(c,u,d);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const m=c[u];return m===void 0?d:m}}}function o(c,u,d){if(u.length===0)return d;let m=c;for(let p=0;p<u.length;p++){if(m==null||e.isUnsafeProperty(u[p]))return d;m=m[u[p]]}return m===void 0?d:m}t.get=a})(Pb)),Pb}var Lb,_I;function tH(){return _I||(_I=1,Lb=I1().get),Lb}var nH=tH();const Zl=Ma(nH);var Sn=t=>t===0?0:t>0?1:-1,Qr=t=>typeof t=="number"&&t!=+t,ps=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Te=t=>(typeof t=="number"||t instanceof Number)&&!Qr(t),Pa=t=>Te(t)||typeof t=="string",rH=0,dh=t=>{var e=++rH;return"".concat(t||"").concat(e)},mr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Te(e)&&typeof e!="string")return r;var a;if(ps(e)){if(n==null)return r;var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return Qr(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},L5=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1},Ub=(t,e)=>Te(t)&&Te(e)?n=>t+n*(e-t):()=>e;function Wt(t,e,n){return Te(t)&&Te(e)?t+n*(e-t):e}function U5(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Zl(r,e))===n)}var Kt=t=>t===null||typeof t>"u",Mh=t=>Kt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),iH=["type","size","sizeType"];function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FS.apply(null,arguments)}function AI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AI(Object(n),!0).forEach(function(r){aH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aH(t,e,n){return(e=sH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sH(t){var e=oH(t,"string");return typeof e=="symbol"?e:e+""}function oH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lH(t,e){if(t==null)return{};var n,r,i=cH(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cH(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var V5={symbolCircle:C1,symbolCross:Tq,symbolDiamond:Cq,symbolSquare:Nq,symbolStar:Dq,symbolTriangle:Rq,symbolWye:jq},uH=Math.PI/180,dH=t=>{var e="symbol".concat(Mh(t));return V5[e]||C1},fH=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*uH;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},hH=(t,e)=>{V5["symbol".concat(Mh(t))]=e},P1=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=lH(t,iH),a=TI(TI({},i),{},{type:e,size:n,sizeType:r}),o="circle";typeof e=="string"&&(o=e);var c=()=>{var y=dH(o),x=Oq().type(y).size(fH(n,r,o)),_=x();if(_!==null)return _},{className:u,cx:d,cy:m}=a,p=Hn(a);return d===+d&&m===+m&&n===+n?E.createElement("path",FS({},p,{className:nt("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(m,")"),d:c()})):null};P1.registerSymbol=hH;var D1=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(E.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{_1(i)&&(r[i]=(a=>n[i](n,a)))}),r},mH=(t,e,n)=>r=>(t(e,n,r),null),Wo=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];_1(i)&&typeof a=="function"&&(r||(r={}),r[i]=mH(a,e,n))}),r};function BS(){return BS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BS.apply(null,arguments)}function EI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(n),!0).forEach(function(r){R1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R1(t,e,n){return(e=gH(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gH(t){var e=yH(t,"string");return typeof e=="symbol"?e:e+""}function yH(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yi=32;class M1 extends E.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=yi/2,a=yi/6,o=yi/3,c=e.inactive?r:e.color,u=n??e.type;if(u==="none")return null;if(u==="plainline")return E.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:yi,y2:i,className:"recharts-legend-icon"});if(u==="line")return E.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(yi,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return E.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(yi/8,"h").concat(yi,"v").concat(yi*3/4,"h").concat(-yi,"z"),className:"recharts-legend-icon"});if(E.isValidElement(e.legendIcon)){var d=pH({},e);return delete d.legendIcon,E.cloneElement(e.legendIcon,d)}return E.createElement(P1,{fill:c,cx:i,cy:i,size:yi,sizeType:"diameter",type:u})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:o}=this.props,c={x:0,y:0,width:yi,height:yi},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((m,p)=>{var y=m.formatter||i,x=nt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:m.inactive});if(m.type==="none")return null;var _=m.inactive?a:m.color,T=y?y(m.value,m,p):m.value;return E.createElement("li",BS({className:x,style:u,key:"legend-item-".concat(p)},Wo(this.props,m,p)),E.createElement(A1,{width:n,height:n,viewBox:c,style:d,"aria-label":"".concat(T," legend icon")},this.renderIcon(m,o)),E.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},T))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return E.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}R1(M1,"displayName","Legend");R1(M1,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Vb={},Fb={},CI;function vH(){return CI||(CI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],c=r(o);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e})(Fb)),Fb}var Bb={},NI;function F5(){return NI||(NI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(Bb)),Bb}var zb={},qb={},Hb={},kI;function xH(){return kI||(kI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Hb)),Hb}var II;function j1(){return II||(II=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xH();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(qb)),qb}var $b={},PI;function bH(){return PI||(PI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})($b)),$b}var DI;function wH(){return DI||(DI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j1(),n=bH();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(zb)),zb}var Gb={},Kb={},RI;function SH(){return RI||(RI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=I1();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Kb)),Kb}var Yb={},Wb={},Jb={},Qb={},MI;function B5(){return MI||(MI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Qb)),Qb}var Xb={},jI;function z5(){return jI||(jI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Xb)),Xb}var Zb={},OI;function q5(){return OI||(OI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Zb)),Zb}var LI;function _H(){return LI||(LI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=B5(),n=z5(),r=q5();function i(m,p,y){return typeof y!="function"?i(m,p,()=>{}):a(m,p,function x(_,T,C,N,M,P){const L=y(_,T,C,N,M,P);return L!==void 0?!!L:a(_,T,x,P)},new Map)}function a(m,p,y,x){if(p===m)return!0;switch(typeof p){case"object":return o(m,p,y,x);case"function":return Object.keys(p).length>0?a(m,{...p},y,x):r.eq(m,p);default:return e.isObject(m)?typeof p=="string"?p==="":!0:r.eq(m,p)}}function o(m,p,y,x){if(p==null)return!0;if(Array.isArray(p))return u(m,p,y,x);if(p instanceof Map)return c(m,p,y,x);if(p instanceof Set)return d(m,p,y,x);const _=Object.keys(p);if(m==null)return _.length===0;if(_.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===m;x==null||x.set(p,m);try{for(let T=0;T<_.length;T++){const C=_[T];if(!n.isPrimitive(m)&&!(C in m)||p[C]===void 0&&m[C]!==void 0||p[C]===null&&m[C]!==null||!y(m[C],p[C],C,m,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function c(m,p,y,x){if(p.size===0)return!0;if(!(m instanceof Map))return!1;for(const[_,T]of p.entries()){const C=m.get(_);if(y(C,T,_,m,p,x)===!1)return!1}return!0}function u(m,p,y,x){if(p.length===0)return!0;if(!Array.isArray(m))return!1;const _=new Set;for(let T=0;T<p.length;T++){const C=p[T];let N=!1;for(let M=0;M<m.length;M++){if(_.has(M))continue;const P=m[M];let L=!1;if(y(P,C,T,m,p,x)&&(L=!0),L){_.add(M),N=!0;break}}if(!N)return!1}return!0}function d(m,p,y,x){return p.size===0?!0:m instanceof Set?u([...m],[...p],y,x):!1}t.isMatchWith=i,t.isSetMatch=d})(Jb)),Jb}var UI;function H5(){return UI||(UI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_H();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Wb)),Wb}var ew={},tw={},nw={},VI;function AH(){return VI||(VI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(nw)),nw}var rw={},FI;function $5(){return FI||(FI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(rw)),rw}var iw={},BI;function G5(){return BI||(BI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",d="[object Set]",m="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",_="[object Error]",T="[object DataView]",C="[object Uint8Array]",N="[object Uint8ClampedArray]",M="[object Uint16Array]",P="[object Uint32Array]",L="[object BigUint64Array]",j="[object Int8Array]",V="[object Int16Array]",I="[object Int32Array]",R="[object BigInt64Array]",U="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=y,t.arrayTag=m,t.bigInt64ArrayTag=R,t.bigUint64ArrayTag=L,t.booleanTag=i,t.dataViewTag=T,t.dateTag=c,t.errorTag=_,t.float32ArrayTag=U,t.float64ArrayTag=F,t.functionTag=p,t.int16ArrayTag=V,t.int32ArrayTag=I,t.int8ArrayTag=j,t.mapTag=u,t.numberTag=r,t.objectTag=x,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=M,t.uint32ArrayTag=P,t.uint8ArrayTag=C,t.uint8ClampedArrayTag=N})(iw)),iw}var aw={},zI;function TH(){return zI||(zI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(aw)),aw}var qI;function K5(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AH(),n=$5(),r=G5(),i=z5(),a=TH();function o(m,p){return c(m,void 0,m,new Map,p)}function c(m,p,y,x=new Map,_=void 0){const T=_==null?void 0:_(m,p,y,x);if(T!==void 0)return T;if(i.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const C=new Array(m.length);x.set(m,C);for(let N=0;N<m.length;N++)C[N]=c(m[N],N,y,x,_);return Object.hasOwn(m,"index")&&(C.index=m.index),Object.hasOwn(m,"input")&&(C.input=m.input),C}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const C=new RegExp(m.source,m.flags);return C.lastIndex=m.lastIndex,C}if(m instanceof Map){const C=new Map;x.set(m,C);for(const[N,M]of m)C.set(N,c(M,N,y,x,_));return C}if(m instanceof Set){const C=new Set;x.set(m,C);for(const N of m)C.add(c(N,void 0,y,x,_));return C}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(a.isTypedArray(m)){const C=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,C);for(let N=0;N<m.length;N++)C[N]=c(m[N],N,y,x,_);return C}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const C=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,C),u(C,m,y,x,_),C}if(typeof File<"u"&&m instanceof File){const C=new File([m],m.name,{type:m.type});return x.set(m,C),u(C,m,y,x,_),C}if(typeof Blob<"u"&&m instanceof Blob){const C=new Blob([m],{type:m.type});return x.set(m,C),u(C,m,y,x,_),C}if(m instanceof Error){const C=new m.constructor;return x.set(m,C),C.message=m.message,C.name=m.name,C.stack=m.stack,C.cause=m.cause,u(C,m,y,x,_),C}if(m instanceof Boolean){const C=new Boolean(m.valueOf());return x.set(m,C),u(C,m,y,x,_),C}if(m instanceof Number){const C=new Number(m.valueOf());return x.set(m,C),u(C,m,y,x,_),C}if(m instanceof String){const C=new String(m.valueOf());return x.set(m,C),u(C,m,y,x,_),C}if(typeof m=="object"&&d(m)){const C=Object.create(Object.getPrototypeOf(m));return x.set(m,C),u(C,m,y,x,_),C}return m}function u(m,p,y=m,x,_){const T=[...Object.keys(p),...e.getSymbols(p)];for(let C=0;C<T.length;C++){const N=T[C],M=Object.getOwnPropertyDescriptor(m,N);(M==null||M.writable)&&(m[N]=c(p[N],N,y,x,_))}}function d(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u})(tw)),tw}var HI;function EH(){return HI||(HI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(ew)),ew}var $I;function CH(){return $I||($I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H5(),n=EH();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Yb)),Yb}var sw={},ow={},lw={},GI;function NH(){return GI||(GI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K5(),n=G5();function r(i,a){return e.cloneDeepWith(i,(o,c,u,d)=>{const m=a==null?void 0:a(o,c,u,d);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(p,i),p}case n.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})(lw)),lw}var KI;function kH(){return KI||(KI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NH();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(ow)),ow}var cw={},uw={},YI;function Y5(){return YI||(YI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(uw)),uw}var dw={},WI;function IH(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$5();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(dw)),dw}var JI;function PH(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=O5(),n=Y5(),r=IH(),i=k1();function a(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&(o==null?void 0:o[c])==null?u=i.toPath(c):u=[c],u.length===0)return!1;let d=o;for(let m=0;m<u.length;m++){const p=u[m];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=a})(cw)),cw}var QI;function DH(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H5(),n=N1(),r=kH(),i=I1(),a=PH();function o(c,u){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return u=r.cloneDeep(u),function(d){const m=i.get(d,c);return m===void 0?a.has(d,c):u===void 0?m===void 0:e.isMatch(m,u)}}t.matchesProperty=o})(sw)),sw}var XI;function RH(){return XI||(XI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F5(),n=SH(),r=CH(),i=DH();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=a})(Gb)),Gb}var ZI;function MH(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vH(),n=F5(),r=wH(),i=RH();function a(o,c=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(c)):[]}t.uniqBy=a})(Vb)),Vb}var fw,eP;function jH(){return eP||(eP=1,fw=MH().uniqBy),fw}var OH=jH();const tP=Ma(OH);function W5(t,e,n){return e===!0?tP(t,n):typeof e=="function"?tP(t,e):t}var hw={exports:{}},mw={},pw={exports:{}},gw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP;function LH(){if(nP)return gw;nP=1;var t=Zu();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function c(p,y){var x=y(),_=r({inst:{value:x,getSnapshot:y}}),T=_[0].inst,C=_[1];return a(function(){T.value=x,T.getSnapshot=y,u(T)&&C({inst:T})},[p,x,y]),i(function(){return u(T)&&C({inst:T}),p(function(){u(T)&&C({inst:T})})},[p]),o(x),x}function u(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!n(p,x)}catch{return!0}}function d(p,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return gw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,gw}var rP;function UH(){return rP||(rP=1,pw.exports=LH()),pw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP;function VH(){if(iP)return mw;iP=1;var t=Zu(),e=UH();function n(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return mw.useSyncExternalStoreWithSelector=function(d,m,p,y,x){var _=a(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=c(function(){function N(V){if(!M){if(M=!0,P=V,V=y(V),x!==void 0&&T.hasValue){var I=T.value;if(x(I,V))return L=I}return L=V}if(I=L,r(P,V))return I;var R=y(V);return x!==void 0&&x(I,R)?(P=V,I):(P=V,L=R)}var M=!1,P,L,j=p===void 0?null:p;return[function(){return N(m())},j===null?void 0:function(){return N(j())}]},[m,p,y,x]);var C=i(d,_[0],_[1]);return o(function(){T.hasValue=!0,T.value=C},[C]),u(C),C},mw}var aP;function FH(){return aP||(aP=1,hw.exports=VH()),hw.exports}var BH=FH(),O1=E.createContext(null),zH=t=>t,Ft=()=>{var t=E.useContext(O1);return t?t.store.dispatch:zH},gg=()=>{},qH=()=>gg,HH=(t,e)=>t===e;function _e(t){var e=E.useContext(O1);return BH.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:qH,e?e.store.getState:gg,e?e.store.getState:gg,e?t:gg,HH)}function $H(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function GH(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function KH(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var sP=t=>Array.isArray(t)?t:[t];function YH(t){const e=Array.isArray(t[0])?t[0]:t;return KH(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function WH(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var JH=class{constructor(t){this.value=t}deref(){return this.value}},QH=typeof WeakRef<"u"?WeakRef:JH,XH=0,oP=1;function Gp(){return{s:XH,v:void 0,o:null,p:null}}function J5(t,e={}){let n=Gp();const{resultEqualityCheck:r}=e;let i,a=0;function o(){var p;let c=n;const{length:u}=arguments;for(let y=0,x=u;y<x;y++){const _=arguments[y];if(typeof _=="function"||typeof _=="object"&&_!==null){let T=c.o;T===null&&(c.o=T=new WeakMap);const C=T.get(_);C===void 0?(c=Gp(),T.set(_,c)):c=C}else{let T=c.p;T===null&&(c.p=T=new Map);const C=T.get(_);C===void 0?(c=Gp(),T.set(_,c)):c=C}}const d=c;let m;if(c.s===oP)m=c.v;else if(m=t.apply(null,arguments),a++,r){const y=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;y!=null&&r(y,m)&&(m=y,a!==0&&a--),i=typeof m=="object"&&m!==null||typeof m=="function"?new QH(m):m}return d.s=oP,d.v=m,m}return o.clearCache=()=>{n=Gp(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function ZH(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,o=0,c,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),$H(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const m={...n,...u},{memoize:p,memoizeOptions:y=[],argsMemoize:x=J5,argsMemoizeOptions:_=[]}=m,T=sP(y),C=sP(_),N=YH(i),M=p(function(){return a++,d.apply(null,arguments)},...T),P=x(function(){o++;const j=WH(N,arguments);return c=M.apply(null,j),c},...C);return Object.assign(P,{resultFunc:d,memoizedResultFunc:M,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:x})};return Object.assign(r,{withTypes:()=>r}),r}var J=ZH(J5),e$=Object.assign((t,e=J)=>{GH(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((o,c,u)=>(o[n[u]]=c,o),{}))},{withTypes:()=>e$}),yw={},vw={},xw={},lP;function t$(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=e(r),c=e(i);if(o===c&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?c-o:o-c}return 0};t.compareValues=n})(xw)),xw}var bw={},ww={},cP;function Q5(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(ww)),ww}var uP;function n$(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i})(bw)),bw}var dP;function r$(){return dP||(dP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t$(),n=n$(),r=k1();function i(a,o,c,u){if(a==null)return[];c=u?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(x=>String(x));const d=(x,_)=>{let T=x;for(let C=0;C<_.length&&T!=null;++C)T=T[_[C]];return T},m=(x,_)=>_==null||x==null?_:typeof x=="object"&&"key"in x?Object.hasOwn(_,x.key)?_[x.key]:d(_,x.path):typeof x=="function"?x(_):Array.isArray(x)?d(_,x):typeof _=="object"?_[x]:_,p=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:r.toPath(x)}));return a.map(x=>({original:x,criteria:p.map(_=>m(_,x))})).slice().sort((x,_)=>{for(let T=0;T<p.length;T++){const C=e.compareValues(x.criteria[T],_.criteria[T],c[T]);if(C!==0)return C}return 0}).map(x=>x.original)}t.orderBy=i})(vw)),vw}var Sw={},fP;function i$(){return fP||(fP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),o=(c,u)=>{for(let d=0;d<c.length;d++){const m=c[d];Array.isArray(m)&&u<a?o(m,u+1):i.push(m)}};return o(n,0),i}t.flatten=e})(Sw)),Sw}var _w={},hP;function X5(){return hP||(hP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Y5(),n=j1(),r=B5(),i=q5();function a(o,c,u){return r.isObject(u)&&(typeof c=="number"&&n.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.eq(u[c],o):!1}t.isIterateeCall=a})(_w)),_w}var mP;function a$(){return mP||(mP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r$(),n=i$(),r=X5();function i(a,...o){const c=o.length;return c>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:c>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,n.flatten(o),["asc"])}t.sortBy=i})(yw)),yw}var Aw,pP;function s$(){return pP||(pP=1,Aw=a$().sortBy),Aw}var o$=s$();const Zy=Ma(o$);var Z5=t=>t.legend.settings,l$=t=>t.legend.size,c$=t=>t.legend.payload,u$=J([c$,Z5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Zy(r,n):r});function d$(){return _e(u$)}var Kp=1;function e4(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=E.useState({height:0,left:0,top:0,width:0}),r=E.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>Kp||Math.abs(o.left-e.left)>Kp||Math.abs(o.top-e.top)>Kp||Math.abs(o.width-e.width)>Kp)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var f$=typeof Symbol=="function"&&Symbol.observable||"@@observable",gP=f$,Tw=()=>Math.random().toString(36).substring(7).split("").join("."),h$={INIT:`@@redux/INIT${Tw()}`,REPLACE:`@@redux/REPLACE${Tw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Tw()}`},Bg=h$;function L1(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function t4(t,e,n){if(typeof t!="function")throw new Error(Zn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zn(1));return n(t4)(t,e)}let r=t,i=e,a=new Map,o=a,c=0,u=!1;function d(){o===a&&(o=new Map,a.forEach((C,N)=>{o.set(N,C)}))}function m(){if(u)throw new Error(Zn(3));return i}function p(C){if(typeof C!="function")throw new Error(Zn(4));if(u)throw new Error(Zn(5));let N=!0;d();const M=c++;return o.set(M,C),function(){if(N){if(u)throw new Error(Zn(6));N=!1,d(),o.delete(M),a=null}}}function y(C){if(!L1(C))throw new Error(Zn(7));if(typeof C.type>"u")throw new Error(Zn(8));if(typeof C.type!="string")throw new Error(Zn(17));if(u)throw new Error(Zn(9));try{u=!0,i=r(i,C)}finally{u=!1}return(a=o).forEach(M=>{M()}),C}function x(C){if(typeof C!="function")throw new Error(Zn(10));r=C,y({type:Bg.REPLACE})}function _(){const C=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Zn(11));function M(){const L=N;L.next&&L.next(m())}return M(),{unsubscribe:C(M)}},[gP](){return this}}}return y({type:Bg.INIT}),{dispatch:y,subscribe:p,getState:m,replaceReducer:x,[gP]:_}}function m$(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Bg.INIT})>"u")throw new Error(Zn(12));if(typeof n(void 0,{type:Bg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zn(13))})}function n4(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{m$(n)}catch(a){i=a}return function(o={},c){if(i)throw i;let u=!1;const d={};for(let m=0;m<r.length;m++){const p=r[m],y=n[p],x=o[p],_=y(x,c);if(typeof _>"u")throw c&&c.type,new Error(Zn(14));d[p]=_,u=u||_!==x}return u=u||r.length!==Object.keys(o).length,u?d:o}}function zg(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function p$(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Zn(15))};const o={getState:i.getState,dispatch:(u,...d)=>a(u,...d)},c=t.map(u=>u(o));return a=zg(...c)(i.dispatch),{...i,dispatch:a}}}function r4(t){return L1(t)&&"type"in t&&typeof t.type=="string"}var i4=Symbol.for("immer-nothing"),yP=Symbol.for("immer-draftable"),Xr=Symbol.for("immer-state");function Vi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ou=Object.getPrototypeOf;function ec(t){return!!t&&!!t[Xr]}function gs(t){var e;return t?a4(t)||Array.isArray(t)||!!t[yP]||!!((e=t.constructor)!=null&&e[yP])||jh(t)||tv(t):!1}var g$=Object.prototype.constructor.toString();function a4(t){if(!t||typeof t!="object")return!1;const e=Ou(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===g$}function qg(t,e){ev(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function ev(t){const e=t[Xr];return e?e.type_:Array.isArray(t)?1:jh(t)?2:tv(t)?3:0}function zS(t,e){return ev(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function s4(t,e,n){const r=ev(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function y$(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function jh(t){return t instanceof Map}function tv(t){return t instanceof Set}function Ml(t){return t.copy_||t.base_}function qS(t,e){if(jh(t))return new Map(t);if(tv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=a4(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Xr];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],c=r[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(Ou(t),r)}else{const r=Ou(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function U1(t,e=!1){return nv(t)||ec(t)||!gs(t)||(ev(t)>1&&Object.defineProperties(t,{set:{value:Yp},add:{value:Yp},clear:{value:Yp},delete:{value:Yp}}),Object.freeze(t),e&&Object.values(t).forEach(n=>U1(n,!0))),t}function Yp(){Vi(2)}function nv(t){return Object.isFrozen(t)}var v$={};function tc(t){const e=v$[t];return e||Vi(0,t),e}var fh;function o4(){return fh}function x$(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vP(t,e){e&&(tc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function HS(t){$S(t),t.drafts_.forEach(b$),t.drafts_=null}function $S(t){t===fh&&(fh=t.parent_)}function xP(t){return fh=x$(fh,t)}function b$(t){const e=t[Xr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Xr].modified_&&(HS(e),Vi(4)),gs(t)&&(t=Hg(e,t),e.parent_||$g(e,t)),e.patches_&&tc("Patches").generateReplacementPatches_(n[Xr].base_,t,e.patches_,e.inversePatches_)):t=Hg(e,n,[]),HS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==i4?t:void 0}function Hg(t,e,n){if(nv(e))return e;const r=e[Xr];if(!r)return qg(e,(i,a)=>wP(t,r,e,i,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return $g(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,o=!1;r.type_===3&&(a=new Set(i),i.clear(),o=!0),qg(a,(c,u)=>wP(t,r,i,c,u,n,o)),$g(t,i,!1),n&&t.patches_&&tc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function wP(t,e,n,r,i,a,o){if(ec(i)){const c=a&&e&&e.type_!==3&&!zS(e.assigned_,r)?a.concat(r):void 0,u=Hg(t,i,c);if(s4(n,r,u),ec(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gs(i)&&!nv(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Hg(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(jh(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&$g(t,i)}}function $g(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&U1(e,n)}function w$(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:o4(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=V1;n&&(i=[r],a=hh);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return r.draft_=c,r.revoke_=o,c}var V1={get(t,e){if(e===Xr)return t;const n=Ml(t);if(!zS(n,e))return S$(t,n,e);const r=n[e];return t.finalized_||!gs(r)?r:r===Ew(t.base_,e)?(Cw(t),t.copy_[e]=KS(r,t)):r},has(t,e){return e in Ml(t)},ownKeys(t){return Reflect.ownKeys(Ml(t))},set(t,e,n){const r=l4(Ml(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Ew(Ml(t),e),a=i==null?void 0:i[Xr];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(y$(n,i)&&(n!==void 0||zS(t.base_,e)))return!0;Cw(t),GS(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ew(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Cw(t),GS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ml(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Vi(11)},getPrototypeOf(t){return Ou(t.base_)},setPrototypeOf(){Vi(12)}},hh={};qg(V1,(t,e)=>{hh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});hh.deleteProperty=function(t,e){return hh.set.call(this,t,e,void 0)};hh.set=function(t,e,n){return V1.set.call(this,t[0],e,n,t[0])};function Ew(t,e){const n=t[Xr];return(n?Ml(n):t)[e]}function S$(t,e,n){var i;const r=l4(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function l4(t,e){if(!(e in t))return;let n=Ou(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ou(n)}}function GS(t){t.modified_||(t.modified_=!0,t.parent_&&GS(t.parent_))}function Cw(t){t.copy_||(t.copy_=qS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var _$=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const o=this;return function(u=a,...d){return o.produce(u,m=>n.call(this,m,...d))}}typeof n!="function"&&Vi(6),r!==void 0&&typeof r!="function"&&Vi(7);let i;if(gs(e)){const a=xP(this),o=KS(e,void 0);let c=!0;try{i=n(o),c=!1}finally{c?HS(a):$S(a)}return vP(a,r),bP(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===i4&&(i=void 0),this.autoFreeze_&&U1(i,!0),r){const a=[],o=[];tc("Patches").generateReplacementPatches_(e,i,a,o),r(a,o)}return i}else Vi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,u=>e(u,...c));let r,i;return[this.produce(e,n,(o,c)=>{r=o,i=c}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){gs(t)||Vi(8),ec(t)&&(t=cs(t));const e=xP(this),n=KS(t,void 0);return n[Xr].isManual_=!0,$S(e),n}finishDraft(t,e){const n=t&&t[Xr];(!n||!n.isManual_)&&Vi(9);const{scope_:r}=n;return vP(r,e),bP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=tc("Patches").applyPatches_;return ec(t)?r(t,e):this.produce(t,i=>r(i,e))}};function KS(t,e){const n=jh(t)?tc("MapSet").proxyMap_(t,e):tv(t)?tc("MapSet").proxySet_(t,e):w$(t,e);return(e?e.scope_:o4()).drafts_.push(n),n}function cs(t){return ec(t)||Vi(10,t),c4(t)}function c4(t){if(!gs(t)||nv(t))return t;const e=t[Xr];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=qS(t,e.scope_.immer_.useStrictShallowCopy_)}else n=qS(t,!0);return qg(n,(r,i)=>{s4(n,r,c4(i))}),e&&(e.finalized_=!1),n}var A$=new _$,u4=A$.produce;function d4(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var T$=d4(),E$=d4,C$=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?zg:zg.apply(null,arguments)};function _i(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Jr(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>r4(r)&&r.type===t,n}var f4=class zf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zf.prototype)}static get[Symbol.species](){return zf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zf(...e[0].concat(this)):new zf(...e.concat(this))}};function SP(t){return gs(t)?u4(t,()=>{}):t}function Wp(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function N$(t){return typeof t=="boolean"}var k$=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new f4;return n&&(N$(n)?o.push(T$):o.push(E$(n.extraArgument))),o},h4="RTK_autoBatch",br=()=>t=>({payload:t,meta:{[h4]:!0}}),_P=t=>e=>{setTimeout(e,t)},m4=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_P(10):t.type==="callback"?t.queueNotification:_P(t.timeout),d=()=>{o=!1,a&&(a=!1,c.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const p=()=>i&&m(),y=r.subscribe(p);return c.add(m),()=>{y(),c.delete(m)}},dispatch(m){var p;try{return i=!((p=m==null?void 0:m.meta)!=null&&p[h4]),a=!i,a&&(o||(o=!0,u(d))),r.dispatch(m)}finally{i=!0}}})},I$=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new f4(t);return r&&i.push(m4(typeof r=="object"?r:void 0)),i};function P$(t){const e=k$(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let c;if(typeof n=="function")c=n;else if(L1(n))c=n4(n);else throw new Error(Jr(1));let u;typeof r=="function"?u=r(e):u=e();let d=zg;i&&(d=C$({trace:!1,...typeof i=="object"&&i}));const m=p$(...u),p=I$(m);let y=typeof o=="function"?o(p):p();const x=d(...y);return t4(c,a,x)}function p4(t){const e={},n=[];let r;const i={addCase(a,o){const c=typeof a=="string"?a:a.type;if(!c)throw new Error(Jr(28));if(c in e)throw new Error(Jr(29));return e[c]=o,i},addAsyncThunk(a,o){return o.pending&&(e[a.pending.type]=o.pending),o.rejected&&(e[a.rejected.type]=o.rejected),o.fulfilled&&(e[a.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:a.settled,reducer:o.settled}),i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function D$(t){return typeof t=="function"}function R$(t,e){let[n,r,i]=p4(e),a;if(D$(t))a=()=>SP(t());else{const c=SP(t);a=()=>c}function o(c=a(),u){let d=[n[u.type],...r.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return d.filter(m=>!!m).length===0&&(d=[i]),d.reduce((m,p)=>{if(p)if(ec(m)){const x=p(m,u);return x===void 0?m:x}else{if(gs(m))return u4(m,y=>p(y,u));{const y=p(m,u);if(y===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return m},c)}return o.getInitialState=a,o}var M$="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",j$=(t=21)=>{let e="",n=t;for(;n--;)e+=M$[Math.random()*64|0];return e},O$=Symbol.for("rtk-slice-createasyncthunk");function L$(t,e){return`${t}/${e}`}function U$({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[O$];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(Jr(11));const c=(typeof i.reducers=="function"?i.reducers(F$()):i.reducers)||{},u=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(L,j){const V=typeof L=="string"?L:L.type;if(!V)throw new Error(Jr(12));if(V in d.sliceCaseReducersByType)throw new Error(Jr(13));return d.sliceCaseReducersByType[V]=j,m},addMatcher(L,j){return d.sliceMatchers.push({matcher:L,reducer:j}),m},exposeAction(L,j){return d.actionCreators[L]=j,m},exposeCaseReducer(L,j){return d.sliceCaseReducersByName[L]=j,m}};u.forEach(L=>{const j=c[L],V={reducerName:L,type:L$(a,L),createNotation:typeof i.reducers=="function"};z$(j)?H$(V,j,m,e):B$(V,j,m)});function p(){const[L={},j=[],V=void 0]=typeof i.extraReducers=="function"?p4(i.extraReducers):[i.extraReducers],I={...L,...d.sliceCaseReducersByType};return R$(i.initialState,R=>{for(let U in I)R.addCase(U,I[U]);for(let U of d.sliceMatchers)R.addMatcher(U.matcher,U.reducer);for(let U of j)R.addMatcher(U.matcher,U.reducer);V&&R.addDefaultCase(V)})}const y=L=>L,x=new Map,_=new WeakMap;let T;function C(L,j){return T||(T=p()),T(L,j)}function N(){return T||(T=p()),T.getInitialState()}function M(L,j=!1){function V(R){let U=R[L];return typeof U>"u"&&j&&(U=Wp(_,V,N)),U}function I(R=y){const U=Wp(x,j,()=>new WeakMap);return Wp(U,R,()=>{const F={};for(const[B,q]of Object.entries(i.selectors??{}))F[B]=V$(q,R,()=>Wp(_,R,N),j);return F})}return{reducerPath:L,getSelectors:I,get selectors(){return I(V)},selectSlice:V}}const P={name:a,reducer:C,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:N,...M(o),injectInto(L,{reducerPath:j,...V}={}){const I=j??o;return L.inject({reducerPath:I,reducer:C},V),{...P,...M(I,!0)}}};return P}}function V$(t,e,n,r){function i(a,...o){let c=e(a);return typeof c>"u"&&r&&(c=n()),t(c,...o)}return i.unwrapped=t,i}var ei=U$();function F$(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function B$({type:t,reducerName:e,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!q$(r))throw new Error(Jr(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?_i(t,o):_i(t))}function z$(t){return t._reducerDefinitionType==="asyncThunk"}function q$(t){return t._reducerDefinitionType==="reducerWithPrepare"}function H$({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Jr(18));const{payloadCreator:a,fulfilled:o,pending:c,rejected:u,settled:d,options:m}=n,p=i(t,a,m);r.exposeAction(e,p),o&&r.addCase(p.fulfilled,o),c&&r.addCase(p.pending,c),u&&r.addCase(p.rejected,u),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:o||Jp,pending:c||Jp,rejected:u||Jp,settled:d||Jp})}function Jp(){}var $$="task",g4="listener",y4="completed",F1="cancelled",G$=`task-${F1}`,K$=`task-${y4}`,YS=`${g4}-${F1}`,Y$=`${g4}-${y4}`,rv=class{constructor(t){mb(this,"name","TaskAbortError");mb(this,"message");this.code=t,this.message=`${$$} ${F1} (reason: ${t})`}},B1=(t,e)=>{if(typeof t!="function")throw new TypeError(Jr(32))},Gg=()=>{},v4=(t,e=Gg)=>(t.catch(e),t),x4=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Hl=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},$l=t=>{if(t.aborted){const{reason:e}=t;throw new rv(e)}};function b4(t,e){let n=Gg;return new Promise((r,i)=>{const a=()=>i(new rv(t.reason));if(t.aborted){a();return}n=x4(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=Gg})}var W$=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof rv?"cancelled":"rejected",error:n}}finally{e==null||e()}},Kg=t=>e=>v4(b4(t,e).then(n=>($l(t),n))),w4=t=>{const e=Kg(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:wu}=Object,AP={},iv="listenerMiddleware",J$=(t,e)=>{const n=r=>x4(t,()=>Hl(r,t.reason));return(r,i)=>{B1(r);const a=new AbortController;n(a);const o=W$(async()=>{$l(t),$l(a.signal);const c=await r({pause:Kg(a.signal),delay:w4(a.signal),signal:a.signal});return $l(a.signal),c},()=>Hl(a,K$));return i!=null&&i.autoJoin&&e.push(o.catch(Gg)),{result:Kg(t)(o),cancel(){Hl(a,G$)}}}},Q$=(t,e)=>{const n=async(r,i)=>{$l(e);let a=()=>{};const c=[new Promise((u,d)=>{let m=t({predicate:r,effect:(p,y)=>{y.unsubscribe(),u([p,y.getState(),y.getOriginalState()])}});a=()=>{m(),d()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await b4(e,Promise.race(c));return $l(e),u}finally{a()}};return(r,i)=>v4(n(r,i))},S4=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=_i(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Jr(21));return B1(a),{predicate:i,type:e,effect:a}},_4=wu(t=>{const{type:e,predicate:n,effect:r}=S4(t);return{id:j$(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Jr(22))}}},{withTypes:()=>_4}),TP=(t,e)=>{const{type:n,effect:r,predicate:i}=S4(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},WS=t=>{t.pending.forEach(e=>{Hl(e,YS)})},X$=(t,e)=>()=>{for(const n of e.keys())WS(n);t.clear()},EP=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},A4=wu(_i(`${iv}/add`),{withTypes:()=>A4}),Z$=_i(`${iv}/removeAll`),T4=wu(_i(`${iv}/remove`),{withTypes:()=>T4}),eG=(...t)=>{console.error(`${iv}/error`,...t)},Oh=(t={})=>{const e=new Map,n=new Map,r=x=>{const _=n.get(x)??0;n.set(x,_+1)},i=x=>{const _=n.get(x)??1;_===1?n.delete(x):n.set(x,_-1)},{extra:a,onError:o=eG}=t;B1(o);const c=x=>(x.unsubscribe=()=>e.delete(x.id),e.set(x.id,x),_=>{x.unsubscribe(),_!=null&&_.cancelActive&&WS(x)}),u=x=>{const _=TP(e,x)??_4(x);return c(_)};wu(u,{withTypes:()=>u});const d=x=>{const _=TP(e,x);return _&&(_.unsubscribe(),x.cancelActive&&WS(_)),!!_};wu(d,{withTypes:()=>d});const m=async(x,_,T,C)=>{const N=new AbortController,M=Q$(u,N.signal),P=[];try{x.pending.add(N),r(x),await Promise.resolve(x.effect(_,wu({},T,{getOriginalState:C,condition:(L,j)=>M(L,j).then(Boolean),take:M,delay:w4(N.signal),pause:Kg(N.signal),extra:a,signal:N.signal,fork:J$(N.signal,P),unsubscribe:x.unsubscribe,subscribe:()=>{e.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((L,j,V)=>{L!==N&&(Hl(L,YS),V.delete(L))})},cancel:()=>{Hl(N,YS),x.pending.delete(N)},throwIfCancelled:()=>{$l(N.signal)}})))}catch(L){L instanceof rv||EP(o,L,{raisedBy:"effect"})}finally{await Promise.all(P),Hl(N,Y$),i(x),x.pending.delete(N)}},p=X$(e,n);return{middleware:x=>_=>T=>{if(!r4(T))return _(T);if(A4.match(T))return u(T.payload);if(Z$.match(T)){p();return}if(T4.match(T))return d(T.payload);let C=x.getState();const N=()=>{if(C===AP)throw new Error(Jr(23));return C};let M;try{if(M=_(T),e.size>0){const P=x.getState(),L=Array.from(e.values());for(const j of L){let V=!1;try{V=j.predicate(T,P,C)}catch(I){V=!1,EP(o,I,{raisedBy:"predicate"})}V&&m(j,T,x,N)}}}finally{C=AP}return M},startListening:u,stopListening:d,clearListeners:p}};function Jr(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var tG={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},E4=ei({name:"chartLayout",initialState:tG,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:nG,setLayout:rG,setChartSize:iG,setScale:aG}=E4.actions,sG=E4.reducer;function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(r){oG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oG(t,e,n){return(e=lG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lG(t){var e=cG(t,"string");return typeof e=="symbol"?e:e+""}function cG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yg=Math.PI/180,Wg=t=>t*Math.PI/180,uG=t=>t*180/Math.PI,Jt=(t,e,n,r)=>({x:t+Math.cos(-Yg*r)*n,y:e+Math.sin(-Yg*r)*n}),C4=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},dG=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},fG=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,o=dG({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var c=(n-i)/o,u=Math.acos(c);return r>a&&(u=2*Math.PI-u),{radius:o,angle:uG(u),angleInRadian:u}},hG=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},mG=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return t+o*360},pG=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:a}=fG({x:n,y:r},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:u,endAngle:d}=hG(e),m=a,p;if(u<=d){for(;m>d;)m-=360;for(;m<u;)m+=360;p=m>=u&&m<=d}else{for(;m>u;)m-=360;for(;m<d;)m+=360;p=m>=d&&m<=u}return p?NP(NP({},e),{},{radius:i,angle:mG(m,e)}):null},gG=t=>!E.isValidElement(t)&&typeof t!="function"&&typeof t!="boolean"&&t!=null?t.className:"";function N4(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){yG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yG(t,e,n){return(e=vG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vG(t){var e=xG(t,"string");return typeof e=="symbol"?e:e+""}function xG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ct(t,e,n){return Kt(t)||Kt(e)?n:Pa(e)?Zl(t,e,n):typeof e=="function"?e(t):n}var bG=(t,e,n,r,i)=>{var a,o=-1,c=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var d=u>0?n[u-1].coordinate:n[c-1].coordinate,m=n[u].coordinate,p=u>=c-1?n[0].coordinate:n[u+1].coordinate,y=void 0;if(Sn(m-d)!==Sn(p-m)){var x=[];if(Sn(p-m)===Sn(i[1]-i[0])){y=p;var _=m+i[1]-i[0];x[0]=Math.min(_,(_+d)/2),x[1]=Math.max(_,(_+d)/2)}else{y=d;var T=p+i[1]-i[0];x[0]=Math.min(m,(T+m)/2),x[1]=Math.max(m,(T+m)/2)}var C=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(t>C[0]&&t<=C[1]||t>=x[0]&&t<=x[1]){({index:o}=n[u]);break}}else{var N=Math.min(d,p),M=Math.max(d,p);if(t>(N+m)/2&&t<=(M+m)/2){({index:o}=n[u]);break}}}else if(e){for(var P=0;P<c;P++)if(P===0&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P>0&&P<c-1&&t>(e[P].coordinate+e[P-1].coordinate)/2&&t<=(e[P].coordinate+e[P+1].coordinate)/2||P===c-1&&t>(e[P].coordinate+e[P-1].coordinate)/2){({index:o}=e[P]);break}}return o},wG=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&a!=="center"&&Te(t[a]))return xi(xi({},t),{},{[a]:t[a]+(r||0)});if((c==="horizontal"||c==="vertical"&&a==="center")&&o!=="middle"&&Te(t[o]))return xi(xi({},t),{},{[o]:t[o]+(i||0)})}return t},Oa=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",k4=(t,e,n,r)=>{if(r)return t.map(c=>c.coordinate);var i,a,o=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===n&&(a=!0),c.coordinate));return i||o.push(e),a||o.push(n),o},I4=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:d,tickCount:m,ticks:p,niceTicks:y,axisType:x}=t;if(!o)return null;var _=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,T=i==="category"&&o.bandwidth?o.bandwidth()/_:0;if(T=x==="angleAxis"&&a&&a.length>=2?Sn(a[0]-a[1])*2*T:T,p||y){var C=(p||y||[]).map((N,M)=>{var P=r?r.indexOf(N):N;return{coordinate:o(P)+T,value:N,offset:T,index:M}});return C.filter(N=>!Qr(N.coordinate))}return u&&d?d.map((N,M)=>({coordinate:o(N)+T,value:N,index:M,offset:T})):o.ticks&&m!=null?o.ticks(m).map((N,M)=>({coordinate:o(N)+T,value:N,offset:T,index:M})):o.domain().map((N,M)=>({coordinate:o(N)+T,value:r?r[N]:N,index:M,offset:T}))},IP=1e-4,SG=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-IP,a=Math.max(r[0],r[1])+IP,o=t(e[0]),c=t(e[n-1]);(o<i||o>a||c<i||c>a)&&t.domain([e[0],e[n-1]])}},P4=(t,e)=>{if(!e||e.length!==2||!Te(e[0])||!Te(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Te(t[0])||t[0]<n)&&(i[0]=n),(!Te(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},_G=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,o=0;o<e;++o){var c=Qr(t[o][n][1])?t[o][n][0]:t[o][n][1];c>=0?(t[o][n][0]=i,t[o][n][1]=i+c,i=t[o][n][1]):(t[o][n][0]=a,t[o][n][1]=a+c,a=t[o][n][1])}},AG=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var o=Qr(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},TG={sign:_G,expand:Jq,none:ju,silhouette:Qq,wiggle:Xq,positive:AG},EG=(t,e,n)=>{var r=TG[n],i=Wq().keys(e).value((a,o)=>+Ct(a,o,0)).order(VS).offset(r);return i(t)};function av(t){return t==null?void 0:String(t)}function PP(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Kt(i[e.dataKey])){var c=U5(n,"value",i[e.dataKey]);if(c)return c.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=Ct(i,Kt(o)?e.dataKey:o);return Kt(u)?null:e.scale(u)}var Jg=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var c=Ct(a,e.dataKey,e.scale.domain()[o]);return Kt(c)?null:e.scale(c)-i/2+r},D4=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},CG=t=>{var e=t.flat(2).filter(Te);return[Math.min(...e),Math.max(...e)]},NG=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],kG=(t,e,n)=>{if(t!=null)return NG(Object.keys(t).reduce((r,i)=>{var a=t[i],{stackedData:o}=a,c=o.reduce((u,d)=>{var m=N4(d,e,n),p=CG(m);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},DP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ys=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Zy(e,m=>m.coordinate),a=1/0,o=1,c=i.length;o<c;o++){var u=i[o],d=i[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function MP(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return xi(xi({},e),{},{dataKey:n,payload:r,value:i,name:a})}function hc(t,e){if(t)return String(t);if(typeof e=="string")return e}function IG(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return r?pG({x:t,y:e},r):null}var PG=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=r;return xi(xi(xi({},r),Jt(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var c=i.coordinate,{angle:u}=r;return xi(xi(xi({},r),Jt(r.cx,r.cy,c,u)),{},{angle:u,radius:c})}return{x:0,y:0}},DG=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,Cs=t=>t.layout.width,Ns=t=>t.layout.height,RG=t=>t.layout.scale,R4=t=>t.layout.margin,sv=J(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),ov=J(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),M4="data-recharts-item-index",j4="data-recharts-item-data-key",Lh=60;function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){MG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MG(t,e,n){return(e=jG(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jG(t){var e=OG(t,"string");return typeof e=="symbol"?e:e+""}function OG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LG=t=>t.brush.height;function UG(t){var e=ov(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Lh;return n+i}return n},0)}function VG(t){var e=ov(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Lh;return n+i}return n},0)}function FG(t){var e=sv(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function BG(t){var e=sv(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var jn=J([Cs,Ns,R4,LG,UG,VG,FG,BG,Z5,l$],(t,e,n,r,i,a,o,c,u,d)=>{var m={left:(n.left||0)+i,right:(n.right||0)+a},p={top:(n.top||0)+o,bottom:(n.bottom||0)+c},y=Qp(Qp({},p),m),x=y.bottom;y.bottom+=r,y=wG(y,u,d);var _=t-y.left-y.right,T=e-y.top-y.bottom;return Qp(Qp({brushBottom:x},y),{},{width:Math.max(_,0),height:Math.max(T,0)})}),zG=J(jn,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),z1=J(Cs,Ns,(t,e)=>({x:0,y:0,width:t,height:e})),qG=E.createContext(null),gr=()=>E.useContext(qG)!=null,lv=t=>t.brush,cv=J([lv,jn,R4],(t,e,n)=>({height:t.height,x:Te(t.x)?t.x:e.left,y:Te(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Te(t.width)?t.width:e.width})),Nw={},kw={},Iw={},OP;function HG(){return OP||(OP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let o,c=null;const u=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),m=()=>{c!==null&&(n.apply(o,c),o=void 0,c=null)},p=()=>{d&&m(),T()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},r)},_=()=>{y!==null&&(clearTimeout(y),y=null)},T=()=>{_(),o=void 0,c=null},C=()=>{m()},N=function(...M){if(i!=null&&i.aborted)return;o=this,c=M;const P=y==null;x(),u&&P&&m()};return N.schedule=x,N.cancel=T,N.flush=C,i==null||i.addEventListener("abort",T,{once:!0}),N}t.debounce=e})(Iw)),Iw}var LP;function $G(){return LP||(LP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HG();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:c=!0,maxWait:u}=a,d=Array(2);o&&(d[0]="leading"),c&&(d[1]="trailing");let m,p=null;const y=e.debounce(function(...T){m=r.apply(this,T),p=null},i,{edges:d}),x=function(...T){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(m=r.apply(this,T),p=Date.now(),y.cancel(),y.schedule(),m):(y.apply(this,T),m)},_=()=>(y.flush(),m);return x.cancel=y.cancel,x.flush=_,x}t.debounce=n})(kw)),kw}var UP;function GG(){return UP||(UP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$G();function n(r,i=0,a={}){const{leading:o=!0,trailing:c=!0}=a;return e.debounce(r,i,{leading:o,maxWait:i,trailing:c})}t.throttle=n})(Nw)),Nw}var Pw,VP;function KG(){return VP||(VP=1,Pw=GG().throttle),Pw}var YG=KG();const WG=Ma(YG);var Qg=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},O4=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:o}=n,c=ps(r)?t:Number(r),u=ps(i)?e:Number(i);return a&&a>0&&(c?u=c/a:u&&(c=u*a),o&&u>o&&(u=o)),{calculatedWidth:c,calculatedHeight:u}},JG={width:0,height:0,overflow:"visible"},QG={width:0,overflowX:"visible"},XG={height:0,overflowY:"visible"},ZG={},eK=t=>{var{width:e,height:n}=t,r=ps(e),i=ps(n);return r&&i?JG:r?QG:i?XG:ZG};function tK(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Tn(t){return Number.isFinite(t)}function Lu(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JS.apply(null,arguments)}function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){nK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nK(t,e,n){return(e=rK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rK(t){var e=iK(t,"string");return typeof e=="symbol"?e:e+""}function iK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L4=E.createContext({width:-1,height:-1});function U4(t){var{children:e,width:n,height:r}=t,i=E.useMemo(()=>({width:n,height:r}),[n,r]);return n<=0||r<=0?null:E.createElement(L4.Provider,{value:i},e)}var q1=()=>E.useContext(L4),aK=E.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:o=0,minHeight:c,maxHeight:u,children:d,debounce:m=0,id:p,className:y,onResize:x,style:_={}}=t,T=E.useRef(null),C=E.useRef();C.current=x,E.useImperativeHandle(e,()=>T.current);var[N,M]=E.useState({containerWidth:r.width,containerHeight:r.height}),P=E.useCallback((R,U)=>{M(F=>{var B=Math.round(R),q=Math.round(U);return F.containerWidth===B&&F.containerHeight===q?F:{containerWidth:B,containerHeight:q}})},[]);E.useEffect(()=>{var R=q=>{var H,{width:se,height:Se}=q[0].contentRect;P(se,Se),(H=C.current)===null||H===void 0||H.call(C,se,Se)};m>0&&(R=WG(R,m,{trailing:!0,leading:!1}));var U=new ResizeObserver(R),{width:F,height:B}=T.current.getBoundingClientRect();return P(F,B),U.observe(T.current),()=>{U.disconnect()}},[P,m]);var{containerWidth:L,containerHeight:j}=N;Qg(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:V,calculatedHeight:I}=O4(L,j,{width:i,height:a,aspect:n,maxHeight:u});return Qg(V>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,V,I,i,a,o,c,n),E.createElement("div",{id:p?"".concat(p):void 0,className:nt("recharts-responsive-container",y),style:BP(BP({},_),{},{width:i,height:a,minWidth:o,minHeight:c,maxHeight:u}),ref:T},E.createElement("div",{style:eK({width:i,height:a})},E.createElement(U4,{width:V,height:I},d)))}),Yi=E.forwardRef((t,e)=>{var n=q1();if(Lu(n.width)&&Lu(n.height))return t.children;var{width:r,height:i}=tK({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:o}=O4(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Te(a)&&Te(o)?E.createElement(U4,{width:a,height:o},t.children):E.createElement(aK,JS({},t,{width:r,height:i,ref:e}))}),uv=()=>{var t,e=gr(),n=_e(zG),r=_e(cv),i=(t=_e(lv))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},sK={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},V4=()=>{var t;return(t=_e(jn))!==null&&t!==void 0?t:sK},H1=()=>_e(Cs),$1=()=>_e(Ns),oK=()=>_e(t=>t.layout.margin),Ge=t=>t.layout.layoutType,dv=()=>_e(Ge),fv=t=>{var e=Ft(),n=gr(),{width:r,height:i}=t,a=q1(),o=r,c=i;return a&&(o=a.width>0?a.width:r,c=a.height>0?a.height:i),E.useEffect(()=>{!n&&Lu(o)&&Lu(c)&&e(iG({width:o,height:c}))},[e,n,o,c]),null},lK={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},F4=ei({name:"legend",initialState:lK,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:br()},removeLegendPayload:{reducer(t,e){var n=cs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:br()}}}),{setLegendSize:zP,setLegendSettings:cK,addLegendPayload:B4,removeLegendPayload:z4}=F4.actions,uK=F4.reducer,dK=["contextPayload"];function QS(){return QS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QS.apply(null,arguments)}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){G1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G1(t,e,n){return(e=fK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fK(t){var e=hK(t,"string");return typeof e=="symbol"?e:e+""}function hK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mK(t,e){if(t==null)return{};var n,r,i=pK(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pK(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gK(t){return t.value}function yK(t){var{contextPayload:e}=t,n=mK(t,dK),r=W5(e,t.payloadUniqBy,gK),i=Uu(Uu({},n),{},{payload:r});return E.isValidElement(t.content)?E.cloneElement(t.content,i):typeof t.content=="function"?E.createElement(t.content,i):E.createElement(M1,i)}function vK(t,e,n,r,i,a){var{layout:o,align:c,verticalAlign:u}=e,d,m;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&o==="vertical"?d={left:((r||0)-a.width)/2}:d=c==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?m={top:((i||0)-a.height)/2}:m=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Uu(Uu({},d),m)}function xK(t){var e=Ft();return E.useEffect(()=>{e(cK(t))},[e,t]),null}function bK(t){var e=Ft();return E.useEffect(()=>(e(zP(t)),()=>{e(zP({width:0,height:0}))}),[e,t]),null}function wK(t){var e=d$(),n=xq(),r=oK(),{width:i,height:a,wrapperStyle:o,portal:c}=t,[u,d]=e4([e]),m=H1(),p=$1();if(m==null||p==null)return null;var y=m-(r.left||0)-(r.right||0),x=Jo.getWidthOrHeight(t.layout,a,i,y),_=c?o:Uu(Uu({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||a||"auto"},vK(o,t,r,m,p,u)),o),T=c??n;if(T==null)return null;var C=E.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:d},E.createElement(xK,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),E.createElement(bK,{width:u.width,height:u.height}),E.createElement(yK,QS({},t,x,{margin:r,chartWidth:m,chartHeight:p,contextPayload:e})));return v5.createPortal(C,T)}class Jo extends E.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&Te(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return E.createElement(wK,this.props)}}G1(Jo,"displayName","Legend");G1(Jo,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XS.apply(null,arguments)}function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){SK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SK(t,e,n){return(e=_K(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _K(t){var e=AK(t,"string");return typeof e=="symbol"?e:e+""}function AK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TK(t){return Array.isArray(t)&&Pa(t[0])&&Pa(t[1])?t.join(" ~ "):t}var EK=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:d,label:m,labelFormatter:p,accessibilityLayer:y=!1}=t,x=()=>{if(a&&a.length){var j={padding:0,margin:0},V=(c?Zy(a,c):a).map((I,R)=>{if(I.type==="none")return null;var U=I.formatter||o||TK,{value:F,name:B}=I,q=F,H=B;if(U){var se=U(F,B,I,R,a);if(Array.isArray(se))[q,H]=se;else if(se!=null)q=se;else return null}var Se=Dw({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},r);return E.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:Se},Pa(H)?E.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Pa(H)?E.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,E.createElement("span",{className:"recharts-tooltip-item-value"},q),E.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return E.createElement("ul",{className:"recharts-tooltip-item-list",style:j},V)}return null},_=Dw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),T=Dw({margin:0},i),C=!Kt(m),N=C?m:"",M=nt("recharts-default-tooltip",u),P=nt("recharts-tooltip-label",d);C&&p&&a!==void 0&&a!==null&&(N=p(m,a));var L=y?{role:"status","aria-live":"assertive"}:{};return E.createElement("div",XS({className:M,style:_},L),E.createElement("p",{className:P,style:T},E.isValidElement(N)?N:"".concat(N)),x())},Df="recharts-tooltip-wrapper",CK={visibility:"hidden"};function NK(t){var{coordinate:e,translateX:n,translateY:r}=t;return nt(Df,{["".concat(Df,"-right")]:Te(n)&&e&&Te(e.x)&&n>=e.x,["".concat(Df,"-left")]:Te(n)&&e&&Te(e.x)&&n<e.x,["".concat(Df,"-bottom")]:Te(r)&&e&&Te(e.y)&&r>=e.y,["".concat(Df,"-top")]:Te(r)&&e&&Te(e.y)&&r<e.y})}function $P(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:d}=t;if(a&&Te(a[r]))return a[r];var m=n[r]-c-(i>0?i:0),p=n[r]+i;if(e[r])return o[r]?m:p;var y=u[r];if(y==null)return 0;if(o[r]){var x=m,_=y;return x<_?Math.max(p,y):Math.max(m,y)}if(d==null)return 0;var T=p+c,C=y+d;return T>C?Math.max(m,y):Math.max(p,y)}function kK(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function IK(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,d,m,p;return o.height>0&&o.width>0&&n?(m=$P({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=$P({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),d=kK({translateX:m,translateY:p,useTranslate3d:c})):d=CK,{cssProperties:d,cssClasses:NK({translateX:m,translateY:p,coordinate:n})}}function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){ZS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZS(t,e,n){return(e=PK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PK(t){var e=DK(t,"string");return typeof e=="symbol"?e:e+""}function DK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class RK extends E.PureComponent{constructor(){super(...arguments),ZS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ZS(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:c,isAnimationActive:u,offset:d,position:m,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:_,lastBoundingBox:T,innerRef:C,hasPortalFromProps:N}=this.props,{cssClasses:M,cssProperties:P}=IK({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:d,position:m,reverseDirection:p,tooltipBox:{height:T.height,width:T.width},useTranslate3d:y,viewBox:x}),L=N?{}:Xp(Xp({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},P),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),j=Xp(Xp({},L),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},_);return E.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:j,ref:C},a)}}var MK=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ks={devToolsEnabled:!1,isSsr:MK()},q4=()=>_e(t=>t.rootProps.accessibilityLayer);function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e_.apply(null,arguments)}function KP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KP(Object(n),!0).forEach(function(r){jK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jK(t,e,n){return(e=OK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OK(t){var e=LK(t,"string");return typeof e=="symbol"?e:e+""}function LK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WP={curveBasisClosed:Uq,curveBasisOpen:Vq,curveBasis:Lq,curveBumpX:_q,curveBumpY:Aq,curveLinearClosed:Fq,curveLinear:Qy,curveMonotoneX:Bq,curveMonotoneY:zq,curveNatural:qq,curveStep:Hq,curveStepAfter:Gq,curveStepBefore:$q},Zp=t=>Tn(t.x)&&Tn(t.y),Rf=t=>t.x,Mf=t=>t.y,UK=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Mh(t));return(n==="curveMonotone"||n==="curveBump")&&e?WP["".concat(n).concat(e==="vertical"?"Y":"X")]:WP[n]||Qy},VK=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,o=UK(e,i),c=a?n.filter(Zp):n,u;if(Array.isArray(r)){var d=a?r.filter(p=>Zp(p)):r,m=c.map((p,y)=>YP(YP({},p),{},{base:d[y]}));return i==="vertical"?u=$p().y(Mf).x1(Rf).x0(p=>p.base.x):u=$p().x(Rf).y1(Mf).y0(p=>p.base.y),u.defined(Zp).curve(o),u(m)}return i==="vertical"&&Te(r)?u=$p().y(Mf).x1(Rf).x0(r):Te(r)?u=$p().x(Rf).y1(Mf).y0(r):u=T5().x(Rf).y(Mf),u.defined(Zp).curve(o),u(c)},Wf=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var a=n&&n.length?VK(t):r;return E.createElement("path",e_({},Mn(t),D1(t),{className:nt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},FK=["x","y","top","left","width","height","className"];function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t_.apply(null,arguments)}function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(r){zK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zK(t,e,n){return(e=qK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qK(t){var e=HK(t,"string");return typeof e=="symbol"?e:e+""}function HK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $K(t,e){if(t==null)return{};var n,r,i=GK(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function GK(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var KK=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),YK=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:c}=t,u=$K(t,FK),d=BK({x:e,y:n,top:r,left:i,width:a,height:o},u);return!Te(e)||!Te(n)||!Te(a)||!Te(o)||!Te(r)||!Te(i)?null:E.createElement("path",t_({},Hn(d),{className:nt("recharts-cross",c),d:KK(e,n,a,o,r,i)}))};function WK(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function QP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JK(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(n),!0).forEach(function(r){QK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QK(t,e,n){return(e=XK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XK(t){var e=ZK(t,"string");return typeof e=="symbol"?e:e+""}function ZK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $n(t,e){var n=JK({},t),r=e,i=Object.keys(e),a=i.reduce((o,c)=>(o[c]===void 0&&r[c]!==void 0&&(o[c]=r[c]),o),n);return a}function eY(){}function tY(t){return t!=null}function XP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XP(Object(n),!0).forEach(function(r){nY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nY(t,e,n){return(e=rY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rY(t){var e=iY(t,"string");return typeof e=="symbol"?e:e+""}function iY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aY=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),H4=(t,e,n)=>t.map(r=>"".concat(aY(r)," ").concat(e,"ms ").concat(n)).join(","),sY=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),mh=(t,e)=>Object.keys(e).reduce((n,r)=>ZP(ZP({},n),{},{[r]:t(r,e[r])}),{});function e2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e2(Object(n),!0).forEach(function(r){oY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oY(t,e,n){return(e=lY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lY(t){var e=cY(t,"string");return typeof e=="symbol"?e:e+""}function cY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xg=(t,e,n)=>t+(e-t)*n,n_=t=>{var{from:e,to:n}=t;return e!==n},$4=(t,e,n)=>{var r=mh((i,a)=>{if(n_(a)){var[o,c]=t(a.from,a.to,a.velocity);return tr(tr({},a),{},{from:o,velocity:c})}return a},e);return n<1?mh((i,a)=>n_(a)?tr(tr({},a),{},{velocity:Xg(a.velocity,r[i].velocity,n),from:Xg(a.from,r[i].from,n)}):a,e):$4(t,r,n-1)};function uY(t,e,n,r,i,a){var o,c=r.reduce((y,x)=>tr(tr({},y),{},{[x]:{from:t[x],velocity:0,to:e[x]}}),{}),u=()=>mh((y,x)=>x.from,c),d=()=>!Object.values(c).filter(n_).length,m=null,p=y=>{o||(o=y);var x=y-o,_=x/n.dt;c=$4(n,c,_),i(tr(tr(tr({},t),e),u())),o=y,d()||(m=a.setTimeout(p))};return()=>(m=a.setTimeout(p),()=>{m()})}function dY(t,e,n,r,i,a,o){var c=null,u=i.reduce((p,y)=>tr(tr({},p),{},{[y]:[t[y],e[y]]}),{}),d,m=p=>{d||(d=p);var y=(p-d)/r,x=mh((T,C)=>Xg(...C,n(y)),u);if(a(tr(tr(tr({},t),e),x)),y<1)c=o.setTimeout(m);else{var _=mh((T,C)=>Xg(...C,n(1)),u);a(tr(tr(tr({},t),e),_))}};return()=>(c=o.setTimeout(m),()=>{c()})}const fY=(t,e,n,r,i,a)=>{var o=sY(t,e);return n.isStepper===!0?uY(t,e,n,o,i,a):dY(t,e,n,r,o,i,a)};var Zg=1e-4,G4=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],K4=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),t2=(t,e)=>n=>{var r=G4(t,e);return K4(r,n)},hY=(t,e)=>n=>{var r=G4(t,e),i=[...r.map((a,o)=>a*o).slice(1),0];return K4(i,n)},n2=function(){for(var e,n,r,i,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,n,i]=u[1].split(")")[0].split(",").map(_=>parseFloat(_)))}}else o.length===4&&([e,r,n,i]=o);var d=t2(e,n),m=t2(r,i),p=hY(e,n),y=_=>_>1?1:_<0?0:_,x=_=>{for(var T=_>1?1:_,C=T,N=0;N<8;++N){var M=d(C)-T,P=p(C);if(Math.abs(M-T)<Zg||P<Zg)return m(C);C=y(C-M/P)}return m(C)};return x.isStepper=!1,x},mY=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(o,c,u)=>{var d=-(o-c)*n,m=u*r,p=u+(d-m)*i/1e3,y=u*i/1e3+o;return Math.abs(y-c)<Zg&&Math.abs(p)<Zg?[c,0]:[y,p]};return a.isStepper=!0,a.dt=i,a},pY=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return n2(t);case"spring":return mY();default:if(t.split("(")[0]==="cubic-bezier")return n2(t)}return typeof t=="function"?t:null};function gY(t){var e,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...d]=c;if(typeof u=="number"){i=t.setTimeout(a.bind(null,d),u);return}a(u),i=t.setTimeout(a.bind(null,d));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class yY{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function vY(){return gY(new yY)}var xY=E.createContext(vY);function bY(t,e){var n=E.useContext(xY);return E.useMemo(()=>e??n(t),[t,e,n])}var wY={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},r2={t:0},Rw={t:1};function rd(t){var e=$n(t,wY),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:u,children:d}=e,m=bY(e.animationId,e.animationManager),[p,y]=E.useState(n?r2:Rw),x=E.useRef(null);return E.useEffect(()=>{n||y(Rw)},[n]),E.useEffect(()=>{if(!n||!r)return eY;var _=fY(r2,Rw,pY(a),i,y,m.getTimeoutController()),T=()=>{x.current=_()};return m.start([u,o,T,i,c]),()=>{m.stop(),x.current&&x.current(),c()}},[n,r,i,a,o,u,c,m]),d(p.t)}function id(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=E.useRef(dh(e)),r=E.useRef(t);return r.current!==t&&(n.current=dh(e),r.current=t),n.current}var SY=["radius"],_Y=["radius"];function i2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i2(Object(n),!0).forEach(function(r){AY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AY(t,e,n){return(e=TY(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TY(t){var e=EY(t,"string");return typeof e=="symbol"?e:e+""}function EY(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ey.apply(null,arguments)}function s2(t,e){if(t==null)return{};var n,r,i=CY(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function CY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var o2=(t,e,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,c=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,y=4;p<y;p++)m[p]=i[p]>a?a:i[p];d="M".concat(t,",").concat(e+o*m[0]),m[0]>0&&(d+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+c*m[0],",").concat(e)),d+="L ".concat(t+n-c*m[1],",").concat(e),m[1]>0&&(d+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(e+o*m[1])),d+="L ".concat(t+n,",").concat(e+r-o*m[2]),m[2]>0&&(d+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+n-c*m[2],",").concat(e+r)),d+="L ".concat(t+c*m[3],",").concat(e+r),m[3]>0&&(d+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+r-o*m[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var x=Math.min(a,i);d="M ".concat(t,",").concat(e+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+c*x,",").concat(e,`
            L `).concat(t+n-c*x,",").concat(e,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n,",").concat(e+o*x,`
            L `).concat(t+n,",").concat(e+r-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n-c*x,",").concat(e+r,`
            L `).concat(t+c*x,",").concat(e+r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(e+r-o*x," Z")}else d="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},NY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Y4=t=>{var e=$n(t,NY),n=E.useRef(null),[r,i]=E.useState(-1);E.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var ue=n.current.getTotalLength();ue&&i(ue)}catch{}},[]);var{x:a,y:o,width:c,height:u,radius:d,className:m}=e,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:_,isUpdateAnimationActive:T}=e,C=E.useRef(c),N=E.useRef(u),M=E.useRef(a),P=E.useRef(o),L=E.useMemo(()=>({x:a,y:o,width:c,height:u,radius:d}),[a,o,c,u,d]),j=id(L,"rectangle-");if(a!==+a||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var V=nt("recharts-rectangle",m);if(!T){var I=Hn(e),{radius:R}=I,U=s2(I,SY);return E.createElement("path",ey({},U,{radius:typeof d=="number"?d:void 0,className:V,d:o2(a,o,c,u,d)}))}var F=C.current,B=N.current,q=M.current,H=P.current,se="0px ".concat(r===-1?1:r,"px"),Se="".concat(r,"px 0px"),Q=H4(["strokeDasharray"],y,typeof p=="string"?p:void 0);return E.createElement(rd,{animationId:j,key:j,canBegin:r>0,duration:y,easing:p,isActive:T,begin:x},ue=>{var be=Wt(F,c,ue),De=Wt(B,u,ue),Ke=Wt(q,a,ue),K=Wt(H,o,ue);n.current&&(C.current=be,N.current=De,M.current=Ke,P.current=K);var re;_?ue>0?re={transition:Q,strokeDasharray:Se}:re={strokeDasharray:se}:re={strokeDasharray:Se};var pe=Hn(e),{radius:we}=pe,Ce=s2(pe,_Y);return E.createElement("path",ey({},Ce,{radius:typeof d=="number"?d:void 0,className:V,d:o2(Ke,K,be,De,d),ref:n,style:a2(a2({},re),e.style)}))})};function W4(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,o=Jt(e,n,r,i),c=Jt(e,n,r,a);return{points:[o,c],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function r_(){return r_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(null,arguments)}var kY=(t,e)=>{var n=Sn(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},eg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,d=c*(o?1:-1)+r,m=Math.asin(c/d)/Yg,p=u?i:i+a*m,y=Jt(e,n,d,p),x=Jt(e,n,r,p),_=u?i-a*m:i,T=Jt(e,n,d*Math.cos(m*Yg),_);return{center:y,circleTangency:x,lineTangency:T,theta:m}},J4=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=t,c=kY(a,o),u=a+c,d=Jt(e,n,i,a),m=Jt(e,n,i,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var y=Jt(e,n,r,a),x=Jt(e,n,r,u);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},IY=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}=t,m=Sn(d-u),{circleTangency:p,lineTangency:y,theta:x}=eg({cx:e,cy:n,radius:i,angle:u,sign:m,cornerRadius:a,cornerIsExternal:c}),{circleTangency:_,lineTangency:T,theta:C}=eg({cx:e,cy:n,radius:i,angle:d,sign:-m,cornerRadius:a,cornerIsExternal:c}),N=c?Math.abs(u-d):Math.abs(u-d)-x-C;if(N<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):J4({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var M="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,`
  `);if(r>0){var{circleTangency:P,lineTangency:L,theta:j}=eg({cx:e,cy:n,radius:r,angle:u,sign:m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),{circleTangency:V,lineTangency:I,theta:R}=eg({cx:e,cy:n,radius:r,angle:d,sign:-m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),U=c?Math.abs(u-d):Math.abs(u-d)-j-R;if(U<0&&a===0)return"".concat(M,"L").concat(e,",").concat(n,"Z");M+="L".concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(V.x,",").concat(V.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(U>180),",").concat(+(m>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(L.x,",").concat(L.y,"Z")}else M+="L".concat(e,",").concat(n,"Z");return M},PY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Q4=t=>{var e=$n(t,PY),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:m,className:p}=e;if(a<i||d===m)return null;var y=nt("recharts-sector",p),x=a-i,_=mr(o,x,0,!0),T;return _>0&&Math.abs(d-m)<360?T=IY({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(_,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:m}):T=J4({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:m}),E.createElement("path",r_({},Hn(e),{className:y,d:T}))};function DY(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:c,cy:u,innerRadius:d,outerRadius:m,angle:p}=e,y=Jt(c,u,d,p),x=Jt(c,u,m,p);r=y.x,i=y.y,a=x.x,o=x.y}else return W4(e);return[{x:r,y:i},{x:a,y:o}]}var Mw={},jw={},Ow={},l2;function RY(){return l2||(l2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Q5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(Ow)),Ow}var c2;function MY(){return c2||(c2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RY();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(jw)),jw}var u2;function jY(){return u2||(u2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X5(),n=MY();function r(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const c=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(c);for(let d=0;d<c;d++)u[d]=i,i+=o;return u}t.range=r})(Mw)),Mw}var Lw,d2;function OY(){return d2||(d2=1,Lw=jY().range),Lw}var LY=OY();const X4=Ma(LY);function Io(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function UY(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function K1(t){let e,n,r;t.length!==2?(e=Io,n=(c,u)=>Io(t(c),u),r=(c,u)=>t(c)-u):(e=t===Io||t===UY?t:VY,n=t,r=t);function i(c,u,d=0,m=c.length){if(d<m){if(e(u,u)!==0)return m;do{const p=d+m>>>1;n(c[p],u)<0?d=p+1:m=p}while(d<m)}return d}function a(c,u,d=0,m=c.length){if(d<m){if(e(u,u)!==0)return m;do{const p=d+m>>>1;n(c[p],u)<=0?d=p+1:m=p}while(d<m)}return d}function o(c,u,d=0,m=c.length){const p=i(c,u,d,m-1);return p>d&&r(c[p-1],u)>-r(c[p],u)?p-1:p}return{left:i,center:o,right:a}}function VY(){return 0}function Z4(t){return t===null?NaN:+t}function*FY(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const BY=K1(Io),Uh=BY.right;K1(Z4).center;class f2 extends Map{constructor(e,n=HY){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(h2(this,e))}has(e){return super.has(h2(this,e))}set(e,n){return super.set(zY(this,e),n)}delete(e){return super.delete(qY(this,e))}}function h2({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zY({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function qY({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function HY(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $Y(t=Io){if(t===Io)return e3;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function e3(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const GY=Math.sqrt(50),KY=Math.sqrt(10),YY=Math.sqrt(2);function ty(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=GY?10:a>=KY?5:a>=YY?2:1;let c,u,d;return i<0?(d=Math.pow(10,-i)/o,c=Math.round(t*d),u=Math.round(e*d),c/d<t&&++c,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*o,c=Math.round(t/d),u=Math.round(e/d),c*d<t&&++c,u*d>e&&--u),u<c&&.5<=n&&n<2?ty(t,e,n*2):[c,u,d]}function i_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?ty(e,t,n):ty(t,e,n);if(!(a>=i))return[];const c=a-i+1,u=new Array(c);if(r)if(o<0)for(let d=0;d<c;++d)u[d]=(a-d)/-o;else for(let d=0;d<c;++d)u[d]=(a-d)*o;else if(o<0)for(let d=0;d<c;++d)u[d]=(i+d)/-o;else for(let d=0;d<c;++d)u[d]=(i+d)*o;return u}function a_(t,e,n){return e=+e,t=+t,n=+n,ty(t,e,n)[2]}function s_(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?a_(e,t,n):a_(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function m2(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function p2(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function t3(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?e3:$Y(i);r>n;){if(r-n>600){const u=r-n+1,d=e-n+1,m=Math.log(u),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(u-p)/u)*(d-u/2<0?-1:1),x=Math.max(n,Math.floor(e-d*p/u+y)),_=Math.min(r,Math.floor(e+(u-d)*p/u+y));t3(t,e,x,_,i)}const a=t[e];let o=n,c=r;for(jf(t,n,e),i(t[r],a)>0&&jf(t,n,r);o<c;){for(jf(t,o,c),++o,--c;i(t[o],a)<0;)++o;for(;i(t[c],a)>0;)--c}i(t[n],a)===0?jf(t,n,c):(++c,jf(t,c,r)),c<=e&&(n=c+1),e<=c&&(r=c-1)}return t}function jf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function WY(t,e,n){if(t=Float64Array.from(FY(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return p2(t);if(e>=1)return m2(t);var r,i=(r-1)*e,a=Math.floor(i),o=m2(t3(t,a).subarray(0,a+1)),c=p2(t.subarray(a+1));return o+(c-o)*(i-a)}}function JY(t,e,n=Z4){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),c=+n(t[a+1],a+1,t);return o+(c-o)*(i-a)}}function QY(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ei(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Is(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const o_=Symbol("implicit");function Y1(){var t=new f2,e=[],n=[],r=o_;function i(a){let o=t.get(a);if(o===void 0){if(r!==o_)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new f2;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Y1(e,n).unknown(r)},Ei.apply(i,arguments),i}function W1(){var t=Y1().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,c=!1,u=0,d=0,m=.5;delete t.unknown;function p(){var y=e().length,x=i<r,_=x?i:r,T=x?r:i;a=(T-_)/Math.max(1,y-u+d*2),c&&(a=Math.floor(a)),_+=(T-_-a*(y-u))*m,o=a*(1-u),c&&(_=Math.round(_),o=Math.round(o));var C=QY(y).map(function(N){return _+a*N});return n(x?C.reverse():C)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(u=Math.min(1,d=+y),p()):u},t.paddingInner=function(y){return arguments.length?(u=Math.min(1,y),p()):u},t.paddingOuter=function(y){return arguments.length?(d=+y,p()):d},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return W1(e(),[r,i]).round(c).paddingInner(u).paddingOuter(d).align(m)},Ei.apply(p(),arguments)}function n3(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return n3(e())},t}function XY(){return n3(W1.apply(null,arguments).paddingInner(1))}function J1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r3(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vh(){}var ph=.7,ny=1/ph,Su="\\s*([+-]?\\d+)\\s*",gh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZY=/^#([0-9a-f]{3,8})$/,eW=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),tW=new RegExp(`^rgb\\(${Ta},${Ta},${Ta}\\)$`),nW=new RegExp(`^rgba\\(${Su},${Su},${Su},${gh}\\)$`),rW=new RegExp(`^rgba\\(${Ta},${Ta},${Ta},${gh}\\)$`),iW=new RegExp(`^hsl\\(${gh},${Ta},${Ta}\\)$`),aW=new RegExp(`^hsla\\(${gh},${Ta},${Ta},${gh}\\)$`),g2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J1(Vh,yh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:y2,formatHex:y2,formatHex8:sW,formatHsl:oW,formatRgb:v2,toString:v2});function y2(){return this.rgb().formatHex()}function sW(){return this.rgb().formatHex8()}function oW(){return i3(this).formatHsl()}function v2(){return this.rgb().formatRgb()}function yh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ZY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?x2(e):n===3?new Mr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?tg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?tg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eW.exec(t))?new Mr(e[1],e[2],e[3],1):(e=tW.exec(t))?new Mr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nW.exec(t))?tg(e[1],e[2],e[3],e[4]):(e=rW.exec(t))?tg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iW.exec(t))?S2(e[1],e[2]/100,e[3]/100,1):(e=aW.exec(t))?S2(e[1],e[2]/100,e[3]/100,e[4]):g2.hasOwnProperty(t)?x2(g2[t]):t==="transparent"?new Mr(NaN,NaN,NaN,0):null}function x2(t){return new Mr(t>>16&255,t>>8&255,t&255,1)}function tg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mr(t,e,n,r)}function lW(t){return t instanceof Vh||(t=yh(t)),t?(t=t.rgb(),new Mr(t.r,t.g,t.b,t.opacity)):new Mr}function l_(t,e,n,r){return arguments.length===1?lW(t):new Mr(t,e,n,r??1)}function Mr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}J1(Mr,l_,r3(Vh,{brighter(t){return t=t==null?ny:Math.pow(ny,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ph:Math.pow(ph,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mr(Gl(this.r),Gl(this.g),Gl(this.b),ry(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b2,formatHex:b2,formatHex8:cW,formatRgb:w2,toString:w2}));function b2(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}`}function cW(){return`#${Ul(this.r)}${Ul(this.g)}${Ul(this.b)}${Ul((isNaN(this.opacity)?1:this.opacity)*255)}`}function w2(){const t=ry(this.opacity);return`${t===1?"rgb(":"rgba("}${Gl(this.r)}, ${Gl(this.g)}, ${Gl(this.b)}${t===1?")":`, ${t})`}`}function ry(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Gl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ul(t){return t=Gl(t),(t<16?"0":"")+t.toString(16)}function S2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Fi(t,e,n,r)}function i3(t){if(t instanceof Fi)return new Fi(t.h,t.s,t.l,t.opacity);if(t instanceof Vh||(t=yh(t)),!t)return new Fi;if(t instanceof Fi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,u=(a+i)/2;return c?(e===a?o=(n-r)/c+(n<r)*6:n===a?o=(r-e)/c+2:o=(e-n)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new Fi(o,c,u,t.opacity)}function uW(t,e,n,r){return arguments.length===1?i3(t):new Fi(t,e,n,r??1)}function Fi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}J1(Fi,uW,r3(Vh,{brighter(t){return t=t==null?ny:Math.pow(ny,t),new Fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ph:Math.pow(ph,t),new Fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mr(Uw(t>=240?t-240:t+120,i,r),Uw(t,i,r),Uw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Fi(_2(this.h),ng(this.s),ng(this.l),ry(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ry(this.opacity);return`${t===1?"hsl(":"hsla("}${_2(this.h)}, ${ng(this.s)*100}%, ${ng(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _2(t){return t=(t||0)%360,t<0?t+360:t}function ng(t){return Math.max(0,Math.min(1,t||0))}function Uw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Q1=t=>()=>t;function dW(t,e){return function(n){return t+n*e}}function fW(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hW(t){return(t=+t)==1?a3:function(e,n){return n-e?fW(e,n,t):Q1(isNaN(e)?n:e)}}function a3(t,e){var n=e-t;return n?dW(t,n):Q1(isNaN(t)?e:t)}const A2=(function t(e){var n=hW(e);function r(i,a){var o=n((i=l_(i)).r,(a=l_(a)).r),c=n(i.g,a.g),u=n(i.b,a.b),d=a3(i.opacity,a.opacity);return function(m){return i.r=o(m),i.g=c(m),i.b=u(m),i.opacity=d(m),i+""}}return r.gamma=t,r})(1);function mW(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function pW(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gW(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=ad(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(c){for(o=0;o<r;++o)a[o]=i[o](c);return a}}function yW(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function iy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vW(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ad(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var c_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vw=new RegExp(c_.source,"g");function xW(t){return function(){return t}}function bW(t){return function(e){return t(e)+""}}function wW(t,e){var n=c_.lastIndex=Vw.lastIndex=0,r,i,a,o=-1,c=[],u=[];for(t=t+"",e=e+"";(r=c_.exec(t))&&(i=Vw.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),c[o]?c[o]+=a:c[++o]=a),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,u.push({i:o,x:iy(r,i)})),n=Vw.lastIndex;return n<e.length&&(a=e.slice(n),c[o]?c[o]+=a:c[++o]=a),c.length<2?u[0]?bW(u[0].x):xW(e):(e=u.length,function(d){for(var m=0,p;m<e;++m)c[(p=u[m]).i]=p.x(d);return c.join("")})}function ad(t,e){var n=typeof e,r;return e==null||n==="boolean"?Q1(e):(n==="number"?iy:n==="string"?(r=yh(e))?(e=r,A2):wW:e instanceof yh?A2:e instanceof Date?yW:pW(e)?mW:Array.isArray(e)?gW:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vW:iy)(t,e)}function X1(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function SW(t,e){e===void 0&&(e=t,t=ad);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var c=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[c](o-c)}}function _W(t){return function(){return t}}function ay(t){return+t}var T2=[0,1];function Sr(t){return t}function u_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:_W(isNaN(e)?NaN:.5)}function AW(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function TW(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=u_(i,r),a=n(o,a)):(r=u_(r,i),a=n(a,o)),function(c){return a(r(c))}}function EW(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=u_(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(c){var u=Uh(t,c,1,r)-1;return a[u](i[u](c))}}function Fh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function hv(){var t=T2,e=T2,n=ad,r,i,a,o=Sr,c,u,d;function m(){var y=Math.min(t.length,e.length);return o!==Sr&&(o=AW(t[0],t[y-1])),c=y>2?EW:TW,u=d=null,p}function p(y){return y==null||isNaN(y=+y)?a:(u||(u=c(t.map(r),e,n)))(r(o(y)))}return p.invert=function(y){return o(i((d||(d=c(e,t.map(r),iy)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,ay),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),n=X1,m()},p.clamp=function(y){return arguments.length?(o=y?!0:Sr,m()):o!==Sr},p.interpolate=function(y){return arguments.length?(n=y,m()):n},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,x){return r=y,i=x,m()}}function Z1(){return hv()(Sr,Sr)}function CW(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Vu(t){return t=sy(Math.abs(t)),t?t[1]:NaN}function NW(t,e){return function(n,r){for(var i=n.length,a=[],o=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>r&&(c=Math.max(1,r-u)),a.push(n.substring(i-=c,i+c)),!((u+=c+1)>r));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function kW(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var IW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vh(t){if(!(e=IW.exec(t)))throw new Error("invalid format: "+t);var e;return new eA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vh.prototype=eA.prototype;function eA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function PW(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var s3;function DW(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(s3=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+sy(t,Math.max(0,e+a-1))[0]}function E2(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const C2={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:CW,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>E2(t*100,e),r:E2,s:DW,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function N2(t){return t}var k2=Array.prototype.map,I2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function RW(t){var e=t.grouping===void 0||t.thousands===void 0?N2:NW(k2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?N2:kW(k2.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(p){p=vh(p);var y=p.fill,x=p.align,_=p.sign,T=p.symbol,C=p.zero,N=p.width,M=p.comma,P=p.precision,L=p.trim,j=p.type;j==="n"?(M=!0,j="g"):C2[j]||(P===void 0&&(P=12),L=!0,j="g"),(C||y==="0"&&x==="=")&&(C=!0,y="0",x="=");var V=T==="$"?n:T==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",I=T==="$"?r:/[%p]/.test(j)?o:"",R=C2[j],U=/[defgprs%]/.test(j);P=P===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function F(B){var q=V,H=I,se,Se,Q;if(j==="c")H=R(B)+H,B="";else{B=+B;var ue=B<0||1/B<0;if(B=isNaN(B)?u:R(Math.abs(B),P),L&&(B=PW(B)),ue&&+B==0&&_!=="+"&&(ue=!1),q=(ue?_==="("?_:c:_==="-"||_==="("?"":_)+q,H=(j==="s"?I2[8+s3/3]:"")+H+(ue&&_==="("?")":""),U){for(se=-1,Se=B.length;++se<Se;)if(Q=B.charCodeAt(se),48>Q||Q>57){H=(Q===46?i+B.slice(se+1):B.slice(se))+H,B=B.slice(0,se);break}}}M&&!C&&(B=e(B,1/0));var be=q.length+B.length+H.length,De=be<N?new Array(N-be+1).join(y):"";switch(M&&C&&(B=e(De+B,De.length?N-H.length:1/0),De=""),x){case"<":B=q+B+H+De;break;case"=":B=q+De+B+H;break;case"^":B=De.slice(0,be=De.length>>1)+q+B+H+De.slice(be);break;default:B=De+q+B+H;break}return a(B)}return F.toString=function(){return p+""},F}function m(p,y){var x=d((p=vh(p),p.type="f",p)),_=Math.max(-8,Math.min(8,Math.floor(Vu(y)/3)))*3,T=Math.pow(10,-_),C=I2[8+_/3];return function(N){return x(T*N)+C}}return{format:d,formatPrefix:m}}var rg,tA,o3;MW({thousands:",",grouping:[3],currency:["$",""]});function MW(t){return rg=RW(t),tA=rg.format,o3=rg.formatPrefix,rg}function jW(t){return Math.max(0,-Vu(Math.abs(t)))}function OW(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vu(e)/3)))*3-Vu(Math.abs(t)))}function LW(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vu(e)-Vu(t))+1}function l3(t,e,n,r){var i=s_(t,e,n),a;switch(r=vh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=OW(i,o))&&(r.precision=a),o3(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=LW(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=jW(i))&&(r.precision=a-(r.type==="%")*2);break}}return tA(r)}function Qo(t){var e=t.domain;return t.ticks=function(n){var r=e();return i_(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return l3(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],c=r[a],u,d,m=10;for(c<o&&(d=o,o=c,c=d,d=i,i=a,a=d);m-- >0;){if(d=a_(o,c,n),d===u)return r[i]=o,r[a]=c,e(r);if(d>0)o=Math.floor(o/d)*d,c=Math.ceil(c/d)*d;else if(d<0)o=Math.ceil(o*d)/d,c=Math.floor(c*d)/d;else break;u=d}return t},t}function c3(){var t=Z1();return t.copy=function(){return Fh(t,c3())},Ei.apply(t,arguments),Qo(t)}function u3(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,ay),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return u3(t).unknown(e)},t=arguments.length?Array.from(t,ay):[0,1],Qo(n)}function d3(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function P2(t){return Math.log(t)}function D2(t){return Math.exp(t)}function UW(t){return-Math.log(-t)}function VW(t){return-Math.exp(-t)}function FW(t){return isFinite(t)?+("1e"+t):t<0?0:t}function BW(t){return t===10?FW:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zW(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function R2(t){return(e,n)=>-t(-e,n)}function nA(t){const e=t(P2,D2),n=e.domain;let r=10,i,a;function o(){return i=zW(r),a=BW(r),n()[0]<0?(i=R2(i),a=R2(a),t(UW,VW)):t(P2,D2),e}return e.base=function(c){return arguments.length?(r=+c,o()):r},e.domain=function(c){return arguments.length?(n(c),o()):n()},e.ticks=c=>{const u=n();let d=u[0],m=u[u.length-1];const p=m<d;p&&([d,m]=[m,d]);let y=i(d),x=i(m),_,T;const C=c==null?10:+c;let N=[];if(!(r%1)&&x-y<C){if(y=Math.floor(y),x=Math.ceil(x),d>0){for(;y<=x;++y)for(_=1;_<r;++_)if(T=y<0?_/a(-y):_*a(y),!(T<d)){if(T>m)break;N.push(T)}}else for(;y<=x;++y)for(_=r-1;_>=1;--_)if(T=y>0?_/a(-y):_*a(y),!(T<d)){if(T>m)break;N.push(T)}N.length*2<C&&(N=i_(d,m,C))}else N=i_(y,x,Math.min(x-y,C)).map(a);return p?N.reverse():N},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=vh(u)).precision==null&&(u.trim=!0),u=tA(u)),c===1/0)return u;const d=Math.max(1,r*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*r<r-.5&&(p*=r),p<=d?u(m):""}},e.nice=()=>n(d3(n(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function f3(){const t=nA(hv()).domain([1,10]);return t.copy=()=>Fh(t,f3()).base(t.base()),Ei.apply(t,arguments),t}function M2(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function j2(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function rA(t){var e=1,n=t(M2(e),j2(e));return n.constant=function(r){return arguments.length?t(M2(e=+r),j2(e)):e},Qo(n)}function h3(){var t=rA(hv());return t.copy=function(){return Fh(t,h3()).constant(t.constant())},Ei.apply(t,arguments)}function O2(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function qW(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function HW(t){return t<0?-t*t:t*t}function iA(t){var e=t(Sr,Sr),n=1;function r(){return n===1?t(Sr,Sr):n===.5?t(qW,HW):t(O2(n),O2(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Qo(e)}function aA(){var t=iA(hv());return t.copy=function(){return Fh(t,aA()).exponent(t.exponent())},Ei.apply(t,arguments),t}function $W(){return aA.apply(null,arguments).exponent(.5)}function L2(t){return Math.sign(t)*t*t}function GW(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function m3(){var t=Z1(),e=[0,1],n=!1,r;function i(a){var o=GW(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(L2(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,ay)).map(L2)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return m3(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ei.apply(i,arguments),Qo(i)}function p3(){var t=[],e=[],n=[],r;function i(){var o=0,c=Math.max(1,e.length);for(n=new Array(c-1);++o<c;)n[o-1]=JY(t,o/c);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Uh(n,o)]}return a.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?n[c-1]:t[0],c<n.length?n[c]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Io),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return p3().domain(t).range(e).unknown(r)},Ei.apply(a,arguments)}function g3(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Uh(r,u,0,n)]:a}function c(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return g3().domain([t,e]).range(i).unknown(a)},Ei.apply(Qo(o),arguments)}function y3(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Uh(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return y3().domain(t).range(e).unknown(n)},Ei.apply(i,arguments)}const Fw=new Date,Bw=new Date;function On(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,c)=>{const u=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return u;let d;do u.push(d=new Date(+a)),e(a,c),t(a);while(d<a&&a<o);return u},i.filter=a=>On(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!a(o););else for(;--c>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Fw.setTime(+a),Bw.setTime(+o),t(Fw),t(Bw),Math.floor(n(Fw,Bw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const oy=On(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);oy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?On(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):oy);oy.range;const is=1e3,wi=is*60,as=wi*60,vs=as*24,sA=vs*7,U2=vs*30,zw=vs*365,Vl=On(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*is)},(t,e)=>(e-t)/is,t=>t.getUTCSeconds());Vl.range;const oA=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*is)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getMinutes());oA.range;const lA=On(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wi)},(t,e)=>(e-t)/wi,t=>t.getUTCMinutes());lA.range;const cA=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*is-t.getMinutes()*wi)},(t,e)=>{t.setTime(+t+e*as)},(t,e)=>(e-t)/as,t=>t.getHours());cA.range;const uA=On(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*as)},(t,e)=>(e-t)/as,t=>t.getUTCHours());uA.range;const Bh=On(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wi)/vs,t=>t.getDate()-1);Bh.range;const mv=On(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vs,t=>t.getUTCDate()-1);mv.range;const v3=On(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/vs,t=>Math.floor(t/vs));v3.range;function mc(t){return On(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*wi)/sA)}const pv=mc(0),ly=mc(1),KW=mc(2),YW=mc(3),Fu=mc(4),WW=mc(5),JW=mc(6);pv.range;ly.range;KW.range;YW.range;Fu.range;WW.range;JW.range;function pc(t){return On(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/sA)}const gv=pc(0),cy=pc(1),QW=pc(2),XW=pc(3),Bu=pc(4),ZW=pc(5),eJ=pc(6);gv.range;cy.range;QW.range;XW.range;Bu.range;ZW.range;eJ.range;const dA=On(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());dA.range;const fA=On(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());fA.range;const xs=On(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());xs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});xs.range;const bs=On(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());bs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});bs.range;function x3(t,e,n,r,i,a){const o=[[Vl,1,is],[Vl,5,5*is],[Vl,15,15*is],[Vl,30,30*is],[a,1,wi],[a,5,5*wi],[a,15,15*wi],[a,30,30*wi],[i,1,as],[i,3,3*as],[i,6,6*as],[i,12,12*as],[r,1,vs],[r,2,2*vs],[n,1,sA],[e,1,U2],[e,3,3*U2],[t,1,zw]];function c(d,m,p){const y=m<d;y&&([d,m]=[m,d]);const x=p&&typeof p.range=="function"?p:u(d,m,p),_=x?x.range(d,+m+1):[];return y?_.reverse():_}function u(d,m,p){const y=Math.abs(m-d)/p,x=K1(([,,C])=>C).right(o,y);if(x===o.length)return t.every(s_(d/zw,m/zw,p));if(x===0)return oy.every(Math.max(s_(d,m,p),1));const[_,T]=o[y/o[x-1][2]<o[x][2]/y?x-1:x];return _.every(T)}return[c,u]}const[tJ,nJ]=x3(bs,fA,gv,v3,uA,lA),[rJ,iJ]=x3(xs,dA,pv,Bh,cA,oA);function qw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Hw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Of(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function aJ(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,d=Lf(i),m=Uf(i),p=Lf(a),y=Uf(a),x=Lf(o),_=Uf(o),T=Lf(c),C=Uf(c),N=Lf(u),M=Uf(u),P={a:ue,A:be,b:De,B:Ke,c:null,d:H2,e:H2,f:NJ,g:UJ,G:FJ,H:TJ,I:EJ,j:CJ,L:b3,m:kJ,M:IJ,p:K,q:re,Q:K2,s:Y2,S:PJ,u:DJ,U:RJ,V:MJ,w:jJ,W:OJ,x:null,X:null,y:LJ,Y:VJ,Z:BJ,"%":G2},L={a:pe,A:we,b:Ce,B:Ve,c:null,d:$2,e:$2,f:$J,g:tQ,G:rQ,H:zJ,I:qJ,j:HJ,L:S3,m:GJ,M:KJ,p:ze,q:Mt,Q:K2,s:Y2,S:YJ,u:WJ,U:JJ,V:QJ,w:XJ,W:ZJ,x:null,X:null,y:eQ,Y:nQ,Z:iQ,"%":G2},j={a:F,A:B,b:q,B:H,c:se,d:z2,e:z2,f:wJ,g:B2,G:F2,H:q2,I:q2,j:yJ,L:bJ,m:gJ,M:vJ,p:U,q:pJ,Q:_J,s:AJ,S:xJ,u:uJ,U:dJ,V:fJ,w:cJ,W:hJ,x:Se,X:Q,y:B2,Y:F2,Z:mJ,"%":SJ};P.x=V(n,P),P.X=V(r,P),P.c=V(e,P),L.x=V(n,L),L.X=V(r,L),L.c=V(e,L);function V(oe,Fe){return function(Ye){var me=[],Yt=-1,Xe=0,Zt=oe.length,Pt,Ze,ti;for(Ye instanceof Date||(Ye=new Date(+Ye));++Yt<Zt;)oe.charCodeAt(Yt)===37&&(me.push(oe.slice(Xe,Yt)),(Ze=V2[Pt=oe.charAt(++Yt)])!=null?Pt=oe.charAt(++Yt):Ze=Pt==="e"?" ":"0",(ti=Fe[Pt])&&(Pt=ti(Ye,Ze)),me.push(Pt),Xe=Yt+1);return me.push(oe.slice(Xe,Yt)),me.join("")}}function I(oe,Fe){return function(Ye){var me=Of(1900,void 0,1),Yt=R(me,oe,Ye+="",0),Xe,Zt;if(Yt!=Ye.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Fe&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Xe=Hw(Of(me.y,0,1)),Zt=Xe.getUTCDay(),Xe=Zt>4||Zt===0?cy.ceil(Xe):cy(Xe),Xe=mv.offset(Xe,(me.V-1)*7),me.y=Xe.getUTCFullYear(),me.m=Xe.getUTCMonth(),me.d=Xe.getUTCDate()+(me.w+6)%7):(Xe=qw(Of(me.y,0,1)),Zt=Xe.getDay(),Xe=Zt>4||Zt===0?ly.ceil(Xe):ly(Xe),Xe=Bh.offset(Xe,(me.V-1)*7),me.y=Xe.getFullYear(),me.m=Xe.getMonth(),me.d=Xe.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Zt="Z"in me?Hw(Of(me.y,0,1)).getUTCDay():qw(Of(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Zt+5)%7:me.w+me.U*7-(Zt+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,Hw(me)):qw(me)}}function R(oe,Fe,Ye,me){for(var Yt=0,Xe=Fe.length,Zt=Ye.length,Pt,Ze;Yt<Xe;){if(me>=Zt)return-1;if(Pt=Fe.charCodeAt(Yt++),Pt===37){if(Pt=Fe.charAt(Yt++),Ze=j[Pt in V2?Fe.charAt(Yt++):Pt],!Ze||(me=Ze(oe,Ye,me))<0)return-1}else if(Pt!=Ye.charCodeAt(me++))return-1}return me}function U(oe,Fe,Ye){var me=d.exec(Fe.slice(Ye));return me?(oe.p=m.get(me[0].toLowerCase()),Ye+me[0].length):-1}function F(oe,Fe,Ye){var me=x.exec(Fe.slice(Ye));return me?(oe.w=_.get(me[0].toLowerCase()),Ye+me[0].length):-1}function B(oe,Fe,Ye){var me=p.exec(Fe.slice(Ye));return me?(oe.w=y.get(me[0].toLowerCase()),Ye+me[0].length):-1}function q(oe,Fe,Ye){var me=N.exec(Fe.slice(Ye));return me?(oe.m=M.get(me[0].toLowerCase()),Ye+me[0].length):-1}function H(oe,Fe,Ye){var me=T.exec(Fe.slice(Ye));return me?(oe.m=C.get(me[0].toLowerCase()),Ye+me[0].length):-1}function se(oe,Fe,Ye){return R(oe,e,Fe,Ye)}function Se(oe,Fe,Ye){return R(oe,n,Fe,Ye)}function Q(oe,Fe,Ye){return R(oe,r,Fe,Ye)}function ue(oe){return o[oe.getDay()]}function be(oe){return a[oe.getDay()]}function De(oe){return u[oe.getMonth()]}function Ke(oe){return c[oe.getMonth()]}function K(oe){return i[+(oe.getHours()>=12)]}function re(oe){return 1+~~(oe.getMonth()/3)}function pe(oe){return o[oe.getUTCDay()]}function we(oe){return a[oe.getUTCDay()]}function Ce(oe){return u[oe.getUTCMonth()]}function Ve(oe){return c[oe.getUTCMonth()]}function ze(oe){return i[+(oe.getUTCHours()>=12)]}function Mt(oe){return 1+~~(oe.getUTCMonth()/3)}return{format:function(oe){var Fe=V(oe+="",P);return Fe.toString=function(){return oe},Fe},parse:function(oe){var Fe=I(oe+="",!1);return Fe.toString=function(){return oe},Fe},utcFormat:function(oe){var Fe=V(oe+="",L);return Fe.toString=function(){return oe},Fe},utcParse:function(oe){var Fe=I(oe+="",!0);return Fe.toString=function(){return oe},Fe}}}var V2={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,sJ=/^%/,oJ=/[\\^$*+?|[\]().{}]/g;function ht(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function lJ(t){return t.replace(oJ,"\\$&")}function Lf(t){return new RegExp("^(?:"+t.map(lJ).join("|")+")","i")}function Uf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function cJ(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function uJ(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function fJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function hJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function F2(t,e,n){var r=Gn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function B2(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mJ(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pJ(t,e,n){var r=Gn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function gJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function z2(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yJ(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function q2(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function vJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xJ(t,e,n){var r=Gn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function bJ(t,e,n){var r=Gn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wJ(t,e,n){var r=Gn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function SJ(t,e,n){var r=sJ.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _J(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function AJ(t,e,n){var r=Gn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function H2(t,e){return ht(t.getDate(),e,2)}function TJ(t,e){return ht(t.getHours(),e,2)}function EJ(t,e){return ht(t.getHours()%12||12,e,2)}function CJ(t,e){return ht(1+Bh.count(xs(t),t),e,3)}function b3(t,e){return ht(t.getMilliseconds(),e,3)}function NJ(t,e){return b3(t,e)+"000"}function kJ(t,e){return ht(t.getMonth()+1,e,2)}function IJ(t,e){return ht(t.getMinutes(),e,2)}function PJ(t,e){return ht(t.getSeconds(),e,2)}function DJ(t){var e=t.getDay();return e===0?7:e}function RJ(t,e){return ht(pv.count(xs(t)-1,t),e,2)}function w3(t){var e=t.getDay();return e>=4||e===0?Fu(t):Fu.ceil(t)}function MJ(t,e){return t=w3(t),ht(Fu.count(xs(t),t)+(xs(t).getDay()===4),e,2)}function jJ(t){return t.getDay()}function OJ(t,e){return ht(ly.count(xs(t)-1,t),e,2)}function LJ(t,e){return ht(t.getFullYear()%100,e,2)}function UJ(t,e){return t=w3(t),ht(t.getFullYear()%100,e,2)}function VJ(t,e){return ht(t.getFullYear()%1e4,e,4)}function FJ(t,e){var n=t.getDay();return t=n>=4||n===0?Fu(t):Fu.ceil(t),ht(t.getFullYear()%1e4,e,4)}function BJ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ht(e/60|0,"0",2)+ht(e%60,"0",2)}function $2(t,e){return ht(t.getUTCDate(),e,2)}function zJ(t,e){return ht(t.getUTCHours(),e,2)}function qJ(t,e){return ht(t.getUTCHours()%12||12,e,2)}function HJ(t,e){return ht(1+mv.count(bs(t),t),e,3)}function S3(t,e){return ht(t.getUTCMilliseconds(),e,3)}function $J(t,e){return S3(t,e)+"000"}function GJ(t,e){return ht(t.getUTCMonth()+1,e,2)}function KJ(t,e){return ht(t.getUTCMinutes(),e,2)}function YJ(t,e){return ht(t.getUTCSeconds(),e,2)}function WJ(t){var e=t.getUTCDay();return e===0?7:e}function JJ(t,e){return ht(gv.count(bs(t)-1,t),e,2)}function _3(t){var e=t.getUTCDay();return e>=4||e===0?Bu(t):Bu.ceil(t)}function QJ(t,e){return t=_3(t),ht(Bu.count(bs(t),t)+(bs(t).getUTCDay()===4),e,2)}function XJ(t){return t.getUTCDay()}function ZJ(t,e){return ht(cy.count(bs(t)-1,t),e,2)}function eQ(t,e){return ht(t.getUTCFullYear()%100,e,2)}function tQ(t,e){return t=_3(t),ht(t.getUTCFullYear()%100,e,2)}function nQ(t,e){return ht(t.getUTCFullYear()%1e4,e,4)}function rQ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Bu(t):Bu.ceil(t),ht(t.getUTCFullYear()%1e4,e,4)}function iQ(){return"+0000"}function G2(){return"%"}function K2(t){return+t}function Y2(t){return Math.floor(+t/1e3)}var cu,A3,T3;aQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aQ(t){return cu=aJ(t),A3=cu.format,cu.parse,T3=cu.utcFormat,cu.utcParse,cu}function sQ(t){return new Date(t)}function oQ(t){return t instanceof Date?+t:+new Date(+t)}function hA(t,e,n,r,i,a,o,c,u,d){var m=Z1(),p=m.invert,y=m.domain,x=d(".%L"),_=d(":%S"),T=d("%I:%M"),C=d("%I %p"),N=d("%a %d"),M=d("%b %d"),P=d("%B"),L=d("%Y");function j(V){return(u(V)<V?x:c(V)<V?_:o(V)<V?T:a(V)<V?C:r(V)<V?i(V)<V?N:M:n(V)<V?P:L)(V)}return m.invert=function(V){return new Date(p(V))},m.domain=function(V){return arguments.length?y(Array.from(V,oQ)):y().map(sQ)},m.ticks=function(V){var I=y();return t(I[0],I[I.length-1],V??10)},m.tickFormat=function(V,I){return I==null?j:d(I)},m.nice=function(V){var I=y();return(!V||typeof V.range!="function")&&(V=e(I[0],I[I.length-1],V??10)),V?y(d3(I,V)):m},m.copy=function(){return Fh(m,hA(t,e,n,r,i,a,o,c,u,d))},m}function lQ(){return Ei.apply(hA(rJ,iJ,xs,dA,pv,Bh,cA,oA,Vl,A3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cQ(){return Ei.apply(hA(tJ,nJ,bs,fA,gv,mv,uA,lA,Vl,T3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yv(){var t=0,e=1,n,r,i,a,o=Sr,c=!1,u;function d(p){return p==null||isNaN(p=+p)?u:o(i===0?.5:(p=(a(p)-n)*i,c?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(o=p,d):o};function m(p){return function(y){var x,_;return arguments.length?([x,_]=y,o=p(x,_),d):[o(0),o(1)]}}return d.range=m(ad),d.rangeRound=m(X1),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return a=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function Xo(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function E3(){var t=Qo(yv()(Sr));return t.copy=function(){return Xo(t,E3())},Is.apply(t,arguments)}function C3(){var t=nA(yv()).domain([1,10]);return t.copy=function(){return Xo(t,C3()).base(t.base())},Is.apply(t,arguments)}function N3(){var t=rA(yv());return t.copy=function(){return Xo(t,N3()).constant(t.constant())},Is.apply(t,arguments)}function mA(){var t=iA(yv());return t.copy=function(){return Xo(t,mA()).exponent(t.exponent())},Is.apply(t,arguments)}function uQ(){return mA.apply(null,arguments).exponent(.5)}function k3(){var t=[],e=Sr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Uh(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Io),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>WY(t,a/r))},n.copy=function(){return k3(e).domain(t)},Is.apply(n,arguments)}function vv(){var t=0,e=.5,n=1,r=1,i,a,o,c,u,d=Sr,m,p=!1,y;function x(T){return isNaN(T=+T)?y:(T=.5+((T=+m(T))-a)*(r*T<r*a?c:u),d(p?Math.max(0,Math.min(1,T)):T))}x.domain=function(T){return arguments.length?([t,e,n]=T,i=m(t=+t),a=m(e=+e),o=m(n=+n),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(T){return arguments.length?(p=!!T,x):p},x.interpolator=function(T){return arguments.length?(d=T,x):d};function _(T){return function(C){var N,M,P;return arguments.length?([N,M,P]=C,d=SW(T,[N,M,P]),x):[d(0),d(.5),d(1)]}}return x.range=_(ad),x.rangeRound=_(X1),x.unknown=function(T){return arguments.length?(y=T,x):y},function(T){return m=T,i=T(t),a=T(e),o=T(n),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,x}}function I3(){var t=Qo(vv()(Sr));return t.copy=function(){return Xo(t,I3())},Is.apply(t,arguments)}function P3(){var t=nA(vv()).domain([.1,1,10]);return t.copy=function(){return Xo(t,P3()).base(t.base())},Is.apply(t,arguments)}function D3(){var t=rA(vv());return t.copy=function(){return Xo(t,D3()).constant(t.constant())},Is.apply(t,arguments)}function pA(){var t=iA(vv());return t.copy=function(){return Xo(t,pA()).exponent(t.exponent())},Is.apply(t,arguments)}function dQ(){return pA.apply(null,arguments).exponent(.5)}const qf=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:W1,scaleDiverging:I3,scaleDivergingLog:P3,scaleDivergingPow:pA,scaleDivergingSqrt:dQ,scaleDivergingSymlog:D3,scaleIdentity:u3,scaleImplicit:o_,scaleLinear:c3,scaleLog:f3,scaleOrdinal:Y1,scalePoint:XY,scalePow:aA,scaleQuantile:p3,scaleQuantize:g3,scaleRadial:m3,scaleSequential:E3,scaleSequentialLog:C3,scaleSequentialPow:mA,scaleSequentialQuantile:k3,scaleSequentialSqrt:uQ,scaleSequentialSymlog:N3,scaleSqrt:$W,scaleSymlog:h3,scaleThreshold:y3,scaleTime:lQ,scaleUtc:cQ,tickFormat:l3},Symbol.toStringTag,{value:"Module"}));var Ps=t=>t.chartData,zh=J([Ps],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),xv=(t,e,n,r)=>r?zh(t):Ps(t);function nc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Tn(e)&&Tn(n))return!0}return!1}function W2(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function R3(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(Tn(n))i=n;else if(typeof n=="function")return;if(Tn(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(nc(o))return o}}function fQ(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(nc(r))return W2(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Te(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&DP.test(i)){var u=DP.exec(i);if(u==null||e==null)o=void 0;else{var d=+u[1];o=e[0]-d}}else o=e==null?void 0:e[0];if(a==="auto")e!=null&&(c=Math.max(...e));else if(Te(a))c=a;else if(typeof a=="function")try{e!=null&&(c=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&RP.test(a)){var m=RP.exec(a);if(m==null||e==null)c=void 0;else{var p=+m[1];c=e[1]+p}}else c=e==null?void 0:e[1];var y=[o,c];if(nc(y))return e==null?y:W2(y,e,n)}}}var sd=1e9,hQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yA,Gt=!0,Ai="[DecimalError] ",Kl=Ai+"Invalid argument: ",gA=Ai+"Exponent out of range: ",od=Math.floor,jl=Math.pow,mQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wr,Bn=1e7,Ut=7,M3=9007199254740991,uy=od(M3/Ut),Ee={};Ee.absoluteValue=Ee.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ee.comparedTo=Ee.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ee.decimalPlaces=Ee.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ee.dividedBy=Ee.div=function(t){return us(this,new this.constructor(t))};Ee.dividedToIntegerBy=Ee.idiv=function(t){var e=this,n=e.constructor;return Nt(us(e,new n(t),0,1),n.precision)};Ee.equals=Ee.eq=function(t){return!this.cmp(t)};Ee.exponent=function(){return An(this)};Ee.greaterThan=Ee.gt=function(t){return this.cmp(t)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(t){return this.cmp(t)>=0};Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2};Ee.isNegative=Ee.isneg=function(){return this.s<0};Ee.isPositive=Ee.ispos=function(){return this.s>0};Ee.isZero=function(){return this.s===0};Ee.lessThan=Ee.lt=function(t){return this.cmp(t)<0};Ee.lessThanOrEqualTo=Ee.lte=function(t){return this.cmp(t)<1};Ee.logarithm=Ee.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Wr))throw Error(Ai+"NaN");if(n.s<1)throw Error(Ai+(n.s?"NaN":"-Infinity"));return n.eq(Wr)?new r(0):(Gt=!1,e=us(xh(n,a),xh(t,a),a),Gt=!0,Nt(e,i))};Ee.minus=Ee.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?L3(e,t):j3(e,(t.s=-t.s,t))};Ee.modulo=Ee.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ai+"NaN");return n.s?(Gt=!1,e=us(n,t,0,1).times(t),Gt=!0,n.minus(e)):Nt(new r(n),i)};Ee.naturalExponential=Ee.exp=function(){return O3(this)};Ee.naturalLogarithm=Ee.ln=function(){return xh(this)};Ee.negated=Ee.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ee.plus=Ee.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?j3(e,t):L3(e,(t.s=-t.s,t))};Ee.precision=Ee.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Kl+t);if(e=An(i)+1,r=i.d.length-1,n=r*Ut+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ee.squareRoot=Ee.sqrt=function(){var t,e,n,r,i,a,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Ai+"NaN")}for(t=An(c),Gt=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=Sa(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=od((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(us(c,a,o+2)).times(.5),Sa(a.d).slice(0,o)===(e=Sa(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Nt(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if(e!="9999")break;o+=4}return Gt=!0,Nt(r,n)};Ee.times=Ee.mul=function(t){var e,n,r,i,a,o,c,u,d,m=this,p=m.constructor,y=m.d,x=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,n=m.e+t.e,u=y.length,d=x.length,u<d&&(a=y,y=x,x=a,o=u,u=d,d=o),a=[],o=u+d,r=o;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+x[r]*y[i-r-1]+e,a[i--]=c%Bn|0,e=c/Bn|0;a[i]=(a[i]+e)%Bn|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Gt?Nt(t,p.precision):t};Ee.toDecimalPlaces=Ee.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Da(t,0,sd),e===void 0?e=r.rounding:Da(e,0,8),Nt(n,t+An(n)+1,e))};Ee.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=rc(r,!0):(Da(t,0,sd),e===void 0?e=i.rounding:Da(e,0,8),r=Nt(new i(r),t+1,e),n=rc(r,!0,t+1)),n};Ee.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?rc(i):(Da(t,0,sd),e===void 0?e=a.rounding:Da(e,0,8),r=Nt(new a(i),t+An(i)+1,e),n=rc(r.abs(),!1,t+An(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ee.toInteger=Ee.toint=function(){var t=this,e=t.constructor;return Nt(new e(t),An(t)+1,e.rounding)};Ee.toNumber=function(){return+this};Ee.toPower=Ee.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,d=12,m=+(t=new u(t));if(!t.s)return new u(Wr);if(c=new u(c),!c.s){if(t.s<1)throw Error(Ai+"Infinity");return c}if(c.eq(Wr))return c;if(r=u.precision,t.eq(Wr))return Nt(c,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=c.s,o){if((n=m<0?-m:m)<=M3){for(i=new u(Wr),e=Math.ceil(r/Ut+4),Gt=!1;n%2&&(i=i.times(c),Q2(i.d,e)),n=od(n/2),n!==0;)c=c.times(c),Q2(c.d,e);return Gt=!0,t.s<0?new u(Wr).div(i):Nt(i,r)}}else if(a<0)throw Error(Ai+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,c.s=1,Gt=!1,i=t.times(xh(c,r+d)),Gt=!0,i=O3(i),i.s=a,i};Ee.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=An(i),r=rc(i,n<=a.toExpNeg||n>=a.toExpPos)):(Da(t,1,sd),e===void 0?e=a.rounding:Da(e,0,8),i=Nt(new a(i),t,e),n=An(i),r=rc(i,t<=n||n<=a.toExpNeg,t)),r};Ee.toSignificantDigits=Ee.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Da(t,1,sd),e===void 0?e=r.rounding:Da(e,0,8)),Nt(new r(n),t,e)};Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=An(t),n=t.constructor;return rc(t,e<=n.toExpNeg||e>=n.toExpPos)};function j3(t,e){var n,r,i,a,o,c,u,d,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),Gt?Nt(e,p):e;if(u=t.d,d=e.d,o=t.e,i=e.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,c=d.length):(r=d,i=o,c=u.length),o=Math.ceil(p/Ut),c=o>c?o+1:c+1,a>c&&(a=c,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(c=u.length,a=d.length,c-a<0&&(a=c,r=d,d=u,u=r),n=0;a;)n=(u[--a]=u[a]+d[a]+n)/Bn|0,u[a]%=Bn;for(n&&(u.unshift(n),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,Gt?Nt(e,p):e}function Da(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Kl+t)}function Sa(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Ut-r.length,n&&(a+=bo(n)),a+=r;o=t[e],r=o+"",n=Ut-r.length,n&&(a+=bo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var us=(function(){function t(r,i){var a,o=0,c=r.length;for(r=r.slice();c--;)a=r[c]*i+o,r[c]=a%Bn|0,o=a/Bn|0;return o&&r.unshift(o),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Bn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var c,u,d,m,p,y,x,_,T,C,N,M,P,L,j,V,I,R,U=r.constructor,F=r.s==i.s?1:-1,B=r.d,q=i.d;if(!r.s)return new U(r);if(!i.s)throw Error(Ai+"Division by zero");for(u=r.e-i.e,I=q.length,j=B.length,x=new U(F),_=x.d=[],d=0;q[d]==(B[d]||0);)++d;if(q[d]>(B[d]||0)&&--u,a==null?M=a=U.precision:o?M=a+(An(r)-An(i))+1:M=a,M<0)return new U(0);if(M=M/Ut+2|0,d=0,I==1)for(m=0,q=q[0],M++;(d<j||m)&&M--;d++)P=m*Bn+(B[d]||0),_[d]=P/q|0,m=P%q|0;else{for(m=Bn/(q[0]+1)|0,m>1&&(q=t(q,m),B=t(B,m),I=q.length,j=B.length),L=I,T=B.slice(0,I),C=T.length;C<I;)T[C++]=0;R=q.slice(),R.unshift(0),V=q[0],q[1]>=Bn/2&&++V;do m=0,c=e(q,T,I,C),c<0?(N=T[0],I!=C&&(N=N*Bn+(T[1]||0)),m=N/V|0,m>1?(m>=Bn&&(m=Bn-1),p=t(q,m),y=p.length,C=T.length,c=e(p,T,y,C),c==1&&(m--,n(p,I<y?R:q,y))):(m==0&&(c=m=1),p=q.slice()),y=p.length,y<C&&p.unshift(0),n(T,p,C),c==-1&&(C=T.length,c=e(q,T,I,C),c<1&&(m++,n(T,I<C?R:q,C))),C=T.length):c===0&&(m++,T=[0]),_[d++]=m,c&&T[0]?T[C++]=B[L]||0:(T=[B[L]],C=1);while((L++<j||T[0]!==void 0)&&M--)}return _[0]||_.shift(),x.e=u,Nt(x,o?a+An(x)+1:a)}})();function O3(t,e){var n,r,i,a,o,c,u=0,d=0,m=t.constructor,p=m.precision;if(An(t)>16)throw Error(gA+An(t));if(!t.s)return new m(Wr);for(Gt=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(r=Math.log(jl(2,d))/Math.LN10*2+5|0,c+=r,n=i=a=new m(Wr),m.precision=c;;){if(i=Nt(i.times(t),c),n=n.times(++u),o=a.plus(us(i,n,c)),Sa(o.d).slice(0,c)===Sa(a.d).slice(0,c)){for(;d--;)a=Nt(a.times(a),c);return m.precision=p,e==null?(Gt=!0,Nt(a,p)):a}a=o}}function An(t){for(var e=t.e*Ut,n=t.d[0];n>=10;n/=10)e++;return e}function $w(t,e,n){if(e>t.LN10.sd())throw Gt=!0,n&&(t.precision=n),Error(Ai+"LN10 precision limit exceeded");return Nt(new t(t.LN10),e)}function bo(t){for(var e="";t--;)e+="0";return e}function xh(t,e){var n,r,i,a,o,c,u,d,m,p=1,y=10,x=t,_=x.d,T=x.constructor,C=T.precision;if(x.s<1)throw Error(Ai+(x.s?"NaN":"-Infinity"));if(x.eq(Wr))return new T(0);if(e==null?(Gt=!1,d=C):d=e,x.eq(10))return e==null&&(Gt=!0),$w(T,d);if(d+=y,T.precision=d,n=Sa(_),r=n.charAt(0),a=An(x),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)x=x.times(t),n=Sa(x.d),r=n.charAt(0),p++;a=An(x),r>1?(x=new T("0."+n),a++):x=new T(r+"."+n.slice(1))}else return u=$w(T,d+2,C).times(a+""),x=xh(new T(r+"."+n.slice(1)),d-y).plus(u),T.precision=C,e==null?(Gt=!0,Nt(x,C)):x;for(c=o=x=us(x.minus(Wr),x.plus(Wr),d),m=Nt(x.times(x),d),i=3;;){if(o=Nt(o.times(m),d),u=c.plus(us(o,new T(i),d)),Sa(u.d).slice(0,d)===Sa(c.d).slice(0,d))return c=c.times(2),a!==0&&(c=c.plus($w(T,d+2,C).times(a+""))),c=us(c,new T(p),d),T.precision=C,e==null?(Gt=!0,Nt(c,C)):c;c=u,i+=2}}function J2(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=od(n/Ut),t.d=[],r=(n+1)%Ut,n<0&&(r+=Ut),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ut;r<i;)t.d.push(+e.slice(r,r+=Ut));e=e.slice(r),r=Ut-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Gt&&(t.e>uy||t.e<-uy))throw Error(gA+n)}else t.s=0,t.e=0,t.d=[0];return t}function Nt(t,e,n){var r,i,a,o,c,u,d,m,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Ut,i=e,d=p[m=0];else{if(m=Math.ceil((r+1)/Ut),a=p.length,m>=a)return t;for(d=a=p[m],o=1;a>=10;a/=10)o++;r%=Ut,i=r-Ut+o}if(n!==void 0&&(a=jl(10,o-i-1),c=d/a%10|0,u=e<0||p[m+1]!==void 0||d%a,u=n<4?(c||u)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||u||n==6&&(r>0?i>0?d/jl(10,o-i):0:p[m-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return u?(a=An(t),p.length=1,e=e-a-1,p[0]=jl(10,(Ut-e%Ut)%Ut),t.e=od(-e/Ut)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=m,a=1,m--):(p.length=m+1,a=jl(10,Ut-r),p[m]=i>0?(d/jl(10,o-i)%jl(10,i)|0)*a:0),u)for(;;)if(m==0){(p[0]+=a)==Bn&&(p[0]=1,++t.e);break}else{if(p[m]+=a,p[m]!=Bn)break;p[m--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(Gt&&(t.e>uy||t.e<-uy))throw Error(gA+An(t));return t}function L3(t,e){var n,r,i,a,o,c,u,d,m,p,y=t.constructor,x=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Gt?Nt(e,x):e;if(u=t.d,p=e.d,r=e.e,d=t.e,u=u.slice(),o=d-r,o){for(m=o<0,m?(n=u,o=-o,c=p.length):(n=p,r=d,c=u.length),i=Math.max(Math.ceil(x/Ut),c)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(u[i]!=p[i]){m=u[i]<p[i];break}o=0}for(m&&(n=u,u=p,p=n,e.s=-e.s),c=u.length,i=p.length-c;i>0;--i)u[c++]=0;for(i=p.length;i>o;){if(u[--i]<p[i]){for(a=i;a&&u[--a]===0;)u[a]=Bn-1;--u[a],u[i]+=Bn}u[i]-=p[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,Gt?Nt(e,x):e):new y(0)}function rc(t,e,n){var r,i=An(t),a=Sa(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+bo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+bo(-i-1)+a,n&&(r=n-o)>0&&(a+=bo(r))):i>=o?(a+=bo(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+bo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=bo(r))),t.s<0?"-"+a:a}function Q2(t,e){if(t.length>e)return t.length=e,!0}function U3(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Kl+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return J2(o,a.toString())}else if(typeof a!="string")throw Error(Kl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,mQ.test(a))J2(o,a);else throw Error(Kl+a)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=U3,i.config=i.set=pQ,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function pQ(t){if(!t||typeof t!="object")throw Error(Ai+"Object expected");var e,n,r,i=["precision",1,sd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(od(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Kl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Kl+n+": "+r);return this}var yA=U3(hQ);Wr=new yA(1);const bt=yA;var gQ=t=>t,V3={},F3=t=>t===V3,X2=t=>function e(){return arguments.length===0||arguments.length===1&&F3(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},B3=(t,e)=>t===1?e:X2(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==V3).length;return a>=t?e(...r):B3(t-a,X2(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=r.map(m=>F3(m)?c.shift():m);return e(...d,...c)}))}),bv=t=>B3(t.length,t),d_=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},yQ=bv((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),vQ=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return gQ;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((c,u)=>u(c),a(...arguments))}},f_=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),z3=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e&&i.every((o,c)=>{var u;return o===((u=e)===null||u===void 0?void 0:u[c])})||(e=i,n=t(...i)),n}};function q3(t){var e;return t===0?e=1:e=Math.floor(new bt(t).abs().log(10).toNumber())+1,e}function H3(t,e,n){for(var r=new bt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}bv((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});bv((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});bv((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var $3=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},G3=(t,e,n)=>{if(t.lte(0))return new bt(0);var r=q3(t.toNumber()),i=new bt(10).pow(r),a=t.div(i),o=r!==1?.05:.1,c=new bt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=c.mul(i);return e?new bt(u.toNumber()):new bt(Math.ceil(u.toNumber()))},xQ=(t,e,n)=>{var r=new bt(1),i=new bt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new bt(10).pow(q3(t)-1),i=new bt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new bt(Math.floor(t)))}else t===0?i=new bt(Math.floor((e-1)/2)):n||(i=new bt(Math.floor(t)));var o=Math.floor((e-1)/2),c=vQ(yQ(u=>i.add(new bt(u-o).mul(r)).toNumber()),d_);return c(0,e)},K3=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new bt(0),tickMin:new bt(0),tickMax:new bt(0)};var o=G3(new bt(n).sub(e).div(r-1),i,a),c;e<=0&&n>=0?c=new bt(0):(c=new bt(e).add(n).div(2),c=c.sub(new bt(c).mod(o)));var u=Math.ceil(c.sub(e).div(o).toNumber()),d=Math.ceil(new bt(n).sub(c).div(o).toNumber()),m=u+d+1;return m>r?K3(e,n,r,i,a+1):(m<r&&(d=n>0?d+(r-m):d,u=n>0?u:u+(r-m)),{step:o,tickMin:c.sub(new bt(u).mul(o)),tickMax:c.add(new bt(d).mul(o))})};function bQ(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[o,c]=$3([e,n]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...d_(0,r-1).map(()=>1/0)]:[...d_(0,r-1).map(()=>-1/0),c];return e>n?f_(u):u}if(o===c)return xQ(o,r,i);var{step:d,tickMin:m,tickMax:p}=K3(o,c,a,i,0),y=H3(m,p.add(new bt(.1).mul(d)),d);return e>n?f_(y):y}function wQ(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=$3([n,r]);if(a===-1/0||o===1/0)return[n,r];if(a===o)return[a];var c=Math.max(e,2),u=G3(new bt(o).sub(a).div(c-1),i,0),d=[...H3(new bt(a),new bt(o),u),o];return i===!1&&(d=d.map(m=>Math.round(m))),n>r?f_(d):d}var SQ=z3(bQ),_Q=z3(wQ),wv=t=>t.rootProps.maxBarSize,Y3=t=>t.rootProps.barGap,vA=t=>t.rootProps.barCategoryGap,W3=t=>t.rootProps.barSize,ld=t=>t.rootProps.stackOffset,xA=t=>t.options.chartName,bA=t=>t.rootProps.syncId,J3=t=>t.rootProps.syncMethod,wA=t=>t.options.eventEmitter,va={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Yr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},AQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:va.angleAxisId,includeHidden:!1,name:void 0,reversed:va.reversed,scale:va.scale,tick:va.tick,tickCount:void 0,ticks:void 0,type:va.type,unit:void 0},TQ={allowDataOverflow:Yr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yr.scale,tick:Yr.tick,tickCount:Yr.tickCount,ticks:void 0,type:Yr.type,unit:void 0},EQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:va.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:va.scale,tick:va.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},CQ={allowDataOverflow:Yr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Yr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yr.scale,tick:Yr.tick,tickCount:Yr.tickCount,ticks:void 0,type:"category",unit:void 0},cd=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?EQ:AQ,qh=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?CQ:TQ,_v=t=>t.polarOptions,SA=J([Cs,Ns,jn],C4),Q3=J([_v,SA],(t,e)=>{if(t!=null)return mr(t.innerRadius,e,0)}),X3=J([_v,SA],(t,e)=>{if(t!=null)return mr(t.outerRadius,e,e*.8)}),NQ=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Z3=J([_v],NQ),kQ=J([cd,Z3],Sv),eL=J([SA,Q3,X3],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]}),IQ=J([qh,eL],Sv),Av=J([Ge,_v,Q3,X3,Cs,Ns],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:c,startAngle:u,endAngle:d}=e;return{cx:mr(o,i,i/2),cy:mr(c,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),It=(t,e)=>e,Hh=(t,e,n)=>n;function Tv(t){return t==null?void 0:t.id}var Ln=t=>{var e=Ge(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},ud=t=>t.tooltip.settings.axisId,En=t=>{var e=Ln(t),n=ud(t);return dd(t,e,n)},tL=J([En],t=>t==null?void 0:t.dataKey);function _A(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,o=new Map;return t.forEach(c=>{var u,d=(u=c.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var m=Tv(c);d.forEach((p,y)=>{var x=a==null||i?y:String(Ct(p,a,null)),_=Ct(p,c.dataKey,0),T;o.has(x)?T=o.get(x):T={},Object.assign(T,{[m]:_}),o.set(x,T)})}}),Array.from(o.values())}function $h(t){return t.stackId!=null&&t.dataKey!=null}var Ev=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function Cv(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Z2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z2(Object(n),!0).forEach(function(r){PQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PQ(t,e,n){return(e=DQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DQ(t){var e=RQ(t,"string");return typeof e=="symbol"?e:e+""}function RQ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h_=[0,"auto"],Gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},nL=(t,e)=>t.cartesianAxis.xAxis[e],Ds=(t,e)=>{var n=nL(t,e);return n??Gr},Kr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:h_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Lh},rL=(t,e)=>t.cartesianAxis.yAxis[e],Rs=(t,e)=>{var n=rL(t,e);return n??Kr},MQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},AA=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??MQ},Xt=(t,e,n)=>{switch(e){case"xAxis":return Ds(t,n);case"yAxis":return Rs(t,n);case"zAxis":return AA(t,n);case"angleAxis":return cd(t,n);case"radiusAxis":return qh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},jQ=(t,e,n)=>{switch(e){case"xAxis":return Ds(t,n);case"yAxis":return Rs(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},dd=(t,e,n)=>{switch(e){case"xAxis":return Ds(t,n);case"yAxis":return Rs(t,n);case"angleAxis":return cd(t,n);case"radiusAxis":return qh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},iL=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function TA(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Nv=t=>t.graphicalItems.cartesianItems,OQ=J([It,Hh],TA),EA=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Gh=J([Nv,Xt,OQ],EA,{memoizeOptions:{resultEqualityCheck:Cv}}),aL=J([Gh],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter($h)),sL=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),LQ=J([Gh],sL),CA=t=>t.map(e=>e.data).filter(Boolean).flat(1),UQ=J([Gh],CA,{memoizeOptions:{resultEqualityCheck:Cv}}),NA=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},kA=J([UQ,xv],NA),IA=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Ct(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Ct(i,r)}))):t.map(r=>({value:r})),kv=J([kA,Xt,Gh],IA);function oL(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function yg(t){if(Pa(t)||t instanceof Date){var e=Number(t);if(Tn(e))return e}}function eD(t){if(Array.isArray(t)){var e=[yg(t[0]),yg(t[1])];return nc(e)?e:void 0}var n=yg(t);if(n!=null)return[n,n]}function fd(t){return t.map(yg).filter(tY)}function VQ(t,e,n){return!n||typeof e!="number"||Qr(e)?[]:n.length?fd(n.flatMap(r=>{var i=Ct(t,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!Tn(a)||!Tn(o)))return[e-a,e+o]})):[]}var FQ=J([aL,xv,En],_A),PA=(t,e,n)=>{var r={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[o,c]=a,u=c.map(Tv);return[o,{stackedData:EG(t,u,n),graphicalItems:c}]}))},bh=J([FQ,aL,ld],PA),lL=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var o=kG(t,i,a);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},BQ=J([Xt],t=>t.allowDataOverflow),DA=t=>{var e;if(t==null||!("domain"in t))return h_;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=fd(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:h_},RA=J([Xt],DA),MA=J([RA,BQ],R3),zQ=J([bh,Ps,It,MA],lL,{memoizeOptions:{resultEqualityCheck:Ev}}),Iv=t=>t.errorBars,qQ=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>oL(n,r)),fy=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),c=Math.max(...a);return[o,c]}},jA=(t,e,n,r,i)=>{var a,o;if(n.length>0&&t.forEach(c=>{n.forEach(u=>{var d,m,p=(d=r[u.id])===null||d===void 0?void 0:d.filter(N=>oL(i,N)),y=Ct(c,(m=e.dataKey)!==null&&m!==void 0?m:u.dataKey),x=VQ(c,y,p);if(x.length>=2){var _=Math.min(...x),T=Math.max(...x);(a==null||_<a)&&(a=_),(o==null||T>o)&&(o=T)}var C=eD(y);C!=null&&(a=a==null?C[0]:Math.min(a,C[0]),o=o==null?C[1]:Math.max(o,C[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(c=>{var u=eD(Ct(c,e.dataKey));u!=null&&(a=a==null?u[0]:Math.min(a,u[0]),o=o==null?u[1]:Math.max(o,u[1]))}),Tn(a)&&Tn(o))return[a,o]},HQ=J([kA,Xt,LQ,Iv,It],jA,{memoizeOptions:{resultEqualityCheck:Ev}});function $Q(t){var{value:e}=t;if(Pa(e)||e instanceof Date)return e}var GQ=(t,e,n)=>{var r=t.map($Q).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&L5(r))?X4(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},cL=t=>t.referenceElements.dots,hd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),KQ=J([cL,It,Hh],hd),uL=t=>t.referenceElements.areas,YQ=J([uL,It,Hh],hd),dL=t=>t.referenceElements.lines,WQ=J([dL,It,Hh],hd),fL=(t,e)=>{var n=fd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},JQ=J(KQ,It,fL),hL=(t,e)=>{var n=fd(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},QQ=J([YQ,It],hL),mL=(t,e)=>{var n=fd(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},XQ=J(WQ,It,mL),ZQ=J(JQ,XQ,QQ,(t,e,n)=>fy(t,n,e)),OA=(t,e,n,r,i,a,o,c)=>{if(n!=null)return n;var u=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",d=u?fy(r,a,i):fy(a,i);return fQ(e,d,t.allowDataOverflow)},eX=J([Xt,RA,MA,zQ,HQ,ZQ,Ge,It],OA,{memoizeOptions:{resultEqualityCheck:Ev}}),tX=[0,1],LA=(t,e,n,r,i,a,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:c,type:u}=t,d=Oa(e,a);return d&&c==null?X4(0,n.length):u==="category"?GQ(r,t,d):i==="expand"?tX:o}},UA=J([Xt,Ge,kA,kv,ld,It,eX],LA),pL=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var c="scale".concat(Mh(a));return c in qf?c:"point"}}},Zo=J([Xt,Ge,iL,xA,It],pL);function nX(t){if(t!=null){if(t in qf)return qf[t]();var e="scale".concat(Mh(t));if(e in qf)return qf[e]()}}function Pv(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=nX(e);if(i!=null){var a=i.domain(n).range(r);return SG(a),a}}}var VA=(t,e,n)=>{var r=DA(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&nc(t))return SQ(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&nc(t))return _Q(t,e.tickCount,e.allowDecimals)}},FA=J([UA,dd,Zo],VA),BA=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&nc(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],o=e[1],c=n[n.length-1];return[Math.min(i,a),Math.max(o,c)]}return e},rX=J([Xt,UA,FA,It],BA),iX=J(kv,Xt,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(fd(t.map(c=>c.value))).sort((c,u)=>c-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),gL=J(iX,Ge,vA,jn,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Tn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=mr(n,t*a),c=t*a/2;return c-o-(c-o)/a*o}return 0}),aX=(t,e)=>{var n=Ds(t,e);return n==null||typeof n.padding!="string"?0:gL(t,"xAxis",e,n.padding)},sX=(t,e)=>{var n=Rs(t,e);return n==null||typeof n.padding!="string"?0:gL(t,"yAxis",e,n.padding)},oX=J(Ds,aX,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),lX=J(Rs,sX,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),cX=J([jn,oX,cv,lv,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),uX=J([jn,Ge,lX,cv,lv,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Kh=(t,e,n,r)=>{var i;switch(e){case"xAxis":return cX(t,n,r);case"yAxis":return uX(t,n,r);case"zAxis":return(i=AA(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Z3(t);case"radiusAxis":return eL(t,n);default:return}},yL=J([Xt,Kh],Sv),md=J([Xt,Zo,rX,yL],Pv);J([Gh,Iv,It],qQ);function vL(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Dv=(t,e)=>e,Rv=(t,e,n)=>n,dX=J(sv,Dv,Rv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vL)),fX=J(ov,Dv,Rv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(vL)),xL=(t,e)=>({width:t.width,height:e.height}),hX=(t,e)=>{var n=typeof e.width=="number"?e.width:Lh;return{width:n,height:t.height}},bL=J(jn,Ds,xL),mX=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},pX=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},gX=J(Ns,jn,dX,Dv,Rv,(t,e,n,r,i)=>{var a={},o;return n.forEach(c=>{var u=xL(e,c);o==null&&(o=mX(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;a[c.id]=o-Number(d)*u.height,o+=(d?-1:1)*u.height}),a}),yX=J(Cs,jn,fX,Dv,Rv,(t,e,n,r,i)=>{var a={},o;return n.forEach(c=>{var u=hX(e,c);o==null&&(o=pX(e,r,t));var d=r==="left"&&!i||r==="right"&&i;a[c.id]=o-Number(d)*u.width,o+=(d?-1:1)*u.width}),a}),vX=(t,e)=>{var n=Ds(t,e);if(n!=null)return gX(t,n.orientation,n.mirror)},xX=J([jn,Ds,vX,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),bX=(t,e)=>{var n=Rs(t,e);if(n!=null)return yX(t,n.orientation,n.mirror)},wX=J([jn,Rs,bX,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),wL=J(jn,Rs,(t,e)=>{var n=typeof e.width=="number"?e.width:Lh;return{width:n,height:t.height}}),tD=(t,e,n)=>{switch(e){case"xAxis":return bL(t,n).width;case"yAxis":return wL(t,n).height;default:return}},SL=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,c=Oa(t,r),u=e.map(d=>d.value);if(o&&c&&a==="category"&&i&&L5(u))return u}},Yh=J([Ge,kv,Xt,It],SL),zA=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Oa(t,r);if(o&&(i==="number"||a!=="auto"))return e.map(c=>c.value)}},qA=J([Ge,kv,dd,It],zA),nD=J([Ge,jQ,Zo,md,Yh,qA,Kh,FA,It],(t,e,n,r,i,a,o,c,u)=>{if(e==null)return null;var d=Oa(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:c,range:o,realScaleType:n,scale:r}}),_L=(t,e,n,r,i,a,o,c,u)=>{if(!(e==null||r==null)){var d=Oa(t,u),{type:m,ticks:p,tickCount:y}=e,x=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/x:0;_=u==="angleAxis"&&a!=null&&a.length>=2?Sn(a[0]-a[1])*2*_:_;var T=p||i;if(T){var C=T.map((N,M)=>{var P=o?o.indexOf(N):N;return{index:M,coordinate:r(P)+_,value:N,offset:_}});return C.filter(N=>!Qr(N.coordinate))}return d&&c?c.map((N,M)=>({coordinate:r(N)+_,value:N,index:M,offset:_})):r.ticks?r.ticks(y).map(N=>({coordinate:r(N)+_,value:N,offset:_})):r.domain().map((N,M)=>({coordinate:r(N)+_,value:o?o[N]:N,index:M,offset:_}))}},AL=J([Ge,dd,Zo,md,FA,Kh,Yh,qA,It],_L),TL=(t,e,n,r,i,a,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var c=Oa(t,o),{tickCount:u}=e,d=0;return d=o==="angleAxis"&&(r==null?void 0:r.length)>=2?Sn(r[0]-r[1])*2*d:d,c&&a?a.map((m,p)=>({coordinate:n(m)+d,value:m,index:p,offset:d})):n.ticks?n.ticks(u).map(m=>({coordinate:n(m)+d,value:m,offset:d})):n.domain().map((m,p)=>({coordinate:n(m)+d,value:i?i[m]:m,index:p,offset:d}))}},jo=J([Ge,dd,md,Kh,Yh,qA,It],TL),Oo=J(Xt,md,(t,e)=>{if(!(t==null||e==null))return dy(dy({},t),{},{scale:e})}),SX=J([Xt,Zo,UA,yL],Pv);J((t,e,n)=>AA(t,n),SX,(t,e)=>{if(!(t==null||e==null))return dy(dy({},t),{},{scale:e})});var _X=J([Ge,sv,ov],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),EL=t=>t.options.defaultTooltipEventType,CL=t=>t.options.validateTooltipEventTypes;function NL(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function HA(t,e){var n=EL(t),r=CL(t);return NL(e,n,r)}function AX(t){return _e(e=>HA(e,t))}var kL=(t,e)=>{var n,r=Number(e);if(!(Qr(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},TX=t=>t.tooltip.settings,So={active:!1,index:null,dataKey:void 0,coordinate:void 0},EX={itemInteraction:{click:So,hover:So},axisInteraction:{click:So,hover:So},keyboardInteraction:So,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},IL=ei({name:"tooltip",initialState:EX,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:br()},removeTooltipEntrySettings:{reducer(t,e){var n=cs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:br()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:CX,removeTooltipEntrySettings:NX,setTooltipSettingsState:kX,setActiveMouseOverItemIndex:PL,mouseLeaveItem:IX,mouseLeaveChart:DL,setActiveClickItemIndex:PX,setMouseOverAxisIndex:RL,setMouseClickAxisIndex:DX,setSyncInteraction:m_,setKeyboardInteraction:p_}=IL.actions,RX=IL.reducer;function rD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ig(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(n),!0).forEach(function(r){MX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MX(t,e,n){return(e=jX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jX(t){var e=OX(t,"string");return typeof e=="symbol"?e:e+""}function OX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LX(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function UX(t){return t.index!=null}var ML=(t,e,n,r)=>{if(e==null)return So;var i=LX(t,e,n);if(i==null)return So;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(UX(i)){if(a)return ig(ig({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return ig(ig({},So),{},{coordinate:i.coordinate})},$A=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Tn(r))return n;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(r,a)))},jL=(t,e,n,r,i,a,o,c)=>{if(!(a==null||c==null)){var u=o[0],d=u==null?void 0:c(u.positions,a);if(d!=null)return d;var m=i==null?void 0:i[Number(a)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:m.coordinate}}}},OL=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},Wh=t=>t.options.tooltipPayloadSearcher,pd=t=>t.tooltip;function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(n),!0).forEach(function(r){VX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VX(t,e,n){return(e=FX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FX(t){var e=BX(t,"string");return typeof e=="symbol"?e:e+""}function BX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zX(t,e){return t??e}var LL=(t,e,n,r,i,a,o)=>{if(!(e==null||a==null)){var{chartData:c,computedData:u,dataStartIndex:d,dataEndIndex:m}=n,p=[];return t.reduce((y,x)=>{var _,{dataDefinedOnItem:T,settings:C}=x,N=zX(T,c),M=Array.isArray(N)?N4(N,d,m):N,P=(_=C==null?void 0:C.dataKey)!==null&&_!==void 0?_:r,L=C==null?void 0:C.nameKey,j;if(r&&Array.isArray(M)&&!Array.isArray(M[0])&&o==="axis"?j=U5(M,r,i):j=a(M,e,u,L),Array.isArray(j))j.forEach(I=>{var R=aD(aD({},C),{},{name:I.name,unit:I.unit,color:void 0,fill:void 0});y.push(MP({tooltipEntrySettings:R,dataKey:I.dataKey,payload:I.payload,value:Ct(I.payload,I.dataKey),name:I.name}))});else{var V;y.push(MP({tooltipEntrySettings:C,dataKey:P,payload:j,value:Ct(j,P),name:(V=Ct(j,L))!==null&&V!==void 0?V:C==null?void 0:C.name}))}return y},p)}},GA=J([En,Ge,iL,xA,Ln],pL),qX=J([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),HX=J([Ln,ud],TA),Jh=J([qX,En,HX],EA,{memoizeOptions:{resultEqualityCheck:Cv}}),$X=J([Jh],t=>t.filter($h)),GX=J([Jh],CA,{memoizeOptions:{resultEqualityCheck:Cv}}),gd=J([GX,Ps],NA),KX=J([$X,Ps,En],_A),KA=J([gd,En,Jh],IA),UL=J([En],DA),YX=J([En],t=>t.allowDataOverflow),VL=J([UL,YX],R3),WX=J([Jh],t=>t.filter($h)),JX=J([KX,WX,ld],PA),QX=J([JX,Ps,Ln,VL],lL),XX=J([Jh],sL),ZX=J([gd,En,XX,Iv,Ln],jA,{memoizeOptions:{resultEqualityCheck:Ev}}),eZ=J([cL,Ln,ud],hd),tZ=J([eZ,Ln],fL),nZ=J([uL,Ln,ud],hd),rZ=J([nZ,Ln],hL),iZ=J([dL,Ln,ud],hd),aZ=J([iZ,Ln],mL),sZ=J([tZ,aZ,rZ],fy),oZ=J([En,UL,VL,QX,ZX,sZ,Ge,Ln],OA),FL=J([En,Ge,gd,KA,ld,Ln,oZ],LA),lZ=J([FL,En,GA],VA),cZ=J([En,FL,lZ,Ln],BA),BL=t=>{var e=Ln(t),n=ud(t),r=!1;return Kh(t,e,n,r)},zL=J([En,BL],Sv),qL=J([En,GA,cZ,zL],Pv),uZ=J([Ge,KA,En,Ln],SL),dZ=J([Ge,KA,En,Ln],zA),fZ=(t,e,n,r,i,a,o,c)=>{if(e){var{type:u}=e,d=Oa(t,c);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/m:0;return p=c==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Sn(i[0]-i[1])*2*p:p,d&&o?o.map((y,x)=>({coordinate:r(y)+p,value:y,index:x,offset:p})):r.domain().map((y,x)=>({coordinate:r(y)+p,value:a?a[y]:y,index:x,offset:p}))}}},Ms=J([Ge,En,GA,qL,BL,uZ,dZ,Ln],fZ),YA=J([EL,CL,TX],(t,e,n)=>NL(n.shared,t,e)),HL=t=>t.tooltip.settings.trigger,WA=t=>t.tooltip.settings.defaultIndex,Mv=J([pd,YA,HL,WA],ML),ws=J([Mv,gd],$A),$L=J([Ms,ws],kL),GL=J([Mv],t=>{if(t)return t.dataKey}),KL=J([pd,YA,HL,WA],OL),hZ=J([Cs,Ns,Ge,jn,Ms,WA,KL,Wh],jL),mZ=J([Mv,hZ],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),pZ=J([Mv],t=>t.active),gZ=J([KL,ws,Ps,tL,$L,Wh,YA],LL),yZ=J([gZ],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(n),!0).forEach(function(r){vZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vZ(t,e,n){return(e=xZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xZ(t){var e=bZ(t,"string");return typeof e=="symbol"?e:e+""}function bZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wZ=()=>_e(En),SZ=()=>{var t=wZ(),e=_e(Ms),n=_e(qL);return ys(oD(oD({},t),{},{scale:n}),e)},YL=()=>_e(xA),JA=(t,e)=>e,WL=(t,e,n)=>n,QA=(t,e,n,r)=>r,_Z=J(Ms,t=>Zy(t,e=>e.coordinate)),XA=J([pd,JA,WL,QA],ML),JL=J([XA,gd],$A),AZ=(t,e,n)=>{if(e!=null){var r=pd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},QL=J([pd,JA,WL,QA],OL),hy=J([Cs,Ns,Ge,jn,Ms,QA,QL,Wh],jL),TZ=J([XA,hy],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),XL=J(Ms,JL,kL),EZ=J([QL,JL,Ps,tL,XL,Wh,JA],LL),CZ=J([XA],t=>({isActive:t.active,activeIndex:t.index})),NZ=(t,e,n,r,i,a,o,c)=>{if(!(!t||!e||!r||!i||!a)){var u=IG(t.chartX,t.chartY,e,n,c);if(u){var d=DG(u,e),m=bG(d,o,a,r,i),p=PG(e,a,m,u);return{activeIndex:String(m),activeCoordinate:p}}}};function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g_.apply(null,arguments)}function lD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ag(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(n),!0).forEach(function(r){kZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kZ(t,e,n){return(e=IZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IZ(t){var e=PZ(t,"string");return typeof e=="symbol"?e:e+""}function PZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DZ(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:o,cursor:c,tooltipEventType:u,chartName:d}=t,m=e,p=n,y=r;if(!c||!m||d!=="ScatterChart"&&u!=="axis")return null;var x,_;if(d==="ScatterChart")x=m,_=YK;else if(d==="BarChart")x=WK(o,m,i,a),_=Y4;else if(o==="radial"){var{cx:T,cy:C,radius:N,startAngle:M,endAngle:P}=W4(m);x={cx:T,cy:C,startAngle:M,endAngle:P,innerRadius:N,outerRadius:N},_=Q4}else x={points:DY(o,m,i)},_=Wf;var L=typeof c=="object"&&"className"in c?c.className:void 0,j=ag(ag(ag(ag({stroke:"#ccc",pointerEvents:"none"},i),x),ms(c)),{},{payload:p,payloadIndex:y,className:nt("recharts-tooltip-cursor",L)});return E.isValidElement(c)?E.cloneElement(c,j):E.createElement(_,j)}function RZ(t){var e=SZ(),n=V4(),r=dv(),i=YL();return E.createElement(DZ,g_({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var ZL=E.createContext(null),MZ=()=>E.useContext(ZL),Gw={exports:{}},cD;function jZ(){return cD||(cD=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,m){this.fn=u,this.context=d,this.once=m||!1}function a(u,d,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new i(m,p||u,y),_=n?n+d:d;return u._events[_]?u._events[_].fn?u._events[_]=[u._events[_],x]:u._events[_].push(x):(u._events[_]=x,u._eventsCount++),u}function o(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],m,p;if(this._eventsCount===0)return d;for(p in m=this._events)e.call(m,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},c.prototype.listeners=function(d){var m=n?n+d:d,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,_=new Array(x);y<x;y++)_[y]=p[y].fn;return _},c.prototype.listenerCount=function(d){var m=n?n+d:d,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,m,p,y,x,_){var T=n?n+d:d;if(!this._events[T])return!1;var C=this._events[T],N=arguments.length,M,P;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),N){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,m),!0;case 3:return C.fn.call(C.context,m,p),!0;case 4:return C.fn.call(C.context,m,p,y),!0;case 5:return C.fn.call(C.context,m,p,y,x),!0;case 6:return C.fn.call(C.context,m,p,y,x,_),!0}for(P=1,M=new Array(N-1);P<N;P++)M[P-1]=arguments[P];C.fn.apply(C.context,M)}else{var L=C.length,j;for(P=0;P<L;P++)switch(C[P].once&&this.removeListener(d,C[P].fn,void 0,!0),N){case 1:C[P].fn.call(C[P].context);break;case 2:C[P].fn.call(C[P].context,m);break;case 3:C[P].fn.call(C[P].context,m,p);break;case 4:C[P].fn.call(C[P].context,m,p,y);break;default:if(!M)for(j=1,M=new Array(N-1);j<N;j++)M[j-1]=arguments[j];C[P].fn.apply(C[P].context,M)}}return!0},c.prototype.on=function(d,m,p){return a(this,d,m,p,!1)},c.prototype.once=function(d,m,p){return a(this,d,m,p,!0)},c.prototype.removeListener=function(d,m,p,y){var x=n?n+d:d;if(!this._events[x])return this;if(!m)return o(this,x),this;var _=this._events[x];if(_.fn)_.fn===m&&(!y||_.once)&&(!p||_.context===p)&&o(this,x);else{for(var T=0,C=[],N=_.length;T<N;T++)(_[T].fn!==m||y&&!_[T].once||p&&_[T].context!==p)&&C.push(_[T]);C.length?this._events[x]=C.length===1?C[0]:C:o(this,x)}return this},c.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&o(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(Gw)),Gw.exports}var OZ=jZ();const LZ=Ma(OZ);var wh=new LZ,y_="recharts.syncEvent.tooltip",uD="recharts.syncEvent.brush";function jv(t,e){if(e){var n=Number.parseInt(e,10);if(!Qr(n))return t==null?void 0:t[n]}}var UZ={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},e6=ei({name:"options",initialState:UZ,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),VZ=e6.reducer,{createEventEmitter:FZ}=e6.actions;function BZ(t){return t.tooltip.syncInteraction}var zZ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},t6=ei({name:"chartData",initialState:zZ,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:dD,setDataStartEndIndexes:qZ,setComputedData:Bwe}=t6.actions,HZ=t6.reducer,$Z=["x","y"];function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){GZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GZ(t,e,n){return(e=KZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KZ(t){var e=YZ(t,"string");return typeof e=="symbol"?e:e+""}function YZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WZ(t,e){if(t==null)return{};var n,r,i=JZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var n6=()=>{};function QZ(){var t=_e(bA),e=_e(wA),n=Ft(),r=_e(J3),i=_e(Ms),a=dv(),o=uv(),c=_e(u=>u.rootProps.className);E.useEffect(()=>{if(t==null)return n6;var u=(d,m,p)=>{if(e!==p&&t===d){if(r==="index"){var y;if(o&&m!==null&&m!==void 0&&(y=m.payload)!==null&&y!==void 0&&y.coordinate&&m.payload.sourceViewBox){var x=m.payload.coordinate,{x:_,y:T}=x,C=WZ(x,$Z),{x:N,y:M,width:P,height:L}=m.payload.sourceViewBox,j=uu(uu({},C),{},{x:o.x+(P?(_-N)/P:0)*o.width,y:o.y+(L?(T-M)/L:0)*o.height});n(uu(uu({},m),{},{payload:uu(uu({},m.payload),{},{coordinate:j})}))}else n(m);return}if(i!=null){var V;if(typeof r=="function"){var I={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},R=r(i,I);V=i[R]}else r==="value"&&(V=i.find(Q=>String(Q.value)===m.payload.label));var{coordinate:U}=m.payload;if(V==null||m.payload.active===!1||U==null||o==null){n(m_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:F,y:B}=U,q=Math.min(F,o.x+o.width),H=Math.min(B,o.y+o.height),se={x:a==="horizontal"?V.coordinate:q,y:a==="horizontal"?H:V.coordinate},Se=m_({active:m.payload.active,coordinate:se,dataKey:m.payload.dataKey,index:String(V.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox});n(Se)}}};return wh.on(y_,u),()=>{wh.off(y_,u)}},[c,n,e,t,r,i,a,o])}function XZ(){var t=_e(bA),e=_e(wA),n=Ft();E.useEffect(()=>{if(t==null)return n6;var r=(i,a,o)=>{e!==o&&t===i&&n(qZ(a))};return wh.on(uD,r),()=>{wh.off(uD,r)}},[n,e,t])}function ZZ(){var t=Ft();E.useEffect(()=>{t(FZ())},[t]),QZ(),XZ()}function eee(t,e,n,r,i,a){var o=_e(x=>AZ(x,t,e)),c=_e(wA),u=_e(bA),d=_e(J3),m=_e(BZ),p=m==null?void 0:m.active,y=uv();E.useEffect(()=>{if(!p&&u!=null&&c!=null){var x=m_({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y});wh.emit(y_,u,x,c)}},[p,n,o,i,r,c,u,d,a,y])}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){tee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tee(t,e,n){return(e=nee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nee(t){var e=ree(t,"string");return typeof e=="symbol"?e:e+""}function ree(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iee(t){return t.dataKey}function aee(t,e){return E.isValidElement(t)?E.cloneElement(t,e):typeof t=="function"?E.createElement(t,e):E.createElement(EK,e)}var pD=[],see={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ks.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function js(t){var e=$n(t,see),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:o,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:m,position:p,reverseDirection:y,useTranslate3d:x,wrapperStyle:_,cursor:T,shared:C,trigger:N,defaultIndex:M,portal:P,axisId:L}=e,j=Ft(),V=typeof M=="number"?String(M):M;E.useEffect(()=>{j(kX({shared:C,trigger:N,axisId:L,active:n,defaultIndex:V}))},[j,C,N,L,n,V]);var I=uv(),R=q4(),U=AX(C),{activeIndex:F,isActive:B}=_e(Ce=>CZ(Ce,U,N,V)),q=_e(Ce=>EZ(Ce,U,N,V)),H=_e(Ce=>XL(Ce,U,N,V)),se=_e(Ce=>TZ(Ce,U,N,V)),Se=q,Q=MZ(),ue=n??B,[be,De]=e4([Se,ue]),Ke=U==="axis"?H:void 0;eee(U,N,se,Ke,F,ue);var K=P??Q;if(K==null)return null;var re=Se??pD;ue||(re=pD),c&&re.length&&(re=W5(Se.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||e.includeHidden)),m,iee));var pe=re.length>0,we=E.createElement(RK,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:u,active:ue,coordinate:se,hasPayload:pe,offset:d,position:p,reverseDirection:y,useTranslate3d:x,viewBox:I,wrapperStyle:_,lastBoundingBox:be,innerRef:De,hasPortalFromProps:!!P},aee(o,mD(mD({},e),{},{payload:re,label:Ke,active:ue,coordinate:se,accessibilityLayer:R})));return E.createElement(E.Fragment,null,v5.createPortal(we,K),ue&&E.createElement(RZ,{cursor:T,tooltipEventType:U,coordinate:se,payload:Se,index:F}))}var Os=t=>null;Os.displayName="Cell";function oee(t,e,n){return(e=lee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lee(t){var e=cee(t,"string");return typeof e=="symbol"?e:e+""}function cee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class uee{constructor(e){oee(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){fee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fee(t,e,n){return(e=hee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hee(t){var e=mee(t,"string");return typeof e=="symbol"?e:e+""}function mee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pee={cacheSize:2e3,enableCache:!0},r6=dee({},pee),yD=new uee(r6.cacheSize),gee={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vD="recharts_measurement_span";function yee(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(c)}var xD=(t,e)=>{try{var n=document.getElementById(vD);n||(n=document.createElement("span"),n.setAttribute("id",vD),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,gee,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Jf=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ks.isSsr)return{width:0,height:0};if(!r6.enableCache)return xD(e,n);var r=yee(e,n),i=yD.get(r);if(i)return i;var a=xD(e,n);return yD.set(r,a),a},bD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vee=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xee=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,i6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bee=Object.keys(i6),gu="NaN";function wee(t,e){return t*i6[e]}class Dr{static parse(e){var n,[,r,i]=(n=xee.exec(e))!==null&&n!==void 0?n:[];return new Dr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Qr(e)&&(this.unit=""),n!==""&&!vee.test(n)&&(this.num=NaN,this.unit=""),bee.includes(n)&&(this.num=wee(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Dr(NaN,""):new Dr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Dr(NaN,""):new Dr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Dr(NaN,""):new Dr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Dr(NaN,""):new Dr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qr(this.num)}}function a6(t){if(t.includes(gu))return gu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=bD.exec(e))!==null&&n!==void 0?n:[],o=Dr.parse(r??""),c=Dr.parse(a??""),u=i==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return gu;e=e.replace(bD,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,m,p,y]=(d=wD.exec(e))!==null&&d!==void 0?d:[],x=Dr.parse(m??""),_=Dr.parse(y??""),T=p==="+"?x.add(_):x.subtract(_);if(T.isNaN())return gu;e=e.replace(wD,T.toString())}return e}var SD=/\(([^()]*)\)/;function See(t){for(var e=t,n;(n=SD.exec(e))!=null;){var[,r]=n;e=e.replace(SD,a6(r))}return e}function _ee(t){var e=t.replace(/\s+/g,"");return e=See(e),e=a6(e),e}function Aee(t){try{return _ee(t)}catch{return gu}}function Kw(t){var e=Aee(t.slice(5,-1));return e===gu?"":e}var Tee=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eee=["dx","dy","angle","className","breakAll"];function v_(){return v_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v_.apply(null,arguments)}function _D(t,e){if(t==null)return{};var n,r,i=Cee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var s6=/[ \f\n\r\t\v\u2028\u2029]+/,o6=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Kt(e)||(n?i=e.toString().split(""):i=e.toString().split(s6));var a=i.map(c=>({word:c,width:Jf(c,r).width})),o=n?0:Jf("",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Nee=(t,e,n,r,i)=>{var{maxLines:a,children:o,style:c,breakAll:u}=t,d=Te(a),m=o,p=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((q,H)=>{var{word:se,width:Se}=H,Q=q[q.length-1];if(Q&&(r==null||i||Q.width+Se+n<Number(r)))Q.words.push(se),Q.width+=Se+n;else{var ue={words:[se],width:Se};q.push(ue)}return q},[])},y=p(e),x=F=>F.reduce((B,q)=>B.width>q.width?B:q);if(!d||i)return y;var _=y.length>a||x(y).width>Number(r);if(!_)return y;for(var T="",C=F=>{var B=m.slice(0,F),q=o6({breakAll:u,style:c,children:B+T}).wordsWithComputedWidth,H=p(q),se=H.length>a||x(H).width>Number(r);return[se,H]},N=0,M=m.length-1,P=0,L;N<=M&&P<=m.length-1;){var j=Math.floor((N+M)/2),V=j-1,[I,R]=C(V),[U]=C(j);if(!I&&!U&&(N=j+1),I&&U&&(M=j-1),!I&&U){L=R;break}P++}return L||y},AD=t=>{var e=Kt(t)?[]:t.toString().split(s6);return[{words:e}]},kee=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=t;if((e||n)&&!ks.isSsr){var c,u,d=o6({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:m,spaceWidth:p}=d;c=m,u=p}else return AD(r);return Nee({breakAll:a,children:r,maxLines:o,style:i},c,u,e,n)}return AD(r)},TD="#808080",Qh=E.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:u="end",fill:d=TD}=t,m=_D(t,Tee),p=E.useMemo(()=>kee({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:o,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,o,m.style,m.width]),{dx:y,dy:x,angle:_,className:T,breakAll:C}=m,N=_D(m,Eee);if(!Pa(n)||!Pa(r)||p.length===0)return null;var M=n+(Te(y)?y:0),P=r+(Te(x)?x:0),L;switch(u){case"start":L=Kw("calc(".concat(a,")"));break;case"middle":L=Kw("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:L=Kw("calc(".concat(p.length-1," * -").concat(i,")"));break}var j=[];if(o){var V=p[0].width,{width:I}=m;j.push("scale(".concat(Te(I)?I/V:1,")"))}return _&&j.push("rotate(".concat(_,", ").concat(M,", ").concat(P,")")),j.length&&(N.transform=j.join(" ")),E.createElement("text",v_({},Hn(N),{ref:e,x:M,y:P,className:nt("recharts-text",T),textAnchor:c,fill:d.includes("url")?TD:d}),p.map((R,U)=>{var F=R.words.join(C?"":" ");return E.createElement("tspan",{x:M,dy:U===0?L:i,key:"".concat(F,"-").concat(U)},F)}))});Qh.displayName="Text";var Iee=["labelRef"];function Pee(t,e){if(t==null)return{};var n,r,i=Dee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ED(Object(n),!0).forEach(function(r){Ree(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ree(t,e,n){return(e=Mee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mee(t){var e=jee(t,"string");return typeof e=="symbol"?e:e+""}function jee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rs(){return rs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rs.apply(null,arguments)}var l6=E.createContext(null),Oee=t=>{var{x:e,y:n,width:r,height:i,children:a}=t,o=E.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return E.createElement(l6.Provider,{value:o},a)},c6=()=>{var t=E.useContext(l6),e=uv();return t||e},Lee=E.createContext(null),Uee=()=>{var t=E.useContext(Lee),e=_e(Av);return t||e},Vee=t=>{var{value:e,formatter:n}=t,r=Kt(t.children)?e:t.children;return typeof n=="function"?n(r):r},ZA=t=>t!=null&&typeof t=="function",Fee=(t,e)=>{var n=Sn(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Bee=(t,e,n,r,i)=>{var{offset:a,className:o}=t,{cx:c,cy:u,innerRadius:d,outerRadius:m,startAngle:p,endAngle:y,clockWise:x}=i,_=(d+m)/2,T=Fee(p,y),C=T>=0?1:-1,N,M;switch(e){case"insideStart":N=p+C*a,M=x;break;case"insideEnd":N=y-C*a,M=!x;break;case"end":N=y+C*a,M=x;break;default:throw new Error("Unsupported position ".concat(e))}M=T<=0?M:!M;var P=Jt(c,u,_,N),L=Jt(c,u,_,N+(M?1:-1)*359),j="M".concat(P.x,",").concat(P.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(M?0:1,`,
    `).concat(L.x,",").concat(L.y),V=Kt(t.id)?dh("recharts-radial-line-"):t.id;return E.createElement("text",rs({},r,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",o)}),E.createElement("defs",null,E.createElement("path",{id:V,d:j})),E.createElement("textPath",{xlinkHref:"#".concat(V)},n))},zee=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:m,y:p}=Jt(r,i,o+e,d);return{x:m,y:p,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(a+o)/2,{x,y:_}=Jt(r,i,y,d);return{x,y:_,textAnchor:"middle",verticalAnchor:"middle"}},u6=t=>"cx"in t&&Te(t.cx),qee=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!u6(n)&&(a=n);var{x:o,y:c,width:u,height:d}=e,m=d>=0?1:-1,p=m*r,y=m>0?"end":"start",x=m>0?"start":"end",_=u>=0?1:-1,T=_*r,C=_>0?"end":"start",N=_>0?"start":"end";if(i==="top"){var M={x:o+u/2,y:c-m*r,textAnchor:"middle",verticalAnchor:y};return ln(ln({},M),a?{height:Math.max(c-a.y,0),width:u}:{})}if(i==="bottom"){var P={x:o+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:x};return ln(ln({},P),a?{height:Math.max(a.y+a.height-(c+d),0),width:u}:{})}if(i==="left"){var L={x:o-T,y:c+d/2,textAnchor:C,verticalAnchor:"middle"};return ln(ln({},L),a?{width:Math.max(L.x-a.x,0),height:d}:{})}if(i==="right"){var j={x:o+u+T,y:c+d/2,textAnchor:N,verticalAnchor:"middle"};return ln(ln({},j),a?{width:Math.max(a.x+a.width-j.x,0),height:d}:{})}var V=a?{width:u,height:d}:{};return i==="insideLeft"?ln({x:o+T,y:c+d/2,textAnchor:N,verticalAnchor:"middle"},V):i==="insideRight"?ln({x:o+u-T,y:c+d/2,textAnchor:C,verticalAnchor:"middle"},V):i==="insideTop"?ln({x:o+u/2,y:c+p,textAnchor:"middle",verticalAnchor:x},V):i==="insideBottom"?ln({x:o+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:y},V):i==="insideTopLeft"?ln({x:o+T,y:c+p,textAnchor:N,verticalAnchor:x},V):i==="insideTopRight"?ln({x:o+u-T,y:c+p,textAnchor:C,verticalAnchor:x},V):i==="insideBottomLeft"?ln({x:o+T,y:c+d-p,textAnchor:N,verticalAnchor:y},V):i==="insideBottomRight"?ln({x:o+u-T,y:c+d-p,textAnchor:C,verticalAnchor:y},V):i&&typeof i=="object"&&(Te(i.x)||ps(i.x))&&(Te(i.y)||ps(i.y))?ln({x:o+mr(i.x,u),y:c+mr(i.y,d),textAnchor:"end",verticalAnchor:"end"},V):ln({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},V)},Hee={offset:5};function wo(t){var e=$n(t,Hee),{viewBox:n,position:r,value:i,children:a,content:o,className:c="",textBreakAll:u,labelRef:d}=e,m=Uee(),p=c6(),y=r==="center"?p:m??p,x=n||y;if(!x||Kt(i)&&Kt(a)&&!E.isValidElement(o)&&typeof o!="function")return null;var _=ln(ln({},e),{},{viewBox:x});if(E.isValidElement(o)){var{labelRef:T}=_,C=Pee(_,Iee);return E.cloneElement(o,C)}var N;if(typeof o=="function"){if(N=E.createElement(o,_),E.isValidElement(N))return N}else N=Vee(e);var M=u6(x),P=Hn(e);if(M&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Bee(e,r,N,P,x);var L=M?zee(x,e.offset,e.position):qee(e,x);return E.createElement(Qh,rs({ref:d,className:nt("recharts-label",c)},P,L,{breakAll:u}),N)}wo.displayName="Label";var $ee=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?E.createElement(wo,rs({key:"label-implicit"},r)):Pa(t)?E.createElement(wo,rs({key:"label-implicit",value:t},r)):E.isValidElement(t)?t.type===wo?E.cloneElement(t,ln({key:"label-implicit"},r)):E.createElement(wo,rs({key:"label-implicit",content:t},r)):ZA(t)?E.createElement(wo,rs({key:"label-implicit",content:t},r)):t&&typeof t=="object"?E.createElement(wo,rs({},t,{key:"label-implicit"},r)):null};function Gee(t){var{label:e,labelRef:n}=t,r=c6();return $ee(e,r,n)||null}var Yw={},Ww={},CD;function Kee(){return CD||(CD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(Ww)),Ww}var Jw={},ND;function Yee(){return ND||(ND=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(Jw)),Jw}var kD;function Wee(){return kD||(kD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kee(),n=Yee(),r=j1();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(Yw)),Yw}var Qw,ID;function Jee(){return ID||(ID=1,Qw=Wee().last),Qw}var Qee=Jee();const Xee=Ma(Qee);var Zee=["valueAccessor"],ete=["dataKey","clockWise","id","textBreakAll"];function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(null,arguments)}function PD(t,e){if(t==null)return{};var n,r,i=tte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var nte=t=>Array.isArray(t.value)?Xee(t.value):t.value,d6=E.createContext(void 0),f6=d6.Provider,h6=E.createContext(void 0),m6=h6.Provider;function rte(){return E.useContext(d6)}function ite(){return E.useContext(h6)}function vg(t){var{valueAccessor:e=nte}=t,n=PD(t,Zee),{dataKey:r,clockWise:i,id:a,textBreakAll:o}=n,c=PD(n,ete),u=rte(),d=ite(),m=u||d;return!m||!m.length?null:E.createElement(kt,{className:"recharts-label-list"},m.map((p,y)=>{var x,_=Kt(r)?e(p,y):Ct(p&&p.payload,r),T=Kt(a)?{}:{id:"".concat(a,"-").concat(y)};return E.createElement(wo,my({key:"label-".concat(y)},Hn(p),c,T,{fill:(x=n.fill)!==null&&x!==void 0?x:p.fill,parentViewBox:p.parentViewBox,value:_,textBreakAll:o,viewBox:p.viewBox,index:y}))}))}vg.displayName="LabelList";function Ov(t){var{label:e}=t;return e?e===!0?E.createElement(vg,{key:"labelList-implicit"}):E.isValidElement(e)||ZA(e)?E.createElement(vg,{key:"labelList-implicit",content:e}):typeof e=="object"?E.createElement(vg,my({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var ate=["points","className","baseLinePoints","connectNulls"];function yu(){return yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yu.apply(null,arguments)}function ste(t,e){if(t==null)return{};var n,r,i=ote(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ote(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var DD=t=>t&&t.x===+t.x&&t.y===+t.y,lte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(r=>{DD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),DD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Qf=(t,e)=>{var n=lte(t);e&&(n=[n.reduce((i,a)=>[...i,...a],[])]);var r=n.map(i=>i.reduce((a,o,c)=>"".concat(a).concat(c===0?"M":"L").concat(o.x,",").concat(o.y),"")).join("");return n.length===1?"".concat(r,"Z"):r},cte=(t,e,n)=>{var r=Qf(t,n);return"".concat(r.slice(-1)==="Z"?r.slice(0,-1):r,"L").concat(Qf(Array.from(e).reverse(),n).slice(1))},ute=t=>{var{points:e,className:n,baseLinePoints:r,connectNulls:i}=t,a=ste(t,ate);if(!e||!e.length)return null;var o=nt("recharts-polygon",n);if(r&&r.length){var c=a.stroke&&a.stroke!=="none",u=cte(e,r,i);return E.createElement("g",{className:o},E.createElement("path",yu({},Hn(a),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?E.createElement("path",yu({},Hn(a),{fill:"none",d:Qf(e,i)})):null,c?E.createElement("path",yu({},Hn(a),{fill:"none",d:Qf(r,i)})):null)}var d=Qf(e,i);return E.createElement("path",yu({},Hn(a),{fill:d.slice(-1)==="Z"?a.fill:"none",className:o,d}))};function x_(){return x_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x_.apply(null,arguments)}var eT=t=>{var{cx:e,cy:n,r,className:i}=t,a=nt("recharts-dot",i);return e===+e&&n===+n&&r===+r?E.createElement("circle",x_({},Mn(t),D1(t),{className:a,cx:e,cy:n,r})):null},Lv=t=>t.graphicalItems.polarItems,dte=J([It,Hh],TA),Xh=J([Lv,Xt,dte],EA),fte=J([Xh],CA),Uv=J([fte,zh],NA),p6=J([Uv,Xt,Xh],IA);J([Uv,Xt,Xh],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,o=Ct(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Ct(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var RD=()=>{},hte=J([Uv,Xt,Xh,Iv,It],jA),mte=J([Xt,RA,MA,RD,hte,RD,Ge,It],OA),g6=J([Xt,Ge,Uv,p6,ld,It,mte],LA),y6=J([g6,Xt,Zo],VA),pte=J([Xt,g6,y6,It],BA),tT=(t,e,n)=>{switch(e){case"angleAxis":return cd(t,n);case"radiusAxis":return qh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},nT=(t,e,n)=>{switch(e){case"angleAxis":return kQ(t,n);case"radiusAxis":return IQ(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Zh=J([tT,Zo,pte,nT],Pv),v6=J([Ge,p6,dd,It],zA),x6=J([Ge,tT,Zo,Zh,y6,nT,Yh,v6,It],_L),gte=J([Ge,tT,Zh,nT,Yh,v6,It],TL),yte={radiusAxis:{},angleAxis:{}},b6=ei({name:"polarAxis",initialState:yte,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:zwe,removeRadiusAxis:qwe,addAngleAxis:vte,removeAngleAxis:xte}=b6.actions,bte=b6.reducer,wte=["children"];function Ss(){return Ss=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ss.apply(null,arguments)}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){Vv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vv(t,e,n){return(e=Ste(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ste(t){var e=_te(t,"string");return typeof e=="symbol"?e:e+""}function _te(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ate(t,e){if(t==null)return{};var n,r,i=Tte(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tte(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jD=1e-5,Ete=Math.cos(Wg(45)),w6="angleAxis";function Cte(t){var e=Ft(),n=E.useMemo(()=>{var{children:a}=t,o=Ate(t,wte);return o},[t]),r=_e(a=>cd(a,n.id)),i=n===r;return E.useEffect(()=>(e(vte(n)),()=>{e(xte(n))}),[e,n]),i?t.children:null}var Nte=(t,e)=>{var{cx:n,cy:r,radius:i,orientation:a,tickSize:o}=e,c=o||8,u=Jt(n,r,i,t.coordinate),d=Jt(n,r,i+(a==="inner"?-1:1)*c,t.coordinate);return{x1:u.x,y1:u.y,x2:d.x,y2:d.y}},kte=(t,e)=>{var n=Math.cos(Wg(-t.coordinate));return n>jD?e==="outer"?"start":"end":n<-jD?e==="outer"?"end":"start":"middle"},Ite=t=>{var e=Math.cos(Wg(-t.coordinate)),n=Math.sin(Wg(-t.coordinate));return Math.abs(e)<=Ete?n>0?"start":"end":"middle"},Pte=t=>{var{cx:e,cy:n,radius:r,axisLineType:i,axisLine:a,ticks:o}=t;if(!a)return null;var c=xa(xa({},Mn(t)),{},{fill:"none"},Mn(a));if(i==="circle")return E.createElement(eT,Ss({className:"recharts-polar-angle-axis-line"},c,{cx:e,cy:n,r}));var u=o.map(d=>Jt(e,n,r,d.coordinate));return E.createElement(ute,Ss({className:"recharts-polar-angle-axis-line"},c,{points:u}))},Dte=t=>{var{tick:e,tickProps:n,value:r}=t;return e?E.isValidElement(e)?E.cloneElement(e,n):typeof e=="function"?e(n):E.createElement(Qh,Ss({},n,{className:"recharts-polar-angle-axis-tick-value"}),r):null},Rte=t=>{var{tick:e,tickLine:n,tickFormatter:r,stroke:i,ticks:a}=t,o=Mn(t),c=ms(e),u=xa(xa({},o),{},{fill:"none"},Mn(n)),d=a.map((m,p)=>{var y=Nte(m,t),x=kte(m,t.orientation),_=Ite(m),T=xa(xa(xa({},o),{},{textAnchor:x,verticalAnchor:_,stroke:"none",fill:i},c),{},{index:p,payload:m,x:y.x2,y:y.y2});return E.createElement(kt,Ss({className:nt("recharts-polar-angle-axis-tick",gG(e)),key:"tick-".concat(m.coordinate)},Wo(t,m,p)),n&&E.createElement("line",Ss({className:"recharts-polar-angle-axis-tick-line"},u,y)),E.createElement(Dte,{tick:e,tickProps:T,value:r?r(m.value,p):m.value}))});return E.createElement(kt,{className:"recharts-polar-angle-axis-ticks"},d)},Mte=t=>{var{angleAxisId:e}=t,n=_e(Av),r=_e(c=>Zh(c,"angleAxis",e)),i=gr(),a=_e(c=>x6(c,"angleAxis",e,i));if(n==null||!a||!a.length)return null;var o=xa(xa(xa({},t),{},{scale:r},n),{},{radius:n.outerRadius});return E.createElement(kt,{className:nt("recharts-polar-angle-axis",w6,o.className)},E.createElement(Pte,Ss({},o,{ticks:a})),E.createElement(Rte,Ss({},o,{ticks:a})))};class em extends E.PureComponent{render(){return this.props.radius<=0?null:E.createElement(Cte,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},E.createElement(Mte,this.props))}}Vv(em,"displayName","PolarAngleAxis");Vv(em,"axisType",w6);Vv(em,"defaultProps",va);function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){jte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jte(t,e,n){return(e=Ote(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ote(t){var e=Lte(t,"string");return typeof e=="symbol"?e:e+""}function Lte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ute=(t,e)=>e,rT=J([Lv,Ute],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),Vte=[],iT=(t,e,n)=>(n==null?void 0:n.length)===0?Vte:n,S6=J([zh,rT,iT],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>LD(LD({},e.presentationProps),a.props))),i!=null)return i}}),Fte=J([S6,rT,iT],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,o=Ct(r,e.nameKey,e.name),c;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?c=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=e.fill,{value:hc(o,e.dataKey),color:c,payload:r,type:e.legendType}})}),Bte=J([S6,rT,iT,jn],(t,e,n,r)=>{if(!(e==null||t==null))return Vne({offset:r,pieSettings:e,displayedData:t,cells:n})}),Xw={exports:{}},Tt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UD;function zte(){if(UD)return Tt;UD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function _(T){if(typeof T=="object"&&T!==null){var C=T.$$typeof;switch(C){case t:switch(T=T.type,T){case n:case i:case r:case u:case d:case y:return T;default:switch(T=T&&T.$$typeof,T){case o:case c:case p:case m:return T;case a:return T;default:return C}}case e:return C}}}return Tt.ContextConsumer=a,Tt.ContextProvider=o,Tt.Element=t,Tt.ForwardRef=c,Tt.Fragment=n,Tt.Lazy=p,Tt.Memo=m,Tt.Portal=e,Tt.Profiler=i,Tt.StrictMode=r,Tt.Suspense=u,Tt.SuspenseList=d,Tt.isContextConsumer=function(T){return _(T)===a},Tt.isContextProvider=function(T){return _(T)===o},Tt.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===t},Tt.isForwardRef=function(T){return _(T)===c},Tt.isFragment=function(T){return _(T)===n},Tt.isLazy=function(T){return _(T)===p},Tt.isMemo=function(T){return _(T)===m},Tt.isPortal=function(T){return _(T)===e},Tt.isProfiler=function(T){return _(T)===i},Tt.isStrictMode=function(T){return _(T)===r},Tt.isSuspense=function(T){return _(T)===u},Tt.isSuspenseList=function(T){return _(T)===d},Tt.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===n||T===i||T===r||T===u||T===d||typeof T=="object"&&T!==null&&(T.$$typeof===p||T.$$typeof===m||T.$$typeof===o||T.$$typeof===a||T.$$typeof===c||T.$$typeof===x||T.getModuleId!==void 0)},Tt.typeOf=_,Tt}var VD;function qte(){return VD||(VD=1,Xw.exports=zte()),Xw.exports}var Hte=qte(),FD=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",BD=null,Zw=null,_6=t=>{if(t===BD&&Array.isArray(Zw))return Zw;var e=[];return E.Children.forEach(t,n=>{Kt(n)||(Hte.isFragment(n)?e=e.concat(_6(n.props.children)):e.push(n))}),Zw=e,BD=t,e};function Fv(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>FD(i)):r=[FD(e)],_6(t).forEach(i=>{var a=Zl(i,"type.displayName")||Zl(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var A6=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,eS={},zD;function $te(){return zD||(zD=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(eS)),eS}var tS,qD;function Gte(){return qD||(qD=1,tS=$te().isPlainObject),tS}var Kte=Gte();const Yte=Ma(Kte);function HD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $D(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(n),!0).forEach(function(r){Wte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wte(t,e,n){return(e=Jte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jte(t){var e=Qte(t,"string");return typeof e=="symbol"?e:e+""}function Qte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},py.apply(null,arguments)}var GD=(t,e,n,r,i)=>{var a=n-r,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-a/2,",").concat(e+i),o+="L ".concat(t+n-a/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},Xte={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Zte=t=>{var e=$n(t,Xte),{x:n,y:r,upperWidth:i,lowerWidth:a,height:o,className:c}=e,{animationEasing:u,animationDuration:d,animationBegin:m,isUpdateAnimationActive:p}=e,y=E.useRef(null),[x,_]=E.useState(-1),T=E.useRef(i),C=E.useRef(a),N=E.useRef(o),M=E.useRef(n),P=E.useRef(r),L=id(t,"trapezoid-");if(E.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var se=y.current.getTotalLength();se&&_(se)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||o!==+o||i===0&&a===0||o===0)return null;var j=nt("recharts-trapezoid",c);if(!p)return E.createElement("g",null,E.createElement("path",py({},Hn(e),{className:j,d:GD(n,r,i,a,o)})));var V=T.current,I=C.current,R=N.current,U=M.current,F=P.current,B="0px ".concat(x===-1?1:x,"px"),q="".concat(x,"px 0px"),H=H4(["strokeDasharray"],d,u);return E.createElement(rd,{animationId:L,key:L,canBegin:x>0,duration:d,easing:u,isActive:p,begin:m},se=>{var Se=Wt(V,i,se),Q=Wt(I,a,se),ue=Wt(R,o,se),be=Wt(U,n,se),De=Wt(F,r,se);y.current&&(T.current=Se,C.current=Q,N.current=ue,M.current=be,P.current=De);var Ke=se>0?{transition:H,strokeDasharray:q}:{strokeDasharray:B};return E.createElement("path",py({},Hn(e),{className:j,d:GD(be,De,Se,Q,ue),ref:y,style:$D($D({},Ke),e.style)}))})},ene=["option","shapeType","propTransformer","activeClassName","isActive"];function tne(t,e){if(t==null)return{};var n,r,i=nne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function KD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KD(Object(n),!0).forEach(function(r){rne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rne(t,e,n){return(e=ine(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ine(t){var e=ane(t,"string");return typeof e=="symbol"?e:e+""}function ane(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sne(t,e){return gy(gy({},e),t)}function one(t,e){return t==="symbols"}function YD(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return E.createElement(Y4,n);case"trapezoid":return E.createElement(Zte,n);case"sector":return E.createElement(Q4,n);case"symbols":if(one(e))return E.createElement(P1,n);break;default:return null}}function lne(t){return E.isValidElement(t)?t.props:t}function aT(t){var{option:e,shapeType:n,propTransformer:r=sne,activeClassName:i="recharts-active-shape",isActive:a}=t,o=tne(t,ene),c;if(E.isValidElement(e))c=E.cloneElement(e,gy(gy({},o),lne(e)));else if(typeof e=="function")c=e(o);else if(Yte(e)&&typeof e!="boolean"){var u=r(e,o);c=E.createElement(YD,{shapeType:n,elementProps:u})}else{var d=o;c=E.createElement(YD,{shapeType:n,elementProps:d})}return a?E.createElement(kt,{className:i},c):c}var Bv=(t,e)=>{var n=Ft();return(r,i)=>a=>{t==null||t(r,i,a),n(PL({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},zv=t=>{var e=Ft();return(n,r)=>i=>{t==null||t(n,r,i),e(IX())}},qv=(t,e)=>{var n=Ft();return(r,i)=>a=>{t==null||t(r,i,a),n(PX({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Hv(t){var{fn:e,args:n}=t,r=Ft(),i=gr();return E.useLayoutEffect(()=>{if(!i){var a=e(n);return r(CX(a)),()=>{r(NX(a))}}},[e,n,r,i]),null}var T6=()=>{};function E6(t){var{legendPayload:e}=t,n=Ft(),r=gr();return E.useLayoutEffect(()=>r?T6:(n(B4(e)),()=>{n(z4(e))}),[n,r,e]),null}function C6(t){var{legendPayload:e}=t,n=Ft(),r=_e(Ge);return E.useLayoutEffect(()=>r!=="centric"&&r!=="radial"?T6:(n(B4(e)),()=>{n(z4(e))}),[n,r,e]),null}var nS,cne=()=>{var[t]=E.useState(()=>dh("uid-"));return t},une=(nS=BF.useId)!==null&&nS!==void 0?nS:cne;function dne(t,e){var n=une();return e||(t?"".concat(t,"-").concat(n):n)}var fne=E.createContext(void 0),$v=t=>{var{id:e,type:n,children:r}=t,i=dne("recharts-".concat(n),e);return E.createElement(fne.Provider,{value:i},r(i))},hne={cartesianItems:[],polarItems:[]},N6=ei({name:"graphicalItems",initialState:hne,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:br()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=cs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:br()},removeCartesianGraphicalItem:{reducer(t,e){var n=cs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:br()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:br()},removePolarGraphicalItem:{reducer(t,e){var n=cs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:br()}}}),{addCartesianGraphicalItem:mne,replaceCartesianGraphicalItem:pne,removeCartesianGraphicalItem:gne,addPolarGraphicalItem:yne,removePolarGraphicalItem:vne}=N6.actions,xne=N6.reducer;function k6(t){var e=Ft(),n=E.useRef(null);return E.useLayoutEffect(()=>{n.current===null?e(mne(t)):n.current!==t&&e(pne({prev:n.current,next:t})),n.current=t},[e,t]),E.useLayoutEffect(()=>()=>{n.current&&(e(gne(n.current)),n.current=null)},[e]),null}function I6(t){var e=Ft();return E.useLayoutEffect(()=>(e(yne(t)),()=>{e(vne(t))}),[e,t]),null}var bne=["onMouseEnter","onClick","onMouseLeave"],wne=["id"],Sne=["id"];function sT(t,e){if(t==null)return{};var n,r,i=_ne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _ne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(r){Ane(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ane(t,e,n){return(e=Tne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tne(t){var e=Ene(t,"string");return typeof e=="symbol"?e:e+""}function Ene(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lo(){return Lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lo.apply(null,arguments)}function Cne(t){var e=E.useMemo(()=>Fv(t.children,Os),[t.children]),n=_e(r=>Fte(r,t.id,e));return n==null?null:E.createElement(C6,{legendPayload:n})}function Nne(t){var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:o,name:c,hide:u,tooltipType:d}=t;return{dataDefinedOnItem:r.map(m=>m.tooltipPayload),positions:r.map(m=>m.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:o,dataKey:e,nameKey:n,name:hc(c,e),hide:u,type:d,color:o,unit:""}}}var kne=(t,e)=>t>e?"start":t<e?"end":"middle",Ine=(t,e,n)=>mr(typeof e=="function"?e(t):e,n,n*.8),Pne=(t,e,n)=>{var{top:r,left:i,width:a,height:o}=e,c=C4(a,o),u=i+mr(t.cx,a,a/2),d=r+mr(t.cy,o,o/2),m=mr(t.innerRadius,c,0),p=Ine(n,t.outerRadius,c),y=t.maxRadius||Math.sqrt(a*a+o*o)/2;return{cx:u,cy:d,innerRadius:m,outerRadius:p,maxRadius:y}},Dne=(t,e)=>{var n=Sn(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function Rne(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Mne=(t,e)=>{if(E.isValidElement(t))return E.cloneElement(t,e);if(typeof t=="function")return t(e);var n=nt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return E.createElement(Wf,Lo({},e,{type:"linear",className:n}))},jne=(t,e,n)=>{if(E.isValidElement(t))return E.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),E.isValidElement(r)))return r;var i=nt("recharts-pie-label-text",Rne(t));return E.createElement(Qh,Lo({},e,{alignmentBaseline:"middle",className:i}),r)};function One(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:o}=n;if(!r||!i||!e)return null;var c=Mn(n),u=ms(i),d=ms(a),m=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=e.map((y,x)=>{var _=(y.startAngle+y.endAngle)/2,T=Jt(y.cx,y.cy,y.outerRadius+m,_),C=qt(qt(qt(qt({},c),y),{},{stroke:"none"},u),{},{index:x,textAnchor:kne(T.x,y.cx)},T),N=qt(qt(qt(qt({},c),y),{},{fill:"none",stroke:y.fill},d),{},{index:x,points:[Jt(y.cx,y.cy,y.outerRadius,_),T],key:"line"});return E.createElement(kt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(x)},a&&Mne(a,N),jne(i,C,Ct(y,o)))});return E.createElement(kt,{className:"recharts-pie-labels"},p)}function Lne(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?E.createElement(Ov,{label:i}):E.createElement(One,{sectors:e,props:n,showLabels:r})}function Une(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i}=t,a=_e(ws),{onMouseEnter:o,onClick:c,onMouseLeave:u}=i,d=sT(i,bne),m=Bv(o,i.dataKey),p=zv(u),y=qv(c,i.dataKey);return e==null||e.length===0?null:E.createElement(E.Fragment,null,e.map((x,_)=>{if((x==null?void 0:x.startAngle)===0&&(x==null?void 0:x.endAngle)===0&&e.length!==1)return null;var T=n&&String(_)===a,C=a?r:null,N=T?n:C,M=qt(qt({},x),{},{stroke:x.stroke,tabIndex:-1,[M4]:_,[j4]:i.dataKey});return E.createElement(kt,Lo({key:"sector-".concat(x==null?void 0:x.startAngle,"-").concat(x==null?void 0:x.endAngle,"-").concat(x.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},Wo(d,x,_),{onMouseEnter:m(x,_),onMouseLeave:p(x,_),onClick:y(x,_)}),E.createElement(aT,Lo({option:N,isActive:T,shapeType:"sector"},M)))}))}function Vne(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:o,startAngle:c,endAngle:u,dataKey:d,nameKey:m,tooltipType:p}=n,y=Math.abs(n.minAngle),x=Dne(c,u),_=Math.abs(x),T=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,C=r.filter(V=>Ct(V,d,0)!==0).length,N=(_>=360?C:C-1)*T,M=_-C*y-N,P=r.reduce((V,I)=>{var R=Ct(I,d,0);return V+(Te(R)?R:0)},0),L;if(P>0){var j;L=r.map((V,I)=>{var R=Ct(V,d,0),U=Ct(V,m,I),F=Pne(n,a,V),B=(Te(R)?R:0)/P,q,H=qt(qt({},V),i&&i[I]&&i[I].props);I?q=j.endAngle+Sn(x)*T*(R!==0?1:0):q=c;var se=q+Sn(x)*((R!==0?y:0)+B*M),Se=(q+se)/2,Q=(F.innerRadius+F.outerRadius)/2,ue=[{name:U,value:R,payload:H,dataKey:d,type:p}],be=Jt(F.cx,F.cy,Q,Se);return j=qt(qt(qt(qt({},n.presentationProps),{},{percent:B,cornerRadius:o,name:U,tooltipPayload:ue,midAngle:Se,middleRadius:Q,tooltipPosition:be},H),F),{},{value:R,startAngle:q,endAngle:se,payload:H,paddingAngle:Sn(x)*T}),j})}return L}function Fne(t){var{showLabels:e,sectors:n,children:r}=t,i=E.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return E.createElement(m6,{value:e?i:void 0},r)}function Bne(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:m,onAnimationEnd:p}=e,y=id(e,"recharts-pie-"),x=n.current,[_,T]=E.useState(!1),C=E.useCallback(()=>{typeof p=="function"&&p(),T(!1)},[p]),N=E.useCallback(()=>{typeof m=="function"&&m(),T(!0)},[m]);return E.createElement(Fne,{showLabels:!_,sectors:r},E.createElement(rd,{animationId:y,begin:a,duration:o,isActive:i,easing:c,onAnimationStart:N,onAnimationEnd:C,key:y},M=>{var P=[],L=r&&r[0],j=L==null?void 0:L.startAngle;return r==null||r.forEach((V,I)=>{var R=x&&x[I],U=I>0?Zl(V,"paddingAngle",0):0;if(R){var F=Wt(R.endAngle-R.startAngle,V.endAngle-V.startAngle,M),B=qt(qt({},V),{},{startAngle:j+U,endAngle:j+F+U});P.push(B),j=B.endAngle}else{var{endAngle:q,startAngle:H}=V,se=Wt(0,q-H,M),Se=qt(qt({},V),{},{startAngle:j+U,endAngle:j+se+U});P.push(Se),j=Se.endAngle}}),n.current=P,E.createElement(kt,null,E.createElement(Une,{sectors:P,activeShape:u,inactiveShape:d,allOtherPieProps:e}))}),E.createElement(Lne,{showLabels:!_,sectors:r,props:e}),e.children)}var zne={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ks.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function qne(t){var{id:e}=t,n=sT(t,wne),{hide:r,className:i,rootTabIndex:a}=t,o=E.useMemo(()=>Fv(t.children,Os),[t.children]),c=_e(m=>Bte(m,e,o)),u=E.useRef(null),d=nt("recharts-pie",i);return r||c==null?(u.current=null,E.createElement(kt,{tabIndex:a,className:d})):E.createElement(E.Fragment,null,E.createElement(Hv,{fn:Nne,args:qt(qt({},t),{},{sectors:c})}),E.createElement(kt,{tabIndex:a,className:d},E.createElement(Bne,{props:qt(qt({},n),{},{sectors:c}),previousSectorsRef:u})))}function Gv(t){var e=$n(t,zne),{id:n}=e,r=sT(e,Sne),i=Mn(r);return E.createElement($v,{id:n,type:"pie"},a=>E.createElement(E.Fragment,null,E.createElement(I6,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),E.createElement(Cne,Lo({},r,{id:a})),E.createElement(qne,Lo({},r,{id:a}))))}Gv.displayName="Pie";function JD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(n),!0).forEach(function(r){Hne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hne(t,e,n){return(e=$ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ne(t){var e=Gne(t,"string");return typeof e=="symbol"?e:e+""}function Gne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kne={xAxis:{},yAxis:{},zAxis:{}},P6=ei({name:"cartesianAxis",initialState:Kne,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:br()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:br()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:br()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:br()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:br()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:br()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var o=[...a,r].slice(-3);t.yAxis[n]=QD(QD({},t.yAxis[n]),{},{width:r,widthHistory:o})}}}}),{addXAxis:Yne,removeXAxis:Wne,addYAxis:Jne,removeYAxis:Qne,addZAxis:Hwe,removeZAxis:$we,updateYAxisWidth:Xne}=P6.actions,Zne=P6.reducer,ere=J([jn],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),tre=J([ere,Cs,Ns],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),oT=()=>_e(tre),nre=()=>_e(yZ);function XD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(n),!0).forEach(function(r){rre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rre(t,e,n){return(e=ire(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ire(t){var e=are(t,"string");return typeof e=="symbol"?e:e+""}function are(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sre=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=ZD(ZD({index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},ms(i)),D1(i)),c;return E.isValidElement(i)?c=E.cloneElement(i,o):typeof i=="function"?c=i(o):c=E.createElement(eT,o),E.createElement(kt,{className:"recharts-active-dot"},c)};function eR(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i}=t,a=_e(ws),o=nre();if(e==null||o==null)return null;var c=e.find(u=>o.includes(u.payload));return Kt(c)?null:sre({point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r})}function b_(){return b_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b_.apply(null,arguments)}function tR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tR(Object(n),!0).forEach(function(r){ore(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ore(t,e,n){return(e=lre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lre(t){var e=cre(t,"string");return typeof e=="symbol"?e:e+""}function cre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D6(t){return typeof t=="string"?parseInt(t,10):t}function ure(t,e){var n="".concat(e.cx||t.cx),r=Number(n),i="".concat(e.cy||t.cy),a=Number(i);return rS(rS(rS({},e),t),{},{cx:r,cy:a})}function R6(t){return E.createElement(aT,b_({shapeType:"sector",propTransformer:ure},t))}var dre="Invariant failed";function fre(t,e){throw new Error(dre)}var hre=["x","y"];function w_(){return w_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w_.apply(null,arguments)}function nR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nR(Object(n),!0).forEach(function(r){mre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mre(t,e,n){return(e=pre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pre(t){var e=gre(t,"string");return typeof e=="symbol"?e:e+""}function gre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yre(t,e){if(t==null)return{};var n,r,i=vre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function xre(t,e){var{x:n,y:r}=t,i=yre(t,hre),a="".concat(n),o=parseInt(a,10),c="".concat(r),u=parseInt(c,10),d="".concat(e.height||i.height),m=parseInt(d,10),p="".concat(e.width||i.width),y=parseInt(p,10);return Vf(Vf(Vf(Vf(Vf({},e),i),o?{x:o}:{}),u?{y:u}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function lT(t){return E.createElement(aT,w_({shapeType:"rectangle",propTransformer:xre,activeClassName:"recharts-active-bar"},t))}var bre=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Te(e))return e;var a=Te(r)||Kt(r);return a?e(r,i):(a||fre(),n)}},wre={},M6=ei({name:"errorBars",initialState:wre,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Gwe,replaceErrorBar:Kwe,removeErrorBar:Ywe}=M6.actions,Sre=M6.reducer,_re=["children"];function Are(t,e){if(t==null)return{};var n,r,i=Tre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ere={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Cre=E.createContext(Ere);function Nre(t){var{children:e}=t,n=Are(t,_re);return E.createElement(Cre.Provider,{value:n},e)}function cT(t,e){var n,r,i=_e(d=>Ds(d,t)),a=_e(d=>Rs(d,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Gr.allowDataOverflow,c=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Kr.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function j6(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=oT(),{needClipX:a,needClipY:o,needClip:c}=cT(e,n);if(!c)return null;var{x:u,y:d,width:m,height:p}=i;return E.createElement("clipPath",{id:"clipPath-".concat(r)},E.createElement("rect",{x:a?u:u-m/2,y:o?d:d-p/2,width:a?m:m*2,height:o?p:p*2}))}var kre=["onMouseEnter","onMouseLeave","onClick"],Ire=["value","background","tooltipPosition"],Pre=["id"],Dre=["onMouseEnter","onClick","onMouseLeave"];function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uo.apply(null,arguments)}function rR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(n),!0).forEach(function(r){Rre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rre(t,e,n){return(e=Mre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mre(t){var e=jre(t,"string");return typeof e=="symbol"?e:e+""}function jre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yy(t,e){if(t==null)return{};var n,r,i=Ore(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ore(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Lre=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:hc(n,e),payload:t}]};function Ure(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,unit:c}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:hc(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:c}}}function Vre(t){var e=_e(ws),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=a,d=yy(a,kre),m=Bv(o,r),p=zv(c),y=qv(u,r);if(!i||n==null)return null;var x=ms(i);return E.createElement(E.Fragment,null,n.map((_,T)=>{var{value:C,background:N,tooltipPosition:M}=_,P=yy(_,Ire);if(!N)return null;var L=m(_,T),j=p(_,T),V=y(_,T),I=wr(wr(wr(wr(wr({option:i,isActive:String(T)===e},P),{},{fill:"#eee"},N),x),Wo(d,_,T)),{},{onMouseEnter:L,onMouseLeave:j,onClick:V,dataKey:r,index:T,className:"recharts-bar-background-rectangle"});return E.createElement(lT,Uo({key:"background-bar-".concat(T)},I))}))}function Fre(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(a=>{var o={x:a.x,y:a.y,width:a.width,height:a.height};return wr(wr({},o),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:o,fill:a.fill})});return E.createElement(f6,{value:e?i:void 0},n)}function Bre(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:o}=t,c=_e(ws),u=_e(GL),d=n&&String(a)===c&&(u==null||o===u),m=d?n:e;return E.createElement(lT,Uo({},r,{name:String(r.name)},i,{isActive:d,option:m,index:a,dataKey:o}))}function zre(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return E.createElement(lT,Uo({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function qre(t){var{data:e,props:n}=t,r=Mn(n),{id:i}=r,a=yy(r,Pre),{shape:o,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:m,onMouseLeave:p}=n,y=yy(n,Dre),x=Bv(d,c),_=zv(p),T=qv(m,c);return e?E.createElement(E.Fragment,null,e.map((C,N)=>E.createElement(kt,Uo({key:"rectangle-".concat(C==null?void 0:C.x,"-").concat(C==null?void 0:C.y,"-").concat(C==null?void 0:C.value,"-").concat(N),className:"recharts-bar-rectangle"},Wo(y,C,N),{onMouseEnter:x(C,N),onMouseLeave:_(C,N),onClick:T(C,N)}),u?E.createElement(Bre,{shape:o,activeBar:u,baseProps:a,entry:C,index:N,dataKey:c}):E.createElement(zre,{shape:o,baseProps:a,entry:C,index:N,dataKey:c})))):null}function Hre(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:d,onAnimationStart:m}=e,p=n.current,y=id(e,"recharts-bar-"),[x,_]=E.useState(!1),T=!x,C=E.useCallback(()=>{typeof d=="function"&&d(),_(!1)},[d]),N=E.useCallback(()=>{typeof m=="function"&&m(),_(!0)},[m]);return E.createElement(Fre,{showLabels:T,rects:r},E.createElement(rd,{animationId:y,begin:o,duration:c,isActive:a,easing:u,onAnimationEnd:C,onAnimationStart:N,key:y},M=>{var P=M===1?r:r==null?void 0:r.map((L,j)=>{var V=p&&p[j];if(V)return wr(wr({},L),{},{x:Wt(V.x,L.x,M),y:Wt(V.y,L.y,M),width:Wt(V.width,L.width,M),height:Wt(V.height,L.height,M)});if(i==="horizontal"){var I=Wt(0,L.height,M);return wr(wr({},L),{},{y:L.y+L.height-I,height:I})}var R=Wt(0,L.width,M);return wr(wr({},L),{},{width:R})});return M>0&&(n.current=P??null),P==null?null:E.createElement(kt,null,E.createElement(qre,{props:e,data:P}))}),E.createElement(Ov,{label:e.label}),e.children)}function $re(t){var e=E.useRef(null);return E.createElement(Hre,{previousRectanglesRef:e,props:t})}var O6=0,Gre=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Ct(t,e)}};class Kre extends E.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:o,needClip:c,background:u,id:d}=this.props;if(e||n==null)return null;var m=nt("recharts-bar",i),p=d;return E.createElement(kt,{className:m,id:d},c&&E.createElement("defs",null,E.createElement(j6,{clipPathId:p,xAxisId:a,yAxisId:o})),E.createElement(kt,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},E.createElement(Vre,{data:n,dataKey:r,background:u,allOtherBarProps:this.props}),E.createElement($re,this.props)))}}var Yre={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!ks.isSsr,legendType:"rect",minPointSize:O6,xAxisId:0,yAxisId:0};function Wre(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:m}=t,{needClip:p}=cT(e,n),y=dv(),x=gr(),_=Fv(t.children,Os),T=_e(M=>bie(M,e,n,x,t.id,_));if(y!=="vertical"&&y!=="horizontal")return null;var C,N=T==null?void 0:T[0];return N==null||N.height==null||N.width==null?C=0:C=y==="vertical"?N.height/2:N.width/2,E.createElement(Nre,{xAxisId:e,yAxisId:n,data:T,dataPointFormatter:Gre,errorBarOffset:C},E.createElement(Kre,Uo({},t,{layout:y,needClip:p,data:T,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:m})))}function Jre(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:d,stackedData:m,displayedData:p,offset:y,cells:x,parentViewBox:_}=t,T=e==="horizontal"?c:o,C=m?T.scale.domain():null,N=D4({numericAxis:T});return p.map((M,P)=>{var L,j,V,I,R,U;m?L=P4(m[P],C):(L=Ct(M,n),Array.isArray(L)||(L=[N,L]));var F=bre(r,O6)(L[1],P);if(e==="horizontal"){var B,[q,H]=[c.scale(L[0]),c.scale(L[1])];j=Jg({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:M,index:P}),V=(B=H??q)!==null&&B!==void 0?B:void 0,I=i.size;var se=q-H;if(R=Qr(se)?0:se,U={x:j,y:y.top,width:I,height:y.height},Math.abs(F)>0&&Math.abs(R)<Math.abs(F)){var Se=Sn(R||F)*(Math.abs(F)-Math.abs(R));V-=Se,R+=Se}}else{var[Q,ue]=[o.scale(L[0]),o.scale(L[1])];if(j=Q,V=Jg({axis:c,ticks:d,bandSize:a,offset:i.offset,entry:M,index:P}),I=ue-Q,R=i.size,U={x:y.left,y:V,width:y.width,height:R},Math.abs(F)>0&&Math.abs(I)<Math.abs(F)){var be=Sn(I||F)*(Math.abs(F)-Math.abs(I));I+=be}}if(j==null||V==null||I==null||R==null)return null;var De=wr(wr({},M),{},{x:j,y:V,width:I,height:R,value:m?L:L[1],payload:M,background:U,tooltipPosition:{x:j+I/2,y:V+R/2},parentViewBox:_},x&&x[P]&&x[P].props);return De}).filter(Boolean)}function Qre(t){var e=$n(t,Yre),n=gr();return E.createElement($v,{id:e.id,type:"bar"},r=>E.createElement(E.Fragment,null,E.createElement(E6,{legendPayload:Lre(e)}),E.createElement(Hv,{fn:Ure,args:e}),E.createElement(k6,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:av(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),E.createElement(Wre,Uo({},e,{id:r}))))}var ic=E.memo(Qre);ic.displayName="Bar";function iR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(n),!0).forEach(function(r){Xre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xre(t,e,n){return(e=Zre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zre(t){var e=eie(t,"string");return typeof e=="symbol"?e:e+""}function eie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tie=(t,e)=>e,nie=(t,e,n)=>n,rie=(t,e,n,r)=>r,iie=(t,e,n,r,i)=>i,tm=J([Nv,iie],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),aie=J([tm],t=>t==null?void 0:t.maxBarSize),sie=(t,e,n,r,i,a)=>a,aR=(t,e,n)=>{var r=n??t;if(!Kt(r))return mr(r,e,0)},oie=J([Ge,Nv,tie,nie,rie],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),lie=(t,e,n,r)=>{var i=Ge(t);return i==="horizontal"?bh(t,"yAxis",n,r):bh(t,"xAxis",e,r)},cie=(t,e,n)=>{var r=Ge(t);return r==="horizontal"?tD(t,"xAxis",e):tD(t,"yAxis",n)},L6=(t,e,n)=>{var r={},i=t.filter($h),a=t.filter(d=>d.stackId==null),o=i.reduce((d,m)=>(d[m.stackId]||(d[m.stackId]=[]),d[m.stackId].push(m),d),r),c=Object.entries(o).map(d=>{var[m,p]=d,y=p.map(_=>_.dataKey),x=aR(e,n,p[0].barSize);return{stackId:m,dataKeys:y,barSize:x}}),u=a.map(d=>{var m=[d.dataKey].filter(y=>y!=null),p=aR(e,n,d.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...c,...u]},uie=J([oie,W3,cie],L6),die=(t,e,n,r,i)=>{var a,o,c=tm(t,e,n,r,i);if(c!=null){var u=Ge(t),d=wv(t),{maxBarSize:m}=c,p=Kt(m)?d:m,y,x;return u==="horizontal"?(y=Oo(t,"xAxis",e,r),x=jo(t,"xAxis",e,r)):(y=Oo(t,"yAxis",n,r),x=jo(t,"yAxis",n,r)),(a=(o=ys(y,x,!0))!==null&&o!==void 0?o:p)!==null&&a!==void 0?a:0}},U6=(t,e,n,r)=>{var i=Ge(t),a,o;return i==="horizontal"?(a=Oo(t,"xAxis",e,r),o=jo(t,"xAxis",e,r)):(a=Oo(t,"yAxis",n,r),o=jo(t,"yAxis",n,r)),ys(a,o)};function fie(t,e,n,r,i){var a=r.length;if(!(a<1)){var o=mr(t,n,0,!0),c,u=[];if(Tn(r[0].barSize)){var d=!1,m=n/a,p=r.reduce((N,M)=>N+(M.barSize||0),0);p+=(a-1)*o,p>=n&&(p-=(a-1)*o,o=0),p>=n&&m>0&&(d=!0,m*=.9,p=a*m);var y=(n-p)/2>>0,x={offset:y-o,size:0};c=r.reduce((N,M)=>{var P,L={stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:x.offset+x.size+o,size:d?m:(P=M.barSize)!==null&&P!==void 0?P:0}},j=[...N,L];return x=j[j.length-1].position,j},u)}else{var _=mr(e,n,0,!0);n-2*_-(a-1)*o<=0&&(o=0);var T=(n-2*_-(a-1)*o)/a;T>1&&(T>>=0);var C=Tn(i)?Math.min(T,i):T;c=r.reduce((N,M,P)=>[...N,{stackId:M.stackId,dataKeys:M.dataKeys,position:{offset:_+(T+o)*P+(T-C)/2,size:C}}],u)}return c}}var V6=(t,e,n,r,i,a,o)=>{var c=Kt(o)?e:o,u=fie(n,r,i!==a?i:a,t,c);return i!==a&&u!=null&&(u=u.map(d=>sg(sg({},d),{},{position:sg(sg({},d.position),{},{offset:d.position.offset-i/2})}))),u},hie=J([uie,wv,Y3,vA,die,U6,aie],V6),mie=(t,e,n,r)=>Oo(t,"xAxis",e,r),pie=(t,e,n,r)=>Oo(t,"yAxis",n,r),gie=(t,e,n,r)=>jo(t,"xAxis",e,r),yie=(t,e,n,r)=>jo(t,"yAxis",n,r),vie=J([hie,tm],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),F6=(t,e)=>{var n=Tv(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===n)}}}},xie=J([lie,tm],F6),bie=J([jn,z1,mie,pie,gie,yie,vie,Ge,xv,U6,xie,tm,sie],(t,e,n,r,i,a,o,c,u,d,m,p,y)=>{var{chartData:x,dataStartIndex:_,dataEndIndex:T}=u;if(!(p==null||o==null||e==null||c!=="horizontal"&&c!=="vertical"||n==null||r==null||i==null||a==null||d==null)){var{data:C}=p,N;if(C!=null&&C.length>0?N=C:N=x==null?void 0:x.slice(_,T+1),N!=null)return Jre({layout:c,barSettings:p,pos:o,parentViewBox:e,bandSize:d,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:m,displayedData:N,offset:t,cells:y})}});function sR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sR(Object(n),!0).forEach(function(r){wie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wie(t,e,n){return(e=Sie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sie(t){var e=_ie(t,"string");return typeof e=="symbol"?e:e+""}function _ie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aie=(t,e)=>qh(t,e),Tie=(t,e)=>Zh(t,"radiusAxis",e),Kv=J([Aie,Tie],(t,e)=>{if(!(t==null||e==null))return vy(vy({},t),{},{scale:e})}),uT=(t,e,n,r)=>gte(t,"radiusAxis",e,r),Eie=(t,e,n)=>cd(t,n),Cie=(t,e,n)=>Zh(t,"angleAxis",n),Yv=J([Eie,Cie],(t,e)=>{if(!(t==null||e==null))return vy(vy({},t),{},{scale:e})}),dT=(t,e,n,r)=>x6(t,"angleAxis",n,r),Nie=(t,e,n,r)=>r,fT=J([Lv,Nie],(t,e)=>{if(t.some(n=>n.type==="radialBar"&&e.dataKey===n.dataKey&&e.stackId===n.stackId))return e}),B6=J([Ge,Kv,uT,Yv,dT],(t,e,n,r,i)=>Oa(t,"radiusAxis")?ys(e,n,!1):ys(r,i,!1)),kie=J([Yv,Kv,Ge],(t,e,n)=>{var r=n==="radial"?t:e;if(!(r==null||r.scale==null))return D4({numericAxis:r})}),Iie=(t,e,n,r,i)=>i,Pie=(t,e,n,r,i)=>n,Die=(t,e,n,r,i)=>e,z6=(t,e,n,r,i)=>r.maxBarSize,Rie=J([Ge,Lv,Pie,Die],(t,e,n,r)=>e.filter(i=>t==="centric"?i.angleAxisId===n:i.radiusAxisId===r).filter(i=>i.hide===!1).filter(i=>i.type==="radialBar")),Mie=()=>{},jie=J([Rie,W3,Mie],L6),Oie=J([Ge,wv,Yv,dT,Kv,uT,z6],(t,e,n,r,i,a,o)=>{var c,u,d=Kt(o)?e:o;if(t==="centric"){var m,p;return(m=(p=ys(n,r,!0))!==null&&p!==void 0?p:d)!==null&&m!==void 0?m:0}return(c=(u=ys(i,a,!0))!==null&&u!==void 0?u:d)!==null&&c!==void 0?c:0}),Lie=J([jie,wv,Y3,vA,Oie,B6,z6],V6),Uie=J([Lie,fT],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),q6=J([Xh],t=>t.filter(e=>e.type==="radialBar").filter($h)),Vie=J([q6,zh,En],_A),oR=J([Vie,q6,ld],PA),Fie=(t,e,n)=>{var r=Ge(t);return r==="centric"?oR(t,"radiusAxis",e):oR(t,"angleAxis",n)},Bie=J([Fie,fT],F6),zie=J([Yv,dT,Kv,uT,Ps,fT,B6,Ge,kie,Av,Iie,Uie,Bie],(t,e,n,r,i,a,o,c,u,d,m,p,y)=>{var{chartData:x,dataStartIndex:_,dataEndIndex:T}=i;if(a==null||n==null||t==null||x==null||o==null||p==null||c!=="centric"&&c!=="radial"||r==null)return[];var{dataKey:C,minPointSize:N}=a,{cx:M,cy:P,startAngle:L,endAngle:j}=d,V=x.slice(_,T+1),I=c==="centric"?n:t,R=y?I.scale.domain():null;return iae({angleAxis:t,angleAxisTicks:e,bandSize:o,baseValue:u,cells:m,cx:M,cy:P,dataKey:C,dataStartIndex:_,displayedData:V,endAngle:j,layout:c,minPointSize:N,pos:p,radiusAxis:n,radiusAxisTicks:r,stackedData:y,stackedDomain:R,startAngle:L})}),qie=J([zh,(t,e)=>e],(t,e)=>{var{chartData:n,dataStartIndex:r,dataEndIndex:i}=t;if(n==null)return[];var a=n.slice(r,i+1);return a.length===0?[]:a.map(o=>({type:e,value:o.name,color:o.fill,payload:o}))}),Hie=["shape","activeShape","cornerRadius","id"],$ie=["onMouseEnter","onClick","onMouseLeave"],Gie=["value","background"];function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zu.apply(null,arguments)}function lR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(n),!0).forEach(function(r){hT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hT(t,e,n){return(e=Kie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kie(t){var e=Yie(t,"string");return typeof e=="symbol"?e:e+""}function Yie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S_(t,e){if(t==null)return{};var n,r,i=Wie(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var __=[];function Jie(t){var{showLabels:e,sectors:n,children:r}=t,i=n.map(a=>({value:a.value,payload:a.payload,parentViewBox:void 0,clockWise:!1,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill}));return E.createElement(m6,{value:e?i:null},r)}function Qie(t){var{sectors:e,allOtherRadialBarProps:n,showLabels:r}=t,{shape:i,activeShape:a,cornerRadius:o,id:c}=n,u=S_(n,Hie),d=Mn(u),m=_e(ws),{onMouseEnter:p,onClick:y,onMouseLeave:x}=n,_=S_(n,$ie),T=Bv(p,n.dataKey),C=zv(x),N=qv(y,n.dataKey);return e==null?null:E.createElement(Jie,{showLabels:r,sectors:e},e.map((M,P)=>{var L=a&&m===String(P),j=T(M,P),V=C(M,P),I=N(M,P),R=qn(qn(qn(qn({},d),{},{cornerRadius:D6(o)},M),Wo(_,M,P)),{},{onMouseEnter:j,onMouseLeave:V,onClick:I,className:"recharts-radial-bar-sector ".concat(M.className),forceCornerRadius:u.forceCornerRadius,cornerIsExternal:u.cornerIsExternal,isActive:L,option:L?a:i});return E.createElement(R6,zu({key:"sector-".concat(M.cx,"-").concat(M.cy,"-").concat(M.innerRadius,"-").concat(M.outerRadius,"-").concat(M.startAngle,"-").concat(M.endAngle,"-").concat(P)},R))}),E.createElement(Ov,{label:n.label}),n.children)}function Xie(t){var{props:e,previousSectorsRef:n}=t,{data:r,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,m=id(e,"recharts-radialbar-"),p=n.current,[y,x]=E.useState(!1),_=E.useCallback(()=>{typeof u=="function"&&u(),x(!1)},[u]),T=E.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return E.createElement(rd,{animationId:m,begin:a,duration:o,isActive:i,easing:c,onAnimationStart:T,onAnimationEnd:_,key:m},C=>{var N=C===1?r:(r??__).map((M,P)=>{var L=p&&p[P];if(L){var j=Ub(L.startAngle,M.startAngle),V=Ub(L.endAngle,M.endAngle);return qn(qn({},M),{},{startAngle:j(C),endAngle:V(C)})}var{endAngle:I,startAngle:R}=M,U=Ub(R,I);return qn(qn({},M),{},{endAngle:U(C)})});return C>0&&(n.current=N??null),E.createElement(kt,null,E.createElement(Qie,{sectors:N??__,allOtherRadialBarProps:e,showLabels:!y}))})}function Zie(t){var e=E.useRef(null);return E.createElement(Xie,{props:t,previousSectorsRef:e})}function eae(t){var e=_e(n=>qie(n,t.legendType));return E.createElement(C6,{legendPayload:e??[]})}function tae(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,name:a,hide:o,fill:c,tooltipType:u}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:c,nameKey:void 0,dataKey:e,name:hc(a,e),hide:o,type:u,color:c,unit:""}}}class nae extends E.PureComponent{renderBackground(e){if(e==null)return null;var{cornerRadius:n}=this.props,r=ms(this.props.background);return e.map((i,a)=>{var{value:o,background:c}=i,u=S_(i,Gie);if(!c)return null;var d=qn(qn(qn(qn(qn({cornerRadius:D6(n)},u),{},{fill:"#eee"},c),r),Wo(this.props,i,a)),{},{index:a,className:nt("recharts-radial-bar-background-sector",r==null?void 0:r.className),option:c,isActive:!1});return E.createElement(R6,zu({key:"background-".concat(u.cx,"-").concat(u.cy,"-").concat(u.innerRadius,"-").concat(u.outerRadius,"-").concat(u.startAngle,"-").concat(u.endAngle,"-").concat(a)},d))})}render(){var{hide:e,data:n,className:r,background:i}=this.props;if(e)return null;var a=nt("recharts-area",r);return E.createElement(kt,{className:a},i&&E.createElement(kt,{className:"recharts-radial-bar-background"},this.renderBackground(n)),E.createElement(kt,{className:"recharts-radial-bar-sectors"},E.createElement(Zie,this.props)))}}function rae(t){var e,n=Fv(t.children,Os),r={data:void 0,hide:!1,id:t.id,dataKey:t.dataKey,minPointSize:t.minPointSize,stackId:av(t.stackId),maxBarSize:t.maxBarSize,barSize:t.barSize,type:"radialBar",angleAxisId:t.angleAxisId,radiusAxisId:t.radiusAxisId},i=(e=_e(a=>zie(a,t.radiusAxisId,t.angleAxisId,r,n)))!==null&&e!==void 0?e:__;return E.createElement(E.Fragment,null,E.createElement(Hv,{fn:tae,args:qn(qn({},t),{},{data:i})}),E.createElement(nae,zu({},t,{data:i})))}var xg={angleAxisId:0,radiusAxisId:0,minPointSize:0,hide:!1,legendType:"rect",data:[],isAnimationActive:!ks.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease",forceCornerRadius:!1,cornerIsExternal:!1};function iae(t){var{displayedData:e,stackedData:n,dataStartIndex:r,stackedDomain:i,dataKey:a,baseValue:o,layout:c,radiusAxis:u,radiusAxisTicks:d,bandSize:m,pos:p,angleAxis:y,minPointSize:x,cx:_,cy:T,angleAxisTicks:C,cells:N,startAngle:M,endAngle:P}=t;return(e??[]).map((L,j)=>{var V,I,R,U,F,B;if(n?V=P4(n[r+j],i):(V=Ct(L,a),Array.isArray(V)||(V=[o,V])),c==="radial"){I=Jg({axis:u,ticks:d,bandSize:m,offset:p.offset,entry:L,index:j}),F=y.scale(V[1]),U=y.scale(V[0]),R=(I??0)+p.size;var q=F-U;if(Math.abs(x)>0&&Math.abs(q)<Math.abs(x)){var H=Sn(q||x)*(Math.abs(x)-Math.abs(q));F+=H}B={background:{cx:_,cy:T,innerRadius:I,outerRadius:R,startAngle:M,endAngle:P}}}else{I=u.scale(V[0]),R=u.scale(V[1]),U=Jg({axis:y,ticks:C,bandSize:m,offset:p.offset,entry:L,index:j}),F=(U??0)+p.size;var se=R-I;if(Math.abs(x)>0&&Math.abs(se)<Math.abs(x)){var Se=Sn(se||x)*(Math.abs(x)-Math.abs(se));R+=Se}}return qn(qn(qn({},L),B),{},{payload:L,value:n?V:V[1],cx:_,cy:T,innerRadius:I,outerRadius:R,startAngle:U,endAngle:F},N&&N[j]&&N[j].props)})}class Wv extends E.PureComponent{render(){return E.createElement($v,{id:this.props.id,type:"radialBar"},e=>{var n,r,i;return E.createElement(E.Fragment,null,E.createElement(I6,{type:"radialBar",id:e,data:void 0,dataKey:this.props.dataKey,hide:(n=this.props.hide)!==null&&n!==void 0?n:xg.hide,angleAxisId:(r=this.props.angleAxisId)!==null&&r!==void 0?r:xg.angleAxisId,radiusAxisId:(i=this.props.radiusAxisId)!==null&&i!==void 0?i:xg.radiusAxisId,stackId:av(this.props.stackId),barSize:this.props.barSize,minPointSize:this.props.minPointSize,maxBarSize:this.props.maxBarSize}),E.createElement(eae,this.props),E.createElement(rae,zu({},this.props,{id:e})))})}}hT(Wv,"displayName","RadialBar");hT(Wv,"defaultProps",xg);var H6=t=>{var{chartData:e}=t,n=Ft(),r=gr();return E.useEffect(()=>r?()=>{}:(n(dD(e)),()=>{n(dD(void 0))}),[e,n,r]),null},cR={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$6=ei({name:"brush",initialState:cR,reducers:{setBrushSettings(t,e){return e.payload==null?cR:e.payload}}}),{setBrushSettings:Wwe}=$6.actions,aae=$6.reducer;function sae(t,e,n){return(e=oae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oae(t){var e=lae(t,"string");return typeof e=="symbol"?e:e+""}function lae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mT{static create(e){return new mT(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}sae(mT,"EPS",1e-4);function cae(t){return(t%180+180)%180}var uae=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=cae(i),o=a*Math.PI/180,c=Math.atan(r/n),u=o>c&&o<Math.PI-c?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},dae={dots:[],areas:[],lines:[]},G6=ei({name:"referenceElements",initialState:dae,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=cs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=cs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=cs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Jwe,removeDot:Qwe,addArea:Xwe,removeArea:Zwe,addLine:eSe,removeLine:tSe}=G6.actions,fae=G6.reducer,hae=E.createContext(void 0),mae=t=>{var{children:e}=t,[n]=E.useState("".concat(dh("recharts"),"-clip")),r=oT();if(r==null)return null;var{x:i,y:a,width:o,height:c}=r;return E.createElement(hae.Provider,{value:n},E.createElement("defs",null,E.createElement("clipPath",{id:n},E.createElement("rect",{x:i,y:a,height:c,width:o}))),e)};function qu(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function K6(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function pae(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return uae(r,n)}function gae(t,e,n){var r=n==="width",{x:i,y:a,width:o,height:c}=t;return e===1?{start:r?i:a,end:r?i+o:a+c}:{start:r?i+o:a+c,end:r?i:a}}function xy(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function yae(t,e){return K6(t,e+1)}function vae(t,e,n,r,i){for(var a=(r||[]).slice(),{start:o,end:c}=e,u=0,d=1,m=o,p=function(){var _=r==null?void 0:r[u];if(_===void 0)return{v:K6(r,d)};var T=u,C,N=()=>(C===void 0&&(C=n(_,T)),C),M=_.coordinate,P=u===0||xy(t,M,N,m,c);P||(u=0,m=o,d+=1),P&&(m=M+t*(N()/2+i),u+=d)},y;d<=a.length;)if(y=p(),y)return y.v;return[]}function uR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uR(Object(n),!0).forEach(function(r){xae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xae(t,e,n){return(e=bae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bae(t){var e=wae(t,"string");return typeof e=="symbol"?e:e+""}function wae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sae(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:c}=e,{end:u}=e,d=function(y){var x=a[y],_,T=()=>(_===void 0&&(_=n(x,y)),_);if(y===o-1){var C=t*(x.coordinate+t*T()/2-u);a[y]=x=sr(sr({},x),{},{tickCoord:C>0?x.coordinate-C*t:x.coordinate})}else a[y]=x=sr(sr({},x),{},{tickCoord:x.coordinate});var N=xy(t,x.tickCoord,T,c,u);N&&(u=x.tickCoord-t*(T()/2+i),a[y]=sr(sr({},x),{},{isShow:!0}))},m=o-1;m>=0;m--)d(m);return a}function _ae(t,e,n,r,i,a){var o=(r||[]).slice(),c=o.length,{start:u,end:d}=e;if(a){var m=r[c-1],p=n(m,c-1),y=t*(m.coordinate+t*p/2-d);o[c-1]=m=sr(sr({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var x=xy(t,m.tickCoord,()=>p,u,d);x&&(d=m.tickCoord-t*(p/2+i),o[c-1]=sr(sr({},m),{},{isShow:!0}))}for(var _=a?c-1:c,T=function(M){var P=o[M],L,j=()=>(L===void 0&&(L=n(P,M)),L);if(M===0){var V=t*(P.coordinate-t*j()/2-u);o[M]=P=sr(sr({},P),{},{tickCoord:V<0?P.coordinate-V*t:P.coordinate})}else o[M]=P=sr(sr({},P),{},{tickCoord:P.coordinate});var I=xy(t,P.tickCoord,j,u,d);I&&(u=P.tickCoord+t*(j()/2+i),o[M]=sr(sr({},P),{},{isShow:!0}))},C=0;C<_;C++)T(C);return o}function pT(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:c,interval:u,tickFormatter:d,unit:m,angle:p}=t;if(!i||!i.length||!r)return[];if(Te(u)||ks.isSsr){var y;return(y=yae(i,Te(u)?u:0))!==null&&y!==void 0?y:[]}var x=[],_=c==="top"||c==="bottom"?"width":"height",T=m&&_==="width"?Jf(m,{fontSize:e,letterSpacing:n}):{width:0,height:0},C=(P,L)=>{var j=typeof d=="function"?d(P.value,L):P.value;return _==="width"?pae(Jf(j,{fontSize:e,letterSpacing:n}),T,p):Jf(j,{fontSize:e,letterSpacing:n})[_]},N=i.length>=2?Sn(i[1].coordinate-i[0].coordinate):1,M=gae(a,N,_);return u==="equidistantPreserveStart"?vae(N,M,C,i,o):(u==="preserveStart"||u==="preserveStartEnd"?x=_ae(N,M,C,i,o,u==="preserveStartEnd"):x=Sae(N,M,C,i,o),x.filter(P=>P.isShow))}var Aae=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){Array.from(e).forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=n?n.getBoundingClientRect().width:0,u=i+a,d=o+u+c+(n?r:0);return Math.round(d)}return 0},Tae=["axisLine","width","height","className","hide","ticks"],Eae=["viewBox"],Cae=["viewBox"];function A_(t,e){if(t==null)return{};var n,r,i=Nae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ac.apply(null,arguments)}function dR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(n),!0).forEach(function(r){kae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kae(t,e,n){return(e=Iae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iae(t){var e=Pae(t,"string");return typeof e=="symbol"?e:e+""}function Pae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gT={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Dae(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:c,otherSvgProps:u}=t;if(!c)return null;var d=In(In(In({},u),Mn(c)),{},{fill:"none"});if(a==="top"||a==="bottom"){var m=+(a==="top"&&!o||a==="bottom"&&o);d=In(In({},d),{},{x1:e,y1:n+m*i,x2:e+r,y2:n+m*i})}else{var p=+(a==="left"&&!o||a==="right"&&o);d=In(In({},d),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+i})}return E.createElement("line",ac({},d,{className:nt("recharts-cartesian-axis-line",Zl(c,"className"))}))}function Rae(t,e,n,r,i,a,o,c,u){var d,m,p,y,x,_,T=c?-1:1,C=t.tickSize||o,N=Te(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":d=m=t.coordinate,y=n+ +!c*i,p=y-T*C,_=p-T*u,x=N;break;case"left":p=y=t.coordinate,m=e+ +!c*r,d=m-T*C,x=d-T*u,_=N;break;case"right":p=y=t.coordinate,m=e+ +c*r,d=m+T*C,x=d+T*u,_=N;break;default:d=m=t.coordinate,y=n+ +c*i,p=y+T*C,_=p+T*u,x=N;break}return{line:{x1:d,y1:p,x2:m,y2:y},tick:{x,y:_}}}function Mae(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function jae(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Oae(t){var{option:e,tickProps:n,value:r}=t,i,a=nt(n.className,"recharts-cartesian-axis-tick-value");if(E.isValidElement(e))i=E.cloneElement(e,In(In({},n),{},{className:a}));else if(typeof e=="function")i=e(In(In({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=nt(o,e==null?void 0:e.className)),i=E.createElement(Qh,ac({},n,{className:o}),r)}return i}function Lae(t){var{ticks:e=[],tick:n,tickLine:r,stroke:i,tickFormatter:a,unit:o,padding:c,tickTextProps:u,orientation:d,mirror:m,x:p,y,width:x,height:_,tickSize:T,tickMargin:C,fontSize:N,letterSpacing:M,getTicksConfig:P,events:L}=t,j=pT(In(In({},P),{},{ticks:e}),N,M),V=Mae(d,m),I=jae(d,m),R=Mn(P),U=ms(n),F={};typeof r=="object"&&(F=r);var B=In(In({},R),{},{fill:"none"},F),q=j.map((H,se)=>{var{line:Se,tick:Q}=Rae(H,p,y,x,_,d,T,m,C),ue=In(In(In(In({textAnchor:V,verticalAnchor:I},R),{},{stroke:"none",fill:i},U),Q),{},{index:se,payload:H,visibleTicksCount:j.length,tickFormatter:a,padding:c},u);return E.createElement(kt,ac({className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},Wo(L,H,se)),r&&E.createElement("line",ac({},B,Se,{className:nt("recharts-cartesian-axis-tick-line",Zl(r,"className"))})),n&&E.createElement(Oae,{option:n,tickProps:ue,value:"".concat(typeof a=="function"?a(H.value,se):H.value).concat(o||"")}))});return q.length>0?E.createElement("g",{className:"recharts-cartesian-axis-ticks"},q):null}var Uae=E.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:o,ticks:c}=t,u=A_(t,Tae),[d,m]=E.useState(""),[p,y]=E.useState(""),x=E.useRef(null);E.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var T;return Aae({ticks:x.current,label:(T=t.labelRef)===null||T===void 0?void 0:T.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var _=E.useCallback(T=>{if(T){var C=T.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=C;var N=C[0];if(N){var M=window.getComputedStyle(N),P=M.fontSize,L=M.letterSpacing;(P!==d||L!==p)&&(m(P),y(L))}}},[d,p]);return o||r!=null&&r<=0||i!=null&&i<=0?null:E.createElement(kt,{className:nt("recharts-cartesian-axis",a),ref:_},E.createElement(Dae,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Mn(t)}),E.createElement(Lae,{ticks:c,tick:t.tick,tickLine:t.tickLine,stroke:t.stroke,tickFormatter:t.tickFormatter,unit:t.unit,padding:t.padding,tickTextProps:t.tickTextProps,orientation:t.orientation,mirror:t.mirror,x:t.x,y:t.y,width:t.width,height:t.height,tickSize:t.tickSize,tickMargin:t.tickMargin,fontSize:d,letterSpacing:p,getTicksConfig:t,events:u}),E.createElement(Oee,{x:t.x,y:t.y,width:t.width,height:t.height},E.createElement(Gee,{label:t.label,labelRef:t.labelRef}),t.children))}),Vae=E.memo(Uae,(t,e)=>{var{viewBox:n}=t,r=A_(t,Eae),{viewBox:i}=e,a=A_(e,Cae);return qu(n,i)&&qu(r,a)}),yT=E.forwardRef((t,e)=>{var n=$n(t,gT);return E.createElement(Vae,ac({},n,{ref:e}))});yT.displayName="CartesianAxis";var Fae=["x1","y1","x2","y2","key"],Bae=["offset"],zae=["xAxisId","yAxisId"],qae=["xAxisId","yAxisId"];function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){Hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e,n){return(e=$ae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ae(t){var e=Gae(t,"string");return typeof e=="symbol"?e:e+""}function Gae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fl.apply(null,arguments)}function by(t,e){if(t==null)return{};var n,r,i=Kae(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Kae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yae=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:c}=t;return E.createElement("rect",{x:r,y:i,ry:c,width:a,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Y6(t,e){var n;if(E.isValidElement(t))n=E.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:i,x2:a,y2:o,key:c}=e,u=by(e,Fae),d=Mn(u),{offset:m}=d,p=by(d,Bae);n=E.createElement("line",Fl({},p,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:c}))}return n}function Wae(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=by(t,zae),u=i.map((d,m)=>{var p=lr(lr({},c),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(m),index:m});return Y6(r,p)});return E.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Jae(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=by(t,qae),u=i.map((d,m)=>{var p=lr(lr({},c),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(m),index:m});return Y6(r,p)});return E.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Qae(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length)return null;var d=c.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==d[0]&&d.unshift(0);var m=d.map((p,y)=>{var x=!d[y+1],_=x?i+o-p:d[y+1]-p;if(_<=0)return null;var T=y%e.length;return E.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:_,width:a,stroke:"none",fill:e[T],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Xae(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:c,verticalPoints:u}=t;if(!e||!n||!n.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==d[0]&&d.unshift(0);var m=d.map((p,y)=>{var x=!d[y+1],_=x?i+o-p:d[y+1]-p;if(_<=0)return null;var T=y%n.length;return E.createElement("rect",{key:"react-".concat(y),x:p,y:a,width:_,height:c,stroke:"none",fill:n[T],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return E.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Zae=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return k4(pT(lr(lr(lr({},gT),n),{},{ticks:I4(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},ese=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return k4(pT(lr(lr(lr({},gT),n),{},{ticks:I4(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},tse={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function gc(t){var e=H1(),n=$1(),r=V4(),i=lr(lr({},$n(t,tse)),{},{x:Te(t.x)?t.x:r.left,y:Te(t.y)?t.y:r.top,width:Te(t.width)?t.width:r.width,height:Te(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:o,x:c,y:u,width:d,height:m,syncWithTicks:p,horizontalValues:y,verticalValues:x}=i,_=gr(),T=_e(U=>nD(U,"xAxis",a,_)),C=_e(U=>nD(U,"yAxis",o,_));if(!Te(d)||d<=0||!Te(m)||m<=0||!Te(c)||c!==+c||!Te(u)||u!==+u)return null;var N=i.verticalCoordinatesGenerator||Zae,M=i.horizontalCoordinatesGenerator||ese,{horizontalPoints:P,verticalPoints:L}=i;if((!P||!P.length)&&typeof M=="function"){var j=y&&y.length,V=M({yAxis:C?lr(lr({},C),{},{ticks:j?y:C.ticks}):void 0,width:e,height:n,offset:r},j?!0:p);Qg(Array.isArray(V),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(P=V)}if((!L||!L.length)&&typeof N=="function"){var I=x&&x.length,R=N({xAxis:T?lr(lr({},T),{},{ticks:I?x:T.ticks}):void 0,width:e,height:n,offset:r},I?!0:p);Qg(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(L=R)}return E.createElement("g",{className:"recharts-cartesian-grid"},E.createElement(Yae,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),E.createElement(Qae,Fl({},i,{horizontalPoints:P})),E.createElement(Xae,Fl({},i,{verticalPoints:L})),E.createElement(Wae,Fl({},i,{offset:r,horizontalPoints:P,xAxis:T,yAxis:C})),E.createElement(Jae,Fl({},i,{offset:r,verticalPoints:L,xAxis:T,yAxis:C})))}gc.displayName="CartesianGrid";function nse(t){var e=ms(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,o=Number(i),c=Number(a);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(c)||c<0)&&(c=r),{r:o,strokeWidth:c}}return{r:n,strokeWidth:r}}var W6=(t,e,n,r)=>Oo(t,"xAxis",e,r),J6=(t,e,n,r)=>jo(t,"xAxis",e,r),Q6=(t,e,n,r)=>Oo(t,"yAxis",n,r),X6=(t,e,n,r)=>jo(t,"yAxis",n,r),rse=J([Ge,W6,Q6,J6,X6],(t,e,n,r,i)=>Oa(t,"xAxis")?ys(e,r,!1):ys(n,i,!1)),ise=(t,e,n,r,i)=>i,Z6=J([Nv,ise],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),ase=(t,e,n,r,i)=>{var a,o=Z6(t,e,n,r,i);if(o!=null){var c=Ge(t),u=Oa(c,"xAxis"),d;if(u?d=bh(t,"yAxis",n,r):d=bh(t,"xAxis",e,r),d!=null){var{stackId:m}=o,p=Tv(o);if(!(m==null||p==null)){var y=(a=d[m])===null||a===void 0?void 0:a.stackedData;return y==null?void 0:y.find(x=>x.key===p)}}}},sse=J([Ge,W6,Q6,J6,X6,ase,xv,rse,Z6],(t,e,n,r,i,a,o,c,u)=>{var{chartData:d,dataStartIndex:m,dataEndIndex:p}=o;if(!(u==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null)){var{data:y}=u,x;if(y&&y.length>0?x=y:x=d==null?void 0:d.slice(m,p+1),x!=null){var _=void 0;return Cse({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:m,areaSettings:u,stackedData:a,displayedData:x,chartBaseValue:_,bandSize:c})}}}),ose=["id"],lse=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function eU(t,e){if(t==null)return{};var n,r,i=cse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ss(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(n),!0).forEach(function(r){use(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function use(t,e,n){return(e=dse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dse(t){var e=fse(t,"string");return typeof e=="symbol"?e:e+""}function fse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ds(){return ds=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ds.apply(null,arguments)}function wy(t,e){return t&&t!=="none"?t:e}var hse=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:a,hide:o}=t;return[{inactive:o,dataKey:e,type:a,color:wy(r,i),value:hc(n,e),payload:t}]};function mse(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:c,unit:u}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:hc(o,e),hide:c,type:t.tooltipType,color:wy(r,a),unit:u}}}var pse=(t,e)=>{var n;if(E.isValidElement(t))n=E.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=nt("recharts-area-dot",typeof t!="boolean"?t.className:"");n=E.createElement(eT,ds({},e,{className:r}))}return n};function gse(t,e){return t==null?!1:e?!0:t.length===1}function yse(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:a,dataKey:o}=r;if(!gse(n,a))return null;var c=A6(a),u=Mn(r),d=fq(a),m=n.map((y,x)=>{var _=ss(ss(ss({key:"dot-".concat(x),r:3},u),d),{},{index:x,cx:y.x,cy:y.y,dataKey:o,value:y.value,payload:y.payload,points:n});return pse(a,_)}),p={clipPath:i?"url(#clipPath-".concat(c?"":"dots-").concat(e,")"):void 0};return E.createElement(kt,ds({className:"recharts-area-dots"},p),m)}function vse(t){var{showLabels:e,children:n,points:r}=t,i=r.map(a=>{var o={x:a.x,y:a.y,width:0,height:0};return ss(ss({},o),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:o,fill:void 0})});return E.createElement(f6,{value:e?i:null},n)}function mR(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:a}=t,{layout:o,type:c,stroke:u,connectNulls:d,isRange:m}=a,{id:p}=a,y=eU(a,ose),x=Mn(y);return E.createElement(E.Fragment,null,(e==null?void 0:e.length)>1&&E.createElement(kt,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},E.createElement(Wf,ds({},x,{id:p,points:e,connectNulls:d,type:c,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&E.createElement(Wf,ds({},x,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:e})),u!=="none"&&m&&E.createElement(Wf,ds({},x,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:n}))),E.createElement(yse,{points:e,props:y,clipPathId:i}))}function xse(t){var{alpha:e,baseLine:n,points:r,strokeWidth:i}=t,a=r[0].y,o=r[r.length-1].y;if(!Tn(a)||!Tn(o))return null;var c=e*Math.abs(a-o),u=Math.max(...r.map(d=>d.x||0));return Te(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.x||0),u)),Te(u)?E.createElement("rect",{x:0,y:a<o?a:a-c,width:u+(i?parseInt("".concat(i),10):1),height:Math.floor(c)}):null}function bse(t){var{alpha:e,baseLine:n,points:r,strokeWidth:i}=t,a=r[0].x,o=r[r.length-1].x;if(!Tn(a)||!Tn(o))return null;var c=e*Math.abs(a-o),u=Math.max(...r.map(d=>d.y||0));return Te(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(d=>d.y||0),u)),Te(u)?E.createElement("rect",{x:a<o?a:a-c,y:0,width:c,height:Math.floor(u+(i?parseInt("".concat(i),10):1))}):null}function wse(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:a}=t;return n==="vertical"?E.createElement(xse,{alpha:e,points:r,baseLine:i,strokeWidth:a}):E.createElement(bse,{alpha:e,points:r,baseLine:i,strokeWidth:a})}function Sse(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=t,{points:o,baseLine:c,isAnimationActive:u,animationBegin:d,animationDuration:m,animationEasing:p,onAnimationStart:y,onAnimationEnd:x}=r,_=id(r,"recharts-area-"),[T,C]=E.useState(!1),N=!T,M=E.useCallback(()=>{typeof x=="function"&&x(),C(!1)},[x]),P=E.useCallback(()=>{typeof y=="function"&&y(),C(!0)},[y]),L=i.current,j=a.current;return E.createElement(vse,{showLabels:N,points:o},r.children,E.createElement(rd,{animationId:_,begin:d,duration:m,isActive:u,easing:p,onAnimationEnd:M,onAnimationStart:P,key:_},V=>{if(L){var I=L.length/o.length,R=V===1?o:o.map((F,B)=>{var q=Math.floor(B*I);if(L[q]){var H=L[q];return ss(ss({},F),{},{x:Wt(H.x,F.x,V),y:Wt(H.y,F.y,V)})}return F}),U;return Te(c)?U=Wt(j,c,V):Kt(c)||Qr(c)?U=Wt(j,0,V):U=c.map((F,B)=>{var q=Math.floor(B*I);if(Array.isArray(j)&&j[q]){var H=j[q];return ss(ss({},F),{},{x:Wt(H.x,F.x,V),y:Wt(H.y,F.y,V)})}return F}),V>0&&(i.current=R,a.current=U),E.createElement(mR,{points:R,baseLine:U,needClip:e,clipPathId:n,props:r})}return V>0&&(i.current=o,a.current=c),E.createElement(kt,null,u&&E.createElement("defs",null,E.createElement("clipPath",{id:"animationClipPath-".concat(n)},E.createElement(wse,{alpha:V,points:o,baseLine:c,layout:r.layout,strokeWidth:r.strokeWidth}))),E.createElement(kt,{clipPath:"url(#animationClipPath-".concat(n,")")},E.createElement(mR,{points:o,baseLine:c,needClip:e,clipPathId:n,props:r})))}),E.createElement(Ov,{label:r.label}))}function _se(t){var{needClip:e,clipPathId:n,props:r}=t,i=E.useRef(null),a=E.useRef();return E.createElement(Sse,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class Ase extends E.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:a,left:o,needClip:c,xAxisId:u,yAxisId:d,width:m,height:p,id:y,baseLine:x}=this.props;if(e)return null;var _=nt("recharts-area",i),T=y,{r:C,strokeWidth:N}=nse(n),M=A6(n),P=C*2+N;return E.createElement(E.Fragment,null,E.createElement(kt,{className:_},c&&E.createElement("defs",null,E.createElement(j6,{clipPathId:T,xAxisId:u,yAxisId:d}),!M&&E.createElement("clipPath",{id:"clipPath-dots-".concat(T)},E.createElement("rect",{x:o-P/2,y:a-P/2,width:m+P,height:p+P}))),E.createElement(_se,{needClip:c,clipPathId:T,props:this.props})),E.createElement(eR,{points:r,mainColor:wy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(x)&&E.createElement(eR,{points:x,mainColor:wy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var tU={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!ks.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Tse(t){var e,n=$n(t,tU),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:c,dot:u,fill:d,fillOpacity:m,hide:p,isAnimationActive:y,legendType:x,stroke:_,xAxisId:T,yAxisId:C}=n,N=eU(n,lse),M=dv(),P=YL(),{needClip:L}=cT(T,C),j=gr(),{points:V,isRange:I,baseLine:R}=(e=_e(se=>sse(se,T,C,j,t.id)))!==null&&e!==void 0?e:{},U=oT();if(M!=="horizontal"&&M!=="vertical"||U==null||P!=="AreaChart"&&P!=="ComposedChart")return null;var{height:F,width:B,x:q,y:H}=U;return!V||!V.length?null:E.createElement(Ase,ds({},N,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:o,baseLine:R,connectNulls:c,dot:u,fill:d,fillOpacity:m,height:F,hide:p,layout:M,isAnimationActive:y,isRange:I,legendType:x,needClip:L,points:V,stroke:_,width:B,left:q,top:H,xAxisId:T,yAxisId:C}))}var Ese=(t,e,n,r,i)=>{var a=n??e;if(Te(a))return a;var o=t==="horizontal"?i:r,c=o.scale.domain();if(o.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return a==="dataMin"?c[0]:a==="dataMax"?c[1]:c[0]};function Cse(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:o,xAxis:c,yAxis:u,displayedData:d,dataStartIndex:m,xAxisTicks:p,yAxisTicks:y,bandSize:x}=t,_=i&&i.length,T=Ese(a,o,n,c,u),C=a==="horizontal",N=!1,M=d.map((L,j)=>{var V;_?V=i[m+j]:(V=Ct(L,r),Array.isArray(V)?N=!0:V=[T,V]);var I=V[1]==null||_&&!e&&Ct(L,r)==null;return C?{x:PP({axis:c,ticks:p,bandSize:x,entry:L,index:j}),y:I?null:u.scale(V[1]),value:V,payload:L}:{x:I?null:c.scale(V[1]),y:PP({axis:u,ticks:y,bandSize:x,entry:L,index:j}),value:V,payload:L}}),P;return _||N?P=M.map(L=>{var j=Array.isArray(L.value)?L.value[0]:null;return C?{x:L.x,y:j!=null&&L.y!=null?u.scale(j):null,payload:L.payload}:{x:j!=null?c.scale(j):null,y:L.y,payload:L.payload}}):P=C?u.scale(T):c.scale(T),{points:M,baseLine:P,isRange:N}}function Nse(t){var e=$n(t,tU),n=gr();return E.createElement($v,{id:e.id,type:"area"},r=>E.createElement(E.Fragment,null,E.createElement(E6,{legendPayload:hse(e)}),E.createElement(Hv,{fn:mse,args:e}),E.createElement(k6,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:av(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),E.createElement(Tse,ds({},e,{id:r}))))}var nU=E.memo(Nse);nU.displayName="Area";var kse=["dangerouslySetInnerHTML","ticks"],Ise=["id"],Pse=["domain"],Dse=["domain"];function T_(){return T_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T_.apply(null,arguments)}function Sy(t,e){if(t==null)return{};var n,r,i=Rse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Mse(t){var e=Ft();return E.useLayoutEffect(()=>(e(Yne(t)),()=>{e(Wne(t))}),[t,e]),null}var jse=t=>{var{xAxisId:e,className:n}=t,r=_e(z1),i=gr(),a="xAxis",o=_e(C=>md(C,a,e,i)),c=_e(C=>AL(C,a,e,i)),u=_e(C=>bL(C,e)),d=_e(C=>xX(C,e)),m=_e(C=>nL(C,e));if(u==null||d==null||m==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=t,x=Sy(t,kse),{id:_}=m,T=Sy(m,Ise);return E.createElement(yT,T_({},x,T,{scale:o,x:d.x,y:d.y,width:u.width,height:u.height,className:nt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:c}))},Ose={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:Gr.allowDecimals,allowDuplicatedCategory:Gr.allowDuplicatedCategory,height:Gr.height,hide:!1,mirror:Gr.mirror,orientation:Gr.orientation,padding:Gr.padding,reversed:Gr.reversed,scale:Gr.scale,tickCount:Gr.tickCount,type:Gr.type,xAxisId:0},Lse=t=>{var e,n,r,i,a,o=$n(t,Ose);return E.createElement(E.Fragment,null,E.createElement(Mse,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),E.createElement(jse,o))},Use=(t,e)=>{var{domain:n}=t,r=Sy(t,Pse),{domain:i}=e,a=Sy(e,Dse);return qu(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:qu({domain:n},{domain:i}):!1},yc=E.memo(Lse,Use);yc.displayName="XAxis";var Vse=["dangerouslySetInnerHTML","ticks"],Fse=["id"],Bse=["domain"],zse=["domain"];function E_(){return E_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E_.apply(null,arguments)}function _y(t,e){if(t==null)return{};var n,r,i=qse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hse(t){var e=Ft();return E.useLayoutEffect(()=>(e(Jne(t)),()=>{e(Qne(t))}),[t,e]),null}var $se=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=E.useRef(null),o=E.useRef(null),c=_e(z1),u=gr(),d=Ft(),m="yAxis",p=_e(j=>md(j,m,e,u)),y=_e(j=>wL(j,e)),x=_e(j=>wX(j,e)),_=_e(j=>AL(j,m,e,u)),T=_e(j=>rL(j,e));if(E.useLayoutEffect(()=>{if(!(r!=="auto"||!y||ZA(i)||E.isValidElement(i)||T==null)){var j=a.current;if(j){var V=j.getCalculatedWidth();Math.round(y.width)!==Math.round(V)&&d(Xne({id:e,width:V}))}}},[_,y,d,i,e,r,T]),y==null||x==null||T==null)return null;var{dangerouslySetInnerHTML:C,ticks:N}=t,M=_y(t,Vse),{id:P}=T,L=_y(T,Fse);return E.createElement(yT,E_({},M,L,{ref:a,labelRef:o,scale:p,x:x.x,y:x.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:y.width,height:y.height,className:nt("recharts-".concat(m," ").concat(m),n),viewBox:c,ticks:_}))},Gse={allowDataOverflow:Kr.allowDataOverflow,allowDecimals:Kr.allowDecimals,allowDuplicatedCategory:Kr.allowDuplicatedCategory,hide:!1,mirror:Kr.mirror,orientation:Kr.orientation,padding:Kr.padding,reversed:Kr.reversed,scale:Kr.scale,tickCount:Kr.tickCount,type:Kr.type,width:Kr.width,yAxisId:0},Kse=t=>{var e,n,r,i,a,o=$n(t,Gse);return E.createElement(E.Fragment,null,E.createElement(Hse,{interval:(e=o.interval)!==null&&e!==void 0?e:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(n=o.includeHidden)!==null&&n!==void 0?n:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(r=o.angle)!==null&&r!==void 0?r:0,minTickGap:(i=o.minTickGap)!==null&&i!==void 0?i:5,tick:(a=o.tick)!==null&&a!==void 0?a:!0,tickFormatter:o.tickFormatter}),E.createElement($se,o))},Yse=(t,e)=>{var{domain:n}=t,r=_y(t,Bse),{domain:i}=e,a=_y(e,zse);return qu(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:qu({domain:n},{domain:i}):!1},Vo=E.memo(Kse,Yse);Vo.displayName="YAxis";var iS={exports:{}},aS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR;function Wse(){if(pR)return aS;pR=1;var t=Zu();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return aS.useSyncExternalStoreWithSelector=function(u,d,m,p,y){var x=i(null);if(x.current===null){var _={hasValue:!1,value:null};x.current=_}else _=x.current;x=o(function(){function C(j){if(!N){if(N=!0,M=j,j=p(j),y!==void 0&&_.hasValue){var V=_.value;if(y(V,j))return P=V}return P=j}if(V=P,n(M,j))return V;var I=p(j);return y!==void 0&&y(V,I)?(M=j,V):(M=j,P=I)}var N=!1,M,P,L=m===void 0?null:m;return[function(){return C(d())},L===null?void 0:function(){return C(L())}]},[d,m,p,y]);var T=r(u,x[0],x[1]);return a(function(){_.hasValue=!0,_.value=T},[T]),c(T),T},aS}var gR;function Jse(){return gR||(gR=1,iS.exports=Wse()),iS.exports}Jse();function Qse(t){t()}function Xse(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Qse(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var yR={notify(){},get:()=>[]};function Zse(t,e){let n,r=yR,i=0,a=!1;function o(T){m();const C=r.subscribe(T);let N=!1;return()=>{N||(N=!0,C(),p())}}function c(){r.notify()}function u(){_.onStateChange&&_.onStateChange()}function d(){return a}function m(){i++,n||(n=t.subscribe(u),r=Xse())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=yR)}function y(){a||(a=!0,m())}function x(){a&&(a=!1,p())}const _={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:d,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>r};return _}var eoe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",toe=eoe(),noe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",roe=noe(),ioe=()=>toe||roe?E.useLayoutEffect:E.useEffect,aoe=ioe(),sS=Symbol.for("react-redux-context"),oS=typeof globalThis<"u"?globalThis:{};function soe(){if(!E.createContext)return{};const t=oS[sS]??(oS[sS]=new Map);let e=t.get(E.createContext);return e||(e=E.createContext(null),t.set(E.createContext,e)),e}var ooe=soe();function loe(t){const{children:e,context:n,serverState:r,store:i}=t,a=E.useMemo(()=>{const u=Zse(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=E.useMemo(()=>i.getState(),[i]);aoe(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const c=n||ooe;return E.createElement(c.Provider,{value:a},e)}var coe=loe,uoe=(t,e)=>e,vT=J([uoe,Ge,Av,Ln,zL,Ms,_Z,jn],NZ),xT=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},rU=_i("mouseClick"),iU=Oh();iU.startListening({actionCreator:rU,effect:(t,e)=>{var n=t.payload,r=vT(e.getState(),xT(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(DX({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var C_=_i("mouseMove"),aU=Oh();aU.startListening({actionCreator:C_,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=HA(r,r.tooltip.settings.shared),a=vT(r,xT(n));i==="axis"&&((a==null?void 0:a.activeIndex)!=null?e.dispatch(RL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(DL()))}});var vR={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},sU=ei({name:"rootProps",initialState:vR,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:vR.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),doe=sU.reducer,{updateOptions:foe}=sU.actions,oU=ei({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:hoe}=oU.actions,moe=oU.reducer,lU=_i("keyDown"),cU=_i("focus"),bT=Oh();bT.startListening({actionCreator:lU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number($A(i,gd(n))),c=Ms(n);if(a==="Enter"){var u=hy(n,"axis","hover",String(i.index));e.dispatch(p_({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var d=_X(n),m=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,y=o+p*m;if(!(c==null||y>=c.length||y<0)){var x=hy(n,"axis","hover",String(y));e.dispatch(p_({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});bT.startListening({actionCreator:cU,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=hy(n,"axis","hover",String(a));e.dispatch(p_({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var vi=_i("externalEvent"),uU=Oh();uU.startListening({actionCreator:vi,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:mZ(n),activeDataKey:GL(n),activeIndex:ws(n),activeLabel:$L(n),activeTooltipIndex:ws(n),isTooltipActive:pZ(n)};t.payload.handler(r,t.payload.reactEvent)}}});var poe=J([pd],t=>t.tooltipItemPayloads),goe=J([poe,Wh,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(c=>c.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,n);return o}}}),dU=_i("touchMove"),fU=Oh();fU.startListening({actionCreator:dU,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=HA(r,r.tooltip.settings.shared);if(i==="axis"){var a=vT(r,xT({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(RL({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0],u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(M4),m=(o=u.getAttribute(j4))!==null&&o!==void 0?o:void 0,p=goe(e.getState(),d,m);e.dispatch(PL({activeDataKey:m,activeIndex:d,activeCoordinate:p}))}}});var yoe=n4({brush:aae,cartesianAxis:Zne,chartData:HZ,errorBars:Sre,graphicalItems:xne,layout:sG,legend:uK,options:VZ,polarAxis:bte,polarOptions:moe,referenceElements:fae,rootProps:doe,tooltip:RX}),voe=function(e){return P$({reducer:yoe,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([iU.middleware,aU.middleware,bT.middleware,uU.middleware,fU.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(m4({type:"raf"}))},devTools:ks.devToolsEnabled})};function hU(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=gr(),a=E.useRef(null);if(i)return n;a.current==null&&(a.current=voe(e));var o=O1;return E.createElement(coe,{context:o,store:a.current},n)}function mU(t){var{layout:e,margin:n}=t,r=Ft(),i=gr();return E.useEffect(()=>{i||(r(rG(e)),r(nG(n)))},[r,i,e,n]),null}function pU(t){var e=Ft();return E.useEffect(()=>{e(foe(t))},[e,t]),null}var xoe=["children"];function boe(t,e){if(t==null)return{};var n,r,i=woe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function woe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ay(){return Ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ay.apply(null,arguments)}var Soe={width:"100%",height:"100%",display:"block"},_oe=E.forwardRef((t,e)=>{var n=H1(),r=$1(),i=q4();if(!Lu(n)||!Lu(r))return null;var{children:a,otherAttributes:o,title:c,desc:u}=t,d,m;return typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?m=o.role:m=i?"application":void 0,E.createElement(A1,Ay({},o,{title:c,desc:u,role:m,tabIndex:d,width:n,height:r,style:Soe,ref:e}),a)}),Aoe=t=>{var{children:e}=t,n=_e(cv);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return E.createElement(A1,{width:r,height:i,x:o,y:a},e)},xR=E.forwardRef((t,e)=>{var{children:n}=t,r=boe(t,xoe),i=gr();return i?E.createElement(Aoe,null,n):E.createElement(_oe,Ay({ref:e},r),n)});function Toe(){var t=Ft(),[e,n]=E.useState(null),r=_e(RG);return E.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Tn(a)&&a!==r&&t(aG(a))}},[e,t,r]),n}function bR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eoe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bR(Object(n),!0).forEach(function(r){Coe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Coe(t,e,n){return(e=Noe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Noe(t){var e=koe(t,"string");return typeof e=="symbol"?e:e+""}function koe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sc.apply(null,arguments)}var Ioe=()=>(ZZ(),null);function Ty(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Poe=E.forwardRef((t,e)=>{var n,r,i=E.useRef(null),[a,o]=E.useState({containerWidth:Ty((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Ty((r=t.style)===null||r===void 0?void 0:r.height)}),c=E.useCallback((d,m)=>{o(p=>{var y=Math.round(d),x=Math.round(m);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),u=E.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null){var{width:m,height:p}=d.getBoundingClientRect();c(m,p);var y=_=>{var{width:T,height:C}=_[0].contentRect;c(T,C)},x=new ResizeObserver(y);x.observe(d),i.current=x}},[e,c]);return E.useEffect(()=>()=>{var d=i.current;d!=null&&d.disconnect()},[c]),E.createElement(E.Fragment,null,E.createElement(fv,{width:a.containerWidth,height:a.containerHeight}),E.createElement("div",sc({ref:u},t)))}),Doe=E.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=E.useState({containerWidth:Ty(n),containerHeight:Ty(r)}),o=E.useCallback((u,d)=>{a(m=>{var p=Math.round(u),y=Math.round(d);return m.containerWidth===p&&m.containerHeight===y?m:{containerWidth:p,containerHeight:y}})},[]),c=E.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:d,height:m}=u.getBoundingClientRect();o(d,m)}},[e,o]);return E.createElement(E.Fragment,null,E.createElement(fv,{width:i.containerWidth,height:i.containerHeight}),E.createElement("div",sc({ref:c},t)))}),Roe=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return E.createElement(E.Fragment,null,E.createElement(fv,{width:n,height:r}),E.createElement("div",sc({ref:e},t)))}),Moe=E.forwardRef((t,e)=>{var{width:n,height:r}=t;return ps(n)||ps(r)?E.createElement(Doe,sc({},t,{ref:e})):E.createElement(Roe,sc({},t,{ref:e}))});function joe(t){return t===!0?Poe:Moe}var Ooe=E.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:d,onMouseLeave:m,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:_,onTouchStart:T,style:C,width:N,responsive:M,dispatchTouchEvents:P=!0}=t,L=E.useRef(null),j=Ft(),[V,I]=E.useState(null),[R,U]=E.useState(null),F=Toe(),B=q1(),q=(B==null?void 0:B.width)>0?B.width:N,H=(B==null?void 0:B.height)>0?B.height:i,se=E.useCallback(oe=>{F(oe),typeof e=="function"&&e(oe),I(oe),U(oe),oe!=null&&(L.current=oe)},[F,e,I,U]),Se=E.useCallback(oe=>{j(rU(oe)),j(vi({handler:a,reactEvent:oe}))},[j,a]),Q=E.useCallback(oe=>{j(C_(oe)),j(vi({handler:d,reactEvent:oe}))},[j,d]),ue=E.useCallback(oe=>{j(DL()),j(vi({handler:m,reactEvent:oe}))},[j,m]),be=E.useCallback(oe=>{j(C_(oe)),j(vi({handler:p,reactEvent:oe}))},[j,p]),De=E.useCallback(()=>{j(cU())},[j]),Ke=E.useCallback(oe=>{j(lU(oe.key))},[j]),K=E.useCallback(oe=>{j(vi({handler:o,reactEvent:oe}))},[j,o]),re=E.useCallback(oe=>{j(vi({handler:c,reactEvent:oe}))},[j,c]),pe=E.useCallback(oe=>{j(vi({handler:u,reactEvent:oe}))},[j,u]),we=E.useCallback(oe=>{j(vi({handler:y,reactEvent:oe}))},[j,y]),Ce=E.useCallback(oe=>{j(vi({handler:T,reactEvent:oe}))},[j,T]),Ve=E.useCallback(oe=>{P&&j(dU(oe)),j(vi({handler:_,reactEvent:oe}))},[j,P,_]),ze=E.useCallback(oe=>{j(vi({handler:x,reactEvent:oe}))},[j,x]),Mt=joe(M);return E.createElement(ZL.Provider,{value:V},E.createElement(x5.Provider,{value:R},E.createElement(Mt,{width:q??(C==null?void 0:C.width),height:H??(C==null?void 0:C.height),className:nt("recharts-wrapper",r),style:Eoe({position:"relative",cursor:"default",width:q,height:H},C),onClick:Se,onContextMenu:K,onDoubleClick:re,onFocus:De,onKeyDown:Ke,onMouseDown:pe,onMouseEnter:Q,onMouseLeave:ue,onMouseMove:be,onMouseUp:we,onTouchEnd:ze,onTouchMove:Ve,onTouchStart:Ce,ref:se},E.createElement(Ioe,null),n)))}),Loe=["width","height","responsive","children","className","style","compact","title","desc"];function Uoe(t,e){if(t==null)return{};var n,r,i=Voe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Voe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gU=E.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:o,style:c,compact:u,title:d,desc:m}=t,p=Uoe(t,Loe),y=Mn(p);return u?E.createElement(E.Fragment,null,E.createElement(fv,{width:n,height:r}),E.createElement(xR,{otherAttributes:y,title:d,desc:m},a)):E.createElement(Ooe,{className:o,style:c,width:n,height:r,responsive:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},E.createElement(xR,{otherAttributes:y,title:d,desc:m,ref:e},E.createElement(mae,null,a)))});function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N_.apply(null,arguments)}var Foe={top:5,right:5,bottom:5,left:5},Boe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Foe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},yU=E.forwardRef(function(e,n){var r,i=$n(e.categoricalChartProps,Boe),{chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:d}=e,m={chartName:a,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return E.createElement(hU,{preloadedState:{options:m},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},E.createElement(H6,{chartData:d.data}),E.createElement(mU,{layout:i.layout,margin:i.margin}),E.createElement(pU,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(gU,N_({},i,{ref:n})))}),zoe=["axis","item"],nm=E.forwardRef((t,e)=>E.createElement(yU,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zoe,tooltipPayloadSearcher:jv,categoricalChartProps:t,ref:e}));function qoe(t){var e=Ft();return E.useEffect(()=>{e(hoe(t))},[e,t]),null}var Hoe=["layout"];function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k_.apply(null,arguments)}function $oe(t,e){if(t==null)return{};var n,r,i=Goe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Goe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Koe={top:5,right:5,bottom:5,left:5},Yoe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Koe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},vU=E.forwardRef(function(e,n){var r,i=$n(e.categoricalChartProps,Yoe),{layout:a}=i,o=$oe(i,Hoe),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m}=e,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return E.createElement(hU,{preloadedState:{options:p},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:c},E.createElement(H6,{chartData:i.data}),E.createElement(mU,{layout:a,margin:i.margin}),E.createElement(pU,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),E.createElement(qoe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),E.createElement(gU,k_({},o,{ref:n})))}),Woe=["item"],Joe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},wT=E.forwardRef((t,e)=>{var n=$n(t,Joe);return E.createElement(vU,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Woe,tooltipPayloadSearcher:jv,categoricalChartProps:n,ref:e})}),Qoe=["axis"],Xoe=E.forwardRef((t,e)=>E.createElement(yU,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Qoe,tooltipPayloadSearcher:jv,categoricalChartProps:t,ref:e})),Zoe=["axis","item"],ele={layout:"radial",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},xU=E.forwardRef((t,e)=>{var n=$n(t,ele);return E.createElement(vU,{chartName:"RadialBarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zoe,tooltipPayloadSearcher:jv,categoricalChartProps:n,ref:e})});const tle=({title:t,value:e,total:n,completed:r,description:i,color:a})=>{const{theme:o}=Ti(),c=[{name:t,value:e}];return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-5 rounded-xl shadow-lg border border-brand-border dark:border-dark-brand-border flex flex-col justify-between transition-all hover:shadow-xl hover:-translate-y-1",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary text-sm font-semibold",children:t}),f.jsx("div",{className:"w-20 h-20 -mt-4 -mr-2",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(xU,{innerRadius:"70%",outerRadius:"100%",data:c,startAngle:90,endAngle:-270,children:[f.jsx(em,{type:"number",domain:[0,100],angleAxisId:0,tick:!1}),f.jsx(Wv,{background:{fill:o==="dark"?"#334155":"#e2e8f0"},dataKey:"value",cornerRadius:10,fill:a,angleAxisId:0})]})})})]}),f.jsxs("div",{className:"-mt-12",children:[f.jsxs("p",{className:"text-4xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:[e,f.jsx("span",{className:"text-2xl text-brand-text-secondary dark:text-dark-brand-text-secondary",children:"%"})]}),f.jsxs("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:[f.jsx("span",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:r}),f.jsxs("span",{children:[" / ",n," ",i]})]})]})]})},nle=({active:t,payload:e,label:n,t:r})=>t&&e&&e.length?f.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-lg",children:[f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:n}),f.jsx("p",{className:"text-sm text-brand-primary dark:text-brand-primary-400",children:`${r("complianceRate")}: ${e[0].value}%`}),f.jsx("p",{className:"text-sm text-gray-500",children:`${r("totalTasksTooltip")}: ${e[0].payload.totalTasks}`}),f.jsx("p",{className:"text-xs text-gray-400 mt-2",children:r("barChartTooltip")})]}):null,rle=({projects:t,departments:e,users:n,setNavigation:r})=>{const{t:i,lang:a}=ce(),{theme:o}=Ti(),c=E.useMemo(()=>e.map(m=>{const p=n.filter(N=>N.departmentId===m.id),y=new Set(p.map(N=>N.id)),x=t.flatMap(N=>N.checklist).filter(N=>N&&N.assignedTo&&y.has(N.assignedTo)),_=x.filter(N=>N.status!==Ue.NotApplicable);let T=0;_.forEach(N=>{N.status===Ue.Compliant&&(T+=1),N.status===Ue.PartiallyCompliant&&(T+=.5)});const C=_.length>0?T/_.length*100:0;return{id:m.id,name:m.name[a],compliance:Math.round(C),totalTasks:x.length}}).filter(m=>m.totalTasks>0).sort((m,p)=>p.compliance-m.compliance),[t,e,n,a]),u=m=>{if(m&&m.activePayload&&m.activePayload[0]){const p=m.activePayload[0].payload.id;r({view:"departmentDetail",departmentId:p})}},d={fill:o==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:i("departmentalPerformance")}),c.length>0?f.jsx("div",{className:"flex-grow min-h-0",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(nm,{data:c,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},onClick:u,children:[f.jsx(gc,{strokeDasharray:"3 3",stroke:o==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)",horizontal:!1}),f.jsx(yc,{type:"number",unit:"%",domain:[0,100],tick:d}),f.jsx(Vo,{type:"category",dataKey:"name",width:80,tick:{...d,textAnchor:"end"},tickLine:!1}),f.jsx(js,{content:f.jsx(nle,{t:i}),cursor:{fill:o==="dark"?"rgba(148, 163, 184, 0.1)":"rgba(226, 232, 240, 0.4)"}}),f.jsx(ic,{dataKey:"compliance",name:i("complianceRate"),fill:"#4f46e5",barSize:20,radius:[0,4,4,0],style:{cursor:"pointer"}})]})})}):f.jsx("div",{className:"flex items-center justify-center flex-grow",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:i("noDataAvailable")})})]})},ile=({projects:t})=>{const{t:e}=ce(),{theme:n}=Ti(),r=E.useMemo(()=>{const o=t.reduce((c,u)=>{const d=new Date(u.startDate).toLocaleString("default",{month:"short",year:"2-digit"});return c[d]||(c[d]={sum:0,count:0}),c[d].sum+=u.progress,c[d].count+=1,c},{});return Object.entries(o).map(([c,u])=>({month:c,compliance:Math.round(u.sum/u.count)})).sort((c,u)=>new Date(`1 ${c.month}`).getTime()-new Date(`1 ${u.month}`).getTime())},[t]),i={fill:n==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"},a={borderRadius:"0.5rem",background:n==="dark"?"rgba(15, 23, 42, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(4px)",border:`1px solid ${n==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border lg:col-span-2",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:e("complianceOverTime")}),r.length>0?f.jsx(Yi,{width:"100%",height:300,children:f.jsxs(Xoe,{data:r,children:[f.jsx("defs",{children:f.jsxs("linearGradient",{id:"colorCompliance",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.4}),f.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),f.jsx(gc,{strokeDasharray:"3 3",stroke:n==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)"}),f.jsx(yc,{dataKey:"month",tick:i}),f.jsx(Vo,{tick:i,unit:"%"}),f.jsx(js,{contentStyle:a}),f.jsx(Jo,{wrapperStyle:{fontSize:"12px"}}),f.jsx(nU,{type:"monotone",dataKey:"compliance",name:e("complianceRate"),stroke:"#4f46e5",strokeWidth:2,fillOpacity:1,fill:"url(#colorCompliance)",dot:{r:4},activeDot:{r:6,strokeWidth:2}})]})}):f.jsx("div",{className:"flex items-center justify-center h-[300px]",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e("noDataAvailable")})})]})},ale=({checklistItems:t})=>{const{t:e}=ce(),{theme:n}=Ti(),r=E.useMemo(()=>{const o=t.filter(c=>c.status===Ue.NonCompliant||c.status===Ue.PartiallyCompliant).reduce((c,u)=>(c[u.standardId]=(c[u.standardId]||0)+1,c),{});return Object.entries(o).sort(([,c],[,u])=>u-c).slice(0,7).map(([c,u])=>({standard:c,count:u})).reverse()},[t]),i={fill:n==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"},a={borderRadius:"0.5rem",background:n==="dark"?"rgba(15, 23, 42, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(4px)",border:`1px solid ${n==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:e("topProblematicStandardsChart")}),r.length>0?f.jsx("div",{className:"flex-grow min-h-0",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(nm,{data:r,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[f.jsx(gc,{strokeDasharray:"3 3",stroke:n==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)",horizontal:!1}),f.jsx(yc,{type:"number",allowDecimals:!1,tick:i}),f.jsx(Vo,{type:"category",dataKey:"standard",width:80,tick:i,tickLine:!1}),f.jsx(js,{contentStyle:a,cursor:{fill:n==="dark"?"rgba(148, 163, 184, 0.1)":"rgba(226, 232, 240, 0.4)"}}),f.jsx(ic,{dataKey:"count",name:e("failureCount"),fill:"#ef4444",barSize:20,radius:[0,4,4,0]})]})})}):f.jsx("div",{className:"flex items-center justify-center flex-grow",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e("noDataAvailable")})})]})},sle=({projects:t})=>{const{t:e}=ce(),{theme:n}=Ti(),r=E.useMemo(()=>{const c=t.flatMap(u=>u.capaReports).reduce((u,d)=>{const m=d.rootCauseCategory||"other";return u[m]=(u[m]||0)+1,u},{});return Object.entries(c).map(([u,d])=>({name:e(u),value:d}))},[t,e]),i=E.useMemo(()=>r.reduce((c,u)=>c+u.value,0),[r]),a=["#4f46e5","#f97316","#22c55e","#ef4444","#64748b"],o={borderRadius:"0.5rem",background:n==="dark"?"rgba(15, 23, 42, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(4px)",border:`1px solid ${n==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:e("capaRootCause")}),i>0?f.jsx("div",{className:"flex-grow min-h-0",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(wT,{children:[f.jsx(Gv,{data:r,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"80%",paddingAngle:5,children:r.map((c,u)=>f.jsx(Os,{fill:a[u%a.length]},`cell-${u}`))}),f.jsx(js,{contentStyle:o}),f.jsx(Jo,{wrapperStyle:{fontSize:"12px"},layout:"vertical",align:"right",verticalAlign:"middle"}),f.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",fill:n==="dark"?"#e2e8f0":"#0f172a",fontSize:"28",fontWeight:"bold",children:i}),f.jsx("text",{x:"50%",y:"50%",dy:22,textAnchor:"middle",fill:n==="dark"?"#94a3b8":"#64748b",fontSize:"12",children:e("capaReports")})]})})}):f.jsx("div",{className:"flex items-center justify-center flex-grow",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e("noDataAvailable")})})]})},ole=({checklistItems:t})=>{const{t:e}=ce(),{theme:n}=Ti(),r=E.useMemo(()=>{const c=t.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{});return Object.entries(c).map(([u,d])=>({name:e(u.charAt(0).toLowerCase()+u.slice(1).replace(/\s/g,"")),count:d}))},[t,e]),i={[e("compliant")]:"#22c55e",[e("partiallyCompliant")]:"#f97316",[e("nonCompliant")]:"#ef4444",[e("notApplicable")]:"#6b7280"},a={fill:n==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"},o={borderRadius:"0.5rem",background:n==="dark"?"rgba(15, 23, 42, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(4px)",border:`1px solid ${n==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:e("taskStatusDistribution")}),r.length>0?f.jsx("div",{className:"flex-grow min-h-0",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(nm,{data:r,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[f.jsx(gc,{strokeDasharray:"3 3",stroke:n==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)",horizontal:!1}),f.jsx(yc,{type:"number",tick:a}),f.jsx(Vo,{type:"category",dataKey:"name",width:80,tick:a,tickLine:!1}),f.jsx(js,{contentStyle:o,cursor:{fill:n==="dark"?"rgba(148, 163, 184, 0.1)":"rgba(226, 232, 240, 0.4)"}}),f.jsx(ic,{dataKey:"count",name:e("tasks"),barSize:20,children:r.map((c,u)=>f.jsx(Os,{fill:i[c.name]||"#8884d8"},`cell-${u}`))})]})})}):f.jsx("div",{className:"flex items-center justify-center flex-grow",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e("noDataAvailable")})})]})},lle=({checklistItems:t,users:e,setNavigation:n})=>{const{t:r}=ce(),{theme:i}=Ti(),a=E.useMemo(()=>{const m=t.filter(p=>p.status===Ue.NonCompliant||p.status===Ue.PartiallyCompliant).reduce((p,y)=>(y.assignedTo&&(p[y.assignedTo]=(p[y.assignedTo]||0)+1),p),{});return Object.entries(m).map(([p,y])=>{var x;return{id:p,name:((x=e.find(_=>_.id===p))==null?void 0:x.name)||"Unknown",count:y}}).sort((p,y)=>y.count-p.count).slice(0,10)},[t,e]),o=d=>{if(d&&d.activePayload&&d.activePayload[0]){const m=d.activePayload[0].payload.id;n({view:"userProfile",userId:m})}},c={fill:i==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"},u={borderRadius:"0.5rem",background:i==="dark"?"rgba(15, 23, 42, 0.8)":"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(4px)",border:`1px solid ${i==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:r("taskDistributionByUser")}),a.length>0?f.jsx("div",{className:"flex-grow min-h-0",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(nm,{data:a,margin:{top:5,right:20,left:-10,bottom:5},onClick:o,children:[f.jsx(gc,{strokeDasharray:"3 3",stroke:i==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)",vertical:!1}),f.jsx(yc,{dataKey:"name",tick:c}),f.jsx(Vo,{tick:c}),f.jsx(js,{contentStyle:u,cursor:{fill:i==="dark"?"rgba(148, 163, 184, 0.1)":"rgba(226, 232, 240, 0.4)"}}),f.jsx(ic,{dataKey:"count",name:r("taskCount"),fill:"#f97316",barSize:30,radius:[4,4,0,0],style:{cursor:"pointer"}})]})})}):f.jsx("div",{className:"flex items-center justify-center flex-grow",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:r("noDataAvailable")})})]})},cle=()=>{const{t}=ce(),{projects:e}=Or(),{users:n,programs:r,departments:i,setNavigation:a}=Rt(),[o,c]=E.useState("all"),[u,d]=E.useState("all"),m=E.useMemo(()=>e.filter(x=>{if(!(o==="all"||x.programId===o))return!1;if(u!=="all"){const T=n.filter(N=>N.departmentId===u).map(N=>N.id);return x.checklist.some(N=>N.assignedTo&&T.includes(N.assignedTo))}return!0}),[e,n,o,u]),p=E.useMemo(()=>m.flatMap(x=>x.checklist),[m]),y=E.useMemo(()=>{const x=m.length,_=m.filter(P=>P.status!==ur.Completed&&P.status!==ur.Finalized).length,T=p.length,C=p.filter(P=>P.dueDate&&new Date(P.dueDate)<new Date&&P.status!==Ue.Compliant).length,N=x>0?m.reduce((P,L)=>P+L.progress,0)/x:0,M=p.filter(P=>P.status===Ue.Compliant).length;return{activeProjects:_,overdueTasks:C,overallCompliance:N,totalTasks:T,compliantTasks:M}},[m,p]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Ky,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:t("analytics")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:t("analyticsHubDescription")})]})]}),f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-xl shadow-sm border border-brand-border dark:border-dark-brand-border flex flex-col md:flex-row gap-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:t("controlPanel")}),f.jsxs("select",{value:o,onChange:x=>c(x.target.value),className:"w-full md:w-auto border border-brand-border dark:border-dark-brand-border rounded-lg py-2 px-3 focus:ring-brand-primary focus:border-brand-primary bg-brand-surface dark:bg-dark-brand-surface text-sm",children:[f.jsx("option",{value:"all",children:t("allPrograms")}),r.map(x=>f.jsx("option",{value:x.id,children:x.name},x.id))]}),f.jsxs("select",{value:u,onChange:x=>d(x.target.value),className:"w-full md:w-auto border border-brand-border dark:border-dark-brand-border rounded-lg py-2 px-3 focus:ring-brand-primary focus:border-brand-primary bg-brand-surface dark:bg-dark-brand-surface text-sm",children:[f.jsx("option",{value:"all",children:t("allDepartments")}),i.map(x=>f.jsx("option",{value:x.id,children:x.name.en},x.id))]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(tle,{title:t("overallComplianceRate"),value:Math.round(y.overallCompliance),total:y.totalTasks,completed:y.compliantTasks,description:t("tasksCompliant"),color:"#4f46e5"}),f.jsx(fr,{title:t("totalActiveProjects"),value:y.activeProjects,icon:zi,color:"bg-blue-500"}),f.jsx(fr,{title:t("totalOverdueTasks"),value:y.overdueTasks,icon:Yo,color:"bg-red-500"}),f.jsx(fr,{title:t("totalTasks"),value:y.totalTasks,icon:ja,color:"bg-green-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx(ile,{projects:m}),f.jsx(rle,{projects:m,departments:i,users:n,setNavigation:a})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx(sle,{projects:m})}),f.jsx("div",{className:"lg:col-span-2",children:f.jsx(ale,{checklistItems:p})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[f.jsx("div",{className:"lg:col-span-2",children:f.jsx(ole,{checklistItems:p})}),f.jsx("div",{className:"lg:col-span-3",children:f.jsx(lle,{checklistItems:p,users:n,setNavigation:a})})]})]})},ule=({projects:t,risks:e})=>{const{t:n}=ce(),{theme:r}=Ti(),[i,a]=E.useState(null),o=E.useMemo(()=>[...t.flatMap(y=>y.capaReports.map(x=>({...x,type:"CAPA",projectName:y.name}))),...e.map(y=>({...y,type:"Risk",projectName:"Organizational"}))],[t,e]),c=E.useMemo(()=>{const y=o.reduce((x,_)=>{if(_.rootCauseCategory){const T=_.rootCauseCategory;x[T]=(x[T]||0)+1}return x},{});return Object.entries(y).map(([x,_])=>({name:x,value:_,translatedName:n(x)}))},[o,n]),u=E.useMemo(()=>i?o.filter(y=>y.rootCauseCategory===i):[],[o,i]),d=y=>{const x=y.payload.payload.name;a(_=>_===x?null:x)},m=["#4F46E5","#10B981","#F59E0B","#EF4444","#6366F1"],p={borderRadius:"0.5rem",background:r==="dark"?"#0f172a":"#FFFFFF",border:`1px solid ${r==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsx("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:n("rootCauseAnalysisDashboard")}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-4",children:[f.jsx("div",{className:"lg:col-span-2",children:c.length>0?f.jsx(Yi,{width:"100%",height:300,children:f.jsxs(wT,{children:[f.jsx(Gv,{data:c,dataKey:"value",nameKey:"translatedName",cx:"50%",cy:"50%",outerRadius:100,onClick:d,cursor:"pointer",children:c.map((y,x)=>f.jsx(Os,{fill:m[x%m.length],stroke:i===y.name?r==="dark"?"#FFF":"#000":"none",strokeWidth:2},`cell-${x}`))}),f.jsx(js,{contentStyle:p}),f.jsx(Jo,{wrapperStyle:{fontSize:"12px"}})]})}):f.jsx("div",{className:"flex items-center justify-center h-[300px]",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("noDataAvailable")})})}),f.jsxs("div",{className:"lg:col-span-3",children:[f.jsxs("h4",{className:"font-semibold mb-2",children:[n("issueDetails")," ",i&&`: ${n(i)}`]}),f.jsx("div",{className:"max-h-[280px] overflow-y-auto pr-2 border-t dark:border-dark-brand-border pt-2",children:u.length>0?f.jsxs("table",{className:"min-w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"py-1 text-left font-medium",children:n("description")}),f.jsx("th",{className:"py-1 text-left font-medium",children:n("issueType")})]})}),f.jsx("tbody",{children:u.map(y=>f.jsxs("tr",{className:"border-b dark:border-dark-brand-border",children:[f.jsx("td",{className:"py-2 pr-2",children:y.type==="CAPA"?y.description:y.title}),f.jsx("td",{className:"py-2",children:y.type})]},y.id))})]}):f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:i?"No issues for this category":"Click on a chart slice to see details"})})]})]})]})},dle=({departments:t,users:e,competencies:n})=>{const{t:r,lang:i}=ce(),[a,o]=E.useState("all"),c=E.useMemo(()=>(a==="all"?t:t.filter(d=>d.id===a)).filter(d=>{var m;return(m=d.requiredCompetencyIds)==null?void 0:m.length}).flatMap(d=>{const m=e.filter(p=>p.departmentId===d.id);return m.length===0?[]:d.requiredCompetencyIds.map(p=>{const y=n.find(_=>_.id===p);if(!y)return null;const x=m.filter(_=>{var T;return(T=_.competencies)==null?void 0:T.some(C=>C.competencyId===p&&(!C.expiryDate||new Date(C.expiryDate)>new Date))}).length;return{id:`${d.id}-${p}`,department:d.name[i],competency:y.name[i],compliantUsers:x,totalUsers:m.length}}).filter(p=>p!==null)}),[t,e,n,i,a]);return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:r("competencyGapAnalysis")}),f.jsxs("select",{value:a,onChange:u=>o(u.target.value),className:"w-full sm:w-auto border border-brand-border dark:border-dark-brand-border rounded-lg py-2 px-3 focus:ring-brand-primary-500 focus:border-brand-primary-500 bg-brand-surface dark:bg-dark-brand-surface text-sm dark:text-dark-brand-text-primary",children:[f.jsx("option",{value:"all",children:r("allDepartments")}),t.map(u=>f.jsx("option",{value:u.id,children:u.name[i]},u.id))]})]}),f.jsxs("div",{className:"overflow-x-auto max-h-[350px]",children:[f.jsxs("table",{className:"min-w-full",children:[f.jsx("thead",{className:"sticky top-0 bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("department")}),f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("requiredCompetencies")}),f.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase w-2/5",children:r("staffWithCompetency")})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-brand-border",children:c.map(u=>{const d=u.totalUsers>0?u.compliantUsers/u.totalUsers*100:0,m=u.totalUsers-u.compliantUsers;return f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-3 font-medium text-sm",children:u.department}),f.jsx("td",{className:"px-4 py-3 text-sm",children:u.competency}),f.jsx("td",{className:"px-4 py-3",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2.5",children:f.jsx("div",{className:`h-2.5 rounded-full ${m>0?"bg-yellow-500":"bg-green-500"}`,style:{width:`${d}%`}})}),f.jsxs("span",{className:`font-semibold text-sm w-24 text-right ${m>0?"text-yellow-600":"text-green-600"}`,children:[u.compliantUsers," / ",u.totalUsers]})]})})]},u.id)})})]}),c.length===0&&f.jsx("p",{className:"text-center py-8 text-sm text-gray-500",children:r("noDataAvailable")})]})]})},fle=({projects:t,risks:e,departments:n,users:r,userTrainingStatuses:i})=>{const{t:a,lang:o}=ce(),{theme:c}=Ti(),u=E.useMemo(()=>n.map(p=>{const y=r.filter(L=>L.departmentId===p.id);if(y.length===0)return null;const x=new Set(y.map(L=>L.id)),_=t.flatMap(L=>L.capaReports).filter(L=>L.assignedTo&&x.has(L.assignedTo)).length,T=e.filter(L=>L.ownerId&&x.has(L.ownerId)).length,C=_+T;let N=0,M=0;y.forEach(L=>{const j=L.trainingAssignments||[];N+=j.length,j.forEach(V=>{var R;const I=(R=i[L.id])==null?void 0:R[V.trainingId];(I==null?void 0:I.status)==="Completed"&&M++})});const P=N>0?Math.round(M/N*100):0;return{name:p.name[o],totalIssues:C,completionRate:P}}).filter(p=>p!==null&&(p.totalIssues>0||p.completionRate>0)),[t,e,n,r,i,o]),d={fill:c==="dark"?"#9CA3AF":"#6B7280",fontSize:"0.75rem"},m={borderRadius:"0.5rem",background:c==="dark"?"#0f172a":"#FFFFFF",border:`1px solid ${c==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-brand-text-primary dark:text-dark-brand-text-primary",children:a("trainingEffectiveness")}),u.length>0?f.jsx(Yi,{width:"100%",height:300,children:f.jsxs(nm,{data:u,margin:{top:5,right:20,left:-10,bottom:5},children:[f.jsx(gc,{strokeDasharray:"3 3",stroke:c==="dark"?"rgba(128,128,128,0.1)":"rgba(128,128,128,0.2)",vertical:!1}),f.jsx(yc,{dataKey:"name",tick:d}),f.jsx(Vo,{yAxisId:"left",orientation:"left",stroke:"#EF4444",tick:d}),f.jsx(Vo,{yAxisId:"right",orientation:"right",stroke:"#22C55E",tick:d,unit:"%",domain:[0,100]}),f.jsx(js,{contentStyle:m}),f.jsx(Jo,{wrapperStyle:{fontSize:"12px"}}),f.jsx(ic,{yAxisId:"left",dataKey:"totalIssues",name:a("totalIssues"),fill:"#EF4444",barSize:20}),f.jsx(ic,{yAxisId:"right",dataKey:"completionRate",name:a("trainingCompletionRate"),fill:"#22C55E",barSize:20})]})}):f.jsx("div",{className:"flex items-center justify-center h-[300px]",children:f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:a("noDataAvailable")})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hle,mle;function ple(){return{geminiUrl:hle,vertexUrl:mle}}function gle(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const o=ple();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(a=o.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vc{}function ke(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function S(t,e,n){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const c=o.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[c])){const u=t[c];if(Array.isArray(n))for(let d=0;d<u.length;d++){const m=u[d];S(m,e.slice(a+1),n[d])}else for(const d of u)S(d,e.slice(a+1),n)}return}else if(o.endsWith("[0]")){const c=o.slice(0,-3);c in t||(t[c]=[{}]);const u=t[c];S(u[0],e.slice(a+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function v(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const o=t[a];return Array.isArray(o)?o.map(c=>v(c,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function yle(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),o=new Set;let c=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){c=u;break}if(c!==-1&&a.length>c)for(let u=c;u<a.length;u++){const d=a[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}I_(t,i,a,0,o)}}function I_(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const o=a.slice(0,-2),c=t;if(o in c&&Array.isArray(c[o]))for(const u of c[o])I_(u,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,c=Object.keys(o).filter(d=>!d.startsWith("_")&&!i.has(d)),u={};for(const d of c)u[d]=o[d];for(const[d,m]of Object.entries(u)){const p=[];for(const y of n.slice(r))y==="*"?p.push(d):p.push(y);S(o,p,m)}for(const d of c)delete o[d]}}else{const o=t;a in o&&I_(o[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ST(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vle(t){const e={},n=v(t,["operationName"]);n!=null&&S(e,["operationName"],n);const r=v(t,["resourceName"]);return r!=null&&S(e,["_url","resourceName"],r),e}function xle(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["metadata"]);r!=null&&S(e,["metadata"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);a!=null&&S(e,["error"],a);const o=v(t,["response","generateVideoResponse"]);return o!=null&&S(e,["response"],wle(o)),e}function ble(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["metadata"]);r!=null&&S(e,["metadata"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);a!=null&&S(e,["error"],a);const o=v(t,["response"]);return o!=null&&S(e,["response"],Sle(o)),e}function wle(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>_le(o))),S(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&S(e,["raiMediaFilteredCount"],r);const i=v(t,["raiMediaFilteredReasons"]);return i!=null&&S(e,["raiMediaFilteredReasons"],i),e}function Sle(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Ale(o))),S(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&S(e,["raiMediaFilteredCount"],r);const i=v(t,["raiMediaFilteredReasons"]);return i!=null&&S(e,["raiMediaFilteredReasons"],i),e}function _le(t){const e={},n=v(t,["video"]);return n!=null&&S(e,["video"],Cle(n)),e}function Ale(t){const e={},n=v(t,["_self"]);return n!=null&&S(e,["video"],Nle(n)),e}function Tle(t){const e={},n=v(t,["operationName"]);return n!=null&&S(e,["_url","operationName"],n),e}function Ele(t){const e={},n=v(t,["operationName"]);return n!=null&&S(e,["_url","operationName"],n),e}function Cle(t){const e={},n=v(t,["uri"]);n!=null&&S(e,["uri"],n);const r=v(t,["encodedVideo"]);r!=null&&S(e,["videoBytes"],ST(r));const i=v(t,["encoding"]);return i!=null&&S(e,["mimeType"],i),e}function Nle(t){const e={},n=v(t,["gcsUri"]);n!=null&&S(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&S(e,["videoBytes"],ST(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wR||(wR={}));var SR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(SR||(SR={}));var _R;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(_R||(_R={}));var er;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(er||(er={}));var AR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(AR||(AR={}));var TR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(TR||(TR={}));var ER;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ER||(ER={}));var CR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(CR||(CR={}));var NR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(NR||(NR={}));var kR;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(kR||(kR={}));var IR;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(IR||(IR={}));var PR;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(PR||(PR={}));var DR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(DR||(DR={}));var RR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(RR||(RR={}));var MR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(MR||(MR={}));var jR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jR||(jR={}));var Ey;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ey||(Ey={}));var OR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(OR||(OR={}));var P_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(P_||(P_={}));var LR;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(LR||(LR={}));var UR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(UR||(UR={}));var VR;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(VR||(VR={}));var FR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(FR||(FR={}));var BR;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(BR||(BR={}));var zR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zR||(zR={}));var qR;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qR||(qR={}));var HR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(HR||(HR={}));var $R;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})($R||($R={}));var GR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(GR||(GR={}));var KR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(KR||(KR={}));var YR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(YR||(YR={}));var WR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(WR||(WR={}));var JR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(JR||(JR={}));var QR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(QR||(QR={}));var XR;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(XR||(XR={}));var ZR;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ZR||(ZR={}));var eM;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(eM||(eM={}));var tM;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(tM||(tM={}));var nM;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nM||(nM={}));var rM;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(rM||(rM={}));var iM;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(iM||(iM={}));var aM;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(aM||(aM={}));var sM;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(sM||(sM={}));var oM;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(oM||(oM={}));var lM;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(lM||(lM={}));var cM;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(cM||(cM={}));var uM;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(uM||(uM={}));var dM;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(dM||(dM={}));var vu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vu||(vu={}));class D_{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ff{get text(){var e,n,r,i,a,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",m=!1;const p=[];for(const y of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[x,_]of Object.entries(y))x!=="text"&&x!=="thought"&&(_!==null||_!==void 0)&&p.push(x);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;m=!0,d+=y.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),m?d:void 0}get data(){var e,n,r,i,a,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const m=[];for(const p of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[y,x]of Object.entries(p))y!=="inlineData"&&(x!==null||x!==void 0)&&m.push(y);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return m.length>0&&console.warn(`there are non-data parts ${m} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,a,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(m=>m.functionCall).map(m=>m.functionCall).filter(m=>m!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,a,o,c,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const m=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,a,o,c,u,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const m=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((m==null?void 0:m.length)!==0)return(d=m==null?void 0:m[0])===null||d===void 0?void 0:d.output}}class fM{}class hM{}class kle{}class Ile{}class Ple{}class Dle{}class mM{}class pM{}class gM{}class Rle{}class Cy{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Cy;let i;const a=e;return n?i=ble(a):i=xle(a),Object.assign(r,i),r}}class yM{}class vM{}class xM{}class Mle{}class jle{}class Ole{}class bM{}class Lle{get text(){var e,n,r;let i="",a=!1;const o=[];for(const c of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,d]of Object.entries(c))u!=="text"&&u!=="thought"&&d!==null&&o.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,i+=c.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(o))c!=="inlineData"&&u!==null&&a.push(c);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Ule{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function bU(t,e){const n=mt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function wU(t){return Array.isArray(t)?t.map(e=>Ny(e)):[Ny(t)]}function Ny(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function SU(t){const e=Ny(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _U(t){const e=Ny(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wM(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function AU(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>wM(e)):[wM(t)]}function R_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function SM(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function _M(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function hr(t){if(t==null)throw new Error("ContentUnion is required");return R_(t)?t:{role:"user",parts:AU(t)}}function _T(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=hr(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=hr(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>hr(n)):[hr(e)]}function Si(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(SM(t)||_M(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[hr(t)]}const e=[],n=[],r=R_(t[0]);for(const i of t){const a=R_(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(SM(i)||_M(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:AU(n)}),e}function Vle(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(er).includes(n[0].toUpperCase())?n[0].toUpperCase():er.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(er).includes(r.toUpperCase())?r.toUpperCase():er.TYPE_UNSPECIFIED})}}function _u(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Vle(t.type,e);for(const[o,c]of Object.entries(t))if(c!=null)if(o=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(er).includes(c.toUpperCase())?c.toUpperCase():er.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=_u(c);else if(r.includes(o)){const u=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}u.push(_u(d))}e[o]=u}else if(i.includes(o)){const u={};for(const[d,m]of Object.entries(c))u[d]=_u(m);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=c}return e}function AT(t){return _u(t)}function TT(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ET(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function yd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=_u(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=_u(e.response));return t}function vd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Fle(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Ls(t,e){if(typeof e!="string")throw new Error("name must be a string");return Fle(t,e,"cachedContents")}function TU(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function el(t){return ST(t)}function Ble(t){return t!=null&&typeof t=="object"&&"name"in t}function zle(t){return t!=null&&typeof t=="object"&&"video"in t}function qle(t){return t!=null&&typeof t=="object"&&"uri"in t}function EU(t){var e;let n;if(Ble(t)&&(n=t.name),!(qle(t)&&(n=t.uri,n===void 0))&&!(zle(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function CU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function NU(t){for(const e of["models","tunedModels","publisherModels"])if(Hle(t,e))return t[e];return[]}function Hle(t,e){return t!==null&&typeof t=="object"&&e in t}function $le(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Gle(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const o=$le(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function kU(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Kle(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function IU(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function xd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function PU(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yle(t){const e={},n=v(t,["responsesFile"]);n!=null&&S(e,["fileName"],n);const r=v(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Tce(o))),S(e,["inlinedResponses"],a)}const i=v(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),S(e,["inlinedEmbedContentResponses"],a)}return e}function Wle(t){const e={},n=v(t,["predictionsFormat"]);n!=null&&S(e,["format"],n);const r=v(t,["gcsDestination","outputUriPrefix"]);r!=null&&S(e,["gcsUri"],r);const i=v(t,["bigqueryDestination","outputUri"]);return i!=null&&S(e,["bigqueryUri"],i),e}function Jle(t){const e={},n=v(t,["format"]);n!=null&&S(e,["predictionsFormat"],n);const r=v(t,["gcsUri"]);r!=null&&S(e,["gcsDestination","outputUriPrefix"],r);const i=v(t,["bigqueryUri"]);if(i!=null&&S(e,["bigqueryDestination","outputUri"],i),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(v(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function bg(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["metadata","displayName"]);r!=null&&S(e,["displayName"],r);const i=v(t,["metadata","state"]);i!=null&&S(e,["state"],PU(i));const a=v(t,["metadata","createTime"]);a!=null&&S(e,["createTime"],a);const o=v(t,["metadata","endTime"]);o!=null&&S(e,["endTime"],o);const c=v(t,["metadata","updateTime"]);c!=null&&S(e,["updateTime"],c);const u=v(t,["metadata","model"]);u!=null&&S(e,["model"],u);const d=v(t,["metadata","output"]);return d!=null&&S(e,["dest"],Yle(IU(d))),e}function M_(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["displayName"]);r!=null&&S(e,["displayName"],r);const i=v(t,["state"]);i!=null&&S(e,["state"],PU(i));const a=v(t,["error"]);a!=null&&S(e,["error"],a);const o=v(t,["createTime"]);o!=null&&S(e,["createTime"],o);const c=v(t,["startTime"]);c!=null&&S(e,["startTime"],c);const u=v(t,["endTime"]);u!=null&&S(e,["endTime"],u);const d=v(t,["updateTime"]);d!=null&&S(e,["updateTime"],d);const m=v(t,["model"]);m!=null&&S(e,["model"],m);const p=v(t,["inputConfig"]);p!=null&&S(e,["src"],Qle(p));const y=v(t,["outputConfig"]);return y!=null&&S(e,["dest"],Wle(IU(y))),e}function Qle(t){const e={},n=v(t,["instancesFormat"]);n!=null&&S(e,["format"],n);const r=v(t,["gcsSource","uris"]);r!=null&&S(e,["gcsUri"],r);const i=v(t,["bigquerySource","inputUri"]);return i!=null&&S(e,["bigqueryUri"],i),e}function Xle(t,e){const n={};if(v(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(v(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=v(e,["fileName"]);r!=null&&S(n,["fileName"],r);const i=v(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>Ace(t,o))),S(n,["requests","requests"],a)}return n}function Zle(t){const e={},n=v(t,["format"]);n!=null&&S(e,["instancesFormat"],n);const r=v(t,["gcsUri"]);r!=null&&S(e,["gcsSource","uris"],r);const i=v(t,["bigqueryUri"]);if(i!=null&&S(e,["bigquerySource","inputUri"],i),v(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(v(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ece(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&S(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function tce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function nce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function rce(t){const e={},n=v(t,["content"]);n!=null&&S(e,["content"],n);const r=v(t,["citationMetadata"]);r!=null&&S(e,["citationMetadata"],ice(r));const i=v(t,["tokenCount"]);i!=null&&S(e,["tokenCount"],i);const a=v(t,["finishReason"]);a!=null&&S(e,["finishReason"],a);const o=v(t,["urlContextMetadata"]);o!=null&&S(e,["urlContextMetadata"],o);const c=v(t,["avgLogprobs"]);c!=null&&S(e,["avgLogprobs"],c);const u=v(t,["groundingMetadata"]);u!=null&&S(e,["groundingMetadata"],u);const d=v(t,["index"]);d!=null&&S(e,["index"],d);const m=v(t,["logprobsResult"]);m!=null&&S(e,["logprobsResult"],m);const p=v(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>x)),S(e,["safetyRatings"],y)}return e}function ice(t){const e={},n=v(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(e,["citations"],r)}return e}function DU(t){const e={},n=v(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Dce(a))),S(e,["parts"],i)}const r=v(t,["role"]);return r!=null&&S(e,["role"],r),e}function ace(t,e){const n={},r=v(t,["displayName"]);if(e!==void 0&&r!=null&&S(e,["batch","displayName"],r),v(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function sce(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&S(e,["displayName"],r);const i=v(t,["dest"]);return e!==void 0&&i!=null&&S(e,["outputConfig"],Jle(Kle(i))),n}function AM(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["src"]);i!=null&&S(n,["batch","inputConfig"],Xle(t,kU(t,i)));const a=v(e,["config"]);return a!=null&&ace(a,n),n}function oce(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["model"],mt(t,r));const i=v(e,["src"]);i!=null&&S(n,["inputConfig"],Zle(kU(t,i)));const a=v(e,["config"]);return a!=null&&sce(a,n),n}function lce(t,e){const n={},r=v(t,["displayName"]);return e!==void 0&&r!=null&&S(e,["batch","displayName"],r),n}function cce(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["src"]);i!=null&&S(n,["batch","inputConfig"],gce(t,i));const a=v(e,["config"]);return a!=null&&lce(a,n),n}function uce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function dce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function fce(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&S(e,["name"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);return a!=null&&S(e,["error"],a),e}function hce(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["name"]);r!=null&&S(e,["name"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);return a!=null&&S(e,["error"],a),e}function mce(t,e){const n={},r=v(e,["contents"]);if(r!=null){let a=_T(t,r);Array.isArray(a)&&(a=a.map(o=>o)),S(n,["requests[]","request","content"],a)}const i=v(e,["config"]);return i!=null&&(S(n,["_self"],pce(i,n)),yle(n,{"requests[].*":"requests[].request.*"})),n}function pce(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&S(e,["requests[]","taskType"],r);const i=v(t,["title"]);e!==void 0&&i!=null&&S(e,["requests[]","title"],i);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&S(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function gce(t,e){const n={},r=v(e,["fileName"]);r!=null&&S(n,["file_name"],r);const i=v(e,["inlinedRequests"]);return i!=null&&S(n,["requests"],mce(t,i)),n}function yce(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&S(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function vce(t,e,n){const r={},i=v(e,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],DU(hr(i)));const a=v(e,["temperature"]);a!=null&&S(r,["temperature"],a);const o=v(e,["topP"]);o!=null&&S(r,["topP"],o);const c=v(e,["topK"]);c!=null&&S(r,["topK"],c);const u=v(e,["candidateCount"]);u!=null&&S(r,["candidateCount"],u);const d=v(e,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=v(e,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const p=v(e,["responseLogprobs"]);p!=null&&S(r,["responseLogprobs"],p);const y=v(e,["logprobs"]);y!=null&&S(r,["logprobs"],y);const x=v(e,["presencePenalty"]);x!=null&&S(r,["presencePenalty"],x);const _=v(e,["frequencyPenalty"]);_!=null&&S(r,["frequencyPenalty"],_);const T=v(e,["seed"]);T!=null&&S(r,["seed"],T);const C=v(e,["responseMimeType"]);C!=null&&S(r,["responseMimeType"],C);const N=v(e,["responseSchema"]);N!=null&&S(r,["responseSchema"],AT(N));const M=v(e,["responseJsonSchema"]);if(M!=null&&S(r,["responseJsonSchema"],M),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=v(e,["safetySettings"]);if(n!==void 0&&P!=null){let q=P;Array.isArray(q)&&(q=q.map(H=>Rce(H))),S(n,["safetySettings"],q)}const L=v(e,["tools"]);if(n!==void 0&&L!=null){let q=vd(L);Array.isArray(q)&&(q=q.map(H=>Mce(yd(H)))),S(n,["tools"],q)}const j=v(e,["toolConfig"]);if(n!==void 0&&j!=null&&S(n,["toolConfig"],j),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=v(e,["cachedContent"]);n!==void 0&&V!=null&&S(n,["cachedContent"],Ls(t,V));const I=v(e,["responseModalities"]);I!=null&&S(r,["responseModalities"],I);const R=v(e,["mediaResolution"]);R!=null&&S(r,["mediaResolution"],R);const U=v(e,["speechConfig"]);if(U!=null&&S(r,["speechConfig"],TT(U)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=v(e,["thinkingConfig"]);F!=null&&S(r,["thinkingConfig"],F);const B=v(e,["imageConfig"]);return B!=null&&S(r,["imageConfig"],B),r}function xce(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>rce(d))),S(e,["candidates"],u)}const i=v(t,["modelVersion"]);i!=null&&S(e,["modelVersion"],i);const a=v(t,["promptFeedback"]);a!=null&&S(e,["promptFeedback"],a);const o=v(t,["responseId"]);o!=null&&S(e,["responseId"],o);const c=v(t,["usageMetadata"]);return c!=null&&S(e,["usageMetadata"],c),e}function bce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function wce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],xd(t,r)),n}function Sce(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&S(e,["enableWidget"],n),e}function _ce(t){const e={},n=v(t,["timeRangeFilter"]);if(n!=null&&S(e,["timeRangeFilter"],n),v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ace(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["request","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let c=Si(i);Array.isArray(c)&&(c=c.map(u=>DU(u))),S(n,["request","contents"],c)}const a=v(e,["metadata"]);a!=null&&S(n,["metadata"],a);const o=v(e,["config"]);return o!=null&&S(n,["request","generationConfig"],vce(t,o,v(n,["request"],{}))),n}function Tce(t){const e={},n=v(t,["response"]);n!=null&&S(e,["response"],xce(n));const r=v(t,["error"]);return r!=null&&S(e,["error"],r),e}function Ece(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&S(e,["_query","pageSize"],r);const i=v(t,["pageToken"]);if(e!==void 0&&i!=null&&S(e,["_query","pageToken"],i),v(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Cce(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&S(e,["_query","pageSize"],r);const i=v(t,["pageToken"]);e!==void 0&&i!=null&&S(e,["_query","pageToken"],i);const a=v(t,["filter"]);return e!==void 0&&a!=null&&S(e,["_query","filter"],a),n}function Nce(t){const e={},n=v(t,["config"]);return n!=null&&Ece(n,e),e}function kce(t){const e={},n=v(t,["config"]);return n!=null&&Cce(n,e),e}function Ice(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>bg(o))),S(e,["batchJobs"],a)}return e}function Pce(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>M_(o))),S(e,["batchJobs"],a)}return e}function Dce(t){const e={},n=v(t,["videoMetadata"]);n!=null&&S(e,["videoMetadata"],n);const r=v(t,["thought"]);r!=null&&S(e,["thought"],r);const i=v(t,["inlineData"]);i!=null&&S(e,["inlineData"],ece(i));const a=v(t,["fileData"]);a!=null&&S(e,["fileData"],yce(a));const o=v(t,["thoughtSignature"]);o!=null&&S(e,["thoughtSignature"],o);const c=v(t,["functionCall"]);c!=null&&S(e,["functionCall"],c);const u=v(t,["codeExecutionResult"]);u!=null&&S(e,["codeExecutionResult"],u);const d=v(t,["executableCode"]);d!=null&&S(e,["executableCode"],d);const m=v(t,["functionResponse"]);m!=null&&S(e,["functionResponse"],m);const p=v(t,["text"]);return p!=null&&S(e,["text"],p),e}function Rce(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&S(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&S(e,["threshold"],r),e}function Mce(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["functionDeclarations"],d)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&S(e,["googleSearch"],_ce(r));const i=v(t,["googleSearchRetrieval"]);if(i!=null&&S(e,["googleSearchRetrieval"],i),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["googleMaps"]);a!=null&&S(e,["googleMaps"],Sce(a));const o=v(t,["urlContext"]);o!=null&&S(e,["urlContext"],o);const c=v(t,["computerUse"]);c!=null&&S(e,["computerUse"],c);const u=v(t,["codeExecution"]);return u!=null&&S(e,["codeExecution"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oc;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(oc||(oc={}));class rm{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jce extends vc{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new rm(oc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=AM(this.apiClient,e),r=n._url,i=ke("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,u=c.requests,d=[];for(const m of u){const p=Object.assign({},m);if(p.systemInstruction){const y=p.systemInstruction;delete p.systemInstruction;const x=p.request;x.systemInstruction=y,p.request=x}d.push(p)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=oce(this.apiClient,e);return c=ke("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>M_(m))}else{const d=AM(this.apiClient,e);return c=ke("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>bg(m))}}async createEmbeddingsInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cce(this.apiClient,e);return a=ke("{model}:asyncBatchEmbedContent",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>bg(u))}}async get(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=wce(this.apiClient,e);return c=ke("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>M_(m))}else{const d=bce(this.apiClient,e);return c=ke("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>bg(m))}}async cancel(e){var n,r,i,a;let o="",c={};if(this.apiClient.isVertexAI()){const u=nce(this.apiClient,e);o=ke("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=tce(this.apiClient,e);o=ke("batches/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=kce(e);return c=ke("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Pce(m),y=new bM;return Object.assign(y,p),y})}else{const d=Nce(e);return c=ke("batches",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Ice(m),y=new bM;return Object.assign(y,p),y})}}async delete(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=dce(this.apiClient,e);return c=ke("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>hce(m))}else{const d=uce(this.apiClient,e);return c=ke("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>fce(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oce(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&S(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function TM(t){const e={},n=v(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>rue(a))),S(e,["parts"],i)}const r=v(t,["role"]);return r!=null&&S(e,["role"],r),e}function Lce(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&S(e,["ttl"],r);const i=v(t,["expireTime"]);e!==void 0&&i!=null&&S(e,["expireTime"],i);const a=v(t,["displayName"]);e!==void 0&&a!=null&&S(e,["displayName"],a);const o=v(t,["contents"]);if(e!==void 0&&o!=null){let m=Si(o);Array.isArray(m)&&(m=m.map(p=>TM(p))),S(e,["contents"],m)}const c=v(t,["systemInstruction"]);e!==void 0&&c!=null&&S(e,["systemInstruction"],TM(hr(c)));const u=v(t,["tools"]);if(e!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(p=>iue(p))),S(e,["tools"],m)}const d=v(t,["toolConfig"]);if(e!==void 0&&d!=null&&S(e,["toolConfig"],d),v(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Uce(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&S(e,["ttl"],r);const i=v(t,["expireTime"]);e!==void 0&&i!=null&&S(e,["expireTime"],i);const a=v(t,["displayName"]);e!==void 0&&a!=null&&S(e,["displayName"],a);const o=v(t,["contents"]);if(e!==void 0&&o!=null){let p=Si(o);Array.isArray(p)&&(p=p.map(y=>y)),S(e,["contents"],p)}const c=v(t,["systemInstruction"]);e!==void 0&&c!=null&&S(e,["systemInstruction"],hr(c));const u=v(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>aue(y))),S(e,["tools"],p)}const d=v(t,["toolConfig"]);e!==void 0&&d!=null&&S(e,["toolConfig"],d);const m=v(t,["kmsKeyName"]);return e!==void 0&&m!=null&&S(e,["encryption_spec","kmsKeyName"],m),n}function Vce(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["model"],bU(t,r));const i=v(e,["config"]);return i!=null&&Lce(i,n),n}function Fce(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["model"],bU(t,r));const i=v(e,["config"]);return i!=null&&Uce(i,n),n}function Bce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],Ls(t,r)),n}function zce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],Ls(t,r)),n}function qce(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function Hce(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function $ce(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&S(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function Gce(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&S(e,["description"],n);const r=v(t,["name"]);r!=null&&S(e,["name"],r);const i=v(t,["parameters"]);i!=null&&S(e,["parameters"],i);const a=v(t,["parametersJsonSchema"]);a!=null&&S(e,["parametersJsonSchema"],a);const o=v(t,["response"]);o!=null&&S(e,["response"],o);const c=v(t,["responseJsonSchema"]);return c!=null&&S(e,["responseJsonSchema"],c),e}function Kce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],Ls(t,r)),n}function Yce(t,e){const n={},r=v(e,["name"]);return r!=null&&S(n,["_url","name"],Ls(t,r)),n}function Wce(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&S(e,["enableWidget"],n),e}function Jce(t){const e={},n=v(t,["timeRangeFilter"]);if(n!=null&&S(e,["timeRangeFilter"],n),v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Qce(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&S(e,["_query","pageSize"],r);const i=v(t,["pageToken"]);return e!==void 0&&i!=null&&S(e,["_query","pageToken"],i),n}function Xce(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&S(e,["_query","pageSize"],r);const i=v(t,["pageToken"]);return e!==void 0&&i!=null&&S(e,["_query","pageToken"],i),n}function Zce(t){const e={},n=v(t,["config"]);return n!=null&&Qce(n,e),e}function eue(t){const e={},n=v(t,["config"]);return n!=null&&Xce(n,e),e}function tue(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),S(e,["cachedContents"],a)}return e}function nue(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),S(e,["cachedContents"],a)}return e}function rue(t){const e={},n=v(t,["videoMetadata"]);n!=null&&S(e,["videoMetadata"],n);const r=v(t,["thought"]);r!=null&&S(e,["thought"],r);const i=v(t,["inlineData"]);i!=null&&S(e,["inlineData"],Oce(i));const a=v(t,["fileData"]);a!=null&&S(e,["fileData"],$ce(a));const o=v(t,["thoughtSignature"]);o!=null&&S(e,["thoughtSignature"],o);const c=v(t,["functionCall"]);c!=null&&S(e,["functionCall"],c);const u=v(t,["codeExecutionResult"]);u!=null&&S(e,["codeExecutionResult"],u);const d=v(t,["executableCode"]);d!=null&&S(e,["executableCode"],d);const m=v(t,["functionResponse"]);m!=null&&S(e,["functionResponse"],m);const p=v(t,["text"]);return p!=null&&S(e,["text"],p),e}function iue(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["functionDeclarations"],d)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&S(e,["googleSearch"],Jce(r));const i=v(t,["googleSearchRetrieval"]);if(i!=null&&S(e,["googleSearchRetrieval"],i),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["googleMaps"]);a!=null&&S(e,["googleMaps"],Wce(a));const o=v(t,["urlContext"]);o!=null&&S(e,["urlContext"],o);const c=v(t,["computerUse"]);c!=null&&S(e,["computerUse"],c);const u=v(t,["codeExecution"]);return u!=null&&S(e,["codeExecution"],u),e}function aue(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>Gce(y))),S(e,["functionDeclarations"],p)}const r=v(t,["retrieval"]);r!=null&&S(e,["retrieval"],r);const i=v(t,["googleSearch"]);i!=null&&S(e,["googleSearch"],i);const a=v(t,["googleSearchRetrieval"]);a!=null&&S(e,["googleSearchRetrieval"],a);const o=v(t,["enterpriseWebSearch"]);o!=null&&S(e,["enterpriseWebSearch"],o);const c=v(t,["googleMaps"]);c!=null&&S(e,["googleMaps"],c);const u=v(t,["urlContext"]);u!=null&&S(e,["urlContext"],u);const d=v(t,["computerUse"]);d!=null&&S(e,["computerUse"],d);const m=v(t,["codeExecution"]);return m!=null&&S(e,["codeExecution"],m),e}function sue(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&S(e,["ttl"],r);const i=v(t,["expireTime"]);return e!==void 0&&i!=null&&S(e,["expireTime"],i),n}function oue(t,e){const n={},r=v(t,["ttl"]);e!==void 0&&r!=null&&S(e,["ttl"],r);const i=v(t,["expireTime"]);return e!==void 0&&i!=null&&S(e,["expireTime"],i),n}function lue(t,e){const n={},r=v(e,["name"]);r!=null&&S(n,["_url","name"],Ls(t,r));const i=v(e,["config"]);return i!=null&&sue(i,n),n}function cue(t,e){const n={},r=v(e,["name"]);r!=null&&S(n,["_url","name"],Ls(t,r));const i=v(e,["config"]);return i!=null&&oue(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uue extends vc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new rm(oc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Fce(this.apiClient,e);return c=ke("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=Vce(this.apiClient,e);return c=ke("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Yce(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=Kce(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=zce(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Hce(m),y=new vM;return Object.assign(y,p),y})}else{const d=Bce(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=qce(m),y=new vM;return Object.assign(y,p),y})}}async update(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=cue(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>m)}else{const d=lue(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async listInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=eue(e);return c=ke("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=nue(m),y=new xM;return Object.assign(y,p),y})}else{const d=Zce(e);return c=ke("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=tue(m),y=new xM;return Object.assign(y,p),y})}}}function EM(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lt(t){return this instanceof Lt?(this.v=t,this):new Lt(t)}function Au(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(x){return function(_){return Promise.resolve(_).then(x,p)}}function c(x,_){r[x]&&(i[x]=function(T){return new Promise(function(C,N){a.push([x,T,C,N])>1||u(x,T)})},_&&(i[x]=_(i[x])))}function u(x,_){try{d(r[x](_))}catch(T){y(a[0][3],T)}}function d(x){x.value instanceof Lt?Promise.resolve(x.value.v).then(m,p):y(a[0][2],x)}function m(x){u("next",x)}function p(x){u("throw",x)}function y(x,_){x(_),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Xf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EM=="function"?EM(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(o){return new Promise(function(c,u){o=t[a](o),i(c,u,o.done,o.value)})}}function i(a,o,c,u){Promise.resolve(u).then(function(d){a({value:d,done:c})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function due(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:RU(n)}function RU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fue(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function CM(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!RU(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class hue{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new mue(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class mue{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),fue(a)}async sendMessage(e){var n;await this.sendPromise;const r=hr(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,o,c;const u=await i,d=(o=(a=u.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,m=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let y=[];m!=null&&(y=(c=m.slice(p))!==null&&c!==void 0?c:[]);const x=d?[d]:[];this.recordHistory(r,x,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=hr(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?CM(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Au(this,arguments,function*(){var o,c,u,d;const m=[];try{for(var p=!0,y=Xf(e),x;x=yield Lt(y.next()),o=x.done,!o;p=!0){d=x.value,p=!1;const _=d;if(due(_)){const T=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;T!==void 0&&m.push(T)}yield yield Lt(_)}}catch(_){c={error:_}}finally{try{!p&&!o&&(u=y.return)&&(yield Lt(u.call(y)))}finally{if(c)throw c.error}}this.recordHistory(n,m)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...CM(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jv extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jv.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pue(t){const e={},n=v(t,["file"]);return n!=null&&S(e,["file"],n),e}function gue(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function yue(t){const e={},n=v(t,["name"]);return n!=null&&S(e,["_url","file"],EU(n)),e}function vue(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function xue(t){const e={},n=v(t,["name"]);return n!=null&&S(e,["_url","file"],EU(n)),e}function bue(t,e){const n={},r=v(t,["pageSize"]);e!==void 0&&r!=null&&S(e,["_query","pageSize"],r);const i=v(t,["pageToken"]);return e!==void 0&&i!=null&&S(e,["_query","pageToken"],i),n}function wue(t){const e={},n=v(t,["config"]);return n!=null&&bue(n,e),e}function Sue(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(o=>o)),S(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _ue extends vc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new rm(oc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=wue(e);return a=ke("files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const d=Sue(u),m=new Mle;return Object.assign(m,d),m})}}async createInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pue(e);return a=ke("upload/v1beta/files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=gue(u),m=new jle;return Object.assign(m,d),m})}}async get(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xue(e);return a=ke("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=yue(e);return a=ke("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const d=vue(u),m=new Ole;return Object.assign(m,d),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wg(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&S(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function Aue(t){const e={},n=v(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Vue(a))),S(e,["parts"],i)}const r=v(t,["role"]);return r!=null&&S(e,["role"],r),e}function Tue(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&S(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function Eue(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&S(e,["description"],n);const r=v(t,["name"]);r!=null&&S(e,["name"],r);const i=v(t,["parameters"]);i!=null&&S(e,["parameters"],i);const a=v(t,["parametersJsonSchema"]);a!=null&&S(e,["parametersJsonSchema"],a);const o=v(t,["response"]);o!=null&&S(e,["response"],o);const c=v(t,["responseJsonSchema"]);return c!=null&&S(e,["responseJsonSchema"],c),e}function Cue(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&S(e,["modelConfig"],n);const r=v(t,["audioTimestamp"]);r!=null&&S(e,["audioTimestamp"],r);const i=v(t,["candidateCount"]);i!=null&&S(e,["candidateCount"],i);const a=v(t,["enableAffectiveDialog"]);a!=null&&S(e,["enableAffectiveDialog"],a);const o=v(t,["frequencyPenalty"]);o!=null&&S(e,["frequencyPenalty"],o);const c=v(t,["logprobs"]);c!=null&&S(e,["logprobs"],c);const u=v(t,["maxOutputTokens"]);u!=null&&S(e,["maxOutputTokens"],u);const d=v(t,["mediaResolution"]);d!=null&&S(e,["mediaResolution"],d);const m=v(t,["presencePenalty"]);m!=null&&S(e,["presencePenalty"],m);const p=v(t,["responseJsonSchema"]);p!=null&&S(e,["responseJsonSchema"],p);const y=v(t,["responseLogprobs"]);y!=null&&S(e,["responseLogprobs"],y);const x=v(t,["responseMimeType"]);x!=null&&S(e,["responseMimeType"],x);const _=v(t,["responseModalities"]);_!=null&&S(e,["responseModalities"],_);const T=v(t,["responseSchema"]);T!=null&&S(e,["responseSchema"],T);const C=v(t,["routingConfig"]);C!=null&&S(e,["routingConfig"],C);const N=v(t,["seed"]);N!=null&&S(e,["seed"],N);const M=v(t,["speechConfig"]);M!=null&&S(e,["speechConfig"],MU(M));const P=v(t,["stopSequences"]);P!=null&&S(e,["stopSequences"],P);const L=v(t,["temperature"]);L!=null&&S(e,["temperature"],L);const j=v(t,["thinkingConfig"]);j!=null&&S(e,["thinkingConfig"],j);const V=v(t,["topK"]);V!=null&&S(e,["topK"],V);const I=v(t,["topP"]);if(I!=null&&S(e,["topP"],I),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Nue(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&S(e,["enableWidget"],n),e}function kue(t){const e={},n=v(t,["timeRangeFilter"]);if(n!=null&&S(e,["timeRangeFilter"],n),v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Iue(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&S(e,["setup","generationConfig"],r);const i=v(t,["responseModalities"]);e!==void 0&&i!=null&&S(e,["setup","generationConfig","responseModalities"],i);const a=v(t,["temperature"]);e!==void 0&&a!=null&&S(e,["setup","generationConfig","temperature"],a);const o=v(t,["topP"]);e!==void 0&&o!=null&&S(e,["setup","generationConfig","topP"],o);const c=v(t,["topK"]);e!==void 0&&c!=null&&S(e,["setup","generationConfig","topK"],c);const u=v(t,["maxOutputTokens"]);e!==void 0&&u!=null&&S(e,["setup","generationConfig","maxOutputTokens"],u);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&S(e,["setup","generationConfig","mediaResolution"],d);const m=v(t,["seed"]);e!==void 0&&m!=null&&S(e,["setup","generationConfig","seed"],m);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&S(e,["setup","generationConfig","speechConfig"],ET(p));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&S(e,["setup","generationConfig","thinkingConfig"],y);const x=v(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&S(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=v(t,["systemInstruction"]);e!==void 0&&_!=null&&S(e,["setup","systemInstruction"],Aue(hr(_)));const T=v(t,["tools"]);if(e!==void 0&&T!=null){let V=vd(T);Array.isArray(V)&&(V=V.map(I=>Bue(yd(I)))),S(e,["setup","tools"],V)}const C=v(t,["sessionResumption"]);e!==void 0&&C!=null&&S(e,["setup","sessionResumption"],Fue(C));const N=v(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&S(e,["setup","inputAudioTranscription"],N);const M=v(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&S(e,["setup","outputAudioTranscription"],M);const P=v(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&S(e,["setup","realtimeInputConfig"],P);const L=v(t,["contextWindowCompression"]);e!==void 0&&L!=null&&S(e,["setup","contextWindowCompression"],L);const j=v(t,["proactivity"]);return e!==void 0&&j!=null&&S(e,["setup","proactivity"],j),n}function Pue(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&S(e,["setup","generationConfig"],Cue(r));const i=v(t,["responseModalities"]);e!==void 0&&i!=null&&S(e,["setup","generationConfig","responseModalities"],i);const a=v(t,["temperature"]);e!==void 0&&a!=null&&S(e,["setup","generationConfig","temperature"],a);const o=v(t,["topP"]);e!==void 0&&o!=null&&S(e,["setup","generationConfig","topP"],o);const c=v(t,["topK"]);e!==void 0&&c!=null&&S(e,["setup","generationConfig","topK"],c);const u=v(t,["maxOutputTokens"]);e!==void 0&&u!=null&&S(e,["setup","generationConfig","maxOutputTokens"],u);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&S(e,["setup","generationConfig","mediaResolution"],d);const m=v(t,["seed"]);e!==void 0&&m!=null&&S(e,["setup","generationConfig","seed"],m);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&S(e,["setup","generationConfig","speechConfig"],MU(ET(p)));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&S(e,["setup","generationConfig","thinkingConfig"],y);const x=v(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&S(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=v(t,["systemInstruction"]);e!==void 0&&_!=null&&S(e,["setup","systemInstruction"],hr(_));const T=v(t,["tools"]);if(e!==void 0&&T!=null){let V=vd(T);Array.isArray(V)&&(V=V.map(I=>zue(yd(I)))),S(e,["setup","tools"],V)}const C=v(t,["sessionResumption"]);e!==void 0&&C!=null&&S(e,["setup","sessionResumption"],C);const N=v(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&S(e,["setup","inputAudioTranscription"],N);const M=v(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&S(e,["setup","outputAudioTranscription"],M);const P=v(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&S(e,["setup","realtimeInputConfig"],P);const L=v(t,["contextWindowCompression"]);e!==void 0&&L!=null&&S(e,["setup","contextWindowCompression"],L);const j=v(t,["proactivity"]);return e!==void 0&&j!=null&&S(e,["setup","proactivity"],j),n}function Due(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["setup","model"],mt(t,r));const i=v(e,["config"]);return i!=null&&S(n,["config"],Iue(i,n)),n}function Rue(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["setup","model"],mt(t,r));const i=v(e,["config"]);return i!=null&&S(n,["config"],Pue(i,n)),n}function Mue(t){const e={},n=v(t,["musicGenerationConfig"]);return n!=null&&S(e,["musicGenerationConfig"],n),e}function jue(t){const e={},n=v(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(e,["weightedPrompts"],r)}return e}function Oue(t){const e={},n=v(t,["media"]);if(n!=null){let d=wU(n);Array.isArray(d)&&(d=d.map(m=>wg(m))),S(e,["mediaChunks"],d)}const r=v(t,["audio"]);r!=null&&S(e,["audio"],wg(_U(r)));const i=v(t,["audioStreamEnd"]);i!=null&&S(e,["audioStreamEnd"],i);const a=v(t,["video"]);a!=null&&S(e,["video"],wg(SU(a)));const o=v(t,["text"]);o!=null&&S(e,["text"],o);const c=v(t,["activityStart"]);c!=null&&S(e,["activityStart"],c);const u=v(t,["activityEnd"]);return u!=null&&S(e,["activityEnd"],u),e}function Lue(t){const e={},n=v(t,["media"]);if(n!=null){let d=wU(n);Array.isArray(d)&&(d=d.map(m=>m)),S(e,["mediaChunks"],d)}const r=v(t,["audio"]);r!=null&&S(e,["audio"],_U(r));const i=v(t,["audioStreamEnd"]);i!=null&&S(e,["audioStreamEnd"],i);const a=v(t,["video"]);a!=null&&S(e,["video"],SU(a));const o=v(t,["text"]);o!=null&&S(e,["text"],o);const c=v(t,["activityStart"]);c!=null&&S(e,["activityStart"],c);const u=v(t,["activityEnd"]);return u!=null&&S(e,["activityEnd"],u),e}function Uue(t){const e={},n=v(t,["setupComplete"]);n!=null&&S(e,["setupComplete"],n);const r=v(t,["serverContent"]);r!=null&&S(e,["serverContent"],r);const i=v(t,["toolCall"]);i!=null&&S(e,["toolCall"],i);const a=v(t,["toolCallCancellation"]);a!=null&&S(e,["toolCallCancellation"],a);const o=v(t,["usageMetadata"]);o!=null&&S(e,["usageMetadata"],que(o));const c=v(t,["goAway"]);c!=null&&S(e,["goAway"],c);const u=v(t,["sessionResumptionUpdate"]);return u!=null&&S(e,["sessionResumptionUpdate"],u),e}function Vue(t){const e={},n=v(t,["videoMetadata"]);n!=null&&S(e,["videoMetadata"],n);const r=v(t,["thought"]);r!=null&&S(e,["thought"],r);const i=v(t,["inlineData"]);i!=null&&S(e,["inlineData"],wg(i));const a=v(t,["fileData"]);a!=null&&S(e,["fileData"],Tue(a));const o=v(t,["thoughtSignature"]);o!=null&&S(e,["thoughtSignature"],o);const c=v(t,["functionCall"]);c!=null&&S(e,["functionCall"],c);const u=v(t,["codeExecutionResult"]);u!=null&&S(e,["codeExecutionResult"],u);const d=v(t,["executableCode"]);d!=null&&S(e,["executableCode"],d);const m=v(t,["functionResponse"]);m!=null&&S(e,["functionResponse"],m);const p=v(t,["text"]);return p!=null&&S(e,["text"],p),e}function Fue(t){const e={},n=v(t,["handle"]);if(n!=null&&S(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function MU(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&S(e,["voiceConfig"],n),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&S(e,["languageCode"],r),e}function Bue(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["functionDeclarations"],d)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&S(e,["googleSearch"],kue(r));const i=v(t,["googleSearchRetrieval"]);if(i!=null&&S(e,["googleSearchRetrieval"],i),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["googleMaps"]);a!=null&&S(e,["googleMaps"],Nue(a));const o=v(t,["urlContext"]);o!=null&&S(e,["urlContext"],o);const c=v(t,["computerUse"]);c!=null&&S(e,["computerUse"],c);const u=v(t,["codeExecution"]);return u!=null&&S(e,["codeExecution"],u),e}function zue(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>Eue(y))),S(e,["functionDeclarations"],p)}const r=v(t,["retrieval"]);r!=null&&S(e,["retrieval"],r);const i=v(t,["googleSearch"]);i!=null&&S(e,["googleSearch"],i);const a=v(t,["googleSearchRetrieval"]);a!=null&&S(e,["googleSearchRetrieval"],a);const o=v(t,["enterpriseWebSearch"]);o!=null&&S(e,["enterpriseWebSearch"],o);const c=v(t,["googleMaps"]);c!=null&&S(e,["googleMaps"],c);const u=v(t,["urlContext"]);u!=null&&S(e,["urlContext"],u);const d=v(t,["computerUse"]);d!=null&&S(e,["computerUse"],d);const m=v(t,["codeExecution"]);return m!=null&&S(e,["codeExecution"],m),e}function que(t){const e={},n=v(t,["promptTokenCount"]);n!=null&&S(e,["promptTokenCount"],n);const r=v(t,["cachedContentTokenCount"]);r!=null&&S(e,["cachedContentTokenCount"],r);const i=v(t,["candidatesTokenCount"]);i!=null&&S(e,["responseTokenCount"],i);const a=v(t,["toolUsePromptTokenCount"]);a!=null&&S(e,["toolUsePromptTokenCount"],a);const o=v(t,["thoughtsTokenCount"]);o!=null&&S(e,["thoughtsTokenCount"],o);const c=v(t,["totalTokenCount"]);c!=null&&S(e,["totalTokenCount"],c);const u=v(t,["promptTokensDetails"]);if(u!=null){let x=u;Array.isArray(x)&&(x=x.map(_=>_)),S(e,["promptTokensDetails"],x)}const d=v(t,["cacheTokensDetails"]);if(d!=null){let x=d;Array.isArray(x)&&(x=x.map(_=>_)),S(e,["cacheTokensDetails"],x)}const m=v(t,["candidatesTokensDetails"]);if(m!=null){let x=m;Array.isArray(x)&&(x=x.map(_=>_)),S(e,["responseTokensDetails"],x)}const p=v(t,["toolUsePromptTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(_=>_)),S(e,["toolUsePromptTokensDetails"],x)}const y=v(t,["trafficType"]);return y!=null&&S(e,["trafficType"],y),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hue(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&S(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function $ue(t){const e={},n=v(t,["content"]);n!=null&&S(e,["content"],n);const r=v(t,["citationMetadata"]);r!=null&&S(e,["citationMetadata"],Gue(r));const i=v(t,["tokenCount"]);i!=null&&S(e,["tokenCount"],i);const a=v(t,["finishReason"]);a!=null&&S(e,["finishReason"],a);const o=v(t,["urlContextMetadata"]);o!=null&&S(e,["urlContextMetadata"],o);const c=v(t,["avgLogprobs"]);c!=null&&S(e,["avgLogprobs"],c);const u=v(t,["groundingMetadata"]);u!=null&&S(e,["groundingMetadata"],u);const d=v(t,["index"]);d!=null&&S(e,["index"],d);const m=v(t,["logprobsResult"]);m!=null&&S(e,["logprobsResult"],m);const p=v(t,["safetyRatings"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>x)),S(e,["safetyRatings"],y)}return e}function Gue(t){const e={},n=v(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),S(e,["citations"],r)}return e}function Kue(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let a=Si(i);Array.isArray(a)&&(a=a.map(o=>o)),S(n,["contents"],a)}return n}function Yue(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),S(e,["tokensInfo"],i)}return e}function Wue(t){const e={},n=v(t,["values"]);n!=null&&S(e,["values"],n);const r=v(t,["statistics"]);return r!=null&&S(e,["statistics"],Jue(r)),e}function Jue(t){const e={},n=v(t,["truncated"]);n!=null&&S(e,["truncated"],n);const r=v(t,["token_count"]);return r!=null&&S(e,["tokenCount"],r),e}function Qv(t){const e={},n=v(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>tfe(a))),S(e,["parts"],i)}const r=v(t,["role"]);return r!=null&&S(e,["role"],r),e}function Que(t){const e={},n=v(t,["controlType"]);n!=null&&S(e,["controlType"],n);const r=v(t,["enableControlImageComputation"]);return r!=null&&S(e,["computeControl"],r),e}function Xue(t){const e={};if(v(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(v(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(v(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Zue(t,e){const n={},r=v(t,["systemInstruction"]);e!==void 0&&r!=null&&S(e,["systemInstruction"],hr(r));const i=v(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>VU(c))),S(e,["tools"],o)}const a=v(t,["generationConfig"]);return e!==void 0&&a!=null&&S(e,["generationConfig"],zde(a)),n}function ede(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let o=Si(i);Array.isArray(o)&&(o=o.map(c=>Qv(c))),S(n,["contents"],o)}const a=v(e,["config"]);return a!=null&&Xue(a),n}function tde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let o=Si(i);Array.isArray(o)&&(o=o.map(c=>c)),S(n,["contents"],o)}const a=v(e,["config"]);return a!=null&&Zue(a,n),n}function nde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);r!=null&&S(e,["totalTokens"],r);const i=v(t,["cachedContentTokenCount"]);return i!=null&&S(e,["cachedContentTokenCount"],i),e}function rde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["totalTokens"]);return r!=null&&S(e,["totalTokens"],r),e}function ide(t,e){const n={},r=v(e,["model"]);return r!=null&&S(n,["_url","name"],mt(t,r)),n}function ade(t,e){const n={},r=v(e,["model"]);return r!=null&&S(n,["_url","name"],mt(t,r)),n}function sde(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function ode(t){const e={},n=v(t,["sdkHttpResponse"]);return n!=null&&S(e,["sdkHttpResponse"],n),e}function lde(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&S(e,["parameters","storageUri"],r);const i=v(t,["negativePrompt"]);e!==void 0&&i!=null&&S(e,["parameters","negativePrompt"],i);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&S(e,["parameters","sampleCount"],a);const o=v(t,["aspectRatio"]);e!==void 0&&o!=null&&S(e,["parameters","aspectRatio"],o);const c=v(t,["guidanceScale"]);e!==void 0&&c!=null&&S(e,["parameters","guidanceScale"],c);const u=v(t,["seed"]);e!==void 0&&u!=null&&S(e,["parameters","seed"],u);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&S(e,["parameters","safetySetting"],d);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&S(e,["parameters","personGeneration"],m);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&S(e,["parameters","includeSafetyAttributes"],p);const y=v(t,["includeRaiReason"]);e!==void 0&&y!=null&&S(e,["parameters","includeRaiReason"],y);const x=v(t,["language"]);e!==void 0&&x!=null&&S(e,["parameters","language"],x);const _=v(t,["outputMimeType"]);e!==void 0&&_!=null&&S(e,["parameters","outputOptions","mimeType"],_);const T=v(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&S(e,["parameters","outputOptions","compressionQuality"],T);const C=v(t,["addWatermark"]);e!==void 0&&C!=null&&S(e,["parameters","addWatermark"],C);const N=v(t,["labels"]);e!==void 0&&N!=null&&S(e,["labels"],N);const M=v(t,["editMode"]);e!==void 0&&M!=null&&S(e,["parameters","editMode"],M);const P=v(t,["baseSteps"]);return e!==void 0&&P!=null&&S(e,["parameters","editConfig","baseSteps"],P),n}function cde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const a=v(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>ofe(u))),S(n,["instances[0]","referenceImages"],c)}const o=v(e,["config"]);return o!=null&&lde(o,n),n}function ude(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Xv(a))),S(e,["generatedImages"],i)}return e}function dde(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&S(e,["requests[]","taskType"],r);const i=v(t,["title"]);e!==void 0&&i!=null&&S(e,["requests[]","title"],i);const a=v(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&S(e,["requests[]","outputDimensionality"],a),v(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(v(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function fde(t,e){const n={},r=v(t,["taskType"]);e!==void 0&&r!=null&&S(e,["instances[]","task_type"],r);const i=v(t,["title"]);e!==void 0&&i!=null&&S(e,["instances[]","title"],i);const a=v(t,["outputDimensionality"]);e!==void 0&&a!=null&&S(e,["parameters","outputDimensionality"],a);const o=v(t,["mimeType"]);e!==void 0&&o!=null&&S(e,["instances[]","mimeType"],o);const c=v(t,["autoTruncate"]);return e!==void 0&&c!=null&&S(e,["parameters","autoTruncate"],c),n}function hde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let c=_T(t,i);Array.isArray(c)&&(c=c.map(u=>u)),S(n,["requests[]","content"],c)}const a=v(e,["config"]);a!=null&&dde(a,n);const o=v(e,["model"]);return o!==void 0&&S(n,["requests[]","model"],mt(t,o)),n}function mde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let o=_T(t,i);Array.isArray(o)&&(o=o.map(c=>c)),S(n,["instances[]","content"],o)}const a=v(e,["config"]);return a!=null&&fde(a,n),n}function pde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>o)),S(e,["embeddings"],a)}const i=v(t,["metadata"]);return i!=null&&S(e,["metadata"],i),e}function gde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Wue(o))),S(e,["embeddings"],a)}const i=v(t,["metadata"]);return i!=null&&S(e,["metadata"],i),e}function yde(t){const e={},n=v(t,["endpoint"]);n!=null&&S(e,["name"],n);const r=v(t,["deployedModelId"]);return r!=null&&S(e,["deployedModelId"],r),e}function vde(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&S(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function xde(t){const e={};if(v(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=v(t,["description"]);n!=null&&S(e,["description"],n);const r=v(t,["name"]);r!=null&&S(e,["name"],r);const i=v(t,["parameters"]);i!=null&&S(e,["parameters"],i);const a=v(t,["parametersJsonSchema"]);a!=null&&S(e,["parametersJsonSchema"],a);const o=v(t,["response"]);o!=null&&S(e,["response"],o);const c=v(t,["responseJsonSchema"]);return c!=null&&S(e,["responseJsonSchema"],c),e}function bde(t,e,n){const r={},i=v(e,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],Qv(hr(i)));const a=v(e,["temperature"]);a!=null&&S(r,["temperature"],a);const o=v(e,["topP"]);o!=null&&S(r,["topP"],o);const c=v(e,["topK"]);c!=null&&S(r,["topK"],c);const u=v(e,["candidateCount"]);u!=null&&S(r,["candidateCount"],u);const d=v(e,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=v(e,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const p=v(e,["responseLogprobs"]);p!=null&&S(r,["responseLogprobs"],p);const y=v(e,["logprobs"]);y!=null&&S(r,["logprobs"],y);const x=v(e,["presencePenalty"]);x!=null&&S(r,["presencePenalty"],x);const _=v(e,["frequencyPenalty"]);_!=null&&S(r,["frequencyPenalty"],_);const T=v(e,["seed"]);T!=null&&S(r,["seed"],T);const C=v(e,["responseMimeType"]);C!=null&&S(r,["responseMimeType"],C);const N=v(e,["responseSchema"]);N!=null&&S(r,["responseSchema"],AT(N));const M=v(e,["responseJsonSchema"]);if(M!=null&&S(r,["responseJsonSchema"],M),v(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(v(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=v(e,["safetySettings"]);if(n!==void 0&&P!=null){let q=P;Array.isArray(q)&&(q=q.map(H=>lfe(H))),S(n,["safetySettings"],q)}const L=v(e,["tools"]);if(n!==void 0&&L!=null){let q=vd(L);Array.isArray(q)&&(q=q.map(H=>mfe(yd(H)))),S(n,["tools"],q)}const j=v(e,["toolConfig"]);if(n!==void 0&&j!=null&&S(n,["toolConfig"],j),v(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=v(e,["cachedContent"]);n!==void 0&&V!=null&&S(n,["cachedContent"],Ls(t,V));const I=v(e,["responseModalities"]);I!=null&&S(r,["responseModalities"],I);const R=v(e,["mediaResolution"]);R!=null&&S(r,["mediaResolution"],R);const U=v(e,["speechConfig"]);if(U!=null&&S(r,["speechConfig"],TT(U)),v(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=v(e,["thinkingConfig"]);F!=null&&S(r,["thinkingConfig"],F);const B=v(e,["imageConfig"]);return B!=null&&S(r,["imageConfig"],B),r}function wde(t,e,n){const r={},i=v(e,["systemInstruction"]);n!==void 0&&i!=null&&S(n,["systemInstruction"],hr(i));const a=v(e,["temperature"]);a!=null&&S(r,["temperature"],a);const o=v(e,["topP"]);o!=null&&S(r,["topP"],o);const c=v(e,["topK"]);c!=null&&S(r,["topK"],c);const u=v(e,["candidateCount"]);u!=null&&S(r,["candidateCount"],u);const d=v(e,["maxOutputTokens"]);d!=null&&S(r,["maxOutputTokens"],d);const m=v(e,["stopSequences"]);m!=null&&S(r,["stopSequences"],m);const p=v(e,["responseLogprobs"]);p!=null&&S(r,["responseLogprobs"],p);const y=v(e,["logprobs"]);y!=null&&S(r,["logprobs"],y);const x=v(e,["presencePenalty"]);x!=null&&S(r,["presencePenalty"],x);const _=v(e,["frequencyPenalty"]);_!=null&&S(r,["frequencyPenalty"],_);const T=v(e,["seed"]);T!=null&&S(r,["seed"],T);const C=v(e,["responseMimeType"]);C!=null&&S(r,["responseMimeType"],C);const N=v(e,["responseSchema"]);N!=null&&S(r,["responseSchema"],AT(N));const M=v(e,["responseJsonSchema"]);M!=null&&S(r,["responseJsonSchema"],M);const P=v(e,["routingConfig"]);P!=null&&S(r,["routingConfig"],P);const L=v(e,["modelSelectionConfig"]);L!=null&&S(r,["modelConfig"],L);const j=v(e,["safetySettings"]);if(n!==void 0&&j!=null){let Q=j;Array.isArray(Q)&&(Q=Q.map(ue=>ue)),S(n,["safetySettings"],Q)}const V=v(e,["tools"]);if(n!==void 0&&V!=null){let Q=vd(V);Array.isArray(Q)&&(Q=Q.map(ue=>VU(yd(ue)))),S(n,["tools"],Q)}const I=v(e,["toolConfig"]);n!==void 0&&I!=null&&S(n,["toolConfig"],I);const R=v(e,["labels"]);n!==void 0&&R!=null&&S(n,["labels"],R);const U=v(e,["cachedContent"]);n!==void 0&&U!=null&&S(n,["cachedContent"],Ls(t,U));const F=v(e,["responseModalities"]);F!=null&&S(r,["responseModalities"],F);const B=v(e,["mediaResolution"]);B!=null&&S(r,["mediaResolution"],B);const q=v(e,["speechConfig"]);q!=null&&S(r,["speechConfig"],UU(TT(q)));const H=v(e,["audioTimestamp"]);H!=null&&S(r,["audioTimestamp"],H);const se=v(e,["thinkingConfig"]);se!=null&&S(r,["thinkingConfig"],se);const Se=v(e,["imageConfig"]);return Se!=null&&S(r,["imageConfig"],Se),r}function NM(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let o=Si(i);Array.isArray(o)&&(o=o.map(c=>Qv(c))),S(n,["contents"],o)}const a=v(e,["config"]);return a!=null&&S(n,["generationConfig"],bde(t,a,n)),n}function kM(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["contents"]);if(i!=null){let o=Si(i);Array.isArray(o)&&(o=o.map(c=>c)),S(n,["contents"],o)}const a=v(e,["config"]);return a!=null&&S(n,["generationConfig"],wde(t,a,n)),n}function IM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>$ue(d))),S(e,["candidates"],u)}const i=v(t,["modelVersion"]);i!=null&&S(e,["modelVersion"],i);const a=v(t,["promptFeedback"]);a!=null&&S(e,["promptFeedback"],a);const o=v(t,["responseId"]);o!=null&&S(e,["responseId"],o);const c=v(t,["usageMetadata"]);return c!=null&&S(e,["usageMetadata"],c),e}function PM(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["candidates"],d)}const i=v(t,["createTime"]);i!=null&&S(e,["createTime"],i);const a=v(t,["modelVersion"]);a!=null&&S(e,["modelVersion"],a);const o=v(t,["promptFeedback"]);o!=null&&S(e,["promptFeedback"],o);const c=v(t,["responseId"]);c!=null&&S(e,["responseId"],c);const u=v(t,["usageMetadata"]);return u!=null&&S(e,["usageMetadata"],u),e}function Sde(t,e){const n={};if(v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&S(e,["parameters","sampleCount"],r);const i=v(t,["aspectRatio"]);e!==void 0&&i!=null&&S(e,["parameters","aspectRatio"],i);const a=v(t,["guidanceScale"]);if(e!==void 0&&a!=null&&S(e,["parameters","guidanceScale"],a),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=v(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&S(e,["parameters","safetySetting"],o);const c=v(t,["personGeneration"]);e!==void 0&&c!=null&&S(e,["parameters","personGeneration"],c);const u=v(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&S(e,["parameters","includeSafetyAttributes"],u);const d=v(t,["includeRaiReason"]);e!==void 0&&d!=null&&S(e,["parameters","includeRaiReason"],d);const m=v(t,["language"]);e!==void 0&&m!=null&&S(e,["parameters","language"],m);const p=v(t,["outputMimeType"]);e!==void 0&&p!=null&&S(e,["parameters","outputOptions","mimeType"],p);const y=v(t,["outputCompressionQuality"]);if(e!==void 0&&y!=null&&S(e,["parameters","outputOptions","compressionQuality"],y),v(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=v(t,["imageSize"]);if(e!==void 0&&x!=null&&S(e,["parameters","sampleImageSize"],x),v(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function _de(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&S(e,["parameters","storageUri"],r);const i=v(t,["negativePrompt"]);e!==void 0&&i!=null&&S(e,["parameters","negativePrompt"],i);const a=v(t,["numberOfImages"]);e!==void 0&&a!=null&&S(e,["parameters","sampleCount"],a);const o=v(t,["aspectRatio"]);e!==void 0&&o!=null&&S(e,["parameters","aspectRatio"],o);const c=v(t,["guidanceScale"]);e!==void 0&&c!=null&&S(e,["parameters","guidanceScale"],c);const u=v(t,["seed"]);e!==void 0&&u!=null&&S(e,["parameters","seed"],u);const d=v(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&S(e,["parameters","safetySetting"],d);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&S(e,["parameters","personGeneration"],m);const p=v(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&S(e,["parameters","includeSafetyAttributes"],p);const y=v(t,["includeRaiReason"]);e!==void 0&&y!=null&&S(e,["parameters","includeRaiReason"],y);const x=v(t,["language"]);e!==void 0&&x!=null&&S(e,["parameters","language"],x);const _=v(t,["outputMimeType"]);e!==void 0&&_!=null&&S(e,["parameters","outputOptions","mimeType"],_);const T=v(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&S(e,["parameters","outputOptions","compressionQuality"],T);const C=v(t,["addWatermark"]);e!==void 0&&C!=null&&S(e,["parameters","addWatermark"],C);const N=v(t,["labels"]);e!==void 0&&N!=null&&S(e,["labels"],N);const M=v(t,["imageSize"]);e!==void 0&&M!=null&&S(e,["parameters","sampleImageSize"],M);const P=v(t,["enhancePrompt"]);return e!==void 0&&P!=null&&S(e,["parameters","enhancePrompt"],P),n}function Ade(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const a=v(e,["config"]);return a!=null&&Sde(a,n),n}function Tde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const a=v(e,["config"]);return a!=null&&_de(a,n),n}function Ede(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Ude(o))),S(e,["generatedImages"],a)}const i=v(t,["positivePromptSafetyAttributes"]);return i!=null&&S(e,["positivePromptSafetyAttributes"],OU(i)),e}function Cde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(o=>Xv(o))),S(e,["generatedImages"],a)}const i=v(t,["positivePromptSafetyAttributes"]);return i!=null&&S(e,["positivePromptSafetyAttributes"],LU(i)),e}function Nde(t,e){const n={},r=v(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&S(e,["parameters","sampleCount"],r),v(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(v(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=v(t,["durationSeconds"]);if(e!==void 0&&i!=null&&S(e,["parameters","durationSeconds"],i),v(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=v(t,["aspectRatio"]);e!==void 0&&a!=null&&S(e,["parameters","aspectRatio"],a);const o=v(t,["resolution"]);e!==void 0&&o!=null&&S(e,["parameters","resolution"],o);const c=v(t,["personGeneration"]);if(e!==void 0&&c!=null&&S(e,["parameters","personGeneration"],c),v(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=v(t,["negativePrompt"]);e!==void 0&&u!=null&&S(e,["parameters","negativePrompt"],u);const d=v(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&S(e,["parameters","enhancePrompt"],d),v(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=v(t,["lastFrame"]);e!==void 0&&m!=null&&S(e,["instances[0]","lastFrame"],Zv(m));const p=v(t,["referenceImages"]);if(e!==void 0&&p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>Cfe(x))),S(e,["instances[0]","referenceImages"],y)}if(v(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(v(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function kde(t,e){const n={},r=v(t,["numberOfVideos"]);e!==void 0&&r!=null&&S(e,["parameters","sampleCount"],r);const i=v(t,["outputGcsUri"]);e!==void 0&&i!=null&&S(e,["parameters","storageUri"],i);const a=v(t,["fps"]);e!==void 0&&a!=null&&S(e,["parameters","fps"],a);const o=v(t,["durationSeconds"]);e!==void 0&&o!=null&&S(e,["parameters","durationSeconds"],o);const c=v(t,["seed"]);e!==void 0&&c!=null&&S(e,["parameters","seed"],c);const u=v(t,["aspectRatio"]);e!==void 0&&u!=null&&S(e,["parameters","aspectRatio"],u);const d=v(t,["resolution"]);e!==void 0&&d!=null&&S(e,["parameters","resolution"],d);const m=v(t,["personGeneration"]);e!==void 0&&m!=null&&S(e,["parameters","personGeneration"],m);const p=v(t,["pubsubTopic"]);e!==void 0&&p!=null&&S(e,["parameters","pubsubTopic"],p);const y=v(t,["negativePrompt"]);e!==void 0&&y!=null&&S(e,["parameters","negativePrompt"],y);const x=v(t,["enhancePrompt"]);e!==void 0&&x!=null&&S(e,["parameters","enhancePrompt"],x);const _=v(t,["generateAudio"]);e!==void 0&&_!=null&&S(e,["parameters","generateAudio"],_);const T=v(t,["lastFrame"]);e!==void 0&&T!=null&&S(e,["instances[0]","lastFrame"],Wi(T));const C=v(t,["referenceImages"]);if(e!==void 0&&C!=null){let P=C;Array.isArray(P)&&(P=P.map(L=>Nfe(L))),S(e,["instances[0]","referenceImages"],P)}const N=v(t,["mask"]);e!==void 0&&N!=null&&S(e,["instances[0]","mask"],Efe(N));const M=v(t,["compressionQuality"]);return e!==void 0&&M!=null&&S(e,["parameters","compressionQuality"],M),n}function Ide(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["metadata"]);r!=null&&S(e,["metadata"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);a!=null&&S(e,["error"],a);const o=v(t,["response","generateVideoResponse"]);return o!=null&&S(e,["response"],Mde(o)),e}function Pde(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["metadata"]);r!=null&&S(e,["metadata"],r);const i=v(t,["done"]);i!=null&&S(e,["done"],i);const a=v(t,["error"]);a!=null&&S(e,["error"],a);const o=v(t,["response"]);return o!=null&&S(e,["response"],jde(o)),e}function Dde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const a=v(e,["image"]);a!=null&&S(n,["instances[0]","image"],Zv(a));const o=v(e,["video"]);o!=null&&S(n,["instances[0]","video"],FU(o));const c=v(e,["source"]);c!=null&&Ode(c,n);const u=v(e,["config"]);return u!=null&&Nde(u,n),n}function Rde(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["prompt"]);i!=null&&S(n,["instances[0]","prompt"],i);const a=v(e,["image"]);a!=null&&S(n,["instances[0]","image"],Wi(a));const o=v(e,["video"]);o!=null&&S(n,["instances[0]","video"],BU(o));const c=v(e,["source"]);c!=null&&Lde(c,n);const u=v(e,["config"]);return u!=null&&kde(u,n),n}function Mde(t){const e={},n=v(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Fde(o))),S(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&S(e,["raiMediaFilteredCount"],r);const i=v(t,["raiMediaFilteredReasons"]);return i!=null&&S(e,["raiMediaFilteredReasons"],i),e}function jde(t){const e={},n=v(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>Bde(o))),S(e,["generatedVideos"],a)}const r=v(t,["raiMediaFilteredCount"]);r!=null&&S(e,["raiMediaFilteredCount"],r);const i=v(t,["raiMediaFilteredReasons"]);return i!=null&&S(e,["raiMediaFilteredReasons"],i),e}function Ode(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&S(e,["instances[0]","prompt"],r);const i=v(t,["image"]);e!==void 0&&i!=null&&S(e,["instances[0]","image"],Zv(i));const a=v(t,["video"]);return e!==void 0&&a!=null&&S(e,["instances[0]","video"],FU(a)),n}function Lde(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&S(e,["instances[0]","prompt"],r);const i=v(t,["image"]);e!==void 0&&i!=null&&S(e,["instances[0]","image"],Wi(i));const a=v(t,["video"]);return e!==void 0&&a!=null&&S(e,["instances[0]","video"],BU(a)),n}function Ude(t){const e={},n=v(t,["_self"]);n!=null&&S(e,["image"],Kde(n));const r=v(t,["raiFilteredReason"]);r!=null&&S(e,["raiFilteredReason"],r);const i=v(t,["_self"]);return i!=null&&S(e,["safetyAttributes"],OU(i)),e}function Xv(t){const e={},n=v(t,["_self"]);n!=null&&S(e,["image"],jU(n));const r=v(t,["raiFilteredReason"]);r!=null&&S(e,["raiFilteredReason"],r);const i=v(t,["_self"]);i!=null&&S(e,["safetyAttributes"],LU(i));const a=v(t,["prompt"]);return a!=null&&S(e,["enhancedPrompt"],a),e}function Vde(t){const e={},n=v(t,["_self"]);n!=null&&S(e,["mask"],jU(n));const r=v(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),S(e,["labels"],i)}return e}function Fde(t){const e={},n=v(t,["video"]);return n!=null&&S(e,["video"],Afe(n)),e}function Bde(t){const e={},n=v(t,["_self"]);return n!=null&&S(e,["video"],Tfe(n)),e}function zde(t){const e={},n=v(t,["modelSelectionConfig"]);n!=null&&S(e,["modelConfig"],n);const r=v(t,["audioTimestamp"]);r!=null&&S(e,["audioTimestamp"],r);const i=v(t,["candidateCount"]);i!=null&&S(e,["candidateCount"],i);const a=v(t,["enableAffectiveDialog"]);a!=null&&S(e,["enableAffectiveDialog"],a);const o=v(t,["frequencyPenalty"]);o!=null&&S(e,["frequencyPenalty"],o);const c=v(t,["logprobs"]);c!=null&&S(e,["logprobs"],c);const u=v(t,["maxOutputTokens"]);u!=null&&S(e,["maxOutputTokens"],u);const d=v(t,["mediaResolution"]);d!=null&&S(e,["mediaResolution"],d);const m=v(t,["presencePenalty"]);m!=null&&S(e,["presencePenalty"],m);const p=v(t,["responseJsonSchema"]);p!=null&&S(e,["responseJsonSchema"],p);const y=v(t,["responseLogprobs"]);y!=null&&S(e,["responseLogprobs"],y);const x=v(t,["responseMimeType"]);x!=null&&S(e,["responseMimeType"],x);const _=v(t,["responseModalities"]);_!=null&&S(e,["responseModalities"],_);const T=v(t,["responseSchema"]);T!=null&&S(e,["responseSchema"],T);const C=v(t,["routingConfig"]);C!=null&&S(e,["routingConfig"],C);const N=v(t,["seed"]);N!=null&&S(e,["seed"],N);const M=v(t,["speechConfig"]);M!=null&&S(e,["speechConfig"],UU(M));const P=v(t,["stopSequences"]);P!=null&&S(e,["stopSequences"],P);const L=v(t,["temperature"]);L!=null&&S(e,["temperature"],L);const j=v(t,["thinkingConfig"]);j!=null&&S(e,["thinkingConfig"],j);const V=v(t,["topK"]);V!=null&&S(e,["topK"],V);const I=v(t,["topP"]);if(I!=null&&S(e,["topP"],I),v(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qde(t,e){const n={},r=v(e,["model"]);return r!=null&&S(n,["_url","name"],mt(t,r)),n}function Hde(t,e){const n={},r=v(e,["model"]);return r!=null&&S(n,["_url","name"],mt(t,r)),n}function $de(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&S(e,["enableWidget"],n),e}function Gde(t){const e={},n=v(t,["timeRangeFilter"]);if(n!=null&&S(e,["timeRangeFilter"],n),v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Kde(t){const e={},n=v(t,["bytesBase64Encoded"]);n!=null&&S(e,["imageBytes"],el(n));const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function jU(t){const e={},n=v(t,["gcsUri"]);n!=null&&S(e,["gcsUri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&S(e,["imageBytes"],el(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["mimeType"],i),e}function Zv(t){const e={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=v(t,["imageBytes"]);n!=null&&S(e,["bytesBase64Encoded"],el(n));const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function Wi(t){const e={},n=v(t,["gcsUri"]);n!=null&&S(e,["gcsUri"],n);const r=v(t,["imageBytes"]);r!=null&&S(e,["bytesBase64Encoded"],el(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["mimeType"],i),e}function Yde(t,e,n){const r={},i=v(e,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&S(n,["_query","pageToken"],a);const o=v(e,["filter"]);n!==void 0&&o!=null&&S(n,["_query","filter"],o);const c=v(e,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],CU(t,c)),r}function Wde(t,e,n){const r={},i=v(e,["pageSize"]);n!==void 0&&i!=null&&S(n,["_query","pageSize"],i);const a=v(e,["pageToken"]);n!==void 0&&a!=null&&S(n,["_query","pageToken"],a);const o=v(e,["filter"]);n!==void 0&&o!=null&&S(n,["_query","filter"],o);const c=v(e,["queryBase"]);return n!==void 0&&c!=null&&S(n,["_url","models_url"],CU(t,c)),r}function Jde(t,e){const n={},r=v(e,["config"]);return r!=null&&Yde(t,r,n),n}function Qde(t,e){const n={},r=v(e,["config"]);return r!=null&&Wde(t,r,n),n}function Xde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["_self"]);if(i!=null){let a=NU(i);Array.isArray(a)&&(a=a.map(o=>j_(o))),S(e,["models"],a)}return e}function Zde(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["nextPageToken"]);r!=null&&S(e,["nextPageToken"],r);const i=v(t,["_self"]);if(i!=null){let a=NU(i);Array.isArray(a)&&(a=a.map(o=>O_(o))),S(e,["models"],a)}return e}function efe(t){const e={},n=v(t,["maskMode"]);n!=null&&S(e,["maskMode"],n);const r=v(t,["segmentationClasses"]);r!=null&&S(e,["maskClasses"],r);const i=v(t,["maskDilation"]);return i!=null&&S(e,["dilation"],i),e}function j_(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["displayName"]);r!=null&&S(e,["displayName"],r);const i=v(t,["description"]);i!=null&&S(e,["description"],i);const a=v(t,["version"]);a!=null&&S(e,["version"],a);const o=v(t,["_self"]);o!=null&&S(e,["tunedModelInfo"],pfe(o));const c=v(t,["inputTokenLimit"]);c!=null&&S(e,["inputTokenLimit"],c);const u=v(t,["outputTokenLimit"]);u!=null&&S(e,["outputTokenLimit"],u);const d=v(t,["supportedGenerationMethods"]);return d!=null&&S(e,["supportedActions"],d),e}function O_(t){const e={},n=v(t,["name"]);n!=null&&S(e,["name"],n);const r=v(t,["displayName"]);r!=null&&S(e,["displayName"],r);const i=v(t,["description"]);i!=null&&S(e,["description"],i);const a=v(t,["versionId"]);a!=null&&S(e,["version"],a);const o=v(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(y=>yde(y))),S(e,["endpoints"],p)}const c=v(t,["labels"]);c!=null&&S(e,["labels"],c);const u=v(t,["_self"]);u!=null&&S(e,["tunedModelInfo"],gfe(u));const d=v(t,["defaultCheckpointId"]);d!=null&&S(e,["defaultCheckpointId"],d);const m=v(t,["checkpoints"]);if(m!=null){let p=m;Array.isArray(p)&&(p=p.map(y=>y)),S(e,["checkpoints"],p)}return e}function tfe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&S(e,["videoMetadata"],n);const r=v(t,["thought"]);r!=null&&S(e,["thought"],r);const i=v(t,["inlineData"]);i!=null&&S(e,["inlineData"],Hue(i));const a=v(t,["fileData"]);a!=null&&S(e,["fileData"],vde(a));const o=v(t,["thoughtSignature"]);o!=null&&S(e,["thoughtSignature"],o);const c=v(t,["functionCall"]);c!=null&&S(e,["functionCall"],c);const u=v(t,["codeExecutionResult"]);u!=null&&S(e,["codeExecutionResult"],u);const d=v(t,["executableCode"]);d!=null&&S(e,["executableCode"],d);const m=v(t,["functionResponse"]);m!=null&&S(e,["functionResponse"],m);const p=v(t,["text"]);return p!=null&&S(e,["text"],p),e}function nfe(t){const e={},n=v(t,["productImage"]);return n!=null&&S(e,["image"],Wi(n)),e}function rfe(t,e){const n={},r=v(t,["numberOfImages"]);e!==void 0&&r!=null&&S(e,["parameters","sampleCount"],r);const i=v(t,["baseSteps"]);e!==void 0&&i!=null&&S(e,["parameters","editConfig","baseSteps"],i);const a=v(t,["outputGcsUri"]);e!==void 0&&a!=null&&S(e,["parameters","storageUri"],a);const o=v(t,["seed"]);e!==void 0&&o!=null&&S(e,["parameters","seed"],o);const c=v(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&S(e,["parameters","safetySetting"],c);const u=v(t,["personGeneration"]);e!==void 0&&u!=null&&S(e,["parameters","personGeneration"],u);const d=v(t,["addWatermark"]);e!==void 0&&d!=null&&S(e,["parameters","addWatermark"],d);const m=v(t,["outputMimeType"]);e!==void 0&&m!=null&&S(e,["parameters","outputOptions","mimeType"],m);const p=v(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&S(e,["parameters","outputOptions","compressionQuality"],p);const y=v(t,["enhancePrompt"]);e!==void 0&&y!=null&&S(e,["parameters","enhancePrompt"],y);const x=v(t,["labels"]);return e!==void 0&&x!=null&&S(e,["labels"],x),n}function ife(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["source"]);i!=null&&sfe(i,n);const a=v(e,["config"]);return a!=null&&rfe(a,n),n}function afe(t){const e={},n=v(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Xv(i))),S(e,["generatedImages"],r)}return e}function sfe(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&S(e,["instances[0]","prompt"],r);const i=v(t,["personImage"]);e!==void 0&&i!=null&&S(e,["instances[0]","personImage","image"],Wi(i));const a=v(t,["productImages"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>nfe(c))),S(e,["instances[0]","productImages"],o)}return n}function ofe(t){const e={},n=v(t,["referenceImage"]);n!=null&&S(e,["referenceImage"],Wi(n));const r=v(t,["referenceId"]);r!=null&&S(e,["referenceId"],r);const i=v(t,["referenceType"]);i!=null&&S(e,["referenceType"],i);const a=v(t,["maskImageConfig"]);a!=null&&S(e,["maskImageConfig"],efe(a));const o=v(t,["controlImageConfig"]);o!=null&&S(e,["controlImageConfig"],Que(o));const c=v(t,["styleImageConfig"]);c!=null&&S(e,["styleImageConfig"],c);const u=v(t,["subjectImageConfig"]);return u!=null&&S(e,["subjectImageConfig"],u),e}function OU(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&S(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&S(e,["scores"],r);const i=v(t,["contentType"]);return i!=null&&S(e,["contentType"],i),e}function LU(t){const e={},n=v(t,["safetyAttributes","categories"]);n!=null&&S(e,["categories"],n);const r=v(t,["safetyAttributes","scores"]);r!=null&&S(e,["scores"],r);const i=v(t,["contentType"]);return i!=null&&S(e,["contentType"],i),e}function lfe(t){const e={};if(v(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=v(t,["category"]);n!=null&&S(e,["category"],n);const r=v(t,["threshold"]);return r!=null&&S(e,["threshold"],r),e}function cfe(t){const e={},n=v(t,["image"]);return n!=null&&S(e,["image"],Wi(n)),e}function ufe(t,e){const n={},r=v(t,["mode"]);e!==void 0&&r!=null&&S(e,["parameters","mode"],r);const i=v(t,["maxPredictions"]);e!==void 0&&i!=null&&S(e,["parameters","maxPredictions"],i);const a=v(t,["confidenceThreshold"]);e!==void 0&&a!=null&&S(e,["parameters","confidenceThreshold"],a);const o=v(t,["maskDilation"]);e!==void 0&&o!=null&&S(e,["parameters","maskDilation"],o);const c=v(t,["binaryColorThreshold"]);e!==void 0&&c!=null&&S(e,["parameters","binaryColorThreshold"],c);const u=v(t,["labels"]);return e!==void 0&&u!=null&&S(e,["labels"],u),n}function dfe(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["source"]);i!=null&&hfe(i,n);const a=v(e,["config"]);return a!=null&&ufe(a,n),n}function ffe(t){const e={},n=v(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Vde(i))),S(e,["generatedMasks"],r)}return e}function hfe(t,e){const n={},r=v(t,["prompt"]);e!==void 0&&r!=null&&S(e,["instances[0]","prompt"],r);const i=v(t,["image"]);e!==void 0&&i!=null&&S(e,["instances[0]","image"],Wi(i));const a=v(t,["scribbleImage"]);return e!==void 0&&a!=null&&S(e,["instances[0]","scribble"],cfe(a)),n}function UU(t){const e={},n=v(t,["voiceConfig"]);if(n!=null&&S(e,["voiceConfig"],n),v(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=v(t,["languageCode"]);return r!=null&&S(e,["languageCode"],r),e}function mfe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["functionDeclarations"],d)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&S(e,["googleSearch"],Gde(r));const i=v(t,["googleSearchRetrieval"]);if(i!=null&&S(e,["googleSearchRetrieval"],i),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["googleMaps"]);a!=null&&S(e,["googleMaps"],$de(a));const o=v(t,["urlContext"]);o!=null&&S(e,["urlContext"],o);const c=v(t,["computerUse"]);c!=null&&S(e,["computerUse"],c);const u=v(t,["codeExecution"]);return u!=null&&S(e,["codeExecution"],u),e}function VU(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(y=>xde(y))),S(e,["functionDeclarations"],p)}const r=v(t,["retrieval"]);r!=null&&S(e,["retrieval"],r);const i=v(t,["googleSearch"]);i!=null&&S(e,["googleSearch"],i);const a=v(t,["googleSearchRetrieval"]);a!=null&&S(e,["googleSearchRetrieval"],a);const o=v(t,["enterpriseWebSearch"]);o!=null&&S(e,["enterpriseWebSearch"],o);const c=v(t,["googleMaps"]);c!=null&&S(e,["googleMaps"],c);const u=v(t,["urlContext"]);u!=null&&S(e,["urlContext"],u);const d=v(t,["computerUse"]);d!=null&&S(e,["computerUse"],d);const m=v(t,["codeExecution"]);return m!=null&&S(e,["codeExecution"],m),e}function pfe(t){const e={},n=v(t,["baseModel"]);n!=null&&S(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&S(e,["createTime"],r);const i=v(t,["updateTime"]);return i!=null&&S(e,["updateTime"],i),e}function gfe(t){const e={},n=v(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&S(e,["baseModel"],n);const r=v(t,["createTime"]);r!=null&&S(e,["createTime"],r);const i=v(t,["updateTime"]);return i!=null&&S(e,["updateTime"],i),e}function yfe(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&S(e,["displayName"],r);const i=v(t,["description"]);e!==void 0&&i!=null&&S(e,["description"],i);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&S(e,["defaultCheckpointId"],a),n}function vfe(t,e){const n={},r=v(t,["displayName"]);e!==void 0&&r!=null&&S(e,["displayName"],r);const i=v(t,["description"]);e!==void 0&&i!=null&&S(e,["description"],i);const a=v(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&S(e,["defaultCheckpointId"],a),n}function xfe(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","name"],mt(t,r));const i=v(e,["config"]);return i!=null&&yfe(i,n),n}function bfe(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["config"]);return i!=null&&vfe(i,n),n}function wfe(t,e){const n={},r=v(t,["outputGcsUri"]);e!==void 0&&r!=null&&S(e,["parameters","storageUri"],r);const i=v(t,["includeRaiReason"]);e!==void 0&&i!=null&&S(e,["parameters","includeRaiReason"],i);const a=v(t,["outputMimeType"]);e!==void 0&&a!=null&&S(e,["parameters","outputOptions","mimeType"],a);const o=v(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&S(e,["parameters","outputOptions","compressionQuality"],o);const c=v(t,["enhanceInputImage"]);e!==void 0&&c!=null&&S(e,["parameters","upscaleConfig","enhanceInputImage"],c);const u=v(t,["imagePreservationFactor"]);e!==void 0&&u!=null&&S(e,["parameters","upscaleConfig","imagePreservationFactor"],u);const d=v(t,["labels"]);e!==void 0&&d!=null&&S(e,["labels"],d);const m=v(t,["numberOfImages"]);e!==void 0&&m!=null&&S(e,["parameters","sampleCount"],m);const p=v(t,["mode"]);return e!==void 0&&p!=null&&S(e,["parameters","mode"],p),n}function Sfe(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["_url","model"],mt(t,r));const i=v(e,["image"]);i!=null&&S(n,["instances[0]","image"],Wi(i));const a=v(e,["upscaleFactor"]);a!=null&&S(n,["parameters","upscaleConfig","upscaleFactor"],a);const o=v(e,["config"]);return o!=null&&wfe(o,n),n}function _fe(t){const e={},n=v(t,["sdkHttpResponse"]);n!=null&&S(e,["sdkHttpResponse"],n);const r=v(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>Xv(a))),S(e,["generatedImages"],i)}return e}function Afe(t){const e={},n=v(t,["uri"]);n!=null&&S(e,["uri"],n);const r=v(t,["encodedVideo"]);r!=null&&S(e,["videoBytes"],el(r));const i=v(t,["encoding"]);return i!=null&&S(e,["mimeType"],i),e}function Tfe(t){const e={},n=v(t,["gcsUri"]);n!=null&&S(e,["uri"],n);const r=v(t,["bytesBase64Encoded"]);r!=null&&S(e,["videoBytes"],el(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["mimeType"],i),e}function Efe(t){const e={},n=v(t,["image"]);n!=null&&S(e,["_self"],Wi(n));const r=v(t,["maskMode"]);return r!=null&&S(e,["maskMode"],r),e}function Cfe(t){const e={},n=v(t,["image"]);n!=null&&S(e,["image"],Zv(n));const r=v(t,["referenceType"]);return r!=null&&S(e,["referenceType"],r),e}function Nfe(t){const e={},n=v(t,["image"]);n!=null&&S(e,["image"],Wi(n));const r=v(t,["referenceType"]);return r!=null&&S(e,["referenceType"],r),e}function FU(t){const e={},n=v(t,["uri"]);n!=null&&S(e,["uri"],n);const r=v(t,["videoBytes"]);r!=null&&S(e,["encodedVideo"],el(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["encoding"],i),e}function BU(t){const e={},n=v(t,["uri"]);n!=null&&S(e,["gcsUri"],n);const r=v(t,["videoBytes"]);r!=null&&S(e,["bytesBase64Encoded"],el(r));const i=v(t,["mimeType"]);return i!=null&&S(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kfe="Content-Type",Ife="X-Server-Timeout",Pfe="User-Agent",L_="x-goog-api-client",Dfe="1.27.0",Rfe=`google-genai-sdk/${Dfe}`,Mfe="v1beta1",jfe="v1beta",DM=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ofe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Mfe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:jfe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,c]of Object.entries(e.queryParams))i.searchParams.append(o,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,o=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>a.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=o}return n&&n.extraBody!==null&&Lfe(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await RM(i),new D_(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await RM(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Au(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";for(;;){const{done:c,value:u}=yield Lt(i.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=a.decode(u,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const y=JSON.parse(JSON.stringify(p.error)),x=y.status,_=y.code,T=`got status: ${x}. ${JSON.stringify(p)}`;if(_>=400&&_<600)throw new Jv({message:T,status:_})}}catch(p){if(p.name==="ApiError")throw p}o+=d;let m=o.match(DM);for(;m;){const p=m[1];try{const y=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Lt(new D_(y)),o=o.slice(m[0].length),m=o.match(DM)}catch(y){throw new Error(`exception parsing stream chunk ${p}. ${y}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Rfe+" "+this.clientOptions.userAgentExtra;return e[Pfe]=n,e[L_]=n,e[kfe]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(Ife,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);i.sizeBytes=String(o.size);const c=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const u=await this.fetchUploadUrl(i,n);return a.upload(e,u,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},o=await this.request({path:ke("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:i});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(r=o==null?void 0:o.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function RM(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Jv({message:i,status:n}):new Error(i)}}function Lfe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,o){const c=Object.assign({},a);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const d=o[u],m=c[u];d&&typeof d=="object"&&!Array.isArray(d)&&m&&typeof m=="object"&&!Array.isArray(m)?c[u]=r(m,d):(m&&d&&typeof m!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof m}, New type: ${typeof d}. Overwriting.`),c[u]=d)}return c}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ufe="mcp_used/unknown";let Vfe=!1;function zU(t){for(const e of t)if(Ffe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Vfe}function qU(t){var e;const n=(e=t[L_])!==null&&e!==void 0?e:"";t[L_]=(n+` ${Ufe}`).trimStart()}function Ffe(t){return t!==null&&typeof t=="object"&&t instanceof CT}function Bfe(t,e=100){return Au(this,arguments,function*(){let r,i=0;for(;i<e;){const a=yield Lt(t.listTools({cursor:r}));for(const o of a.tools)yield yield Lt(o),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class CT{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new CT(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},o=[];for(const m of this.mcpClients)try{for(var c=!0,u=(n=void 0,Xf(Bfe(m))),d;d=await u.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const p=i;o.push(p);const y=p.name;if(a[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);a[y]=m}}catch(p){n={error:p}}finally{try{!c&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Gle(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zfe(t,e,n){const r=new Ule;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class qfe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=Gfe(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const m=new Promise(P=>{d=P}),p=e.callbacks,y=function(){d({})},x=this.apiClient,_={onopen:y,onmessage:P=>{zfe(x,p.onmessage,P)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(P){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(P){}},T=this.webSocketFactory.create(u,$fe(o),_);T.connect(),await m;const M={setup:{model:mt(this.apiClient,e.model)}};return T.send(JSON.stringify(M)),new Hfe(T,this.apiClient)}}class Hfe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=jue(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Mue(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vu.PLAY)}pause(){this.sendPlaybackControl(vu.PAUSE)}stop(){this.sendPlaybackControl(vu.STOP)}resetContext(){this.sendPlaybackControl(vu.RESET_CONTEXT)}close(){this.conn.close()}}function $fe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Gfe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kfe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Yfe(t,e,n){const r=new Lle;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const o=Uue(a);Object.assign(r,o)}else Object.assign(r,a);e(r)}class Wfe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new qfe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,o,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let m;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&zU(e.config.tools)&&qU(p);const y=Zfe(p);if(this.apiClient.isVertexAI())m=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,m);else{const U=this.apiClient.getApiKey();let F="BidiGenerateContent",B="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",B="access_token"),m=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${F}?${B}=${U}`}let x=()=>{};const _=new Promise(U=>{x=U}),T=e.callbacks,C=function(){var U;(U=T==null?void 0:T.onopen)===null||U===void 0||U.call(T),x({})},N=this.apiClient,M={onopen:C,onmessage:U=>{Yfe(N,T.onmessage,U)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(U){},onclose:(r=T==null?void 0:T.onclose)!==null&&r!==void 0?r:function(U){}},P=this.webSocketFactory.create(m,Xfe(y),M);P.connect(),await _;let L=mt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const U=this.apiClient.getProject(),F=this.apiClient.getLocation();L=`projects/${U}/locations/${F}/`+L}let j={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ey.AUDIO]}:e.config.responseModalities=[Ey.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const V=(c=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[],I=[];for(const U of V)if(this.isCallableTool(U)){const F=U;I.push(await F.tool())}else I.push(U);I.length>0&&(e.config.tools=I);const R={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=Rue(this.apiClient,R):j=Due(this.apiClient,R),delete j.config,P.send(JSON.stringify(j)),new Qfe(P,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Jfe={turnComplete:!0};class Qfe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Si(n.turns),e.isVertexAI()||(r=r.map(i=>Qv(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(Kfe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Jfe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Lue(e)}:n={realtimeInput:Oue(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Xfe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Zfe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MM=10;function jM(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Tu(o)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Tu(t){return"callTool"in t&&typeof t.callTool=="function"}function ehe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Tu(i)))!==null&&r!==void 0?r:!1}function the(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Tu(i)))!==null&&r!==void 0?r:!1}function OM(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nhe extends vc{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,o,c;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ehe(n)||jM(n.config))return await this.generateContentInternal(u);if(the(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,m;const p=Si(u.contents),y=(a=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:MM;let x=0;for(;x<y&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const _=d.candidates[0].content,T=[];for(const C of(c=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[])if(Tu(C)){const M=await C.callTool(d.functionCalls);T.push(...M)}x++,m={role:"user",parts:T},u.contents=Si(u.contents),u.contents.push(_),u.contents.push(m),OM(u.config)&&(p.push(_),p.push(m))}return OM(u.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),jM(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const o=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=u==null?void 0:u.safetyAttributes:o.push(u);let c;return a?c={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new rm(oc.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,o,c,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(a=n.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((u=(c=n.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const o=await Promise.all(a.map(async u=>Tu(u)?await u.tool():u)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(c.config.tools=o,e.config&&e.config.tools&&zU(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),qU(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Tu(o)){const c=o,u=await c.tool();for(const d of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:MM;let o=!1,c=0;const u=await this.initAfcToolsMap(e);return(function(d,m,p){var y,x;return Au(this,arguments,function*(){for(var _,T,C,N;c<a;){o&&(c++,o=!1);const j=yield Lt(d.processParamsMaybeAddMcpUsage(p)),V=yield Lt(d.generateContentStreamInternal(j)),I=[],R=[];try{for(var M=!0,P=(T=void 0,Xf(V)),L;L=yield Lt(P.next()),_=L.done,!_;M=!0){N=L.value,M=!1;const U=N;if(yield yield Lt(U),U.candidates&&(!((y=U.candidates[0])===null||y===void 0)&&y.content)){R.push(U.candidates[0].content);for(const F of(x=U.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(c<a&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(m.has(F.functionCall.name)){const B=yield Lt(m.get(F.functionCall.name).callTool([F.functionCall]));I.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${m.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(U){T={error:U}}finally{try{!M&&!_&&(C=P.return)&&(yield Lt(C.call(P)))}finally{if(T)throw T.error}}if(I.length>0){o=!0;const U=new Ff;U.candidates=[{content:{role:"user",parts:I}}],yield yield Lt(U);const F=[];F.push(...R),F.push({role:"user",parts:I});const B=Si(p.contents).concat(F);p.contents=B}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=kM(this.apiClient,e);return c=ke("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=PM(m),y=new Ff;return Object.assign(y,p),y})}else{const d=NM(this.apiClient,e);return c=ke("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=IM(m),y=new Ff;return Object.assign(y,p),y})}}async generateContentStreamInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=kM(this.apiClient,e);return c=ke("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return Au(this,arguments,function*(){var y,x,_,T;try{for(var C=!0,N=Xf(p),M;M=yield Lt(N.next()),y=M.done,!y;C=!0){T=M.value,C=!1;const P=T,L=PM(yield Lt(P.json()));L.sdkHttpResponse={headers:P.headers};const j=new Ff;Object.assign(j,L),yield yield Lt(j)}}catch(P){x={error:P}}finally{try{!C&&!y&&(_=N.return)&&(yield Lt(_.call(N)))}finally{if(x)throw x.error}}})})}else{const d=NM(this.apiClient,e);return c=ke("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(p){return Au(this,arguments,function*(){var y,x,_,T;try{for(var C=!0,N=Xf(p),M;M=yield Lt(N.next()),y=M.done,!y;C=!0){T=M.value,C=!1;const P=T,L=IM(yield Lt(P.json()));L.sdkHttpResponse={headers:P.headers};const j=new Ff;Object.assign(j,L),yield yield Lt(j)}}catch(P){x={error:P}}finally{try{!C&&!y&&(_=N.return)&&(yield Lt(_.call(N)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=mde(this.apiClient,e);return c=ke("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=gde(m),y=new fM;return Object.assign(y,p),y})}else{const d=hde(this.apiClient,e);return c=ke("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=pde(m),y=new fM;return Object.assign(y,p),y})}}async generateImagesInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Tde(this.apiClient,e);return c=ke("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Cde(m),y=new hM;return Object.assign(y,p),y})}else{const d=Ade(this.apiClient,e);return c=ke("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Ede(m),y=new hM;return Object.assign(y,p),y})}}async editImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=cde(this.apiClient,e);return a=ke("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const d=ude(u),m=new kle;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=Sfe(this.apiClient,e);return a=ke("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const d=_fe(u),m=new Ile;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=ife(this.apiClient,e);return a=ke("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=afe(u),m=new Ple;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=dfe(this.apiClient,e);return a=ke("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const d=ffe(u),m=new Dle;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Hde(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>O_(m))}else{const d=qde(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>j_(m))}}async listInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Qde(this.apiClient,e);return c=ke("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Zde(m),y=new mM;return Object.assign(y,p),y})}else{const d=Jde(this.apiClient,e);return c=ke("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Xde(m),y=new mM;return Object.assign(y,p),y})}}async update(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=bfe(this.apiClient,e);return c=ke("{model}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>O_(m))}else{const d=xfe(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>j_(m))}}async delete(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=ade(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=ode(m),y=new pM;return Object.assign(y,p),y})}else{const d=ide(this.apiClient,e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=sde(m),y=new pM;return Object.assign(y,p),y})}}async countTokens(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=tde(this.apiClient,e);return c=ke("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=rde(m),y=new gM;return Object.assign(y,p),y})}else{const d=ede(this.apiClient,e);return c=ke("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=nde(m),y=new gM;return Object.assign(y,p),y})}}async computeTokens(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=Kue(this.apiClient,e);return a=ke("{model}:computeTokens",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>{const d=Yue(u),m=new Rle;return Object.assign(m,d),m})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Rde(this.apiClient,e);return c=ke("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const p=Pde(m),y=new Cy;return Object.assign(y,p),y})}else{const d=Dde(this.apiClient,e);return c=ke("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o.then(m=>{const p=Ide(m),y=new Cy;return Object.assign(y,p),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rhe extends vc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Ele(e);return c=ke("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o}else{const d=Tle(e);return c=ke("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=vle(e);return a=ke("{resourceName}:fetchPredictOperation",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ihe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["data"]);n!=null&&S(e,["data"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function ahe(t){const e={},n=v(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>hhe(a))),S(e,["parts"],i)}const r=v(t,["role"]);return r!=null&&S(e,["role"],r),e}function she(t,e,n){const r={},i=v(e,["expireTime"]);n!==void 0&&i!=null&&S(n,["expireTime"],i);const a=v(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&S(n,["newSessionExpireTime"],a);const o=v(e,["uses"]);n!==void 0&&o!=null&&S(n,["uses"],o);const c=v(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&S(n,["bidiGenerateContentSetup"],fhe(t,c));const u=v(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&S(n,["fieldMask"],u),r}function ohe(t,e){const n={},r=v(e,["config"]);return r!=null&&S(n,["config"],she(t,r,n)),n}function lhe(t){const e={};if(v(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=v(t,["fileUri"]);n!=null&&S(e,["fileUri"],n);const r=v(t,["mimeType"]);return r!=null&&S(e,["mimeType"],r),e}function che(t){const e={};if(v(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=v(t,["enableWidget"]);return n!=null&&S(e,["enableWidget"],n),e}function uhe(t){const e={},n=v(t,["timeRangeFilter"]);if(n!=null&&S(e,["timeRangeFilter"],n),v(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dhe(t,e){const n={},r=v(t,["generationConfig"]);e!==void 0&&r!=null&&S(e,["setup","generationConfig"],r);const i=v(t,["responseModalities"]);e!==void 0&&i!=null&&S(e,["setup","generationConfig","responseModalities"],i);const a=v(t,["temperature"]);e!==void 0&&a!=null&&S(e,["setup","generationConfig","temperature"],a);const o=v(t,["topP"]);e!==void 0&&o!=null&&S(e,["setup","generationConfig","topP"],o);const c=v(t,["topK"]);e!==void 0&&c!=null&&S(e,["setup","generationConfig","topK"],c);const u=v(t,["maxOutputTokens"]);e!==void 0&&u!=null&&S(e,["setup","generationConfig","maxOutputTokens"],u);const d=v(t,["mediaResolution"]);e!==void 0&&d!=null&&S(e,["setup","generationConfig","mediaResolution"],d);const m=v(t,["seed"]);e!==void 0&&m!=null&&S(e,["setup","generationConfig","seed"],m);const p=v(t,["speechConfig"]);e!==void 0&&p!=null&&S(e,["setup","generationConfig","speechConfig"],ET(p));const y=v(t,["thinkingConfig"]);e!==void 0&&y!=null&&S(e,["setup","generationConfig","thinkingConfig"],y);const x=v(t,["enableAffectiveDialog"]);e!==void 0&&x!=null&&S(e,["setup","generationConfig","enableAffectiveDialog"],x);const _=v(t,["systemInstruction"]);e!==void 0&&_!=null&&S(e,["setup","systemInstruction"],ahe(hr(_)));const T=v(t,["tools"]);if(e!==void 0&&T!=null){let V=vd(T);Array.isArray(V)&&(V=V.map(I=>phe(yd(I)))),S(e,["setup","tools"],V)}const C=v(t,["sessionResumption"]);e!==void 0&&C!=null&&S(e,["setup","sessionResumption"],mhe(C));const N=v(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&S(e,["setup","inputAudioTranscription"],N);const M=v(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&S(e,["setup","outputAudioTranscription"],M);const P=v(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&S(e,["setup","realtimeInputConfig"],P);const L=v(t,["contextWindowCompression"]);e!==void 0&&L!=null&&S(e,["setup","contextWindowCompression"],L);const j=v(t,["proactivity"]);return e!==void 0&&j!=null&&S(e,["setup","proactivity"],j),n}function fhe(t,e){const n={},r=v(e,["model"]);r!=null&&S(n,["setup","model"],mt(t,r));const i=v(e,["config"]);return i!=null&&S(n,["config"],dhe(i,n)),n}function hhe(t){const e={},n=v(t,["videoMetadata"]);n!=null&&S(e,["videoMetadata"],n);const r=v(t,["thought"]);r!=null&&S(e,["thought"],r);const i=v(t,["inlineData"]);i!=null&&S(e,["inlineData"],ihe(i));const a=v(t,["fileData"]);a!=null&&S(e,["fileData"],lhe(a));const o=v(t,["thoughtSignature"]);o!=null&&S(e,["thoughtSignature"],o);const c=v(t,["functionCall"]);c!=null&&S(e,["functionCall"],c);const u=v(t,["codeExecutionResult"]);u!=null&&S(e,["codeExecutionResult"],u);const d=v(t,["executableCode"]);d!=null&&S(e,["executableCode"],d);const m=v(t,["functionResponse"]);m!=null&&S(e,["functionResponse"],m);const p=v(t,["text"]);return p!=null&&S(e,["text"],p),e}function mhe(t){const e={},n=v(t,["handle"]);if(n!=null&&S(e,["handle"],n),v(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function phe(t){const e={},n=v(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(m=>m)),S(e,["functionDeclarations"],d)}if(v(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=v(t,["googleSearch"]);r!=null&&S(e,["googleSearch"],uhe(r));const i=v(t,["googleSearchRetrieval"]);if(i!=null&&S(e,["googleSearchRetrieval"],i),v(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=v(t,["googleMaps"]);a!=null&&S(e,["googleMaps"],che(a));const o=v(t,["urlContext"]);o!=null&&S(e,["urlContext"],o);const c=v(t,["computerUse"]);c!=null&&S(e,["computerUse"],c);const u=v(t,["codeExecution"]);return u!=null&&S(e,["codeExecution"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ghe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function yhe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=ghe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const u=[];a&&u.push(a),c.length>0&&u.push(...c),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class vhe extends vc{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=ohe(this.apiClient,e);a=ke("auth_tokens",c._url),o=c._query,delete c.config,delete c._url,delete c._query;const u=yhe(c,e.config);return i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xhe(t,e){const n={},r=v(t,["name"]);return r!=null&&S(n,["_url","name"],r),n}function bhe(t,e){const n={},r=v(t,["name"]);return r!=null&&S(n,["_url","name"],r),n}function whe(t,e,n){const r={};if(v(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=v(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&S(e,["displayName"],i),v(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=v(t,["epochCount"]);e!==void 0&&a!=null&&S(e,["tuningTask","hyperparameters","epochCount"],a);const o=v(t,["learningRateMultiplier"]);if(o!=null&&S(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),v(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(v(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(v(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=v(t,["batchSize"]);e!==void 0&&c!=null&&S(e,["tuningTask","hyperparameters","batchSize"],c);const u=v(t,["learningRate"]);if(e!==void 0&&u!=null&&S(e,["tuningTask","hyperparameters","learningRate"],u),v(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return r}function She(t,e,n){const r={},i=v(t,["validationDataset"]);e!==void 0&&i!=null&&S(e,["supervisedTuningSpec"],Lhe(i));const a=v(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&S(e,["tunedModelDisplayName"],a);const o=v(t,["description"]);e!==void 0&&o!=null&&S(e,["description"],o);const c=v(t,["epochCount"]);e!==void 0&&c!=null&&S(e,["supervisedTuningSpec","hyperParameters","epochCount"],c);const u=v(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&S(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const d=v(t,["exportLastCheckpointOnly"]);e!==void 0&&d!=null&&S(e,["supervisedTuningSpec","exportLastCheckpointOnly"],d);const m=v(t,["adapterSize"]);if(e!==void 0&&m!=null&&S(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m),v(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(v(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=v(t,["labels"]);return e!==void 0&&p!=null&&S(e,["labels"],p),r}function _he(t,e){const n={},r=v(t,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=v(t,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const a=v(t,["trainingDataset"]);a!=null&&S(n,["tuningTask","trainingData"],Mhe(a));const o=v(t,["config"]);return o!=null&&whe(o,n),n}function Ahe(t,e){const n={},r=v(t,["baseModel"]);r!=null&&S(n,["baseModel"],r);const i=v(t,["preTunedModel"]);i!=null&&S(n,["preTunedModel"],i);const a=v(t,["trainingDataset"]);a!=null&&jhe(a,n);const o=v(t,["config"]);return o!=null&&She(o,n),n}function The(t,e){const n={},r=v(t,["name"]);return r!=null&&S(n,["_url","name"],r),n}function Ehe(t,e){const n={},r=v(t,["name"]);return r!=null&&S(n,["_url","name"],r),n}function Che(t,e,n){const r={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&S(e,["_query","pageSize"],i);const a=v(t,["pageToken"]);e!==void 0&&a!=null&&S(e,["_query","pageToken"],a);const o=v(t,["filter"]);return e!==void 0&&o!=null&&S(e,["_query","filter"],o),r}function Nhe(t,e,n){const r={},i=v(t,["pageSize"]);e!==void 0&&i!=null&&S(e,["_query","pageSize"],i);const a=v(t,["pageToken"]);e!==void 0&&a!=null&&S(e,["_query","pageToken"],a);const o=v(t,["filter"]);return e!==void 0&&o!=null&&S(e,["_query","filter"],o),r}function khe(t,e){const n={},r=v(t,["config"]);return r!=null&&Che(r,n),n}function Ihe(t,e){const n={},r=v(t,["config"]);return r!=null&&Nhe(r,n),n}function Phe(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=v(t,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const a=v(t,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>HU(c))),S(n,["tuningJobs"],o)}return n}function Dhe(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=v(t,["nextPageToken"]);i!=null&&S(n,["nextPageToken"],i);const a=v(t,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>U_(c))),S(n,["tuningJobs"],o)}return n}function Rhe(t,e){const n={},r=v(t,["name"]);r!=null&&S(n,["model"],r);const i=v(t,["name"]);return i!=null&&S(n,["endpoint"],i),n}function Mhe(t,e){const n={};if(v(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(v(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=v(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),S(n,["examples","examples"],i)}return n}function jhe(t,e,n){const r={},i=v(t,["gcsUri"]);e!==void 0&&i!=null&&S(e,["supervisedTuningSpec","trainingDatasetUri"],i);const a=v(t,["vertexDatasetResource"]);if(e!==void 0&&a!=null&&S(e,["supervisedTuningSpec","trainingDatasetUri"],a),v(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function HU(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=v(t,["name"]);i!=null&&S(n,["name"],i);const a=v(t,["state"]);a!=null&&S(n,["state"],TU(a));const o=v(t,["createTime"]);o!=null&&S(n,["createTime"],o);const c=v(t,["tuningTask","startTime"]);c!=null&&S(n,["startTime"],c);const u=v(t,["tuningTask","completeTime"]);u!=null&&S(n,["endTime"],u);const d=v(t,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=v(t,["description"]);m!=null&&S(n,["description"],m);const p=v(t,["baseModel"]);p!=null&&S(n,["baseModel"],p);const y=v(t,["_self"]);return y!=null&&S(n,["tunedModel"],Rhe(y)),n}function U_(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=v(t,["name"]);i!=null&&S(n,["name"],i);const a=v(t,["state"]);a!=null&&S(n,["state"],TU(a));const o=v(t,["createTime"]);o!=null&&S(n,["createTime"],o);const c=v(t,["startTime"]);c!=null&&S(n,["startTime"],c);const u=v(t,["endTime"]);u!=null&&S(n,["endTime"],u);const d=v(t,["updateTime"]);d!=null&&S(n,["updateTime"],d);const m=v(t,["error"]);m!=null&&S(n,["error"],m);const p=v(t,["description"]);p!=null&&S(n,["description"],p);const y=v(t,["baseModel"]);y!=null&&S(n,["baseModel"],y);const x=v(t,["tunedModel"]);x!=null&&S(n,["tunedModel"],x);const _=v(t,["preTunedModel"]);_!=null&&S(n,["preTunedModel"],_);const T=v(t,["supervisedTuningSpec"]);T!=null&&S(n,["supervisedTuningSpec"],T);const C=v(t,["tuningDataStats"]);C!=null&&S(n,["tuningDataStats"],C);const N=v(t,["encryptionSpec"]);N!=null&&S(n,["encryptionSpec"],N);const M=v(t,["partnerModelTuningSpec"]);M!=null&&S(n,["partnerModelTuningSpec"],M);const P=v(t,["customBaseModel"]);P!=null&&S(n,["customBaseModel"],P);const L=v(t,["experiment"]);L!=null&&S(n,["experiment"],L);const j=v(t,["labels"]);j!=null&&S(n,["labels"],j);const V=v(t,["outputUri"]);V!=null&&S(n,["outputUri"],V);const I=v(t,["pipelineJob"]);I!=null&&S(n,["pipelineJob"],I);const R=v(t,["serviceAccount"]);R!=null&&S(n,["serviceAccount"],R);const U=v(t,["tunedModelDisplayName"]);U!=null&&S(n,["tunedModelDisplayName"],U);const F=v(t,["veoTuningSpec"]);return F!=null&&S(n,["veoTuningSpec"],F),n}function Ohe(t,e){const n={},r=v(t,["sdkHttpResponse"]);r!=null&&S(n,["sdkHttpResponse"],r);const i=v(t,["name"]);i!=null&&S(n,["name"],i);const a=v(t,["metadata"]);a!=null&&S(n,["metadata"],a);const o=v(t,["done"]);o!=null&&S(n,["done"],o);const c=v(t,["error"]);return c!=null&&S(n,["error"],c),n}function Lhe(t,e){const n={},r=v(t,["gcsUri"]);r!=null&&S(n,["validationDatasetUri"],r);const i=v(t,["vertexDatasetResource"]);return i!=null&&S(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uhe extends vc{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new rm(oc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:P_.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Ehe(e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>U_(m))}else{const d=The(e);return c=ke("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>HU(m))}}async listInternal(e){var n,r,i,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Ihe(e);return c=ke("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Dhe(m),y=new yM;return Object.assign(y,p),y})}else{const d=khe(e);return c=ke("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(m=>m.json().then(p=>{const y=p;return y.sdkHttpResponse={headers:m.headers},y})),o.then(m=>{const p=Phe(m),y=new yM;return Object.assign(y,p),y})}}async cancel(e){var n,r,i,a;let o="",c={};if(this.apiClient.isVertexAI()){const u=bhe(e);o=ke("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=xhe(e);o=ke("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI()){const c=Ahe(e);return a=ke("tuningJobs",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>U_(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_he(e);return a=ke("tunedModels",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(d=>{const m=d;return m.sdkHttpResponse={headers:u.headers},m})),i.then(u=>Ohe(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vhe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Fhe=1024*1024*8,Bhe=3,zhe=1e3,qhe=2,lS="x-goog-upload-status";async function Hhe(t,e,n){var r,i,a;let o=0,c=0,u=new D_(new Response),d="upload";for(o=t.size;c<o;){const p=Math.min(Fhe,o-c),y=t.slice(c,c+p);c+p>=o&&(d+=", finalize");let x=0,_=zhe;for(;x<Bhe&&(u=await n.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((r=u==null?void 0:u.headers)===null||r===void 0)&&r[lS]));)x++,await Ghe(_),_=_*qhe;if(c+=p,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[lS])!=="active")break;if(o<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const m=await(u==null?void 0:u.json());if(((a=u==null?void 0:u.headers)===null||a===void 0?void 0:a[lS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return m.file}async function $he(t){return{size:t.size,type:t.type}}function Ghe(t){return new Promise(e=>setTimeout(e,t))}class Khe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hhe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $he(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yhe{create(e,n,r){return new Whe(e,n,r)}}class Whe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LM="x-goog-api-key";class Jhe{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(LM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qhe="gl-node/";class Xhe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=gle(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new Jhe(this.apiKey);this.apiClient=new Ofe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Qhe+"web",uploader:new Khe,downloader:new Vhe}),this.models=new nhe(this.apiClient),this.live=new Wfe(this.apiClient,i,new Yhe),this.batches=new jce(this.apiClient),this.chats=new hue(this.models,this.apiClient),this.caches=new uue(this.apiClient),this.files=new _ue(this.apiClient),this.operations=new rhe(this.apiClient),this.authTokens=new vhe(this.apiClient),this.tunings=new Uhe(this.apiClient)}}const Zhe="PLACEHOLDER_API_KEY";class eme{constructor(){this._ai=null,this._ai=new Xhe({apiKey:Zhe})}async suggestActionPlan(e){if(!this._ai)throw new Error("AI Service not initialized.");const n=`Based on the following non-compliant healthcare accreditation standard, suggest a concise, professional, and actionable plan with 3-4 numbered steps to achieve compliance. Standard: "${e}"`;return(await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:n})).text}async suggestRootCause(e,n){if(!this._ai)throw new Error("AI Service not initialized.");const r=`A healthcare accreditation standard was found to be non-compliant. Analyze the standard and the auditor's notes to suggest potential root causes. Provide a structured response with 2-3 likely root causes, categorized if possible (e.g., Process Failure, Human Error, Training Gap, System Issue).
        
        Standard: "${e}"
        Auditor's Notes: "${n}"
        
        Provide your analysis below:`;return(await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async generatePolicyFromStandard(e,n){if(!this._ai)throw new Error("AI Service not initialized.");const r=`Generate a formal, well-structured policy document based on this healthcare accreditation standard. Include sections for Purpose, Scope, Policy, and Procedure. Standard ID: ${e.standardId}. Description: "${e.description}". Respond in ${n==="en"?"English":"Arabic"}.`;return(await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async improveWriting(e,n){if(!this._ai)throw new Error("AI Service not initialized.");const r=`Improve the following text for clarity, professionalism, and conciseness, while preserving its original meaning. Respond in ${n==="en"?"English":"Arabic"}. Text: "${e}"`;return(await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:r})).text}async translateText(e,n){if(!this._ai)throw new Error("AI Service not initialized.");const i=`Translate the following text to ${n==="en"?"Arabic":"English"}: "${e}"`;return(await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:i})).text}async generateQualityBriefing(e,n,r,i,a){if(!this._ai)throw new Error("AI Service not initialized.");const o=`There are ${e.length} projects. Key projects include ${e.slice(0,2).map(p=>p.name).join(", ")}. Overall compliance is around ${(e.length>0?e.reduce((p,y)=>p+y.progress,0)/e.length:0).toFixed(1)}%.`,c=`There are ${n.length} open risks. High-impact risks include: ${n.filter(p=>p.impact>=4).slice(0,2).map(p=>p.title).join(", ")}.`,u=`You are a healthcare quality management consultant. Based on the following summarized data, provide a concise executive briefing.
        - Identify 2-3 key organizational strengths.
        - Identify 2-3 primary areas for improvement or concern.
        - Provide 2 actionable, high-level recommendations.
        
        Data:
        - ${o}
        - ${c}
        - Total departments: ${i.length}.
        - Total staff: ${r.length}.
        
        Format your response as a JSON object with keys "strengths" (array of strings), "concerns" (array of strings), and "recommendations" (array of objects with "title" and "details" string properties).`,d={type:er.OBJECT,properties:{strengths:{type:er.ARRAY,items:{type:er.STRING}},concerns:{type:er.ARRAY,items:{type:er.STRING}},recommendations:{type:er.ARRAY,items:{type:er.OBJECT,properties:{title:{type:er.STRING},details:{type:er.STRING}},required:["title","details"]}}},required:["strengths","concerns","recommendations"]},m=await this._ai.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{responseMimeType:"application/json",responseSchema:d}});return JSON.parse(m.text)}}const Co=new eme;class tme{constructor(){this.authenticateUser=(e,n)=>he.findUserByCredentials(e,n),this.getAppSettings=()=>he.getAppSettings(),this.updateAppSettings=e=>he.updateAppSettings(e),this.getUsers=()=>he.getUsers(),this.updateUser=e=>he.updateUser(e),this.addUser=e=>he.addUser(e),this.deleteUser=e=>he.deleteUser(e),this.getProjects=()=>he.getProjects(),this.updateProject=e=>he.updateProject(e),this.addProject=e=>he.addProject(e),this.deleteProject=e=>he.deleteProject(e),this.finalizeProject=(e,n)=>he.finalizeProject(e,n),this.updateChecklistItem=(e,n,r)=>he.updateChecklistItem(e,n,r),this.addCommentToChecklistItem=(e,n,r,i)=>he.addCommentToChecklistItem(e,n,r,i),this.createEvidenceAndLink=(e,n,r)=>he.createEvidenceAndLink(e,n,r),this.updateCapaReport=(e,n)=>he.updateCapaReport(e,n),this.getDocuments=()=>he.getDocuments(),this.addDocument=e=>he.addDocument(e),this.updateDocument=e=>he.updateDocument(e),this.deleteDocument=e=>he.deleteDocument(e),this.approveDocument=(e,n)=>he.approveDocument(e,n),this.addProcessMap=e=>he.addProcessMap(e),this.getStandards=()=>he.getStandards(),this.getPrograms=()=>he.getPrograms(),this.addProgram=e=>he.addProgram(e),this.updateProgram=e=>he.updateProgram(e),this.deleteProgram=e=>he.deleteProgram(e),this.addStandard=e=>he.addStandard(e),this.updateStandard=e=>he.updateStandard(e),this.deleteStandard=(e,n)=>he.deleteStandard(e,n),this.importStandards=(e,n)=>he.importStandards(e,n),this.getDepartments=()=>he.getDepartments(),this.addDepartment=e=>he.addDepartment(e),this.updateDepartment=e=>he.updateDepartment(e),this.deleteDepartment=e=>he.deleteDepartment(e),this.getTrainings=()=>he.getTrainings(),this.addTraining=e=>he.addTraining(e),this.updateTraining=e=>he.updateTraining(e),this.deleteTraining=e=>he.deleteTraining(e),this.assignTraining=e=>he.assignTraining(e),this.getRisks=()=>he.getRisks(),this.addRisk=e=>he.addRisk(e),this.updateRisk=e=>he.updateRisk(e),this.deleteRisk=e=>he.deleteRisk(e),this.getIncidents=()=>he.getIncidents(),this.addIncident=e=>he.addIncident(e),this.updateIncident=e=>he.updateIncident(e),this.deleteIncident=e=>he.deleteIncident(e),this.getCompetencies=()=>he.getCompetencies(),this.addCompetency=e=>he.addCompetency(e),this.updateCompetency=e=>he.updateCompetency(e),this.deleteCompetency=e=>he.deleteCompetency(e),this.getCustomEvents=()=>he.getCustomEvents(),this.addCustomEvent=e=>he.addCustomEvent(e),this.updateCustomEvent=e=>he.updateCustomEvent(e),this.deleteCustomEvent=e=>he.deleteCustomEvent(e),this.generateQualityBriefing=(e,n,r,i,a)=>Co.generateQualityBriefing(e,n,r,i,a),this.suggestActionPlan=e=>Co.suggestActionPlan(e),this.suggestRootCause=(e,n)=>Co.suggestRootCause(e,n),this.generatePolicyFromStandard=(e,n)=>Co.generatePolicyFromStandard(e,n)}}const nme=new tme,rme=({projects:t,risks:e,users:n,departments:r,competencies:i})=>{const{t:a}=ce(),[o,c]=E.useState(null),[u,d]=E.useState(!1),[m,p]=E.useState(""),y=async()=>{d(!0),p(""),c(null);try{const _=await nme.generateQualityBriefing(t,e,n,r,i);c(_)}catch(_){p(a("briefingError")),console.error(_)}finally{d(!1)}},x=()=>f.jsxs("div",{className:"space-y-6 animate-pulse",children:[f.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),f.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]}),f.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),f.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"})]})]});return f.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 dark:from-indigo-900/50 to-purple-50 dark:to-purple-900/50 p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary flex items-center gap-2",children:[f.jsx(ah,{className:"w-6 h-6 text-brand-primary"}),a("aiQualityBriefing")]}),f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1 max-w-2xl",children:a("aiQualityBriefingDescription")})]}),f.jsxs("button",{onClick:y,disabled:u,className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center font-semibold shadow-sm w-full sm:w-auto disabled:bg-indigo-400 disabled:cursor-wait",children:[f.jsx(ah,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),a(u?"generatingBriefing":"generateBriefing")]})]}),f.jsxs("div",{className:"mt-6 border-t border-indigo-200 dark:border-indigo-800 pt-6",children:[u&&x(),m&&f.jsx("p",{className:"text-red-500 text-center",children:m}),o&&f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-[fadeInUp_0.5s_ease-out]",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-green-700 dark:text-green-300",children:[f.jsx(_O,{className:"w-5 h-5"}),a("strengths")]}),f.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:o.strengths.map((_,T)=>f.jsx("li",{children:_},`s-${T}`))})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-amber-700 dark:text-amber-300",children:[f.jsx(Yo,{className:"w-5 h-5"}),a("areasForImprovement")]}),f.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:o.concerns.map((_,T)=>f.jsx("li",{children:_},`c-${T}`))})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[f.jsx(Ph,{className:"w-5 h-5"}),a("recommendations")]}),f.jsx("ul",{className:"space-y-3 text-sm",children:o.recommendations.map((_,T)=>f.jsxs("li",{className:"bg-white/50 dark:bg-black/20 p-3 rounded-lg",children:[f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:_.title}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:_.details})]},`r-${T}`))})]})]})]})]})},ime=t=>{const{t:e}=ce(),n=E.useMemo(()=>{const r=t.projects.flatMap(a=>a.capaReports).filter(a=>{var o;return((o=a.effectivenessCheck)==null?void 0:o.required)&&!a.effectivenessCheck.completed}).length,i=t.users.flatMap(a=>a.readAndAcknowledge||[]).filter(a=>!a.acknowledgedDate).length;return{pendingChecks:r,pendingAcks:i}},[t.projects,t.users]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Ph,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:e("qualityInsightsHub")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:e("qualityInsightsDescription")})]})]}),f.jsx(rme,{projects:t.projects,risks:t.risks,users:t.users,departments:t.departments,competencies:t.competencies}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsx(fr,{title:e("pendingEffectivenessChecks"),value:n.pendingChecks,icon:hs,color:"from-amber-500 to-amber-700 bg-gradient-to-br"}),f.jsx(fr,{title:e("pendingAcknowledgements"),value:n.pendingAcks,icon:ja,color:"from-sky-500 to-sky-700 bg-gradient-to-br"})]}),f.jsx(ule,{projects:t.projects,risks:t.risks}),f.jsx(fle,{projects:t.projects,risks:t.risks,departments:t.departments,users:t.users,userTrainingStatuses:t.userTrainingStatuses}),f.jsx(dle,{departments:t.departments,users:t.users,competencies:t.competencies})]})},ame=({currentDate:t,setCurrentDate:e,view:n,setView:r,onAddEvent:i})=>{const{t:a,lang:o}=ce(),c=p=>{e(new Date(t.getFullYear(),t.getMonth()+p,1))},u=p=>{e(new Date(t.getFullYear()+p,t.getMonth(),1))},d=()=>{e(new Date)},m=[{id:"month",label:a("month")},{id:"agenda",label:a("agenda")},{id:"year",label:a("year")}];return f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-semibold border rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:a("today")}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{onClick:()=>n==="year"?u(-1):c(-1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:f.jsx(Pg,{className:"w-5 h-5"})}),f.jsx("span",{className:"font-semibold w-36 text-center",children:n==="year"?t.getFullYear():t.toLocaleString(o==="ar"?"ar-OM":"en-US",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>n==="year"?u(1):c(1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:f.jsx(Dg,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:m.map(p=>f.jsx("button",{onClick:()=>r(p.id),className:`px-3 py-1 text-sm font-semibold rounded-md ${n===p.id?"bg-white dark:bg-gray-700 shadow-sm":""}`,children:p.label},p.id))}),f.jsx("button",{onClick:i,className:"bg-brand-primary text-white p-2 rounded-lg hover:bg-indigo-700",children:f.jsx(Rn,{className:"w-5 h-5"})})]})]})},sme=({currentDate:t,events:e,onDayClick:n,onEventClick:r})=>{const{lang:i}=ce(),a=new Date(t.getFullYear(),t.getMonth(),1).getDay(),o=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),c=i==="ar"?["","","","","","",""]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return f.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[c.map(u=>f.jsx("div",{className:"text-center font-semibold text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary py-2",children:u},u)),Array.from({length:a}).map((u,d)=>f.jsx("div",{className:"border rounded-md dark:border-dark-brand-border bg-gray-50 dark:bg-gray-900/50"},`empty-${d}`)),Array.from({length:o}).map((u,d)=>{const m=d+1,p=new Date(t.getFullYear(),t.getMonth(),m),y=p.toDateString()===new Date().toDateString(),x=e.filter(_=>{const T=new Date(_.date);return T.getFullYear()===p.getFullYear()&&T.getMonth()===p.getMonth()&&T.getDate()===p.getDate()});return f.jsxs("button",{onClick:()=>n(m),className:"border rounded-md dark:border-dark-brand-border p-1.5 min-h-[120px] flex flex-col relative group bg-white dark:bg-dark-brand-surface hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors text-left align-top focus:outline-none focus:ring-2 focus:ring-brand-primary z-0 hover:z-10",children:[f.jsx("time",{dateTime:p.toISOString(),className:`font-semibold text-xs sm:text-sm ${y?"bg-brand-primary text-white rounded-full flex items-center justify-center h-6 w-6":""}`,children:m}),f.jsxs("div",{className:"mt-1 space-y-1 flex-grow overflow-hidden",children:[x.slice(0,3).map(_=>f.jsx("div",{onClick:T=>{T.stopPropagation(),r(_)},className:`text-white text-[10px] sm:text-xs p-1 rounded-md ${_.color} truncate flex items-center gap-1 cursor-pointer`,title:_.title,children:f.jsx("span",{className:"truncate",children:_.title})},_.id)),x.length>3&&f.jsxs("div",{className:"text-xs text-center text-gray-500 mt-1",children:["+",x.length-3," more"]})]})]},m)})]})},ome=({currentDate:t,events:e,onEventClick:n})=>{const{t:r,lang:i}=ce(),a=E.useMemo(()=>{const o=new Date(t.getFullYear(),t.getMonth(),1),c=new Date(t.getFullYear(),t.getMonth()+1,0);return e.filter(d=>{const m=new Date(d.date);return m>=o&&m<=c}).sort((d,m)=>new Date(d.date).getTime()-new Date(m.date).getTime()).reduce((d,m)=>{const p=new Date(m.date).toDateString();return d[p]||(d[p]=[]),d[p].push(m),d},{})},[e,t]);return f.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-2 space-y-4",children:Object.entries(a).length>0?Object.entries(a).map(([o,c])=>f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary text-sm pb-2 border-b-2 mb-2",children:new Date(o).toLocaleDateString(i==="ar"?"ar-OM":"en-US",{weekday:"long",month:"long",day:"numeric"})}),f.jsx("div",{className:"space-y-2",children:c.map(u=>f.jsxs("button",{onClick:()=>n(u),className:"w-full text-left p-3 rounded-md border-l-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",style:{borderLeftColor:u.color.startsWith("#")?u.color:"currentColor"},children:[f.jsx("p",{className:"font-semibold text-sm",children:u.title}),f.jsx("p",{className:"text-xs text-gray-500",children:r(u.type.charAt(0).toLowerCase()+u.type.slice(1))})]},u.id))})]},o)):f.jsx("p",{className:"text-center text-sm text-gray-500 py-16",children:r("noEventsForMonth")})})},lme=({currentDate:t,events:e,setCurrentDate:n,setView:r})=>{const{lang:i}=ce(),a=t.getFullYear(),o=Array.from({length:12},(m,p)=>new Date(a,p,1)),c=i==="ar"?["","","","","","",""]:["S","M","T","W","T","F","S"],u=m=>e.filter(p=>{const y=new Date(p.date);return y.getFullYear()===a&&y.getMonth()===m}),d=m=>{n(new Date(a,m,1)),r("month")};return f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((m,p)=>{const y=u(p),x=new Set(y.map(C=>new Date(C.date).getDate())),_=m.getDay(),T=new Date(a,p+1,0).getDate();return f.jsxs("div",{onClick:()=>d(p),className:"p-3 border rounded-lg dark:border-dark-brand-border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[f.jsx("h4",{className:"font-semibold text-center text-sm text-brand-primary mb-2",children:m.toLocaleString(i==="ar"?"ar-OM":"en-US",{month:"long"})}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-400",children:c.map((C,N)=>f.jsx("div",{children:C},N))}),f.jsxs("div",{className:"grid grid-cols-7 gap-1 mt-1",children:[Array.from({length:_}).map((C,N)=>f.jsx("div",{},`empty-${N}`)),Array.from({length:T}).map((C,N)=>{const M=N+1,P=x.has(M);return f.jsx("div",{className:`w-6 h-6 flex items-center justify-center rounded-full text-xs ${P?"bg-indigo-200 dark:bg-indigo-900/50":""}`,children:M},M)})]})]},p)})})},Fo=({date:t,setDate:e,disabled:n,fromDate:r,toDate:i})=>{const{t:a,lang:o}=ce(),[c,u]=E.useState(!1),[d,m]=E.useState(t||new Date),p=E.useRef(null);E.useEffect(()=>{function N(M){p.current&&!p.current.contains(M.target)&&u(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[p]);const y=N=>{e(N),u(!1)},x=N=>{m(M=>new Date(M.getFullYear(),M.getMonth()+N,1))},_=new Date(d.getFullYear(),d.getMonth(),1).getDay(),T=new Date(d.getFullYear(),d.getMonth()+1,0).getDate(),C=o==="ar"?["","","","","","",""]:["Su","Mo","Tu","We","Th","Fr","Sa"];return f.jsxs("div",{className:"relative w-full",ref:p,children:[f.jsxs("button",{type:"button",onClick:()=>u(!c),disabled:n,className:"w-full h-10 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-primary focus:border-brand-primary sm:text-sm bg-white dark:bg-gray-700 dark:text-white disabled:bg-gray-100 disabled:dark:bg-gray-800 disabled:cursor-not-allowed flex justify-between items-center",children:[f.jsx("span",{children:t?t.toLocaleDateString(o==="ar"?"ar-EG":"en-US"):f.jsx("span",{className:"text-gray-400",children:a("selectDate")})}),f.jsx(Ih,{className:"h-5 w-5 text-gray-400"})]}),c&&!n&&f.jsxs("div",{className:"absolute z-10 mt-2 bg-white dark:bg-dark-brand-surface rounded-md shadow-lg border border-gray-200 dark:border-dark-brand-border p-3",children:[f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsx("button",{type:"button",onClick:()=>x(-1),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:f.jsx(Pg,{className:"w-5 h-5"})}),f.jsx("span",{className:"font-semibold text-sm",children:d.toLocaleString(o==="ar"?"ar-OM":"en-US",{month:"long",year:"numeric"})}),f.jsx("button",{type:"button",onClick:()=>x(1),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:f.jsx(Dg,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500",children:C.map(N=>f.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:N},N))}),f.jsxs("div",{className:"grid grid-cols-7 gap-1 mt-1",children:[Array.from({length:_}).map((N,M)=>f.jsx("div",{},`empty-${M}`)),Array.from({length:T}).map((N,M)=>{const P=M+1,L=new Date(d.getFullYear(),d.getMonth(),P),j=(t==null?void 0:t.toDateString())===L.toDateString(),V=new Date().toDateString()===L.toDateString(),I=r&&L<r||i&&L>i;let R="w-8 h-8 flex items-center justify-center rounded-full text-sm transition-colors ";return I?R+="text-gray-400 cursor-not-allowed":j?R+="bg-brand-primary text-white font-bold":V?R+="bg-indigo-100 dark:bg-indigo-900/50 text-brand-primary":R+="hover:bg-gray-100 dark:hover:bg-gray-700",f.jsx("button",{type:"button",onClick:()=>y(L),disabled:I,className:R,children:P},P)})]})]})]})},Cn=({isOpen:t,onClose:e,title:n,children:r,footer:i,size:a="md",maxHeight:o})=>{const{dir:c}=ce();if(!t)return null;const u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl","7xl":"max-w-7xl"},d=o?{height:o,maxHeight:o}:{};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40 flex justify-center items-center backdrop-blur-sm modal-enter",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:f.jsxs("div",{className:`bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-xl w-full m-4 modal-content-enter border border-brand-border dark:border-dark-brand-border flex flex-col ${u[a]}`,style:d,onClick:m=>m.stopPropagation(),dir:c,children:[f.jsxs("header",{className:"p-6 border-b dark:border-dark-brand-border flex justify-between items-center flex-shrink-0",children:[f.jsx("h3",{id:"modal-title",className:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100",children:n}),f.jsx("button",{onClick:e,className:"p-1 rounded-full text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:f.jsx(td,{className:"w-5 h-5"})})]}),f.jsx("main",{className:"p-6 overflow-y-auto flex-grow",children:r}),i&&f.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900/50 px-4 sm:px-6 py-3 flex flex-wrap justify-end gap-3 rounded-b-lg border-t dark:border-dark-brand-border flex-shrink-0",children:i})]})})},ye="block text-sm font-medium text-gray-700 dark:text-gray-300",xe="mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-primary focus:border-brand-primary sm:text-sm bg-white dark:bg-gray-700 dark:text-white",$U={JCI:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",DNV:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",HFAP:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300",CBAHI:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",OSAHI:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",OHAP:"bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300",NHRA:"bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300"},cme=({isOpen:t,onClose:e,onSave:n,onDelete:r,selectedDate:i,eventToEdit:a})=>{const{t:o}=ce(),c=!!a,[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState(""),[_,T]=E.useState(""),[C,N]=E.useState();E.useEffect(()=>{var L,j;a?(d(a.title.en),p(a.title.ar),x(((L=a.description)==null?void 0:L.en)||""),T(((j=a.description)==null?void 0:j.ar)||""),N(new Date(a.date))):(d(""),p(""),x(""),T(""),N(i))},[a,i,t]);const M=L=>{L.preventDefault(),!(!u||!m||!C)&&n({date:C.toISOString().split("T")[0],title:{en:u,ar:m},description:{en:y,ar:_}},a==null?void 0:a.id)},P=f.jsxs("div",{className:"w-full flex justify-between items-center",children:[f.jsx("div",{children:c&&f.jsxs("button",{type:"button",onClick:()=>r(a.id),className:"text-red-600 hover:text-red-800 text-sm font-medium flex items-center gap-1",children:[f.jsx(Ar,{className:"w-4 h-4"}),o("delete")]})}),f.jsxs("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse",children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md text-sm",children:o("cancel")}),f.jsx("button",{type:"submit",form:"event-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:o("save")})]})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o(c?"editEvent":"createEvent"),footer:P,children:f.jsxs("form",{id:"event-form",onSubmit:M,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"date",className:ye,children:o("eventDate")}),f.jsx(Fo,{date:C,setDate:N})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"titleEn",className:ye,children:o("eventTitleEn")}),f.jsx("input",{type:"text",value:u,onChange:L=>d(L.target.value),id:"titleEn",className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"titleAr",className:ye,children:o("eventTitleAr")}),f.jsx("input",{type:"text",value:m,onChange:L=>p(L.target.value),id:"titleAr",className:xe,required:!0,dir:"rtl"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descEn",className:ye,children:o("eventDescriptionEn")}),f.jsx("textarea",{value:y,onChange:L=>x(L.target.value),id:"descEn",rows:2,className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descAr",className:ye,children:o("eventDescriptionAr")}),f.jsx("textarea",{value:_,onChange:L=>T(L.target.value),id:"descAr",rows:2,className:xe,dir:"rtl"})]})]})})},ume=({isOpen:t,onClose:e,date:n,events:r,onAddEvent:i,onEventClick:a})=>{const{t:o,lang:c}=ce();return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center backdrop-blur-sm modal-enter",onClick:e,children:f.jsxs("div",{className:"bg-white dark:bg-dark-brand-surface rounded-lg shadow-xl w-full max-w-md m-4 modal-content-enter",onClick:u=>u.stopPropagation(),children:[f.jsxs("header",{className:"p-4 border-b dark:border-dark-brand-border flex justify-between items-center",children:[f.jsx("h3",{className:"font-semibold",children:n.toLocaleDateString(c==="ar"?"ar-OM":"en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),f.jsx("button",{onClick:e,className:"p-1 rounded-full text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:f.jsx(td,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"p-4 max-h-96 overflow-y-auto space-y-2",children:r.length>0?r.map(u=>f.jsxs("button",{onClick:()=>a(u),className:`w-full text-left p-2 rounded-md ${u.color} text-white text-sm`,children:[f.jsx("p",{className:"font-semibold",children:u.title}),u.description&&f.jsx("p",{className:"text-xs opacity-80",children:u.description})]},u.id)):f.jsx("p",{className:"text-sm text-center text-gray-500 py-8",children:o("noEventsForDay")})}),f.jsx("footer",{className:"p-4 border-t dark:border-dark-brand-border flex justify-end",children:f.jsxs("button",{onClick:i,className:"bg-brand-primary text-white px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[f.jsx(Rn,{className:"w-4 h-4"}),o("createEvent")]})})]})}):null},og={Project:"bg-blue-500",Document:"bg-green-500",CAPA:"bg-red-500",Custom:"bg-gray-500"},dme=()=>{const{projects:t}=Or(),{documents:e,customEvents:n}=Rt(),{t:r,lang:i}=ce(),a=E.useMemo(()=>t.flatMap(d=>d.endDate?[{id:`project-end-${d.id}`,type:"Project",date:d.endDate,title:`${r("project")} ${r("dueDate")}: ${d.name}`,color:og.Project,link:{view:"projectDetail",projectId:d.id}}]:[]),[t,r]),o=E.useMemo(()=>e.flatMap(d=>d.reviewDate?[{id:`doc-review-${d.id}`,type:"Document",date:d.reviewDate,title:`${r("document")} ${r("review")}: ${d.name[i]}`,color:og.Document,link:{view:"documentControl"}}]:[]),[e,r,i]),c=E.useMemo(()=>t.flatMap(d=>d.capaReports.flatMap(m=>m.dueDate?[{id:`capa-due-${m.id}`,type:"CAPA",date:m.dueDate,title:`${r("capa")} ${r("dueDate")}: ${m.description.substring(0,20)}...`,color:og.CAPA,link:{view:"projectDetail",projectId:d.id}}]:[])),[t,r]),u=E.useMemo(()=>n.map(d=>{var m;return{...d,id:d.id,title:d.title[i],description:(m=d.description)==null?void 0:m[i],color:og.Custom,link:{view:"calendar"}}}),[n,i]);return E.useMemo(()=>[...a,...o,...c,...u],[a,o,c,u])},fme=t=>{const{t:e}=ce(),[n,r]=E.useState(new Date),[i,a]=E.useState("month"),[o,c]=E.useState(!1),[u,d]=E.useState(!1),[m,p]=E.useState(new Date),[y,x]=E.useState(null),_=dme(),T=()=>{x(null),d(!1),c(!0)},C=(V,I)=>{I?t.onUpdateEvent({...V,id:I,type:"Custom"}):t.onAddEvent(V),c(!1)},N=V=>{window.confirm(e("areYouSureDeleteEvent"))&&(t.onDeleteEvent(V),c(!1))},M=V=>{const I=new Date(n.getFullYear(),n.getMonth(),V);p(I),d(!0)},P=V=>{if(V.type==="Custom"){const I=t.customEvents.find(R=>R.id===V.id);I&&(x(I),c(!0))}},L=E.useMemo(()=>_.filter(V=>new Date(V.date).toDateString()===m.toDateString()),[_,m]),j=()=>{switch(i){case"month":return f.jsx(sme,{currentDate:n,events:_,onDayClick:M,onEventClick:P});case"agenda":return f.jsx(ome,{currentDate:n,events:_,onEventClick:P});case"year":return f.jsx(lme,{currentDate:n,events:_,setCurrentDate:r,setView:a});default:return null}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Ih,{className:"h-8 w-8 text-brand-primary"}),f.jsx("div",{children:f.jsx("h1",{className:"text-3xl font-bold",children:e("complianceCalendar")})})]}),f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-lg shadow-sm border border-brand-border dark:border-dark-brand-border",children:[f.jsx(ame,{currentDate:n,setCurrentDate:r,view:i,setView:a,onAddEvent:T}),f.jsx("div",{className:"mt-4",children:j()})]}),f.jsx(cme,{isOpen:o,onClose:()=>c(!1),onSave:C,onDelete:N,selectedDate:m,eventToEdit:y}),f.jsx(ume,{isOpen:u,onClose:()=>d(!1),date:m,events:L,onAddEvent:T,onEventClick:P})]})},hme=({project:t,programName:e,onSelect:n})=>{var a,o;const{t:r}=ce(),i={[ur.InProgress]:{text:r("inProgress"),color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[ur.NotStarted]:{text:r("notStarted"),color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},[ur.OnHold]:{text:r("onHold"),color:"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300"},[ur.Completed]:{text:r("completed"),color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[ur.Finalized]:{text:r("finalized"),color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}};return f.jsxs("div",{onClick:n,className:"bg-brand-surface dark:bg-dark-brand-surface rounded-xl shadow-sm border border-brand-border dark:border-dark-brand-border hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer flex flex-col justify-between h-full",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$U[e]||"bg-gray-100 text-gray-700"}`,children:e}),f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${((a=i[t.status])==null?void 0:a.color)||"bg-gray-100 text-gray-800"}`,children:(o=i[t.status])==null?void 0:o.text})]}),f.jsx("h3",{className:"text-lg font-bold text-brand-text-primary dark:text-dark-brand-text-primary mt-3",children:t.name}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:"text-sm font-medium text-brand-text-secondary dark:text-dark-brand-text-secondary",children:r("compliance")}),f.jsxs("span",{className:"text-sm font-bold text-brand-primary",children:[Math.round(t.progress),"%"]})]}),f.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:f.jsx("div",{className:"bg-brand-primary h-2 rounded-full",style:{width:`${t.progress}%`}})})]})]}),f.jsxs("div",{className:"border-t dark:border-dark-brand-border bg-slate-50 dark:bg-slate-900/50 px-5 py-3 flex justify-between items-center rounded-b-xl",children:[f.jsxs("div",{className:"text-sm",children:[f.jsx("p",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:r("projectLead")}),f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:t.projectLead.name})]}),f.jsx("span",{className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline",children:r("viewDetails")})]})]})},Hi=({icon:t,title:e,message:n})=>f.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-900/50 rounded-lg border-2 border-dashed border-slate-200 dark:border-slate-800 animate-[fadeIn_0.5s_ease-in-out]",children:[f.jsx(t,{className:"mx-auto h-12 w-12 text-slate-400 dark:text-slate-500"}),f.jsx("h3",{className:"mt-4 text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:e}),f.jsx("p",{className:"mt-1 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n})]});function mme(t){return t.charAt(0).toLowerCase()+t.slice(1).replace(/\s/g,"")}const pme=()=>{const{t}=ce(),{projects:e}=Or(),{setNavigation:n,programs:r}=Rt(),{currentUser:i}=Pn(),[a,o]=E.useState(""),[c,u]=E.useState("all"),d=(i==null?void 0:i.role)===Vt.Admin||(i==null?void 0:i.role)===Vt.ProjectLead,m=e.filter(y=>{const x=y.name.toLowerCase().includes(a.toLowerCase()),_=c==="all"||y.status===c;return x&&_}),p=["all",ur.InProgress,ur.NotStarted,ur.OnHold,ur.Completed,ur.Finalized];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(zi,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:t("accreditationProjects")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:t("projectsPageDescription")})]})]}),d&&f.jsxs("button",{onClick:()=>n({view:"createProject"}),className:"bg-brand-primary text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full md:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),t("createNewProject")]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:t("searchProjects"),value:a,onChange:y=>o(y.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm bg-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"})]}),f.jsx("select",{value:c,onChange:y=>u(y.target.value),className:"w-full md:w-48 border border-gray-300 dark:border-gray-600 rounded-lg py-2 px-3 focus:ring-brand-primary focus:border-brand-primary bg-white dark:bg-gray-700 text-sm dark:text-white",children:p.map(y=>f.jsx("option",{value:y,children:t(y==="all"?"allStatuses":mme(y))},y))})]}),m.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(y=>{var x;return f.jsx(hme,{project:y,programName:((x=r.find(_=>_.id===y.programId))==null?void 0:x.name)||"Unknown",onSelect:()=>n({view:"projectDetail",projectId:y.id})},y.id)})}):f.jsx(Hi,{icon:zi,title:t("noProjectsFound"),message:t("noProjectsFoundMessage")})]})},gme=({project:t,programName:e,currentUser:n,onFinalize:r,onGenerateReport:i})=>{const{t:a}=ce(),o=t.status===ur.Finalized,c=n.role===Vt.Admin||n.id===t.projectLead.id;return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$U[e]||"bg-gray-100 text-gray-700"}`,children:e}),o&&t.finalizedBy&&t.finalizationDate&&f.jsx("div",{className:"text-sm text-green-700 bg-green-100 dark:text-green-200 dark:bg-green-900/50 px-3 py-1 rounded-full font-semibold",children:a("signedBy").replace("{name}",t.finalizedBy).replace("{date}",new Date(t.finalizationDate).toLocaleDateString())})]}),f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-2",children:[f.jsx("h1",{className:"text-3xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary mt-2",children:t.name}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[f.jsx("button",{onClick:i,className:"bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-brand-text-primary dark:text-dark-brand-text-primary px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 font-semibold shadow-sm w-full sm:w-auto text-sm",children:a("generateReport")}),c&&!o&&f.jsx("button",{onClick:r,className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 font-semibold shadow-sm w-full sm:w-auto text-sm",children:a("finalizeProject")})]})]}),f.jsxs("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:[a("status"),": ",a(t.status.charAt(0).toLowerCase()+t.status.slice(1).replace(/\s/g,""))]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:"text-sm font-medium text-brand-text-secondary dark:text-dark-brand-text-secondary",children:a("overallCompliance")}),f.jsxs("span",{className:"text-sm font-bold text-brand-primary",children:[Math.round(t.progress),"%"]})]}),f.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:f.jsx("div",{className:"bg-brand-primary h-2.5 rounded-full",style:{width:`${t.progress}%`}})})]})]})},yme=({currentView:t,onSetView:e,isFinalized:n})=>{const{t:r}=ce(),i=[{id:"overview",label:r("overview"),icon:kh},{id:"checklist",label:r("checklist"),icon:hs},{id:"documents",label:r("documents"),icon:Mu},{id:"audit_log",label:r("auditLog"),icon:oh},{id:"mock_surveys",label:r("mockSurveys"),icon:_a},{id:"design_controls",label:r("designControls"),icon:TS}];return f.jsx("aside",{className:"w-full lg:w-64 flex-shrink-0",children:f.jsx("nav",{className:"space-y-1",children:i.map(a=>f.jsxs("button",{onClick:()=>e(a.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200 ${t===a.id?"bg-brand-primary/10 text-brand-primary dark:bg-brand-primary/20":"text-brand-text-secondary hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[f.jsx(a.icon,{className:"w-5 h-5"}),f.jsx("span",{children:a.label})]},a.id))})})},UM=({project:t})=>{const{t:e}=ce(),{theme:n}=Ti(),r=E.useMemo(()=>{const o=t.checklist.length,c=t.checklist.filter(p=>p.status===Ue.Compliant).length,u=t.checklist.filter(p=>p.status===Ue.NonCompliant).length,d=t.checklist.filter(p=>p.status===Ue.PartiallyCompliant).length,m=t.checklist.filter(p=>p.status!==Ue.Compliant&&p.status!==Ue.PartiallyCompliant&&p.status!==Ue.NonCompliant&&p.status!==Ue.NotApplicable).length;return{total:o,compliant:c,nonCompliant:u,partial:d,notStarted:m}},[t.checklist]),i=[{name:e("compliant"),value:r.compliant,color:"#22c55e"},{name:e("partiallyCompliant"),value:r.partial,color:"#f97316"},{name:e("nonCompliant"),value:r.nonCompliant,color:"#ef4444"}],a={borderRadius:"0.5rem",background:n==="dark"?"#0f172a":"#FFFFFF",border:`1px solid ${n==="dark"?"#1e293b":"#e2e8f0"}`};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(fr,{title:e("compliant"),value:r.compliant,icon:ja,color:"bg-green-500"}),f.jsx(fr,{title:e("partiallyCompliant"),value:r.partial,icon:wO,color:"bg-yellow-500"}),f.jsx(fr,{title:e("nonCompliant"),value:r.nonCompliant,icon:Nh,color:"bg-red-500"}),f.jsx(fr,{title:e("daysRemaining"),value:"N/A",icon:oh,color:"bg-gray-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-1 bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-brand-border dark:border-dark-brand-border h-80",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("taskStatus")}),f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(wT,{children:[f.jsx(Gv,{data:i,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:"60%",outerRadius:"80%",paddingAngle:5,children:i.map(o=>f.jsx(Os,{fill:o.color},`cell-${o.name}`))}),f.jsx(js,{contentStyle:a}),f.jsx(Jo,{wrapperStyle:{fontSize:"12px"}})]})})]}),f.jsxs("div",{className:"lg:col-span-2 bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-brand-border dark:border-dark-brand-border",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("recentActivity")}),f.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:t.activityLog.slice(0,10).map(o=>f.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center font-semibold text-xs",children:o.user.charAt(0)}),f.jsxs("div",{children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:o.user})," ",o.action.en]}),f.jsx("p",{className:"text-xs text-gray-500",children:new Date(o.timestamp).toLocaleString()})]})]},o.id))})]})]})]})},vme=({isOpen:t,onClose:e,onSave:n})=>{const{t:r}=ce(),[i,a]=E.useState(""),[o,c]=E.useState(""),[u,d]=E.useState(""),m=y=>{y.preventDefault(),!(!i||!o||!u)&&n({name:{en:i,ar:o},uploadedFile:{name:u,type:"PDF"}})},p=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm",children:r("cancel")}),f.jsx("button",{type:"submit",form:"upload-form",className:"py-2 px-4 border rounded-md text-sm text-white bg-brand-primary",children:r("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:r("uploadEvidence"),footer:p,children:f.jsxs("form",{id:"upload-form",onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameEn",className:ye,children:r("documentNameEn")}),f.jsx("input",{type:"text",id:"nameEn",value:i,onChange:y=>a(y.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameAr",className:ye,children:r("documentNameAr")}),f.jsx("input",{type:"text",id:"nameAr",value:o,onChange:y=>c(y.target.value),className:xe,dir:"rtl",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"fileName",className:ye,children:r("fileName")}),f.jsx("input",{type:"text",id:"fileName",value:u,onChange:y=>d(y.target.value),placeholder:"e.g., audit_report_q1.pdf",className:xe,required:!0})]})]})})},xme=({item:t,project:e,isFinalized:n,onUpload:r,onLinkData:i})=>{var y;const{t:a,lang:o}=ce(),{documents:c}=Rt(),[u,d]=E.useState(!1),m=c.filter(x=>t.evidenceFiles.includes(x.id)),p=x=>{r(e.id,t.id,x),d(!1)};return f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:a("evidence")}),f.jsxs("div",{className:"space-y-2",children:[m.map(x=>f.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-md text-sm",children:[f.jsx(xB,{className:"w-4 h-4 text-gray-500"}),f.jsx("span",{className:"flex-grow",children:x.name[o]})]},x.id)),(y=t.linkedFhirResources)==null?void 0:y.map(x=>f.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-100 dark:bg-blue-900/50 rounded-md text-sm",children:[f.jsx(fs,{className:"w-4 h-4 text-blue-500"}),f.jsx("span",{className:"flex-grow",children:x.displayText})]},x.resourceId))]}),!n&&f.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-1 text-sm font-semibold text-brand-primary hover:underline",children:[f.jsx(Rn,{className:"w-4 h-4"}),a("uploadEvidence")]}),f.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-sm font-semibold text-brand-primary hover:underline",children:[f.jsx(fs,{className:"w-4 h-4"}),a("linkLiveData")]})]}),u&&f.jsx(vme,{isOpen:u,onClose:()=>d(!1),onSave:p})]})},bme=({item:t,currentUser:e,onAddComment:n})=>{const{t:r}=ce(),[i,a]=E.useState(""),o=c=>{c.preventDefault(),i.trim()&&(n(i.trim()),a(""))};return f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:r("comments")}),f.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-2",children:t.comments.map(c=>f.jsxs("div",{className:"text-sm bg-gray-50 dark:bg-gray-800 p-2 rounded-md",children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-semibold",children:c.userName}),": ",c.text]}),f.jsx("p",{className:"text-xs text-gray-400",children:new Date(c.timestamp).toLocaleString()})]},c.id))}),f.jsxs("form",{onSubmit:o,className:"mt-2 flex gap-2",children:[f.jsx("input",{type:"text",value:i,onChange:c=>a(c.target.value),placeholder:r("addComment")+"...",className:"w-full text-sm p-2 border rounded-md"}),f.jsx("button",{type:"submit",className:"px-4 py-2 text-sm bg-brand-primary text-white rounded-md",children:r("save")})]})]})},wme=[{resourceType:"Observation",resourceId:"obs-123",displayText:"Lab Result: Hemoglobin A1c - 7.2%"},{resourceType:"MeasureReport",resourceId:"mr-456",displayText:"Quality Metric: Hand Hygiene Compliance - 98%"},{resourceType:"DocumentReference",resourceId:"doc-789",displayText:"Policy: Patient Identification v3.0"},{resourceType:"Immunization",resourceId:"imm-101",displayText:"Vaccination Record: Influenza"},{resourceType:"MedicationAdministration",resourceId:"med-212",displayText:"Medication Event: Warfarin Administered"}],Sme=({isOpen:t,onClose:e,onLink:n})=>{const{t:r}=ce(),[i,a]=E.useState(""),o=wme.filter(u=>u.displayText.toLowerCase().includes(i.toLowerCase())),c=f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:r("cancel")});return f.jsxs(Cn,{isOpen:t,onClose:e,title:r("linkLiveData"),footer:c,size:"lg",children:[f.jsx("div",{children:f.jsxs("div",{className:"relative",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"Search FHIR resources...",value:i,onChange:u=>a(u.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-brand-surface dark:bg-dark-brand-surface"})]})}),f.jsx("div",{className:"mt-4 max-h-60 overflow-y-auto space-y-2",children:o.map(u=>f.jsxs("button",{onClick:()=>n(u),className:"w-full text-left p-3 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-3",children:[f.jsx(fs,{className:"w-5 h-5 text-brand-primary flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-sm",children:u.displayText}),f.jsxs("p",{className:"text-xs text-gray-500",children:[u.resourceType,"/",u.resourceId]})]})]},u.resourceId))})]})},VM={[Ue.Compliant]:{icon:ja,color:"text-green-500",text:"compliant"},[Ue.PartiallyCompliant]:{icon:wO,color:"text-yellow-500",text:"partiallyCompliant"},[Ue.NonCompliant]:{icon:Nh,color:"text-red-500",text:"nonCompliant"},[Ue.NotApplicable]:{icon:SO,color:"text-gray-500",text:"notApplicable"}},_me=({item:t,standard:e,project:n,users:r,currentUser:i,isFinalized:a,onUpdate:o,onAddComment:c,onUploadEvidence:u})=>{const{t:d}=ce(),m=Zr(),[p,y]=E.useState(!1),[x,_]=E.useState(!1),[T,C]=E.useState(!1),N=!a&&(i.role===Vt.Admin||i.id===n.projectLead.id||i.id===t.assignedTo),{icon:M,color:P,text:L}=VM[t.status],j=async()=>{if(e){_(!0);try{const I=await Co.suggestActionPlan(e.description);o(t.id,{actionPlan:I})}catch{m.error(d("actionPlanError"))}finally{_(!1)}}},V=I=>{const R=[...t.linkedFhirResources||[],I];o(t.id,{linkedFhirResources:R}),C(!1)};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"p-4 flex items-start gap-4 cursor-pointer",onClick:()=>y(!p),children:[f.jsx(M,{className:`w-6 h-6 flex-shrink-0 mt-1 ${P}`}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:t.item}),f.jsxs("p",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:[d("standard"),": ",t.standardId]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${VM[t.status].color.replace("text","bg").replace("-500","-100 dark:bg-opacity-20 dark:text-opacity-80")}`,children:d(L)}),f.jsx(Yy,{className:`w-5 h-5 transition-transform ${p?"rotate-180":""}`})]})]}),p&&f.jsxs("div",{className:"p-4 border-t dark:border-dark-brand-border space-y-4 animate-[fadeIn_0.3s_ease-out]",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:d("status")}),f.jsx("select",{value:t.status,onChange:I=>o(t.id,{status:I.target.value}),disabled:!N,className:"w-full text-sm p-2 border rounded-md",children:Object.values(Ue).map(I=>f.jsx("option",{value:I,children:d(I.charAt(0).toLowerCase()+I.slice(1).replace(" ",""))},I))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-mmedium mb-1",children:d("assignedTo")}),f.jsxs("select",{value:t.assignedTo||"",onChange:I=>o(t.id,{assignedTo:I.target.value||null}),disabled:a,className:"w-full text-sm p-2 border rounded-md",children:[f.jsx("option",{value:"",children:d("unassigned")}),r.map(I=>f.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:d("actionPlan")}),f.jsx("textarea",{value:t.actionPlan,onChange:I=>o(t.id,{actionPlan:I.target.value}),rows:3,disabled:!N,className:"w-full text-sm p-2 border rounded-md"}),N&&(t.status===Ue.NonCompliant||t.status===Ue.PartiallyCompliant)&&f.jsxs("button",{onClick:j,disabled:x,className:"mt-1 text-sm font-semibold text-brand-primary flex items-center gap-1",children:[f.jsx(ah,{className:`w-4 h-4 ${x?"animate-pulse":""}`}),d(x?"generating":"getAiSuggestion")]})]}),f.jsx(xme,{item:t,project:n,isFinalized:a,onUpload:u,onLinkData:()=>C(!0)}),f.jsx(bme,{item:t,currentUser:i,onAddComment:I=>c(t.id,I)})]}),f.jsx(Sme,{isOpen:T,onClose:()=>C(!1),onLink:V})]})},Ame=t=>{const{project:e,standards:n,users:r,currentUser:i,onUpdateItem:a,onAddComment:o,onUploadEvidence:c}=t,{t:u}=ce(),[d,m]=E.useState(""),[p,y]=E.useState("all"),[x,_]=E.useState("all"),T=E.useMemo(()=>{const N=n.reduce((M,P)=>{const L=P.section||"Uncategorized";return M[L]||(M[L]=[]),M[L].push(P),M},{});return Object.entries(N).map(([M,P])=>{const L=new Set(P.flatMap(V=>{var I;return[V.standardId,...((I=V.subStandards)==null?void 0:I.map(R=>R.id))||[]]})),j=e.checklist.filter(V=>L.has(V.standardId)).filter(V=>{const I=V.item.toLowerCase().includes(d.toLowerCase())||V.standardId.toLowerCase().includes(d.toLowerCase()),R=p==="all"||V.status===p,U=x==="all"||V.assignedTo===x;return I&&R&&U});return{section:M,items:j}}).filter(M=>M.items.length>0)},[e.checklist,n,d,p,x]),C=e.status==="Finalized";return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-lg border border-brand-border dark:border-dark-brand-border flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:u("searchChecklist"),value:d,onChange:N=>m(N.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm"})]}),f.jsxs("select",{value:p,onChange:N=>y(N.target.value),className:"w-full md:w-auto border border-gray-300 dark:border-gray-600 rounded-lg py-2 px-3 text-sm",children:[f.jsx("option",{value:"all",children:u("allStatuses")}),Object.values(Ue).map(N=>f.jsx("option",{value:N,children:u(N.charAt(0).toLowerCase()+N.slice(1).replace(" ",""))},N))]}),f.jsxs("select",{value:x,onChange:N=>_(N.target.value),className:"w-full md:w-auto border border-gray-300 dark:border-gray-600 rounded-lg py-2 px-3 text-sm",children:[f.jsx("option",{value:"all",children:u("allAssignees")}),r.map(N=>f.jsx("option",{value:N.id,children:N.name},N.id)),f.jsx("option",{value:"",children:u("unassigned")})]})]}),f.jsx("div",{className:"space-y-6",children:T.map(({section:N,items:M})=>f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-3 border-b pb-2 dark:border-dark-brand-border",children:N}),f.jsx("div",{className:"space-y-3",children:M.map(P=>f.jsx(_me,{item:P,standard:n.find(L=>{var j;return L.standardId===P.standardId||((j=L.subStandards)==null?void 0:j.some(V=>V.id===P.standardId))}),project:e,users:r,currentUser:i,isFinalized:C,onUpdate:(L,j)=>a(e.id,L,j),onAddComment:L=>o(e.id,P.id,L),onUploadEvidence:L=>c(e.id,P.id,L)},P.id))})]},N))})]})},GU=({isOpen:t,onClose:e,onConfirm:n,actionTitle:r,signatureStatement:i,confirmActionText:a})=>{const{t:o}=ce(),[c,u]=E.useState(""),d=p=>{p.preventDefault(),c&&n(c)},m=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:o("cancel")}),f.jsx("button",{type:"submit",form:"signature-form",disabled:!c,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:a})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o("eSignature"),footer:m,children:f.jsxs("form",{id:"signature-form",onSubmit:d,children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:r}),f.jsx("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-md",children:f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:i})}),f.jsxs("div",{className:"mt-4",children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:o("enterPasswordToSign")}),f.jsx("input",{type:"password",id:"password",value:c,onChange:p=>u(p.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-brand-primary focus:border-brand-primary sm:text-sm bg-white dark:bg-gray-800 dark:text-white",required:!0,autoFocus:!0})]})]})})},Tme=({isOpen:t,onClose:e,onGenerate:n})=>{const{t:r}=ce(),[i,a]=E.useState("complianceSummary"),o=u=>{u.preventDefault(),n(i),e()},c=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm",children:r("cancel")}),f.jsx("button",{type:"submit",form:"report-form",className:"py-2 px-4 border rounded-md text-sm text-white bg-brand-primary",children:r("generate")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:r("generateReport"),footer:c,children:f.jsx("form",{id:"report-form",onSubmit:o,children:f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium",children:r("documentType")}),f.jsx("select",{value:i,onChange:u=>a(u.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md",children:f.jsx("option",{value:"complianceSummary",children:r("complianceSummaryReport")})})]})})})},Eme=({navigation:t})=>{const{t:e}=ce(),n=Zr(),{projects:r,finalizeProject:i,updateChecklistItem:a,addCommentToChecklistItem:o,createEvidenceAndLink:c}=Or(),{programs:u,standards:d,users:m,documents:p,addDocument:y}=Rt(),{currentUser:x}=Pn(),[_,T]=E.useState("overview"),[C,N]=E.useState(!1),[M,P]=E.useState(!1),L=r.find(U=>U.id===t.projectId),j=u.find(U=>U.id===(L==null?void 0:L.programId));if(!L||!j||!x)return f.jsx("div",{children:e("projectNotFound")});const V=U=>{U==="password"?(i(L.id,x.name),n.success(e("projectFinalizedSuccess")),N(!1)):n.error(e("incorrectPassword"))},I=U=>{const F=`<h1>${L.name} - ${e("complianceSummaryReport")}</h1><p>Compliance: ${L.progress}%</p>`,B={name:{en:`${L.name} - Compliance Summary`,ar:`  - ${L.name}`},type:"Report",isControlled:!0,status:"Draft",content:{en:F,ar:F},currentVersion:1,versionHistory:[],uploadedAt:new Date().toISOString()};y(B),n.success(e("reportGeneratedSuccess"))},R=()=>{switch(_){case"overview":return f.jsx(UM,{project:L});case"checklist":return f.jsx(Ame,{project:L,standards:d.filter(U=>U.programId===L.programId),users:m,currentUser:x,onUpdateItem:a,onAddComment:o,onUploadEvidence:c});default:return f.jsx(UM,{project:L})}};return f.jsxs("div",{className:"space-y-6",children:[f.jsx(gme,{project:L,programName:j.name,currentUser:x,onFinalize:()=>N(!0),onGenerateReport:()=>P(!0)}),f.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[f.jsx(yme,{currentView:_,onSetView:T,isFinalized:L.status==="Finalized"}),f.jsx("div",{className:"flex-grow w-full",children:R()})]}),f.jsx(GU,{isOpen:C,onClose:()=>N(!1),onConfirm:V,actionTitle:`${e("finalizeProject")}: ${L.name}`,signatureStatement:e("signatureStatementProject"),confirmActionText:e("signAndFinalize")}),f.jsx(Tme,{isOpen:M,onClose:()=>P(!1),onGenerate:I})]})},Cme=({programs:t,users:e,onAddProject:n,setNavigation:r})=>{const{t:i}=ce(),a=Zr(),[o,c]=E.useState(""),[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState(""),[_,T]=E.useState(new Date),[C,N]=E.useState(),M=P=>{P.preventDefault();const L=e.find(j=>j.id===y);if(!o||!m||!L||!_){a.error(i("pleaseFillRequired"));return}n({name:o,description:u,programId:m,projectLead:L,startDate:_.toISOString().split("T")[0],endDate:C?C.toISOString().split("T")[0]:null,status:ur.NotStarted}),a.success(i("projectCreatedSuccess")),r({view:"projects"})};return f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start mb-6",children:[f.jsx(zi,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:i("createNewProject")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:i("createProjectDescription")})]})]}),f.jsxs("form",{onSubmit:M,className:"space-y-6 bg-brand-surface dark:bg-dark-brand-surface p-8 rounded-lg shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ye,children:i("projectName")}),f.jsx("input",{type:"text",id:"name",value:o,onChange:P=>c(P.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:ye,children:i("projectDescription")}),f.jsx("textarea",{id:"description",value:u,onChange:P=>d(P.target.value),rows:3,className:xe})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"program",className:ye,children:i("accreditationProgram")}),f.jsxs("select",{id:"program",value:m,onChange:P=>p(P.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:i("selectProgram")}),t.map(P=>f.jsx("option",{value:P.id,children:P.name},P.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lead",className:ye,children:i("projectLead")}),f.jsxs("select",{id:"lead",value:y,onChange:P=>x(P.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:i("selectUser")}),e.map(P=>f.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"startDate",className:ye,children:i("startDate")}),f.jsx(Fo,{date:_,setDate:T})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"endDate",className:ye,children:i("targetEndDate")}),f.jsx(Fo,{date:C,setDate:N,fromDate:_})]})]}),f.jsx("div",{className:"pt-5 border-t border-brand-border dark:border-dark-brand-border",children:f.jsxs("div",{className:"flex justify-end space-x-3 rtl:space-x-reverse",children:[f.jsx("button",{type:"button",onClick:()=>r({view:"projects"}),className:"bg-white dark:bg-gray-700 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-600",children:i("cancel")}),f.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:i("createProject")})]})})]})]})},Nme=({projects:t,currentUser:e,setNavigation:n})=>{const{t:r}=ce(),[i,a]=E.useState(""),o=E.useMemo(()=>t.flatMap(u=>u.checklist.filter(d=>d.assignedTo===e.id&&d.status!==Ue.Compliant&&d.status!==Ue.NotApplicable).map(d=>({...d,projectName:u.name,projectId:u.id}))).filter(u=>u.item.toLowerCase().includes(i.toLowerCase())),[t,e,i]),c={[Ue.Compliant]:{text:r("compliant"),color:"bg-green-100 text-green-800"},[Ue.PartiallyCompliant]:{text:r("partiallyCompliant"),color:"bg-yellow-100 text-yellow-800"},[Ue.NonCompliant]:{text:r("nonCompliant"),color:"bg-red-100 text-red-800"},[Ue.NotApplicable]:{text:r("notApplicable"),color:"bg-gray-100 text-gray-800"}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(hs,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:r("myTasks")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:r("myTasksDescription")})]})]}),f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:r("searchTasks"),value:i,onChange:u=>a(u.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border rounded-lg"})]}),o.length>0?f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:r("status")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:r("taskDescription")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:r("project")})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:o.map(u=>{var d,m;return f.jsxs("tr",{onClick:()=>n({view:"projectDetail",projectId:u.projectId}),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${(d=c[u.status])==null?void 0:d.color}`,children:(m=c[u.status])==null?void 0:m.text})}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("p",{className:"text-sm font-medium",children:u.item}),f.jsxs("p",{className:"text-xs text-gray-500",children:[r("standard"),": ",u.standardId]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:u.projectName})]},u.id)})})]})})}):f.jsx(Hi,{icon:hs,title:r("noTasksAssigned"),message:""})]})},kme=t=>t>=20?{name:"veryHigh",color:"bg-red-700",text:"text-white"}:t>=13?{name:"high",color:"bg-red-500",text:"text-white"}:t>=6?{name:"medium",color:"bg-yellow-400",text:"text-yellow-900"}:{name:"low",color:"bg-green-500",text:"text-white"},Ime=({risks:t})=>{const{t:e}=ce(),n=t.filter(i=>i.status==="Open"),r=Array(5).fill(null).map(()=>Array(5).fill(null).map(()=>[]));return n.forEach(i=>{const a=5-i.impact,o=i.likelihood-1;a>=0&&a<5&&o>=0&&o<5&&r[a][o].push(i)}),f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsx("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary mb-4",children:e("riskMatrix")}),f.jsxs("div",{className:"flex",children:[f.jsxs("div",{className:"flex flex-col justify-between text-xs font-semibold text-gray-500 dark:text-gray-400 py-4 pr-2 text-right",children:[f.jsx("span",{className:"h-1/5 flex items-center justify-end",children:e("high")}),f.jsx("span",{className:"h-1/5 flex items-center justify-end"}),f.jsx("span",{className:"h-1/5 flex items-center justify-end",children:e("impact")}),f.jsx("span",{className:"h-1/5 flex items-center justify-end"}),f.jsx("span",{className:"h-1/5 flex items-center justify-end",children:e("low")})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:"grid grid-cols-5 gap-1",children:r.flatMap((i,a)=>i.map((o,c)=>{const u=c+1,d=5-a,m=u*d,p=kme(m),y=o.length;return f.jsxs("div",{className:`h-16 w-full rounded flex items-center justify-center ${p.color} ${p.text} font-bold text-xl relative group`,title:`${y} risk(s) - Likelihood: ${u}, Impact: ${d}`,children:[y>0?y:"",y>0&&f.jsxs("div",{className:"absolute bottom-full mb-2 w-48 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[f.jsx("ul",{className:"list-disc list-inside",children:o.map(x=>f.jsx("li",{className:"truncate",children:x.title},x.id))}),f.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-gray-800"})]})]},`${a}-${c}`)}))}),f.jsxs("div",{className:"grid grid-cols-5 text-xs font-semibold text-gray-500 dark:text-gray-400 pt-2 text-center",children:[f.jsx("span",{children:e("low")}),f.jsx("span",{}),f.jsx("span",{children:e("likelihood")}),f.jsx("span",{}),f.jsx("span",{children:e("high")})]})]})]})]})},Pme=({isOpen:t,onClose:e,onSave:n,users:r,trainingPrograms:i,existingRisk:a})=>{const{t:o,lang:c}=ce(),u=!!a,[d,m]=E.useState(""),[p,y]=E.useState(""),[x,_]=E.useState(3),[T,C]=E.useState(3),[N,M]=E.useState(null),[P,L]=E.useState("Open"),[j,V]=E.useState(""),[I,R]=E.useState(""),[U,F]=E.useState(""),B=[{key:"processFailure",label:o("processFailure")},{key:"humanError",label:o("humanError")},{key:"equipmentMalfunction",label:o("equipmentMalfunction")},{key:"externalFactors",label:o("externalFactors")},{key:"other",label:o("other")}];E.useEffect(()=>{a?(m(a.title),y(a.description),_(a.likelihood),C(a.impact),M(a.ownerId),L(a.status),V(a.mitigationPlan),R(a.rootCauseCategory||""),F(a.trainingRecommendationId||"")):(m(""),y(""),_(3),C(3),M(null),L("Open"),V(""),R(""),F(""))},[a,t]);const q=se=>{if(se.preventDefault(),!d||!p)return;const Se={title:d,description:p,likelihood:x,impact:T,ownerId:N,status:P,mitigationPlan:j,rootCauseCategory:I||void 0,trainingRecommendationId:U||void 0,createdAt:u?a.createdAt:new Date().toISOString()};n(u?{...Se,id:a.id}:Se)},H=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:o("cancel")}),f.jsx("button",{type:"submit",form:"risk-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:o("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o(u?"edit":"addNewRisk"),footer:H,size:"2xl",children:f.jsxs("form",{id:"risk-form",onSubmit:q,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"title",className:ye,children:o("riskTitle")}),f.jsx("input",{type:"text",id:"title",value:d,onChange:se=>m(se.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:ye,children:o("description")}),f.jsx("textarea",{id:"description",value:p,onChange:se=>y(se.target.value),rows:3,className:xe,required:!0})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"likelihood",className:ye,children:[o("likelihood")," (",x,")"]}),f.jsx("input",{type:"range",id:"likelihood",min:"1",max:"5",value:x,onChange:se=>_(parseInt(se.target.value)),className:"w-full mt-2"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"impact",className:ye,children:[o("impact")," (",T,")"]}),f.jsx("input",{type:"range",id:"impact",min:"1",max:"5",value:T,onChange:se=>C(parseInt(se.target.value)),className:"w-full mt-2"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"rootCauseCategory",className:ye,children:o("rootCauseCategory")}),f.jsxs("select",{id:"rootCauseCategory",value:I,onChange:se=>R(se.target.value),className:xe,children:[f.jsx("option",{value:"",children:o("selectCategory")}),B.map(se=>f.jsx("option",{value:se.key,children:se.label},se.key))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"mitigationPlan",className:ye,children:o("mitigationPlan")}),f.jsx("textarea",{id:"mitigationPlan",value:j,onChange:se=>V(se.target.value),rows:3,className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"training",className:ye,children:o("recommendedTraining")}),f.jsxs("select",{id:"training",value:U,onChange:se=>F(se.target.value),className:xe,children:[f.jsx("option",{value:"",children:o("noTrainingRecommended")}),i.map(se=>f.jsx("option",{value:se.id,children:se.title[c]},se.id))]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"owner",className:ye,children:o("owner")}),f.jsxs("select",{id:"owner",value:N||"",onChange:se=>M(se.target.value||null),className:xe,children:[f.jsx("option",{value:"",children:o("unassigned")}),r.map(se=>f.jsx("option",{value:se.id,children:se.name},se.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"status",className:ye,children:o("status")}),f.jsxs("select",{id:"status",value:P,onChange:se=>L(se.target.value),className:xe,children:[f.jsx("option",{value:"Open",children:o("open")}),f.jsx("option",{value:"Mitigated",children:o("mitigated")}),f.jsx("option",{value:"Closed",children:o("closed")})]})]})]})]})})},xc=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i,confirmationText:a})=>{const{t:o}=ce(),[c,u]=E.useState(""),d=c===a,m=y=>{y.preventDefault(),d&&n()},p=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto bg-white dark:bg-gray-700 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-600",children:o("cancel")}),f.jsx("button",{type:"submit",form:"confirmation-form",disabled:!d,className:"w-full sm:w-auto inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:bg-red-300 dark:disabled:bg-red-800 disabled:cursor-not-allowed",children:o("confirmAction")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:r,footer:p,size:"lg",children:f.jsxs("form",{id:"confirmation-form",onSubmit:m,children:[f.jsxs("div",{className:"sm:flex sm:items-start",children:[f.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/50 sm:mx-0 sm:h-10 sm:w-10",children:f.jsx(Yo,{className:"h-6 w-6 text-red-600 dark:text-red-400","aria-hidden":"true"})}),f.jsx("div",{className:"mt-3 text-center sm:mt-0 ltr:sm:ml-4 rtl:sm:mr-4 sm:text-left",children:f.jsx("div",{className:"mt-2",children:f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:i})})})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border dark:border-dark-brand-border",children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",dangerouslySetInnerHTML:{__html:o("confirmActionPrompt").replace("{text}",`<strong>${a}</strong>`)}}),f.jsx("input",{type:"text",value:c,onChange:y=>u(y.target.value),className:"mt-2 w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-800",autoComplete:"off",autoFocus:!0})]})]})})},Dme=t=>{const{risks:e,users:n,trainingPrograms:r,onAdd:i,onUpdate:a,onDelete:o}=t,{t:c}=ce(),[u,d]=E.useState(!1),[m,p]=E.useState(null),[y,x]=E.useState(null),_=C=>{"id"in C?a(C):i(C),d(!1)},T=()=>{y&&(o(y.id),x(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{onClick:()=>{p(null),d(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center font-semibold shadow-sm",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),c("addNewRisk")]})}),f.jsx(Ime,{risks:e}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:c("riskTitle")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:c("status")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:c("likelihood")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:c("impact")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:c("owner")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:"Edit"})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:e.map(C=>{var N;return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 max-w-sm",children:f.jsx("p",{className:"font-medium truncate",title:C.title,children:C.title})}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800",children:C.status})}),f.jsx("td",{className:"px-6 py-4",children:C.likelihood}),f.jsx("td",{className:"px-6 py-4",children:C.impact}),f.jsx("td",{className:"px-6 py-4",children:((N=n.find(M=>M.id===C.ownerId))==null?void 0:N.name)||c("unassigned")}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>{p(C),d(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>x(C),className:"p-1 text-gray-500 hover:text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]},C.id)})})]})})}),u&&f.jsx(Pme,{isOpen:u,onClose:()=>d(!1),onSave:_,users:n,trainingPrograms:r,existingRisk:m}),y&&f.jsx(xc,{isOpen:!!y,onClose:()=>x(null),onConfirm:T,title:c("deleteRisk"),message:c("areYouSureDeleteRisk"),confirmationText:c("delete")})]})},Rme=({isOpen:t,onClose:e,onSave:n,existingReport:r})=>{const{t:i}=ce(),a=!!r,[o,c]=E.useState(new Date),[u,d]=E.useState(""),[m,p]=E.useState("Patient Safety"),[y,x]=E.useState("Minor"),[_,T]=E.useState(""),[C,N]=E.useState("Open");E.useEffect(()=>{r?(c(new Date(r.incidentDate)),d(r.location),p(r.type),x(r.severity),T(r.description),N(r.status)):(c(new Date),d(""),p("Patient Safety"),x("Minor"),T(""),N("Open"))},[r,t]);const M=L=>{if(L.preventDefault(),!o||!u||!_)return;const j={incidentDate:o.toISOString().split("T")[0],location:u,type:m,severity:y,description:_,status:C,reportedBy:"",correctiveActionIds:(r==null?void 0:r.correctiveActionIds)||[]};n(a?{...j,id:r.id}:j)},P=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md text-sm",children:i("cancel")}),f.jsx("button",{type:"submit",form:"incident-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:i("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:i(a?"editIncident":"reportNewIncident"),footer:P,size:"lg",children:f.jsxs("form",{id:"incident-form",onSubmit:M,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"date",className:ye,children:i("incidentDate")}),f.jsx(Fo,{date:o,setDate:c})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"location",className:ye,children:i("location")}),f.jsx("input",{type:"text",value:u,onChange:L=>d(L.target.value),id:"location",className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"type",className:ye,children:i("incidentType")}),f.jsxs("select",{id:"type",value:m,onChange:L=>p(L.target.value),className:xe,children:[f.jsx("option",{value:"Patient Safety",children:i("patientSafety")}),f.jsx("option",{value:"Staff Injury",children:i("staffInjury")}),f.jsx("option",{value:"Facility Issue",children:i("facilityIssue")}),f.jsx("option",{value:"Medication Error",children:i("medicationError")}),f.jsx("option",{value:"Other",children:i("other")})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"severity",className:ye,children:i("severity")}),f.jsxs("select",{id:"severity",value:y,onChange:L=>x(L.target.value),className:xe,children:[f.jsx("option",{value:"Minor",children:i("minor")}),f.jsx("option",{value:"Moderate",children:i("moderate")}),f.jsx("option",{value:"Severe",children:i("severe")}),f.jsx("option",{value:"Sentinel Event",children:i("sentinelEvent")})]})]}),a&&f.jsxs("div",{children:[f.jsx("label",{htmlFor:"status",className:ye,children:i("status")}),f.jsxs("select",{id:"status",value:C,onChange:L=>N(L.target.value),className:xe,children:[f.jsx("option",{value:"Open",children:i("open")}),f.jsx("option",{value:"Under Investigation",children:i("underInvestigation")}),f.jsx("option",{value:"Closed",children:i("closed")})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"desc",className:ye,children:i("description")}),f.jsx("textarea",{id:"desc",value:_,onChange:L=>T(L.target.value),rows:4,className:xe,required:!0})]})]})})},Mme=t=>{const{incidents:e,onAdd:n,onUpdate:r,onDelete:i}=t,{t:a}=ce(),[o,c]=E.useState(!1),[u,d]=E.useState(null),[m,p]=E.useState(null),y=_=>{"id"in _?r(_):n(_),c(!1)},x=()=>{m&&(i(m.id),p(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{onClick:()=>{d(null),c(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center font-semibold shadow-sm",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),a("reportNewIncident")]})}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("incidentDate")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("incidentType")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("severity")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("status")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:"Edit"})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:e.map(_=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4",children:new Date(_.incidentDate).toLocaleDateString()}),f.jsx("td",{className:"px-6 py-4",children:a(_.type.charAt(0).toLowerCase()+_.type.slice(1).replace(" ",""))}),f.jsx("td",{className:"px-6 py-4",children:a(_.severity.charAt(0).toLowerCase()+_.severity.slice(1).replace(" ",""))}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800",children:a(_.status.charAt(0).toLowerCase()+_.status.slice(1).replace(" ",""))})}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>{d(_),c(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>p(_),className:"p-1 text-gray-500 hover:text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),o&&f.jsx(Rme,{isOpen:o,onClose:()=>c(!1),onSave:y,existingReport:u}),m&&f.jsx(xc,{isOpen:!!m,onClose:()=>p(null),onConfirm:x,title:a("deleteIncident"),message:a("areYouSureDeleteIncident"),confirmationText:a("delete")})]})},jme=({isOpen:t,onClose:e,onSave:n,users:r,existingCapa:i})=>{const{t:a}=ce(),[o,c]=E.useState(""),[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState(null),[_,T]=E.useState(),[C,N]=E.useState("Open");E.useEffect(()=>{i&&(c(i.description),d(i.rootCauseAnalysis),p(i.actionPlan),x(i.assignedTo),T(new Date(i.dueDate)),N(i.status))},[i,t]);const M=L=>{if(L.preventDefault(),!o||!i)return;const j={...i,description:o,rootCauseAnalysis:u,actionPlan:m,assignedTo:y,dueDate:_.toISOString().split("T")[0],status:C},{projectId:V,...I}=j;n(I,V)},P=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md",children:a("cancel")}),f.jsx("button",{type:"submit",form:"capa-form",className:"py-2 px-4 border rounded-md text-white bg-brand-primary",children:a("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:a("capaReport"),footer:P,size:"2xl",children:f.jsxs("form",{id:"capa-form",onSubmit:M,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("description")}),f.jsx("textarea",{value:o,onChange:L=>c(L.target.value),rows:3,className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("rootCauseAnalysis")}),f.jsx("textarea",{value:u,onChange:L=>d(L.target.value),rows:3,className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("actionPlan")}),f.jsx("textarea",{value:m,onChange:L=>p(L.target.value),rows:3,className:xe})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("assignedTo")}),f.jsxs("select",{value:y||"",onChange:L=>x(L.target.value||null),className:xe,children:[f.jsx("option",{value:"",children:a("unassigned")}),r.map(L=>f.jsx("option",{value:L.id,children:L.name},L.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("dueDate")}),f.jsx(Fo,{date:_,setDate:T})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:a("status")}),f.jsxs("select",{value:C,onChange:L=>N(L.target.value),className:xe,children:[f.jsx("option",{value:"Open",children:a("open")}),f.jsx("option",{value:"Closed",children:a("closed")})]})]})]})})},Ome=({projects:t,users:e,onUpdateCapa:n})=>{const{t:r}=ce(),[i,a]=E.useState(!1),[o,c]=E.useState(null),u=E.useMemo(()=>t.flatMap(m=>m.capaReports.map(p=>{var y;return{...p,projectId:m.id,projectName:m.name,assigneeName:((y=e.find(x=>x.id===p.assignedTo))==null?void 0:y.name)||r("unassigned")}})),[t,e,r]),d=(m,p)=>{n(p,m),a(!1)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("description")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("status")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("project")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("assignedTo")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:r("dueDate")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:"Edit"})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:u.map(m=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4",children:m.description}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${m.status==="Open"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:r(m.status.toLowerCase())})}),f.jsx("td",{className:"px-6 py-4",children:m.projectName}),f.jsx("td",{className:"px-6 py-4",children:m.assigneeName}),f.jsx("td",{className:"px-6 py-4",children:m.dueDate}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsx("button",{onClick:()=>c(m),className:"text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-5 h-5"})})})]},m.id))})]}),u.length===0&&f.jsx("p",{className:"text-center py-8 text-gray-500",children:r("noCapaReports")})]})}),i&&f.jsx(jme,{isOpen:i,onClose:()=>a(!1),onSave:d,users:e,existingCapa:o})]})},Lme=({projects:t,onUpdateCapa:e})=>{const{t:n,dir:r}=ce(),[i,a]=E.useState(null),[o,c]=E.useState(""),u=E.useMemo(()=>t.flatMap(m=>m.capaReports.filter(p=>{var y;return((y=p.effectivenessCheck)==null?void 0:y.required)&&!p.effectivenessCheck.completed}).map(p=>({...p,projectId:m.id}))),[t]),d=()=>{if(!i)return;const{projectId:m,...p}=i,y={...p,effectivenessCheck:{...i.effectivenessCheck,completed:!0,notes:o}};e(m,y),a(null),c("")};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:n("source")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:n("checkDueDate")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:n("actions")})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:u.map(m=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4",children:m.sourceStandardId}),f.jsx("td",{className:"px-6 py-4",children:new Date(m.effectivenessCheck.dueDate).toLocaleDateString()}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("button",{onClick:()=>a(m),className:"flex items-center text-sm text-brand-primary hover:underline",children:[f.jsx(ja,{className:"w-4 h-4 mr-1"}),n("completeCheck")]})})]},m.id))})]}),u.length===0&&f.jsx("p",{className:"text-center py-8 text-gray-500",children:n("noEffectivenessChecks")})]})}),i&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center backdrop-blur-sm modal-enter",onClick:()=>a(null),children:f.jsxs("div",{className:"bg-white dark:bg-dark-brand-surface rounded-lg shadow-xl w-full max-w-lg m-4 modal-content-enter",onClick:m=>m.stopPropagation(),dir:r,children:[f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-medium",children:n("completeEffectivenessCheck")}),f.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i.sourceStandardId}),f.jsxs("div",{className:"mt-4",children:[f.jsx("label",{htmlFor:"completionNotes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:n("effectivenessCheckNotes")}),f.jsx("textarea",{id:"completionNotes",value:o,onChange:m=>c(m.target.value),rows:3,className:"mt-1 block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm"})]})]}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 px-4 py-3 flex justify-end gap-3",children:[f.jsx("button",{type:"button",onClick:()=>a(null),className:"py-2 px-4 border rounded-md text-sm",children:n("cancel")}),f.jsx("button",{type:"button",onClick:d,className:"py-2 px-4 border rounded-md text-sm text-white bg-brand-primary",children:n("save")})]})]})})]})},Ume=()=>{const{t}=ce(),[e,n]=E.useState("register"),{risks:r,incidents:i,addRisk:a,updateRisk:o,deleteRisk:c,addIncident:u,updateIncident:d,deleteIncident:m,users:p,trainings:y}=Rt(),{projects:x}=Or(),_=(C,N)=>console.log("Update CAPA",C,N),T=[{id:"register",label:t("riskRegister")},{id:"incidents",label:t("incidentReporting")},{id:"capa",label:t("capaReports")},{id:"effectiveness",label:t("effectivenessChecks")}];return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Yo,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:t("riskHubTitle")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:t("riskHubDescription")})]})]}),f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsx("nav",{className:"-mb-px flex space-x-6 rtl:space-x-reverse overflow-x-auto","aria-label":"Tabs",children:T.map(C=>f.jsx("button",{onClick:()=>n(C.id),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${e===C.id?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"}`,children:C.label},C.id))})}),f.jsxs("div",{children:[e==="register"&&f.jsx(Dme,{risks:r,users:p,trainingPrograms:y,onAdd:a,onUpdate:o,onDelete:c}),e==="incidents"&&f.jsx(Mme,{incidents:i,onAdd:u,onUpdate:d,onDelete:m}),e==="capa"&&f.jsx(Ome,{projects:x,users:p,onUpdateCapa:_}),e==="effectiveness"&&f.jsx(Lme,{projects:x,onUpdateCapa:_})]})]})},Vme=t=>{const{isOpen:e,onClose:n,onSave:r,existingPlan:i,projects:a,users:o}=t,{t:c}=ce(),u=!!i,[d,m]=E.useState(""),[p,y]=E.useState(""),[x,_]=E.useState("monthly"),[T,C]=E.useState(10),[N,M]=E.useState(""),P=o.filter(V=>V.role===Vt.Admin||V.role===Vt.Auditor);E.useEffect(()=>{i?(m(i.name),y(i.projectId),_(i.frequency),C(i.itemCount),M(i.assignedAuditorId)):(m(""),y(""),_("monthly"),C(10),M(""))},[i,e]);const L=V=>{V.preventDefault();const I={name:d,projectId:p,frequency:x,itemCount:T,assignedAuditorId:N,standardSection:""};r(u?{...i,...I}:I)},j=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:n,className:"py-2 px-4 border rounded-md",children:c("cancel")}),f.jsx("button",{type:"submit",form:"audit-plan-form",className:"py-2 px-4 border rounded-md text-white bg-brand-primary",children:c("save")})]});return f.jsx(Cn,{isOpen:e,onClose:n,title:c(u?"editAuditPlan":"newAuditPlan"),footer:j,size:"lg",children:f.jsxs("form",{id:"audit-plan-form",onSubmit:L,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ye,children:c("planName")}),f.jsx("input",{type:"text",id:"name",value:d,onChange:V=>m(V.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"project",className:ye,children:c("targetProject")}),f.jsxs("select",{id:"project",value:p,onChange:V=>y(V.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:c("selectProject")}),a.map(V=>f.jsx("option",{value:V.id,children:V.name},V.id))]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"frequency",className:ye,children:c("frequency")}),f.jsxs("select",{id:"frequency",value:x,onChange:V=>_(V.target.value),className:xe,children:[f.jsx("option",{value:"weekly",children:c("weekly")}),f.jsx("option",{value:"monthly",children:c("monthly")})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"items",className:ye,children:c("itemsToAudit")}),f.jsx("input",{type:"number",id:"items",value:T,onChange:V=>C(parseInt(V.target.value)),className:xe,min:"1"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"auditor",className:ye,children:c("assignAuditor")}),f.jsxs("select",{id:"auditor",value:N,onChange:V=>M(V.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:c("selectUser")}),P.map(V=>f.jsx("option",{value:V.id,children:V.name},V.id))]})]})]})})},Fme=()=>{const{t}=ce(),{users:e}=Rt(),{projects:n}=Or(),[r,i]=E.useState([]),[a,o]=E.useState(!1),[c,u]=E.useState(null),[d,m]=E.useState(null),p=x=>{"id"in x?i(_=>_.map(T=>T.id===x.id?x:T)):i(_=>[..._,{...x,id:`plan-${Date.now()}`}]),o(!1)},y=()=>{d&&(i(x=>x.filter(_=>_.id!==d.id)),m(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(_a,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:t("auditHub")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:t("auditHubDescription")})]})]}),f.jsxs("button",{onClick:()=>{u(null),o(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full md:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," ",t("newAuditPlan")]})]}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("planName")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("project")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("assignAuditor")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("frequency")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:t("actions")})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:r.map(x=>{var _,T;return f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 font-medium",children:x.name}),f.jsx("td",{className:"px-6 py-4 text-sm",children:(_=n.find(C=>C.id===x.projectId))==null?void 0:_.name}),f.jsx("td",{className:"px-6 py-4 text-sm",children:(T=e.find(C=>C.id===x.assignedAuditorId))==null?void 0:T.name}),f.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:t(x.frequency)}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("div",{className:"flex justify-end items-center gap-2",children:[f.jsxs("button",{className:"text-sm font-semibold text-brand-primary flex items-center gap-1",children:[f.jsx(kO,{className:"w-5 h-5"}),t("runAudit")]}),f.jsx("button",{onClick:()=>{u(x),o(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>m(x),className:"p-1 text-gray-500 hover:text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]},x.id)})})]}),r.length===0&&f.jsx(Hi,{icon:_a,title:t("noAuditPlans"),message:""})]})}),a&&f.jsx(Vme,{isOpen:a,onClose:()=>o(!1),onSave:p,existingPlan:c,projects:n,users:e}),d&&f.jsx(xc,{isOpen:!!d,onClose:()=>m(null),onConfirm:y,title:t("deleteAuditPlan"),message:t("areYouSureDeleteAuditPlan"),confirmationText:t("delete")})]})},Bme=({isOpen:t,onClose:e,onSave:n})=>{const{t:r}=ce(),[i,a]=E.useState(""),[o,c]=E.useState(""),[u,d]=E.useState("Policy"),m=y=>{y.preventDefault(),n({name:{en:i,ar:o},type:u}),e()},p=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md text-sm",children:r("cancel")}),f.jsx("button",{type:"submit",form:"doc-meta-form",className:"py-2 px-4 border rounded-md text-sm text-white bg-brand-primary",children:r("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:r("addNewDocument"),footer:p,children:f.jsxs("form",{id:"doc-meta-form",onSubmit:m,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:ye,children:r("documentNameEn")}),f.jsx("input",{type:"text",value:i,onChange:y=>a(y.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:r("documentNameAr")}),f.jsx("input",{type:"text",value:o,onChange:y=>c(y.target.value),className:xe,dir:"rtl",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:r("documentType")}),f.jsxs("select",{value:u,onChange:y=>d(y.target.value),className:xe,children:[f.jsx("option",{value:"Policy",children:r("policy")}),f.jsx("option",{value:"Procedure",children:r("procedure")}),f.jsx("option",{value:"Report",children:r("report")})]})]})]})})},zme=({doc:t,canModify:e,onApprove:n,onDelete:r,onView:i})=>{const{t:a,lang:o}=ce(),c={Approved:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","Pending Review":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",Rejected:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",Archived:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",Draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"};return f.jsxs("tr",{onClick:()=>i(t),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("div",{className:"font-medium text-brand-text-primary dark:text-dark-brand-text-primary",children:t.name[o]}),f.jsx("div",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t.type})]}),f.jsx("td",{className:"px-6 py-4",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${c[t.status]}`,children:a(t.status.charAt(0).toLowerCase()+t.status.slice(1).replace(" ",""))||t.status})}),f.jsxs("td",{className:"px-6 py-4 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:["v",t.currentVersion]}),f.jsx("td",{className:"px-6 py-4 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t.reviewDate?new Date(t.reviewDate).toLocaleDateString():"N/A"}),f.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:f.jsxs("div",{className:"flex items-center justify-end space-x-2 rtl:space-x-reverse",children:[e&&t.status==="Pending Review"&&f.jsx("button",{onClick:u=>{u.stopPropagation(),n(t)},className:"text-green-600 hover:underline font-semibold",children:a("approve")}),e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:u=>{u.stopPropagation(),i(t)},className:"p-1 text-gray-500 hover:text-brand-primary",title:a("edit"),children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:u=>{u.stopPropagation(),r(t.id)},className:"p-1 text-gray-500 hover:text-red-600",title:a("delete"),children:f.jsx(Ar,{className:"w-4 h-4"})})]})]})})]})},qme=({documents:t,canModify:e,onApprove:n,onDelete:r,onView:i})=>{const{t:a}=ce();return f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("documentName")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("status")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("version")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("reviewDate")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:a("actions")})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:t.map(o=>f.jsx(zme,{doc:o,canModify:e,onApprove:n,onDelete:r,onView:i},o.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-8 text-gray-500",children:a("noControlledDocuments")})]})})},Hme=t=>{const{document:e,setDocument:n,standards:r,isEditMode:i,setIsEditMode:a,canEdit:o,viewingVersion:c,setViewingVersion:u}=t,{t:d,lang:m}=ce(),p=Zr(),y=async T=>{const C=r.find(N=>N.standardId===T);if(C)try{const N=await Co.generatePolicyFromStandard(C,m);n(M=>({...M,content:{...M.content,[m]:N}})),i||a(!0)}catch{p.error(d("errorGeneratingContent"))}},x=async()=>{try{const T=await Co.improveWriting(e.content[m],m);n(C=>({...C,content:{...C.content,[m]:T}}))}catch{p.error("Failed to improve text.")}},_=async()=>{try{const T=m==="en"?"ar":"en",C=await Co.translateText(e.content[m],m);n(N=>({...N,content:{...N.content,[T]:C}}))}catch{p.error("Failed to translate text.")}};return f.jsxs("aside",{className:"w-80 border-l dark:border-dark-brand-border flex-shrink-0 flex flex-col",children:[f.jsx("div",{className:"p-4 border-b dark:border-dark-brand-border",children:o&&f.jsx("button",{onClick:()=>a(!i),className:"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-brand-primary",children:d(i?"viewMode":"editDocument")})}),i&&f.jsxs("div",{className:"p-4 border-b dark:border-dark-brand-border",children:[f.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-1",children:[f.jsx(ah,{className:"w-4 h-4"}),d("aiAssistant")]}),f.jsxs("div",{className:"mt-2 space-y-2",children:[f.jsxs("select",{onChange:T=>y(T.target.value),className:"w-full text-sm p-2 border rounded-md",children:[f.jsx("option",{children:d("selectStandard")}),r.map(T=>f.jsx("option",{value:T.standardId,children:T.standardId},T.standardId))]}),f.jsxs("button",{onClick:x,className:"w-full text-sm p-2 border rounded-md flex items-center gap-2 hover:bg-gray-100",children:[f.jsx(jr,{className:"w-4 h-4"}),d("improveWriting")]}),f.jsxs("button",{onClick:_,className:"w-full text-sm p-2 border rounded-md flex items-center gap-2 hover:bg-gray-100",children:[f.jsx(p1,{className:"w-4 h-4"}),d("translate")]})]})]}),f.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[f.jsx("h4",{className:"text-sm font-semibold",children:d("versionHistory")}),f.jsxs("ul",{className:"mt-2 space-y-2",children:[f.jsx("li",{children:f.jsxs("button",{onClick:()=>u("current"),className:`w-full text-left text-sm p-2 rounded-md ${c==="current"?"bg-indigo-100 font-semibold":"hover:bg-gray-100"}`,children:["v",e.currentVersion," (",d(e.status.charAt(0).toLowerCase()+e.status.slice(1).replace(" ","")),") - Current"]})}),e.versionHistory.map(T=>f.jsx("li",{children:f.jsxs("button",{onClick:()=>u(T.version),className:`w-full text-left text-sm p-2 rounded-md ${c===T.version?"bg-indigo-100 font-semibold":"hover:bg-gray-100"}`,children:["v",T.version," (Approved)",f.jsx("span",{className:"block text-xs text-gray-500",children:new Date(T.date).toLocaleDateString()})]})},T.version))]})]})]})},$me=({isOpen:t,onClose:e,document:n,onSave:r,standards:i})=>{const{t:a,lang:o,dir:c}=ce(),[u,d]=E.useState(n),[m,p]=E.useState(n.status==="Draft"),[y,x]=E.useState("current");E.useEffect(()=>{d(n),p(n.status==="Draft"),x("current")},[n,t]);const _=E.useMemo(()=>{if(y==="current")return u.content;const N=u.versionHistory.find(M=>M.version===y);return N?N.content:u.content},[u,y]),T=()=>{let N={...u};if(u.status==="Approved"&&m){if(!window.confirm(a("newVersionPrompt")))return;N={...u,status:"Draft",currentVersion:u.currentVersion+1,versionHistory:[...u.versionHistory,{version:u.currentVersion,date:u.approvalDate||new Date().toISOString(),uploadedBy:u.approvedBy||"",content:n.content}]}}r(N)},C=u.status==="Draft"||u.status==="Approved";return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center backdrop-blur-sm modal-enter",onClick:e,children:f.jsxs("div",{className:"bg-white dark:bg-dark-brand-surface rounded-lg shadow-xl w-full max-w-7xl h-[90vh] m-4 flex flex-col modal-content-enter",onClick:N=>N.stopPropagation(),dir:c,children:[f.jsxs("header",{className:"p-4 border-b dark:border-dark-brand-border flex justify-between items-center flex-shrink-0",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold dark:text-dark-brand-text-primary",children:u.name[o]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["v",u.currentVersion," - ",a(u.status.charAt(0).toLowerCase()+u.status.slice(1).replace(" ",""))]})]}),f.jsx("button",{onClick:e,className:"p-2 text-gray-500 rounded-full dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:f.jsx(td,{className:"w-6 h-6"})})]}),f.jsxs("main",{className:"flex-grow flex overflow-hidden",children:[f.jsxs("div",{className:"flex-grow p-6 overflow-y-auto",children:[y!=="current"&&f.jsxs("div",{className:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200 p-3 rounded-md mb-4 text-sm",children:[a("preview")," v",y,". ",f.jsx("button",{onClick:()=>x("current"),className:"font-semibold underline",children:a("backToCurrent")})]}),m&&y==="current"?f.jsx("textarea",{className:"w-full h-full p-2 border rounded-md dark:bg-gray-800 dark:border-gray-700",value:u.content[o]||"",onChange:N=>d(M=>({...M,content:{...M.content,[o]:N.target.value}}))}):f.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:_[o]||""}})]}),f.jsx(Hme,{document:u,setDocument:d,standards:i,isEditMode:m,setIsEditMode:p,canEdit:C,viewingVersion:y,setViewingVersion:x})]}),f.jsxs("footer",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end items-center space-x-3 rtl:space-x-reverse border-t dark:border-dark-brand-border flex-shrink-0",children:[u.status==="Draft"&&f.jsx("button",{type:"button",className:"text-sm font-medium",children:a("requestApproval")}),m&&f.jsx("button",{type:"button",onClick:T,className:"inline-flex justify-center py-2 px-4 rounded-md text-sm font-medium text-white bg-brand-primary hover:bg-indigo-700",children:a("saveChanges")})]})]})})},Gme=({isOpen:t,onClose:e,document:n,onSave:r})=>{const{t:i,lang:a,dir:o}=ce();if(!t)return null;const c=()=>{r(n)};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center backdrop-blur-sm modal-enter",onClick:e,children:f.jsxs("div",{className:"bg-white dark:bg-dark-brand-surface rounded-lg shadow-xl w-full max-w-7xl h-[90vh] m-4 flex flex-col modal-content-enter",onClick:u=>u.stopPropagation(),dir:o,children:[f.jsxs("header",{className:"p-4 border-b dark:border-dark-brand-border flex justify-between items-center flex-shrink-0",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold dark:text-dark-brand-text-primary",children:n.name[a]}),f.jsxs("p",{className:"text-sm text-gray-500",children:["v",n.currentVersion," - ",i(n.status.charAt(0).toLowerCase()+n.status.slice(1).replace(" ",""))]})]}),f.jsx("button",{onClick:e,className:"p-2 text-gray-500 rounded-full dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:f.jsx(td,{className:"w-6 h-6"})})]}),f.jsx("main",{className:"flex-grow p-6 overflow-hidden flex items-center justify-center bg-gray-100 dark:bg-gray-800",children:f.jsx("p",{className:"text-gray-500",children:"Process Map Editor Placeholder"})}),f.jsx("footer",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-3 flex justify-end items-center space-x-3 rtl:space-x-reverse border-t dark:border-dark-brand-border flex-shrink-0",children:f.jsx("button",{type:"button",onClick:c,className:"inline-flex justify-center py-2 px-4 rounded-md text-sm font-medium text-white bg-brand-primary hover:bg-indigo-700",children:i("saveChanges")})})]})})},Kme=({documents:t,standards:e,currentUser:n,onUpdateDocument:r,onCreateDocument:i,onAddProcessMap:a,onDeleteDocument:o,onApproveDocument:c})=>{const{t:u,lang:d}=ce(),[m,p]=E.useState(!1),[y,x]=E.useState(null),[_,T]=E.useState(!1),[C,N]=E.useState(null),M=n.role===Vt.Admin,P=I=>{y&&(c(y.id,I),x(null))},L=I=>{r(I),N(null)},j=E.useMemo(()=>t.filter(I=>I.isControlled),[t]),V=E.useMemo(()=>({total:j.length,approved:j.filter(I=>I.status==="Approved").length,pending:j.filter(I=>I.status==="Pending Review").length,drafts:j.filter(I=>I.status==="Draft").length}),[j]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Mu,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:u("documentControl")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:u("documentControlHubDescription")})]})]}),M&&f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>T(!_),className:"bg-brand-primary text-white px-5 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full md:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),u("addNew")," ",f.jsx(Yy,{className:"w-4 h-4 ltr:ml-2 rtl:mr-2"})]}),_&&f.jsxs("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-dark-brand-surface rounded-md shadow-lg border dark:border-dark-brand-border z-10",children:[f.jsxs("button",{onClick:()=>{p(!0),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:[u("policy"),"/",u("procedure")]}),f.jsx("button",{onClick:()=>{a({name:{en:"New Process Map",ar:"  "}}),T(!1)},className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",children:u("processMap")})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(fr,{title:u("totalDocuments"),value:V.total,icon:Mu,color:"from-blue-500 to-blue-700 bg-gradient-to-br"}),f.jsx(fr,{title:u("approved"),value:V.approved,icon:ja,color:"from-green-500 to-green-700 bg-gradient-to-br"}),f.jsx(fr,{title:u("pendingReview"),value:V.pending,icon:oh,color:"from-yellow-500 to-yellow-700 bg-gradient-to-br"}),f.jsx(fr,{title:u("drafts"),value:V.drafts,icon:jr,color:"from-gray-500 to-gray-700 bg-gradient-to-br"})]}),f.jsx(qme,{documents:j,canModify:M,onApprove:I=>x(I),onDelete:o,onView:N}),f.jsx(Bme,{isOpen:m,onClose:()=>p(!1),onSave:i}),y&&f.jsx(GU,{isOpen:!!y,onClose:()=>x(null),onConfirm:P,actionTitle:`${u("approve")} "${y.name[d]}"`,signatureStatement:u("signatureStatementDocument"),confirmActionText:u("signAndApprove")}),C&&C.type!=="Process Map"&&f.jsx($me,{isOpen:!!C,onClose:()=>N(null),document:C,onSave:L,standards:e}),C&&C.type==="Process Map"&&f.jsx(Gme,{isOpen:!!C,onClose:()=>N(null),document:C,onSave:L})]})},Yme=()=>{const{t}=ce(),[e,n]=E.useState(!1),[r,i]=E.useState([{name:"AccreditEx API",status:"Operational",details:"apiStatus"},{name:"FHIR Endpoint",status:"Operational",details:"connected"},{name:"HRIS Sync",status:"Operational",details:"lastSynced"}]),a=()=>{n(!0),i(c=>c.map(u=>({...u,status:"Checking"}))),setTimeout(()=>{i([{name:"AccreditEx API",status:"Operational",details:"apiStatus"},{name:"FHIR Endpoint",status:"Operational",details:"connected"},{name:"HRIS Sync",status:"Operational",details:"lastSynced"}]),n(!1)},1500)},o=({status:c})=>c==="Checking"?f.jsx(NO,{className:"w-4 h-4 text-gray-400 animate-spin"}):c==="Operational"?f.jsx(ja,{className:"w-4 h-4 text-green-500"}):f.jsx(Yo,{className:"w-4 h-4 text-red-500"});return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary flex items-center gap-2",children:[f.jsx(kB,{className:"w-6 h-6 text-brand-primary"}),t("apiServices")]}),f.jsx("button",{onClick:a,disabled:e,className:"text-sm font-semibold text-brand-primary hover:underline disabled:opacity-50",children:t(e?"checking":"runHealthCheck")})]}),f.jsx("div",{className:"mt-4 space-y-3 flex-grow",children:r.map(c=>f.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(o,{status:c.status}),f.jsx("span",{className:"text-sm font-medium",children:c.name})]}),f.jsx("span",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t(c.details)})]},c.name))}),f.jsxs("p",{className:"text-xs text-center text-gray-400 mt-4",children:[t("lastChecked"),": ",new Date().toLocaleTimeString()]})]})},Wme=()=>{const{t}=ce(),[e,n]=E.useState([]),r=E.useRef(null),i=["Observation","Patient","MeasureReport"],a=["newObservation","patientRecordUpdated","measureReportReceived"];E.useEffect(()=>{const c=setInterval(()=>{const u=Math.floor(Math.random()*i.length),d={id:Date.now(),timestamp:new Date().toLocaleTimeString(),messageKey:a[u],resourceType:i[u]};n(m=>[d,...m.slice(0,19)])},3e3);return()=>clearInterval(c)},[]),E.useEffect(()=>{r.current&&(r.current.scrollTop=0)},[e]);const o=c=>{switch(c){case"Observation":return"border-blue-500 text-blue-700 dark:text-blue-300";case"Patient":return"border-green-500 text-green-700 dark:text-green-300";case"MeasureReport":return"border-purple-500 text-purple-700 dark:text-purple-300"}};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border h-full flex flex-col",children:[f.jsxs("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary flex items-center gap-2",children:[f.jsx(TB,{className:"w-6 h-6 text-brand-primary"}),t("liveDataFeed")]}),f.jsxs("div",{ref:r,className:"mt-4 flex-grow h-64 overflow-y-auto space-y-2 bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg",children:[e.map(c=>f.jsxs("div",{className:`p-2 rounded-md border-l-4 ${o(c.resourceType)} animate-[fadeIn_0.5s_ease-out]`,children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("p",{className:"text-sm font-semibold",children:t("fhirResourceReceived")}),f.jsx("p",{className:"text-xs text-gray-400",children:c.timestamp})]}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t(c.messageKey),": ",f.jsx("span",{className:"font-mono",children:c.resourceType})]})]},c.id)),e.length===0&&f.jsx("p",{className:"text-sm text-center text-gray-400 pt-16",children:t("waitingForData")})]})]})},FM=({title:t,children:e,defaultOpen:n=!1})=>{const[r,i]=E.useState(n);return f.jsxs("div",{className:"border rounded-lg dark:border-dark-brand-border",children:[f.jsxs("button",{onClick:()=>i(!r),className:"w-full flex justify-between items-center p-4 text-left font-semibold",children:[f.jsx("span",{children:t}),f.jsx(Yy,{className:`w-5 h-5 transition-transform ${r?"rotate-180":""}`})]}),r&&f.jsx("div",{className:"p-4 border-t dark:border-dark-brand-border animate-[fadeIn_0.3s_ease-out]",children:e})]})},BM=({code:t,lang:e})=>f.jsx("pre",{className:"bg-slate-800 text-white p-4 rounded-lg text-xs overflow-x-auto",children:f.jsx("code",{className:`language-${e}`,children:t})}),Jme=()=>{const{t}=ce();return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(fs,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold dark:text-dark-brand-text-primary",children:t("dataHub")}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:t("dataHubDescription")})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx(Yme,{}),f.jsx(Wme,{})]}),f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsx("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:t("integrationStrategy")}),f.jsx("p",{className:"mt-1 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t("integrationStrategyDescription")}),f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsxs(FM,{title:t("fhirFoundation"),children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mb-4",children:t("fhirFoundationDescription")}),f.jsx("p",{className:"text-xs font-semibold mb-2",children:t("exampleResource")}),f.jsx(BM,{code:`{
  "resourceType": "Observation",
  "status": "final",
  "code": { "text": "Hand Hygiene Compliance" },
  "valueInteger": 98,
  "subject": { "reference": "Practitioner/user-3" }
}`,lang:"json"})]}),f.jsxs(FM,{title:t("apiArchitecture"),children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mb-4",children:t("apiArchitectureDescription")}),f.jsx("p",{className:"text-xs font-semibold mb-2",children:t("exampleApiCall")}),f.jsx(BM,{code:`POST /api/v1/evidence
Authorization: Bearer <YOUR_API_TOKEN>

{
  "checklistItemId": "cl-1-1a",
  "sourceSystem": "EHR-Interface-1",
  "evidence": {
    "resourceType": "MeasureReport",
    "status": "complete",
    "measure": "http://accreditation.org/Measure/hand-hygiene",
    "value": "98.5"
  }
}`,lang:"http"})]})]})]})]})},Qme=({name:t})=>f.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center font-bold text-xs border-2 border-white dark:border-dark-brand-surface",title:t,children:t.split(" ").map(e=>e[0]).join("")}),Xme=({department:t,canModify:e,onSelect:n,onEdit:r,onDelete:i})=>{const{t:a,lang:o}=ce();return f.jsxs("div",{onClick:n,className:"bg-brand-surface dark:bg-dark-brand-surface rounded-xl shadow-sm border border-brand-border dark:border-dark-brand-border hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer flex flex-col justify-between h-full",children:[f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:t.name[o]}),f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:"text-sm font-medium text-brand-text-secondary dark:text-dark-brand-text-secondary",children:a("complianceRate")}),f.jsxs("span",{className:"text-sm font-bold text-brand-primary-600 dark:text-brand-primary-400",children:[t.compliance,"%"]})]}),f.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:f.jsx("div",{className:"bg-brand-primary-600 h-2 rounded-full",style:{width:`${t.compliance}%`}})})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border dark:border-dark-brand-border flex justify-between items-end",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-semibold text-brand-text-secondary dark:text-dark-brand-text-secondary mb-2",children:a("teamMembers")}),f.jsxs("div",{className:"flex -space-x-2 rtl:space-x-reverse",children:[t.usersInDept.slice(0,4).map(c=>f.jsx(Qme,{name:c.name},c.id)),t.usersInDept.length>4&&f.jsxs("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 flex items-center justify-center text-xs font-bold border-2 border-white dark:border-dark-brand-surface",children:["+",t.usersInDept.length-4]})]})]}),f.jsx("div",{className:"text-right",children:f.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[f.jsxs("div",{className:"flex items-center text-brand-text-secondary dark:text-dark-brand-text-secondary",title:`${t.userCount} ${a("assignedUsers")}`,children:[f.jsx(nd,{className:"w-4 h-4 mr-1"}),f.jsx("span",{children:t.userCount})]}),f.jsxs("div",{className:"flex items-center text-brand-text-secondary dark:text-dark-brand-text-secondary",title:`${t.taskCount} ${a("tasksAssigned")}`,children:[f.jsx(hs,{className:"w-4 h-4 mr-1"}),f.jsx("span",{children:t.taskCount})]})]})})]})]}),f.jsxs("div",{className:"border-t dark:border-dark-brand-border bg-slate-50 dark:bg-slate-900/50 px-5 py-3 flex justify-between items-center rounded-b-xl",children:[f.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:e&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:c=>{c.stopPropagation(),r()},className:"p-1 text-slate-500 dark:text-slate-400 hover:text-brand-primary-600 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",title:a("editDepartment"),children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:c=>{c.stopPropagation(),i()},className:"p-1 text-slate-500 dark:text-slate-400 hover:text-red-600 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",title:a("delete"),children:f.jsx(Ar,{className:"w-4 h-4"})})]})}),f.jsx("span",{className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline",children:a("viewDetails")})]})]})},Zme=({isOpen:t,onClose:e,onSave:n,existingDepartment:r,competencies:i})=>{const{t:a,lang:o}=ce(),c=!!r,[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState([]);E.useEffect(()=>{r?(d(r.name.en),p(r.name.ar),x(r.requiredCompetencyIds||[])):(d(""),p(""),x([]))},[r,t]);const _=C=>{if(C.preventDefault(),!u||!m)return;const N={name:{en:u,ar:m},requiredCompetencyIds:y.length>0?y:void 0};n(c?{id:r.id,...N}:N)},T=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:a("cancel")}),f.jsx("button",{type:"submit",form:"dept-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:a("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:a(c?"editDepartment":"addNewDepartment"),footer:T,size:"lg",children:f.jsxs("form",{id:"dept-form",onSubmit:_,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameEn",className:ye,children:a("departmentNameEn")}),f.jsx("input",{type:"text",id:"nameEn",value:u,onChange:C=>d(C.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameAr",className:ye,children:a("departmentNameAr")}),f.jsx("input",{type:"text",id:"nameAr",value:m,onChange:C=>p(C.target.value),className:xe,required:!0,dir:"rtl"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"competencies",className:ye,children:a("requiredCompetencies")}),f.jsx("select",{id:"competencies",multiple:!0,value:y,onChange:C=>x(Array.from(C.target.selectedOptions,N=>N.value)),className:`${xe} h-32`,children:i.map(C=>f.jsx("option",{value:C.id,children:C.name[o]},C.id))})]})]})})},epe=t=>{const{departments:e,users:n,projects:r,onAdd:i,onUpdate:a,onDelete:o,setNavigation:c}=t,{t:u}=ce(),{currentUser:d}=Pn(),{competencies:m}=Rt(),[p,y]=E.useState(!1),[x,_]=E.useState(null),[T,C]=E.useState(null),N=(d==null?void 0:d.role)==="Admin",M=E.useMemo(()=>e.map(j=>{const V=n.filter(q=>q.departmentId===j.id),I=new Set(V.map(q=>q.id)),R=r.flatMap(q=>q.checklist).filter(q=>q.assignedTo&&I.has(q.assignedTo)),U=R.filter(q=>q.status!==Ue.NotApplicable);let F=0;U.forEach(q=>{q.status===Ue.Compliant&&(F+=1),q.status===Ue.PartiallyCompliant&&(F+=.5)});const B=U.length>0?Math.round(F/U.length*100):100;return{...j,userCount:V.length,taskCount:R.length,compliance:B,usersInDept:V}}),[e,n,r]),P=j=>{"id"in j?a(j):i(j),y(!1)},L=()=>{T&&(o(T.id),C(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Ql,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:u("departmentsHub")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:u("departmentsHubDescription")})]})]}),N&&f.jsxs("button",{onClick:()=>{_(null),y(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full md:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," ",u("addNewDepartment")]})]}),M.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(j=>f.jsx(Xme,{department:j,canModify:N,onSelect:()=>c({view:"departmentDetail",departmentId:j.id}),onEdit:()=>{_(j),y(!0)},onDelete:()=>C(j)},j.id))}):f.jsx(Hi,{icon:Ql,title:u("noDepartments"),message:u("noDepartmentsMessage")}),p&&f.jsx(Zme,{isOpen:p,onClose:()=>y(!1),onSave:P,existingDepartment:x,competencies:m}),T&&f.jsx(xc,{isOpen:!!T,onClose:()=>C(null),onConfirm:L,title:u("deleteDepartment"),message:u("areYouSureDeleteDepartment"),confirmationText:u("delete")})]})},tpe=({users:t})=>{const{t:e}=ce();return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border h-full",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:e("departmentMembers")}),f.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[t.map(n=>f.jsxs("div",{className:"p-2 rounded-md flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-primary-500 to-brand-primary-700 text-white flex items-center justify-center font-bold text-sm flex-shrink-0",children:n.name.split(" ").map(r=>r[0]).join("")}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-sm",children:n.name}),f.jsx("p",{className:"text-xs text-gray-500",children:n.jobTitle||n.role})]})]},n.id)),t.length===0&&f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:e("noUsersInDepartment")})]})]})},npe=({tasks:t,users:e})=>{const{t:n}=ce(),[r,i]=E.useState(""),a={[Ue.Compliant]:{text:n("compliant"),color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},[Ue.PartiallyCompliant]:{text:n("partiallyCompliant"),color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Ue.NonCompliant]:{text:n("nonCompliant"),color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Ue.NotApplicable]:{text:n("notApplicable"),color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},o=E.useMemo(()=>t.filter(c=>c.item.toLowerCase().includes(r.toLowerCase())||c.standardId.toLowerCase().includes(r.toLowerCase())),[t,r]);return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsx("div",{className:"p-4 border-b dark:border-dark-brand-border",children:f.jsxs("div",{className:"relative flex-grow max-w-sm",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:n("searchByTask"),value:r,onChange:c=>i(c.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-brand-primary focus:border-brand-primary text-sm bg-white dark:bg-gray-700 dark:text-white dark:placeholder-gray-400"})]})}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider rtl:text-right",children:n("status")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider rtl:text-right",children:n("taskDescription")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider rtl:text-right",children:n("assignedTo")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider rtl:text-right",children:n("project")})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:o.map(c=>{var d,m;const u=e.find(p=>p.id===c.assignedTo);return f.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${((d=a[c.status])==null?void 0:d.color)||"bg-gray-100 text-gray-800"}`,children:((m=a[c.status])==null?void 0:m.text)||c.status})}),f.jsxs("td",{className:"px-6 py-4",children:[f.jsx("p",{className:"text-sm font-medium text-brand-text-primary dark:text-dark-brand-text-primary",children:c.item}),f.jsxs("p",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:[n("standard"),": ",c.standardId]})]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(u==null?void 0:u.name)||n("unassigned")}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.projectName})]},c.id)})})]}),o.length===0&&f.jsx("p",{className:"text-center py-8 text-brand-text-secondary dark:text-dark-brand-text-secondary",children:n("noTasksForDepartment")})]})]})},rpe=({department:t,users:e,projects:n})=>{const{t:r,lang:i}=ce(),a=E.useMemo(()=>{const o=e.filter(y=>y.departmentId===t.id),c=new Set(o.map(y=>y.id)),u=n.flatMap(y=>y.checklist.filter(x=>x.assignedTo&&c.has(x.assignedTo)).map(x=>({...x,projectName:y.name}))),d=u.filter(y=>y.status!==Ue.NotApplicable);let m=0;d.forEach(y=>{y.status===Ue.Compliant&&(m+=1),y.status===Ue.PartiallyCompliant&&(m+=.5)});const p=d.length>0?Math.round(m/d.length*100):100;return{usersInDept:o,tasks:u,compliance:p,userCount:o.length,taskCount:u.length}},[t,e,n]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Ql,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:t.name[i]}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:r("departmentDetails")})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsx(fr,{title:r("complianceRate"),value:`${a.compliance}%`,icon:ja,color:"bg-green-500"}),f.jsx(fr,{title:r("totalMembers"),value:a.userCount,icon:nd,color:"bg-blue-500"}),f.jsx(fr,{title:r("totalTasks"),value:a.taskCount,icon:hs,color:"bg-yellow-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx(tpe,{users:a.usersInDept})}),f.jsx("div",{className:"lg:col-span-2",children:f.jsx(npe,{tasks:a.tasks,users:e})})]})]})},zM=({program:t,status:e,assignment:n,onAction:r})=>{const{t:i,lang:a}=ce(),o=()=>!e||e.status==="Not Started"?{text:i("statusNotStarted"),color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",buttonText:i("startTraining")}:e.status==="Completed"?{text:i("statusCompleted"),color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",buttonText:i("viewCertificate")}:{text:i("statusInProgress"),color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",buttonText:i("continueTraining")},{text:c,color:u,buttonText:d}=o();return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-xl shadow-md border border-brand-border dark:border-dark-brand-border hover:shadow-xl hover:-translate-y-1 transition-all flex flex-col justify-between",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-lg font-bold text-brand-text-primary dark:text-dark-brand-text-primary flex-1 ltr:pr-2 rtl:pl-2",children:t.title[a]}),f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u} flex-shrink-0`,children:c})]}),f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mt-2 line-clamp-3 h-16",children:t.description[a]}),f.jsx("div",{className:"mt-4 text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:(e==null?void 0:e.status)==="Completed"&&e.completionDate?f.jsxs(f.Fragment,{children:[f.jsxs("p",{children:[i("completedOn"),": ",new Date(e.completionDate).toLocaleDateString()]}),f.jsxs("p",{children:[i("score"),": ",f.jsxs("span",{className:"font-semibold",children:[e.score,"%"]})]})]}):(n==null?void 0:n.dueDate)&&f.jsxs("p",{className:"text-red-600 dark:text-red-400 font-semibold",children:[i("dueOn"),": ",new Date(n.dueDate).toLocaleDateString()]})})]}),f.jsx("div",{className:"border-t dark:border-dark-brand-border bg-slate-50 dark:bg-slate-900/50 px-5 py-3 flex justify-end rounded-b-xl",children:f.jsx("button",{onClick:r,className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline",children:(e==null?void 0:e.status)==="Completed"&&!e.certificateId?i("retakeQuiz"):d})})]})},ipe=({trainingPrograms:t,userTrainingStatus:e,currentUser:n,setNavigation:r})=>{const{t:i}=ce(),a=u=>{const d=e[u];(d==null?void 0:d.status)==="Completed"&&d.certificateId?r({view:"certificate",certificateId:d.certificateId}):r({view:"trainingDetail",trainingId:u})},{pending:o,completed:c}=E.useMemo(()=>{var m;new Set((m=n.trainingAssignments)==null?void 0:m.map(p=>p.trainingId));const u=(n.trainingAssignments||[]).filter(p=>{var y;return((y=e[p.trainingId])==null?void 0:y.status)!=="Completed"}).map(p=>({program:t.find(y=>y.id===p.trainingId),status:e[p.trainingId],assignment:p})).filter(p=>p.program),d=t.filter(p=>{var y;return((y=e[p.id])==null?void 0:y.status)==="Completed"}).map(p=>{var y;return{program:p,status:e[p.id],assignment:(y=n.trainingAssignments)==null?void 0:y.find(x=>x.trainingId===p.id)}});return{pending:u,completed:d}},[n,t,e]);return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:i("pendingTraining")}),o.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(({program:u,status:d,assignment:m})=>f.jsx(zM,{program:u,status:d,assignment:m,onAction:()=>a(u.id)},u.id))}):f.jsx(Hi,{icon:Aa,title:i("noPendingTraining"),message:""})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:i("completedTraining")}),c.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(({program:u,status:d,assignment:m})=>f.jsx(zM,{program:u,status:d,assignment:m,onAction:()=>a(u.id)},u.id))}):f.jsx(Hi,{icon:Aa,title:i("noCompletedTraining"),message:""})]})]})},ape=({isOpen:t,onClose:e,onSave:n,existingProgram:r})=>{const{t:i}=ce(),a=!!r,[o,c]=E.useState({en:"",ar:""}),[u,d]=E.useState({en:"",ar:""}),[m,p]=E.useState({en:"",ar:""}),[y,x]=E.useState(80),[_,T]=E.useState([]);E.useEffect(()=>{r?(c(r.title),d(r.description),p(r.content),x(r.passingScore),T(r.quiz)):(c({en:"",ar:""}),d({en:"",ar:""}),p({en:"",ar:""}),x(80),T([]))},[r,t]);const C=(R,U,F)=>{const B=[..._];B[R]={...B[R],[U]:F},T(B)},N=(R,U,F,B)=>{const q=[..._];q[R].options[U][F]=B,T(q)},M=()=>T([..._,{id:`q-${Date.now()}`,question:{en:"",ar:""},options:[{en:"",ar:""}],correctOptionIndex:0}]),P=R=>T(_.filter((U,F)=>F!==R)),L=R=>{const U=[..._];U[R].options.push({en:"",ar:""}),T(U)},j=(R,U)=>{const F=[..._];F[R].options=F[R].options.filter((B,q)=>q!==U),F[R].correctOptionIndex===U&&(F[R].correctOptionIndex=0),T(F)},V=R=>{R.preventDefault();const U={title:o,description:u,content:m,passingScore:y,quiz:_};n(a?{...U,id:r.id}:U)},I=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md",children:i("cancel")}),f.jsx("button",{type:"submit",form:"training-form",className:"py-2 px-4 border rounded-md text-white bg-brand-primary",children:i("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:i(a?"editTraining":"createNewTraining"),footer:I,size:"4xl",maxHeight:"90vh",children:f.jsxs("form",{id:"training-form",onSubmit:V,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"titleEn",className:ye,children:[i("trainingTitle")," (EN)"]}),f.jsx("input",{type:"text",id:"titleEn",value:o.en,onChange:R=>c(U=>({...U,en:R.target.value})),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"titleAr",className:ye,children:[i("trainingTitle")," (AR)"]}),f.jsx("input",{type:"text",id:"titleAr",value:o.ar,onChange:R=>c(U=>({...U,ar:R.target.value})),className:xe,required:!0,dir:"rtl"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"descEn",className:ye,children:[i("trainingDescription")," (EN)"]}),f.jsx("textarea",{id:"descEn",value:u.en,onChange:R=>d(U=>({...U,en:R.target.value})),rows:2,className:xe})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"descAr",className:ye,children:[i("trainingDescription")," (AR)"]}),f.jsx("textarea",{id:"descAr",value:u.ar,onChange:R=>d(U=>({...U,ar:R.target.value})),rows:2,className:xe,dir:"rtl"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"contentEn",className:ye,children:[i("content")," (EN)"]}),f.jsx("textarea",{id:"contentEn",value:m.en,onChange:R=>p(U=>({...U,en:R.target.value})),rows:5,className:xe,placeholder:"HTML content is supported"})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"contentAr",className:ye,children:[i("content")," (AR)"]}),f.jsx("textarea",{id:"contentAr",value:m.ar,onChange:R=>p(U=>({...U,ar:R.target.value})),rows:5,className:xe,dir:"rtl",placeholder:" HTML "})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-semibold",children:i("quizSection")}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"passingScore",className:ye,children:[i("passingScore")," (%)"]}),f.jsx("input",{type:"number",min:"0",max:"100",id:"passingScore",value:y,onChange:R=>x(parseInt(R.target.value)),className:xe+" w-24"})]}),f.jsxs("div",{className:"space-y-4 mt-4",children:[_.map((R,U)=>f.jsxs("div",{className:"p-4 border rounded-md bg-gray-50 dark:bg-gray-800 space-y-3",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("label",{className:"font-medium",children:["Question ",U+1]}),f.jsx("button",{type:"button",onClick:()=>P(U),className:"text-red-500",children:f.jsx(Ar,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsx("input",{type:"text",placeholder:"Question (EN)",value:R.question.en,onChange:F=>C(U,"question",{...R.question,en:F.target.value}),className:xe}),f.jsx("input",{type:"text",placeholder:"Question (AR)",value:R.question.ar,onChange:F=>C(U,"question",{...R.question,ar:F.target.value}),className:xe,dir:"rtl"})]}),R.options.map((F,B)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"radio",name:`correct-opt-${R.id}`,checked:R.correctOptionIndex===B,onChange:()=>C(U,"correctOptionIndex",B)}),f.jsx("input",{type:"text",placeholder:`Option ${B+1} (EN)`,value:F.en,onChange:q=>N(U,B,"en",q.target.value),className:xe}),f.jsx("input",{type:"text",placeholder:`Option ${B+1} (AR)`,value:F.ar,onChange:q=>N(U,B,"ar",q.target.value),className:xe,dir:"rtl"}),R.options.length>1&&f.jsx("button",{type:"button",onClick:()=>j(U,B),className:"text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]},B)),f.jsxs("button",{type:"button",onClick:()=>L(U),className:"text-sm text-brand-primary flex items-center gap-1",children:[f.jsx(Rn,{className:"w-4 h-4"}),i("addOption")]})]},R.id)),f.jsxs("button",{type:"button",onClick:M,className:"text-sm font-semibold flex items-center gap-1",children:[f.jsx(Rn,{className:"w-5 h-5"}),i("addQuestion")]})]})]})]})})},spe=({isOpen:t,onClose:e,onAssign:n,trainingPrograms:r,users:i,departments:a})=>{const{t:o,lang:c}=ce(),u=Zr(),[d,m]=E.useState(""),[p,y]=E.useState([]),[x,_]=E.useState([]),[T,C]=E.useState(),N=async P=>{if(P.preventDefault(),!d||p.length===0&&x.length===0){u.error(o("pleaseFillRequired"));return}await n({trainingId:d,userIds:p,departmentIds:x,dueDate:T?T.toISOString().split("T")[0]:void 0}),u.success(o("trainingAssignedSuccess")),e()},M=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md",children:o("cancel")}),f.jsx("button",{type:"submit",form:"assign-form",className:"py-2 px-4 border rounded-md text-white bg-brand-primary",children:o("assign")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o("assignTraining"),footer:M,size:"lg",children:f.jsxs("form",{id:"assign-form",onSubmit:N,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"training",className:ye,children:o("trainingModule")}),f.jsxs("select",{id:"training",value:d,onChange:P=>m(P.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:o("selectTraining")}),r.map(P=>f.jsx("option",{value:P.id,children:P.title[c]},P.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"users",className:ye,children:o("assignToUsers")}),f.jsx("select",{id:"users",multiple:!0,value:p,onChange:P=>y(Array.from(P.target.selectedOptions,L=>L.value)),className:`${xe} h-32`,children:i.map(P=>f.jsx("option",{value:P.id,children:P.name},P.id))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"departments",className:ye,children:o("assignToDepartments")}),f.jsx("select",{id:"departments",multiple:!0,value:x,onChange:P=>_(Array.from(P.target.selectedOptions,L=>L.value)),className:`${xe} h-24`,children:a.map(P=>f.jsx("option",{value:P.id,children:P.name[c]},P.id))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"dueDate",className:ye,children:o("assignmentDueDate")}),f.jsx(Fo,{date:T,setDate:C})]})]})})},ope=({trainingPrograms:t,users:e,departments:n,onAssign:r,onCreate:i,onUpdate:a,onDelete:o})=>{const{t:c,lang:u}=ce(),[d,m]=E.useState(!1),[p,y]=E.useState(!1),[x,_]=E.useState(null),T=N=>{"id"in N?a(N):i(N),m(!1)},C=N=>{window.confirm(c("areYouSureDeleteTraining"))&&o(N)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-end",children:[f.jsx("button",{onClick:()=>y(!0),className:"bg-white dark:bg-slate-700 text-brand-text-primary dark:text-dark-brand-text-primary border border-slate-300 dark:border-slate-600 px-4 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 flex items-center justify-center font-semibold shadow-sm",children:c("assignTraining")}),f.jsxs("button",{onClick:()=>{_(null),m(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),c("createNewTraining")]})]}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:c("trainingTitle")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:c("quizQuestions")}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:c("actions")})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-brand-border",children:t.map(N=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 font-medium",children:N.title[u]}),f.jsx("td",{className:"px-6 py-4 text-sm",children:N.quiz.length}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("div",{className:"flex justify-end items-center gap-2",children:[f.jsx("button",{onClick:()=>{_(N),m(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>C(N.id),className:"p-1 text-gray-500 hover:text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]},N.id))})]}),t.length===0&&f.jsx(Hi,{icon:Aa,title:"No Training Programs",message:"Create a new training program to get started."})]})}),d&&f.jsx(ape,{isOpen:d,onClose:()=>m(!1),onSave:T,existingProgram:x}),p&&f.jsx(spe,{isOpen:p,onClose:()=>y(!1),onAssign:r,trainingPrograms:t,users:e,departments:n})]})},lpe=t=>{const{t:e}=ce(),[n,r]=E.useState("myTraining"),i=t.currentUser.role===Vt.Admin;return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Aa,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:e("trainingHubTitle")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:e("trainingPageDescription")})]})]}),f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-6 rtl:space-x-reverse","aria-label":"Tabs",children:[f.jsx("button",{onClick:()=>r("myTraining"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${n==="myTraining"?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"}`,children:e("myTraining")}),i&&f.jsx("button",{onClick:()=>r("admin"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${n==="admin"?"border-brand-primary text-brand-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:border-gray-600"}`,children:e("trainingAdministration")})]})}),f.jsxs("div",{children:[n==="myTraining"&&f.jsx(ipe,{trainingPrograms:t.trainingPrograms,userTrainingStatus:t.userTrainingStatus,currentUser:t.currentUser,setNavigation:t.setNavigation}),n==="admin"&&i&&f.jsx(ope,{trainingPrograms:t.trainingPrograms,users:t.users,departments:t.departments,onAssign:t.onAssign,onCreate:t.onCreate,onUpdate:t.onUpdate,onDelete:t.onDelete})]})]})},cpe=({score:t,passed:e,onRetake:n,onBackToHub:r})=>{const{t:i}=ce();return f.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-brand-surface dark:bg-dark-brand-surface p-8 rounded-lg shadow-lg animate-[fadeInUp_0.5s_ease-out]",children:[f.jsx("h2",{className:"text-2xl font-bold",children:i("quizResults")}),f.jsxs("p",{className:"mt-4",children:[i("yourScore"),":"]}),f.jsxs("p",{className:`text-6xl font-bold my-4 ${e?"text-green-500":"text-red-500"}`,children:[t,"%"]}),f.jsx("p",{className:`font-semibold text-xl ${e?"text-green-600":"text-red-600"}`,children:i(e?"passed":"failed")}),f.jsx("div",{className:"mt-8",children:e?f.jsx("button",{onClick:r,className:"bg-brand-primary text-white px-6 py-2 rounded-lg",children:i("backToHub")}):f.jsxs("div",{className:"space-x-4",children:[f.jsx("button",{onClick:r,className:"bg-gray-200 dark:bg-gray-700 text-brand-text-primary dark:text-dark-brand-text-primary px-6 py-2 rounded-lg",children:i("backToHub")}),f.jsx("button",{onClick:n,className:"bg-brand-primary text-white px-6 py-2 rounded-lg",children:i("retakeQuiz")})]})})]})},upe=({program:t,userStatus:e,onStatusUpdate:n,onGenerateCertificate:r,setNavigation:i})=>{const{t:a,lang:o}=ce(),[c,u]=E.useState({}),[d,m]=E.useState(!1),[p,y]=E.useState(0);E.useEffect(()=>{(e==null?void 0:e.status)!=="Completed"&&n("In Progress")},[n,e]);const x=(T,C)=>{u(N=>({...N,[T]:C}))},_=()=>{let T=0;t.quiz.forEach(N=>{c[N.id]===N.correctOptionIndex&&T++});const C=Math.round(T/t.quiz.length*100);y(C),m(!0),C>=t.passingScore?(n("Completed",C),r(C)):n("In Progress",C)};return d?f.jsx(cpe,{score:p,passed:p>=t.passingScore,onRetake:()=>{m(!1),u({})},onBackToHub:()=>i({view:"trainingHub"})}):f.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(Aa,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:t.title[o]}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:t.description[o]})]})]}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-8 rounded-lg shadow-md border border-brand-border dark:border-dark-brand-border",children:f.jsx("div",{className:"prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:t.content[o]}})}),f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-8 rounded-lg shadow-md border border-brand-border dark:border-dark-brand-border",children:[f.jsx("h2",{className:"text-2xl font-bold mb-6",children:a("quiz")}),f.jsx("div",{className:"space-y-8",children:t.quiz.map((T,C)=>f.jsxs("div",{children:[f.jsxs("p",{className:"font-semibold",children:[C+1,". ",T.question[o]]}),f.jsx("div",{className:"mt-4 space-y-3",children:T.options.map((N,M)=>f.jsxs("label",{className:"flex items-center space-x-3 rtl:space-x-reverse p-3 rounded-lg border dark:border-dark-brand-border hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer",children:[f.jsx("input",{type:"radio",name:T.id,checked:c[T.id]===M,onChange:()=>x(T.id,M),className:"h-4 w-4 text-brand-primary focus:ring-brand-primary"}),f.jsx("span",{children:N[o]})]},M))})]},T.id))})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:_,className:"bg-brand-primary text-white px-8 py-3 rounded-lg text-lg font-semibold",children:a("submitAnswers")})})]})},dpe=({certificate:t})=>{const{t:e,lang:n}=ce(),{appSettings:r}=Rt();return f.jsx("div",{className:"max-w-4xl mx-auto bg-brand-surface dark:bg-dark-brand-surface p-4",children:f.jsxs("div",{className:"border-4 border-brand-primary dark:border-indigo-400 p-8 rounded-lg relative text-center shadow-2xl bg-white dark:bg-slate-800",children:[f.jsx("div",{className:"absolute top-8 left-8",children:r!=null&&r.logoUrl?f.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-12"}):f.jsx(ed,{className:"h-12 w-12 text-brand-primary"})}),f.jsx(_O,{className:"w-24 h-24 text-green-500 mx-auto"}),f.jsx("h1",{className:"text-3xl font-bold uppercase tracking-widest text-brand-text-primary dark:text-dark-brand-text-primary mt-6",children:e("certificateOfCompletion")}),f.jsx("p",{className:"text-lg text-brand-text-secondary dark:text-dark-brand-text-secondary mt-8",children:e("thisCertifiesThat")}),f.jsx("p",{className:"text-4xl font-handwriting font-bold text-brand-primary my-4",children:t.userName}),f.jsx("p",{className:"text-lg text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e("hasSuccessfullyCompleted")}),f.jsxs("p",{className:"text-2xl font-semibold text-brand-text-primary dark:text-dark-brand-text-primary mt-2",children:['"',t.trainingTitle[n],'"']}),f.jsxs("div",{className:"mt-12 flex justify-around items-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary uppercase tracking-wider",children:e("on")}),f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary border-t-2 pt-1 mt-1",children:new Date(t.completionDate).toLocaleDateString()})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary uppercase tracking-wider",children:e("withAScoreOf")}),f.jsxs("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary border-t-2 pt-1 mt-1",children:[t.score,"%"]})]})]})]})})},cS=({label:t,value:e})=>f.jsxs("div",{children:[f.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),f.jsx("dd",{className:"mt-1 text-sm text-gray-900 dark:text-gray-100",children:e})]}),fpe=({user:t,department:e})=>{const{t:n,lang:r}=ce();return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-brand-primary-500 to-brand-primary-700 text-white flex items-center justify-center font-bold text-3xl",children:t.name.charAt(0)}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:t.name}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t.jobTitle||t.role})]})]}),f.jsxs("dl",{className:"mt-5 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-3",children:[f.jsx(cS,{label:n("userEmail"),value:t.email}),f.jsx(cS,{label:n("department"),value:(e==null?void 0:e.name[r])||n("unassigned")}),f.jsx(cS,{label:n("hireDate"),value:t.hireDate?new Date(t.hireDate).toLocaleDateString():"N/A"})]})]})},hpe=({isOpen:t,onClose:e,onSave:n,competencies:r,documents:i,existingUserCompetency:a})=>{const{t:o,lang:c}=ce(),u=!!a,[d,m]=E.useState(""),[p,y]=E.useState(),[x,_]=E.useState(),[T,C]=E.useState("");E.useEffect(()=>{a?(m(a.competencyId),y(new Date(a.issueDate)),_(a.expiryDate?new Date(a.expiryDate):void 0),C(a.evidenceDocumentId||"")):(m(""),y(void 0),_(void 0),C(""))},[a,t]);const N=P=>{P.preventDefault(),!(!d||!p)&&n({competencyId:d,issueDate:p.toISOString().split("T")[0],expiryDate:x?x.toISOString().split("T")[0]:void 0,evidenceDocumentId:T||void 0})},M=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:o("cancel")}),f.jsx("button",{type:"submit",form:"competency-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:o("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o(u?"editCompetency":"addCompetency"),footer:M,size:"lg",children:f.jsxs("form",{id:"competency-form",onSubmit:N,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"competency",className:ye,children:o("competency")}),f.jsxs("select",{id:"competency",value:d,onChange:P=>m(P.target.value),className:xe,required:!0,disabled:u,children:[f.jsx("option",{value:"",children:o("selectCompetency")}),r.map(P=>f.jsx("option",{value:P.id,children:P.name[c]},P.id))]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"issueDate",className:ye,children:o("issueDate")}),f.jsx(Fo,{date:p,setDate:y})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"expiryDate",className:ye,children:o("expiryDate")}),f.jsx(Fo,{date:x,setDate:_,fromDate:p})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"evidence",className:ye,children:o("evidence")}),f.jsxs("select",{id:"evidence",value:T,onChange:P=>C(P.target.value),className:xe,children:[f.jsx("option",{value:"",children:o("selectEvidence")}),i.map(P=>f.jsx("option",{value:P.id,children:P.name[c]},P.id))]})]})]})})},mpe=({user:t,currentUser:e,competencies:n,documents:r,onUpdateUser:i})=>{const{t:a,lang:o}=ce(),[c,u]=E.useState(!1),[d,m]=E.useState(null),p=e.role===Vt.Admin,y=Zr(),[x,_]=E.useState(!1),T=P=>{if(!P.expiryDate)return{text:a("active"),color:"text-green-600"};const L=new Date(P.expiryDate),j=new Date,V=new Date(new Date().setDate(j.getDate()+30));return L<j?{text:a("expired"),color:"text-red-600"}:L<=V?{text:a("expiringSoon"),color:"text-yellow-600"}:{text:a("active"),color:"text-green-600"}},C=P=>{var V;const L=(V=t.competencies)==null?void 0:V.findIndex(I=>I.competencyId===P.competencyId);let j=[...t.competencies||[]];L!==void 0&&L>-1?j[L]=P:j.push(P),i({...t,competencies:j}),u(!1),m(null)},N=P=>{var L;window.confirm(a("areYouSureDeleteCompetency"))&&i({...t,competencies:((L=t.competencies)==null?void 0:L.filter(j=>j.competencyId!==P))||[]})},M=()=>{_(!0),setTimeout(()=>{_(!1),y.success(a("syncSuccess"))},1500)};return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-lg font-semibold",children:a("competenciesCerts")}),p&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:M,disabled:x,className:"flex items-center justify-center text-sm bg-slate-100 dark:bg-slate-700 text-brand-text-primary dark:text-dark-brand-text-primary px-2 sm:px-3 py-1.5 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-70",children:[f.jsx(NO,{className:`w-4 h-4 ${x?"animate-spin":""}`}),f.jsx("span",{className:"hidden sm:inline ltr:ml-1.5 rtl:mr-1.5",children:a(x?"syncing":"syncWithHris")})]}),f.jsxs("button",{onClick:()=>{m(null),u(!0)},className:"flex items-center justify-center text-sm bg-brand-primary text-white px-2 sm:px-3 py-1.5 rounded-md hover:bg-indigo-700",title:a("addCompetency"),children:[f.jsx(Rn,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline ltr:ml-1.5 rtl:mr-1.5",children:a("addCompetency")})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[(t.competencies||[]).map(P=>{const L=n.find(V=>V.id===P.competencyId);if(!L)return null;const j=T(P);return f.jsxs("div",{className:"p-3 rounded-md border dark:border-dark-brand-border flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:L.name[o]}),f.jsxs("p",{className:"text-xs text-gray-500",children:[a("issueDate"),": ",new Date(P.issueDate).toLocaleDateString()," ",P.expiryDate&&`| ${a("expiryDate")}: ${new Date(P.expiryDate).toLocaleDateString()}`]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:`text-sm font-semibold ${j.color}`,children:j.text}),p&&f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{m(P),u(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>N(P.competencyId),className:"p-1 text-gray-500 hover:text-red-600",children:f.jsx(Ar,{className:"w-4 h-4"})})]})]})]},P.competencyId)}),(t.competencies||[]).length===0&&f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:a("noCompetencies")})]}),c&&f.jsx(hpe,{isOpen:c,onClose:()=>u(!1),onSave:C,competencies:n,documents:r,existingUserCompetency:d})]})},ppe=({user:t,userTrainingStatus:e,trainingPrograms:n,setNavigation:r})=>{const{t:i,lang:a}=ce(),{pending:o,completed:c}=E.useMemo(()=>{const d=(t.trainingAssignments||[]).filter(p=>{var y;return((y=e[p.trainingId])==null?void 0:y.status)!=="Completed"}).map(p=>({assignment:p,program:n.find(y=>y.id===p.trainingId)})).filter(p=>p.program),m=Object.entries(e).filter(([,p])=>p.status==="Completed").map(([p,y])=>({status:y,program:n.find(x=>x.id===p)})).filter(p=>p.program);return{pending:d,completed:m}},[t,e,n]);return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:i("trainingHistory")}),f.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-sm font-semibold text-gray-500 mb-2",children:[i("pendingTraining")," (",o.length,")"]}),f.jsxs("div",{className:"space-y-2",children:[o.map(({assignment:u,program:d})=>f.jsxs("div",{className:"p-3 rounded-md border dark:border-dark-brand-border bg-yellow-50 dark:bg-yellow-900/20",children:[f.jsx("p",{className:"font-semibold",children:d.title[a]}),f.jsxs("p",{className:"text-xs text-gray-500",children:[i("assignedOn"),": ",new Date(u.assignedDate).toLocaleDateString(),u.dueDate&&` | ${i("dueOn")}: ${new Date(u.dueDate).toLocaleDateString()}`]})]},u.trainingId)),o.length===0&&f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:i("noPendingTraining")})]})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"text-sm font-semibold text-gray-500 mb-2",children:[i("completedTraining")," (",c.length,")"]}),f.jsxs("div",{className:"space-y-2",children:[c.map(({program:u,status:d})=>f.jsxs("div",{className:"p-3 rounded-md border dark:border-dark-brand-border flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:u.title[a]}),f.jsxs("p",{className:"text-xs text-gray-500",children:[i("completedOn"),": ",new Date(d.completionDate).toLocaleDateString()," | ",i("score"),": ",d.score,"%"]})]}),d.certificateId&&f.jsx("button",{onClick:()=>r({view:"certificate",certificateId:d.certificateId}),className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline flex-shrink-0",children:i("viewCertificate")})]},u.id)),c.length===0&&f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:i("noCompletedTraining")})]})]})]})]})},gpe=({user:t,projects:e})=>{const{t:n}=ce(),r=E.useMemo(()=>{const i=new Set;return e.forEach(a=>{(a.projectLead.id===t.id||a.checklist.some(o=>o.assignedTo===t.id))&&i.add(a)}),Array.from(i)},[e,t.id]);return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border",children:[f.jsx("h2",{className:"text-lg font-semibold mb-4",children:n("projectInvolvement")}),f.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:[r.map(i=>f.jsxs("div",{className:"p-3 rounded-md border dark:border-dark-brand-border",children:[f.jsx("p",{className:"font-semibold",children:i.name}),f.jsxs("p",{className:"text-xs text-gray-500",children:[n("status"),": ",i.status," | ",n("complianceRate"),": ",i.progress,"%"]})]},i.id)),r.length===0&&f.jsx("p",{className:"text-sm text-center text-gray-500 py-4",children:n("noProjectsAssigned")})]})]})},ype=t=>f.jsxs("div",{className:"space-y-6",children:[f.jsx(fpe,{user:t.user,department:t.department}),f.jsx(mpe,{user:t.user,currentUser:t.currentUser,competencies:t.competencies,documents:t.documents,onUpdateUser:t.onUpdateUser}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsx(ppe,{user:t.user,userTrainingStatus:t.userTrainingStatus,trainingPrograms:t.trainingPrograms,setNavigation:t.setNavigation}),f.jsx(gpe,{user:t.user,projects:t.projects})]})]}),vpe=({standard:t,canModify:e,onEdit:n,onDelete:r})=>{const[i,a]=E.useState(!1),{t:o}=ce(),c=t.subStandards&&t.subStandards.length>0;return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"w-full text-left p-5 focus:outline-none flex justify-between items-start gap-4",children:[f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"font-bold text-brand-primary dark:text-indigo-400",children:t.standardId}),f.jsx("p",{className:"mt-2 text-brand-text-primary dark:text-dark-brand-text-primary text-left",children:t.description}),f.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[t.totalMeasures&&f.jsxs("span",{className:"text-xs font-semibold text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full",children:[o("totalMeasures"),": ",t.totalMeasures]}),c&&f.jsxs("button",{onClick:()=>a(!i),className:"flex items-center text-sm text-brand-primary font-medium",children:[f.jsxs("span",{children:[o("subStandards")," (",t.subStandards.length,")"]}),f.jsx(Yy,{className:`h-5 w-5 ltr:ml-1 rtl:mr-1 transition-transform ${i?"rotate-180":""}`})]})]})]}),f.jsx("div",{className:"flex-shrink-0 flex flex-col items-end space-y-2",children:e&&f.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[f.jsx("button",{onClick:n,className:"p-1 text-gray-500 dark:text-gray-400 hover:text-brand-primary rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:o("editStandard"),children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:r,className:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:o("deleteStandard"),children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]}),c&&i&&f.jsx("div",{id:`substandards-${t.standardId}`,className:"px-5 pb-5 border-t border-gray-200 dark:border-dark-brand-border mt-2 pt-4",children:f.jsx("ul",{className:"space-y-3 list-disc ltr:list-inside rtl:list-inside marker:text-brand-primary",children:t.subStandards.map(u=>f.jsxs("li",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:[f.jsxs("span",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary ltr:mr-1 rtl:ml-1",children:[u.id,":"]})," ",u.description]},u.id))})})]})},xpe=({isOpen:t,onClose:e,onSave:n,existingStandard:r})=>{const{t:i}=ce(),a=!!r,[o,c]=E.useState(""),[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState(Bf.Medium),[_,T]=E.useState([]);E.useEffect(()=>{r?(c(r.standardId),d(r.description),p(r.section||""),x(r.criticality||Bf.Medium),T(r.subStandards||[])):(c(""),d(""),p(""),x(Bf.Medium),T([]))},[r,t]);const C=j=>{j.preventDefault(),n({standardId:o,description:u,section:m,criticality:y,subStandards:_.length>0?_:void 0})},N=(j,V,I)=>{const R=[..._];R[j]={...R[j],[V]:I},T(R)},M=()=>T([..._,{id:"",description:""}]),P=j=>T(_.filter((V,I)=>I!==j)),L=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border rounded-md",children:i("cancel")}),f.jsx("button",{type:"submit",form:"standard-form",className:"py-2 px-4 border rounded-md text-white bg-brand-primary",children:i("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:i(a?"editStandard":"addStandard"),footer:L,size:"2xl",children:f.jsxs("form",{id:"standard-form",onSubmit:C,className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"sm:col-span-1",children:[f.jsx("label",{htmlFor:"id",className:ye,children:i("standardId")}),f.jsx("input",{type:"text",id:"id",value:o,onChange:j=>c(j.target.value),className:xe,required:!0})]}),f.jsxs("div",{className:"sm:col-span-2",children:[f.jsx("label",{htmlFor:"section",className:ye,children:i("section")}),f.jsx("input",{type:"text",id:"section",value:m,onChange:j=>p(j.target.value),className:xe})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"desc",className:ye,children:i("description")}),f.jsx("textarea",{id:"desc",value:u,onChange:j=>d(j.target.value),rows:3,className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"criticality",className:ye,children:i("criticality")}),f.jsx("select",{id:"criticality",value:y,onChange:j=>x(j.target.value),className:xe,children:Object.values(Bf).map(j=>f.jsx("option",{value:j,children:j},j))})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("h4",{className:"font-semibold",children:i("subStandards")}),f.jsx("div",{className:"space-y-3 mt-2 max-h-48 overflow-y-auto pr-2",children:_.map((j,V)=>f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("input",{type:"text",value:j.id,onChange:I=>N(V,"id",I.target.value),placeholder:"ID",className:`${xe} w-24`}),f.jsx("textarea",{value:j.description,onChange:I=>N(V,"description",I.target.value),placeholder:"Description",rows:1,className:`${xe} flex-grow`}),f.jsx("button",{type:"button",onClick:()=>P(V),className:"p-2 text-red-500 mt-1",children:f.jsx(Ar,{className:"w-5 h-5"})})]},V))}),f.jsxs("button",{type:"button",onClick:M,className:"mt-2 text-sm text-brand-primary flex items-center gap-1",children:[f.jsx(Rn,{className:"w-4 h-4"}),i("addSubStandard")]})]})]})})},bpe=({isOpen:t,onClose:e,onImport:n,fileContent:r,programs:i})=>{const{t:a}=ce(),[o,c]=E.useState(""),u=E.useMemo(()=>{try{const p=JSON.parse(r);return Object.keys(p).length}catch{return 0}},[r]),d=p=>{p.preventDefault(),o&&n(o)},m=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md text-sm",children:a("cancel")}),f.jsx("button",{type:"submit",form:"import-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",disabled:!o,children:a("importData")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:a("importStandards"),footer:m,children:f.jsxs("form",{id:"import-form",onSubmit:d,className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-gray-500",children:a("standardsFound").replace("{count}",u.toString())}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"program",className:ye,children:a("importToProgram")}),f.jsxs("select",{id:"program",value:o,onChange:p=>c(p.target.value),className:xe,required:!0,children:[f.jsx("option",{value:"",children:a("selectProgram")}),i.map(p=>f.jsx("option",{value:p.id,children:p.name},p.id))]})]})]})})},wpe=t=>{const{program:e,standards:n,canModify:r,onAdd:i,onUpdate:a,onDelete:o,onImport:c}=t,{t:u,lang:d}=ce(),m=Zr(),p=E.useRef(null),[y,x]=E.useState(!1),[_,T]=E.useState(!1),[C,N]=E.useState(null),[M,P]=E.useState(""),[L,j]=E.useState(""),V=E.useMemo(()=>n.filter(F=>F.standardId.toLowerCase().includes(M.toLowerCase())||F.description.toLowerCase().includes(M.toLowerCase())),[n,M]),I=F=>{const B={...F,programId:e.id};"standardId"in C?a(B):i(B),x(!1)},R=F=>{var q;const B=(q=F.target.files)==null?void 0:q[0];if(B){const H=new FileReader;H.onload=se=>{var Q;const Se=(Q=se.target)==null?void 0:Q.result;j(Se),T(!0)},H.readAsText(B)}},U=F=>{try{const B=JSON.parse(L);c(B),m.success("Standards imported successfully!")}catch{m.error("Failed to parse JSON file.")}T(!1),j("")};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(sh,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold",children:[e.name," ",u("standards")]}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:e.description[d]})]})]}),r&&f.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[f.jsx("input",{type:"file",ref:p,className:"hidden",onChange:R,accept:".json"}),f.jsxs("button",{onClick:()=>{var F;return(F=p.current)==null?void 0:F.click()},className:"bg-white dark:bg-slate-700 text-brand-text-primary dark:text-dark-brand-text-primary border border-slate-300 dark:border-slate-600 px-4 py-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600 flex items-center justify-center font-semibold shadow-sm text-sm",children:[f.jsx(NB,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," ",u("import")]}),f.jsxs("button",{onClick:()=>{N(null),x(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm text-sm",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," ",u("addStandard")]})]})]}),f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:u("searchStandards"),value:M,onChange:F=>P(F.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border rounded-lg"})]}),V.length>0?f.jsx("div",{className:"space-y-4",children:V.map(F=>f.jsx(vpe,{standard:F,canModify:r,onEdit:()=>{N(F),x(!0)},onDelete:()=>o(F.standardId)},F.standardId))}):f.jsx(Hi,{icon:sh,title:u("noStandardsFound"),message:u("noStandardsFoundMessage")}),y&&f.jsx(xpe,{isOpen:y,onClose:()=>x(!1),onSave:I,existingStandard:C}),_&&f.jsx(bpe,{isOpen:_,onClose:()=>T(!1),onImport:U,fileContent:L,programs:[e]})]})},lc=({title:t,description:e,children:n,footer:r})=>f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface shadow-sm rounded-lg border border-brand-border dark:border-dark-brand-border",children:[f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:t}),f.jsx("p",{className:"mt-1 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:e}),f.jsx("div",{className:"mt-6 space-y-4",children:n})]}),r&&f.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 px-6 py-4 rounded-b-lg flex justify-end",children:r})]}),Spe=({currentImage:t,onImageChange:e})=>{const{t:n}=ce(),[r,i]=E.useState(t),a=c=>{var d;const u=(d=c.target.files)==null?void 0:d[0];if(u){const m=new FileReader;m.onloadend=()=>{const p=m.result;i(p),e(p)},m.readAsDataURL(u)}},o=()=>{i(void 0),e("")};return f.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center overflow-hidden relative",children:r?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:r,alt:"Logo preview",className:"w-full h-full object-cover"}),f.jsx("button",{onClick:o,className:"absolute top-0 right-0 p-0.5 bg-white/70 rounded-full text-red-500 hover:text-red-700",children:f.jsx(Nh,{className:"w-4 h-4"})})]}):f.jsx(CB,{className:"w-8 h-8 text-gray-400"})}),f.jsxs("label",{htmlFor:"logo-upload",className:"cursor-pointer bg-white dark:bg-gray-700 py-2 px-3 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800",children:[f.jsx("span",{children:n("change")}),f.jsx("input",{id:"logo-upload",name:"logo-upload",type:"file",className:"sr-only",onChange:a,accept:"image/png, image/jpeg, image/svg+xml"})]})]})},_pe=["#4f46e5","#ef4444","#22c55e","#3b82f6","#8b5cf6","#ec4899"],qM=({color:t,onChange:e})=>f.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_pe.map(n=>f.jsx("button",{type:"button",onClick:()=>e(n),className:`w-8 h-8 rounded-full transition-transform transform hover:scale-110 ${t===n?"ring-2 ring-offset-2 dark:ring-offset-dark-brand-surface ring-gray-800 dark:ring-white":""}`,style:{backgroundColor:n},"aria-label":`Select color ${n}`},n)),f.jsx("input",{type:"color",value:t,onChange:n=>e(n.target.value),className:"w-8 h-8 p-0 border-none rounded-full cursor-pointer bg-transparent",style:{"--color":t}})]}),HM=()=>{const{t}=ce(),e=Zr(),{appSettings:n,updateAppSettings:r}=Rt(),[i,a]=E.useState(n),o=()=>{r(i),e.success(t("settingsUpdated")),window.location.reload()},c=(u,d)=>{a(m=>({...m,globeSettings:{...m.globeSettings,[u]:d}})),r({...i,globeSettings:{...i.globeSettings,[u]:d}})};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(lc,{title:t("branding"),description:t("brandingDescription"),footer:f.jsx("button",{onClick:o,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:t("saveChanges")}),children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"appName",className:ye,children:t("appName")}),f.jsx("input",{type:"text",id:"appName",value:i.appName,onChange:u=>a(d=>({...d,appName:u.target.value})),className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:t("appLogo")}),f.jsx(Spe,{currentImage:i.logoUrl,onImageChange:u=>a(d=>({...d,logoUrl:u}))})]}),f.jsxs("div",{children:[f.jsx("label",{className:ye,children:t("primaryColor")}),f.jsx(qM,{color:i.primaryColor,onChange:u=>a(d=>({...d,primaryColor:u}))})]})]}),f.jsxs(lc,{title:t("loginPageGlobe"),description:t("loginPageGlobeDescription"),children:[f.jsxs("div",{children:[f.jsx("label",{className:ye,children:t("glowColor")}),f.jsx(qM,{color:i.globeSettings.glowColor,onChange:u=>c("glowColor",u)})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"darkness",className:ye,children:[t("darkness")," (",i.globeSettings.darkness,")"]}),f.jsx("input",{type:"range",id:"darkness",min:"0",max:"1",step:"0.1",value:i.globeSettings.darkness,onChange:u=>c("darkness",parseFloat(u.target.value)),className:"w-full"})]})]})]})},Ape=()=>{const{t}=ce(),e=Zr(),{currentUser:n}=Pn(),{updateUser:r}=Rt(),[i,a]=E.useState(n.name),[o,c]=E.useState(n.email),[u,d]=E.useState(""),[m,p]=E.useState(""),y=()=>{n&&(r({...n,name:i,email:o}),e.success(t("profileUpdated")))},x=()=>{if(u!==m){e.error(t("passwordsDoNotMatch"));return}n&&(r({...n,password:u}),e.success(t("passwordUpdated")),d(""),p(""))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(lc,{title:t("personalInformation"),description:t("personalInformationDescription"),footer:f.jsx("button",{onClick:y,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:t("save")}),children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ye,children:t("name")}),f.jsx("input",{type:"text",id:"name",value:i,onChange:_=>a(_.target.value),className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:ye,children:t("userEmail")}),f.jsx("input",{type:"email",id:"email",value:o,onChange:_=>c(_.target.value),className:xe})]})]}),f.jsxs(lc,{title:t("password"),description:t("passwordDescription"),footer:f.jsx("button",{onClick:x,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:t("updatePassword")}),children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:ye,children:t("newPassword")}),f.jsx("input",{type:"password",id:"password",value:u,onChange:_=>d(_.target.value),className:xe})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"confirmPassword",className:ye,children:t("confirmPassword")}),f.jsx("input",{type:"password",id:"confirmPassword",value:m,onChange:_=>p(_.target.value),className:xe})]})]})]})},uS=({label:t,enabled:e,setEnabled:n})=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),f.jsx("button",{type:"button",onClick:()=>n(!e),className:`${e?"bg-brand-primary":"bg-gray-200 dark:bg-gray-700"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-primary focus:ring-offset-2 dark:ring-offset-dark-brand-surface`,children:f.jsx("span",{className:`${e?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),Tpe=()=>{const{t}=ce(),e=Zr(),{appSettings:n,updateAppSettings:r}=Rt(),[i,a]=E.useState(n.passwordPolicy),o=()=>{r({...n,passwordPolicy:i}),e.success(t("settingsUpdated"))},c=u=>{a(d=>({...d,[u]:!d[u]}))};return f.jsxs(lc,{title:t("passwordPolicy"),description:t("passwordPolicyDescription"),footer:f.jsx("button",{onClick:o,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:t("saveChanges")}),children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"minLength",className:ye,children:t("minLength")}),f.jsx("input",{type:"number",id:"minLength",value:i.minLength,onChange:u=>a(d=>({...d,minLength:parseInt(u.target.value,10)||8})),className:`${xe} w-24`})]}),f.jsx(uS,{label:t("requireUppercase"),enabled:i.requireUppercase,setEnabled:()=>c("requireUppercase")}),f.jsx(uS,{label:t("requireNumber"),enabled:i.requireNumber,setEnabled:()=>c("requireNumber")}),f.jsx(uS,{label:t("requireSymbol"),enabled:i.requireSymbol,setEnabled:()=>c("requireSymbol")})]})},Epe=({user:t,currentUser:e,onSelect:n,onEdit:r,onDelete:i})=>{const{t:a,lang:o}=ce();return f.jsxs("tr",{onClick:()=>n(t.id),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm font-medium text-brand-text-primary dark:text-dark-brand-text-primary",children:t.name})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t.email})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("div",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:t.department?t.department.name[o]:a("unassigned")})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.role===Vt.Admin?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}`,children:t.role})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right rtl:text-left",children:e.role===Vt.Admin&&f.jsxs("div",{className:"flex items-center justify-end space-x-2 rtl:space-x-reverse",children:[f.jsx("button",{onClick:c=>{c.stopPropagation(),r()},className:"text-gray-500 hover:text-brand-primary p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",title:a("editUser"),children:f.jsx(jr,{className:"h-5 w-5"})}),f.jsx("button",{onClick:c=>{c.stopPropagation(),i(t.id)},className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/20",title:a("deleteUser"),disabled:t.id===e.id,children:f.jsx(Ar,{className:"h-5 w-5"})})]})})]})},Cpe=({isOpen:t,onClose:e,onSave:n,existingUser:r,departments:i,isLastAdmin:a})=>{const{t:o,lang:c}=ce(),u=!!r,[d,m]=E.useState(""),[p,y]=E.useState(""),[x,_]=E.useState(Vt.TeamMember),[T,C]=E.useState(""),[N,M]=E.useState("");E.useEffect(()=>{r?(m(r.name),y(r.email),_(r.role),C(r.departmentId||""),M("")):(m(""),y(""),_(Vt.TeamMember),C(""),M(""))},[r,t]);const P=j=>{j.preventDefault();const V={name:d,email:p,role:x,departmentId:T||void 0};if(u)n({...r,...V,...N&&{password:N}});else{const I={...V,password:N||"password123",competencies:[],trainingAssignments:[],readAndAcknowledge:[]};n(I)}},L=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:o("cancel")}),f.jsx("button",{type:"submit",form:"user-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:o("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:o(u?"editUser":"addNewUser"),footer:L,size:"lg",children:f.jsxs("form",{id:"user-form",onSubmit:P,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ye,children:o("name")}),f.jsx("input",{type:"text",id:"name",value:d,onChange:j=>m(j.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:ye,children:o("userEmail")}),f.jsx("input",{type:"email",id:"email",value:p,onChange:j=>y(j.target.value),className:xe,required:!0})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{title:a?o("lastAdminRoleChange"):"",children:[f.jsx("label",{htmlFor:"role",className:ye,children:o("role")}),f.jsx("select",{id:"role",value:x,onChange:j=>_(j.target.value),className:xe,disabled:a,children:Object.values(Vt).map(j=>f.jsx("option",{value:j,children:j},j))})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"department",className:ye,children:o("department")}),f.jsxs("select",{id:"department",value:T,onChange:j=>C(j.target.value),className:xe,children:[f.jsx("option",{value:"",children:o("unassigned")}),i.map(j=>f.jsx("option",{value:j.id,children:j.name[c]},j.id))]})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:ye,children:o(u?"newPasswordOptional":"password")}),f.jsx("input",{type:"password",id:"password",value:N,onChange:j=>M(j.target.value),className:xe,placeholder:u?o("leaveBlank"):"",required:!u})]})]})})},Npe=({setNavigation:t})=>{const{t:e}=ce(),n=Zr(),{users:r,departments:i,addUser:a,updateUser:o,deleteUser:c}=Rt(),{currentUser:u}=Pn(),[d,m]=E.useState(""),[p,y]=E.useState("all"),[x,_]=E.useState(!1),[T,C]=E.useState(null),[N,M]=E.useState(null),P=E.useMemo(()=>r.map(I=>({...I,department:i.find(R=>R.id===I.departmentId)})),[r,i]),L=E.useMemo(()=>P.filter(I=>{const R=I.name.toLowerCase().includes(d.toLowerCase())||I.email.toLowerCase().includes(d.toLowerCase()),U=p==="all"||I.role===p;return R&&U}),[P,d,p]),j=I=>{"id"in I?(o(I),n.success(e("userUpdated"))):(a(I),n.success(e("userAdded"))),_(!1)},V=()=>{N&&(u==null?void 0:u.id)!==N.id&&(c(N.id),n.success(e("userDeleted")),M(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold",children:e("userManagement")}),f.jsxs("button",{onClick:()=>{C(null),_(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full sm:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),e("addNewUser")]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:e("searchUsers"),value:d,onChange:I=>m(I.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border rounded-lg"})]}),f.jsxs("select",{value:p,onChange:I=>y(I.target.value),className:"w-full sm:w-48 border rounded-lg py-2 px-3",children:[f.jsx("option",{value:"all",children:e("allRoles")}),Object.values(Vt).map(I=>f.jsx("option",{value:I,children:I},I))]})]}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:e("name")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:e("userEmail")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:e("department")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:e("role")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:e("actions")})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:L.map(I=>f.jsx(Epe,{user:I,currentUser:u,onSelect:R=>t({view:"userProfile",userId:R}),onEdit:()=>{C(I),_(!0)},onDelete:()=>M(I)},I.id))})]})})}),x&&f.jsx(Cpe,{isOpen:x,onClose:()=>_(!1),onSave:j,existingUser:T,departments:i,isLastAdmin:r.filter(I=>I.role===Vt.Admin).length===1&&(T==null?void 0:T.role)===Vt.Admin}),N&&f.jsx(xc,{isOpen:!!N,onClose:()=>M(null),onConfirm:V,title:e("deleteUser"),message:e("areYouSureDeleteUser").replace("{name}",N.name),confirmationText:e("delete")})]})},kpe=({program:t,standardCount:e,projectCount:n,canModify:r,onSelect:i,onEdit:a,onDelete:o})=>{const{t:c,lang:u}=ce();return f.jsxs("div",{onClick:i,className:"bg-brand-surface dark:bg-dark-brand-surface rounded-xl shadow-sm border border-brand-border dark:border-dark-brand-border hover:shadow-lg hover:-translate-y-1 transition-all cursor-pointer flex flex-col justify-between h-full",children:[f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-lg font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:t.name}),f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1 line-clamp-2 h-10",children:t.description[u]}),f.jsxs("div",{className:"mt-4 flex space-x-6 rtl:space-x-reverse",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:c("totalStandards")}),f.jsx("p",{className:"text-xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:e})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-brand-text-secondary dark:text-dark-brand-text-secondary",children:c("projects")}),f.jsx("p",{className:"text-xl font-bold text-brand-text-primary dark:text-dark-brand-text-primary",children:n})]})]})]}),f.jsxs("div",{className:"border-t dark:border-dark-brand-border bg-slate-50 dark:bg-slate-900/50 px-5 py-3 flex justify-between items-center rounded-b-xl",children:[f.jsx("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:r&&f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:d=>{d.stopPropagation(),a()},className:"p-1 text-slate-500 dark:text-slate-400 hover:text-brand-primary-600 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",title:c("editProgram"),children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:d=>{d.stopPropagation(),o()},className:"p-1 text-slate-500 dark:text-slate-400 hover:text-red-600 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",title:c("deleteProgram"),children:f.jsx(Ar,{className:"w-4 h-4"})})]})}),f.jsx("span",{className:"text-sm font-semibold text-brand-primary-600 dark:text-brand-primary-400 hover:underline",children:c("manageStandards")})]})]})},Ipe=({isOpen:t,onClose:e,onSave:n,existingProgram:r})=>{const{t:i}=ce(),a=!!r,[o,c]=E.useState(""),[u,d]=E.useState(""),[m,p]=E.useState("");E.useEffect(()=>{r?(c(r.name),d(r.description.en),p(r.description.ar)):(c(""),d(""),p(""))},[r,t]);const y=_=>{if(_.preventDefault(),!o||!u||!m)return;const T={name:o,description:{en:u,ar:m}};n(a?{id:r.id,...T}:T)},x=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:i("cancel")}),f.jsx("button",{type:"submit",form:"program-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:i("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:i(a?"editProgram":"addNewProgram"),footer:x,size:"lg",children:f.jsxs("form",{id:"program-form",onSubmit:y,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ye,children:i("programName")}),f.jsx("input",{type:"text",id:"name",value:o,onChange:_=>c(_.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descEn",className:ye,children:i("programDescriptionEn")}),f.jsx("textarea",{id:"descEn",value:u,onChange:_=>d(_.target.value),rows:3,className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descAr",className:ye,children:i("programDescriptionAr")}),f.jsx("textarea",{id:"descAr",value:m,onChange:_=>p(_.target.value),rows:3,className:xe,required:!0,dir:"rtl"})]})]})})},Ppe=({setNavigation:t})=>{const{t:e}=ce(),{programs:n,standards:r,addProgram:i,updateProgram:a,deleteProgram:o}=Rt(),{projects:c}=Or(),[u,d]=E.useState(!1),[m,p]=E.useState(null),[y,x]=E.useState(null),_=E.useMemo(()=>n.map(N=>({...N,standardCount:r.filter(M=>M.programId===N.id).length,projectCount:c.filter(M=>M.programId===N.id).length})),[n,r,c]),T=N=>{"id"in N?a(N):i(N),d(!1)},C=()=>{y&&(o(y.id),x(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold",children:e("accreditationHubTitle")}),f.jsxs("button",{onClick:()=>{p(null),d(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full sm:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),e("addNewProgram")]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(N=>f.jsx(kpe,{program:N,standardCount:N.standardCount,projectCount:N.projectCount,canModify:!0,onSelect:()=>t({view:"standards",programId:N.id}),onEdit:()=>{p(N),d(!0)},onDelete:()=>x(N)},N.id))}),u&&f.jsx(Ipe,{isOpen:u,onClose:()=>d(!1),onSave:T,existingProgram:m}),y&&f.jsx(xc,{isOpen:!!y,onClose:()=>x(null),onConfirm:C,title:e("deleteProgram"),message:e("areYouSureDeleteProgram"),confirmationText:e("delete")})]})},Dpe=({isOpen:t,onClose:e,onSave:n,existingCompetency:r})=>{const{t:i}=ce(),a=!!r,[o,c]=E.useState(""),[u,d]=E.useState(""),[m,p]=E.useState(""),[y,x]=E.useState("");E.useEffect(()=>{a&&r?(c(r.name.en),d(r.name.ar),p(r.description.en),x(r.description.ar)):(c(""),d(""),p(""),x(""))},[r,t,a]);const _=C=>{if(C.preventDefault(),!o||!u||!m||!y)return;const N={name:{en:o,ar:u},description:{en:m,ar:y}};n(a?{id:r.id,...N}:N)},T=f.jsxs(f.Fragment,{children:[f.jsx("button",{type:"button",onClick:e,className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500",children:i("cancel")}),f.jsx("button",{type:"submit",form:"competency-lib-form",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-brand-primary hover:bg-indigo-700",children:i("save")})]});return f.jsx(Cn,{isOpen:t,onClose:e,title:i(a?"editCompetency":"addCompetency"),footer:T,size:"lg",children:f.jsxs("form",{id:"competency-lib-form",onSubmit:_,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameEn",className:ye,children:i("competencyNameEn")}),f.jsx("input",{type:"text",id:"nameEn",value:o,onChange:C=>c(C.target.value),className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"nameAr",className:ye,children:i("competencyNameAr")}),f.jsx("input",{type:"text",id:"nameAr",value:u,onChange:C=>d(C.target.value),className:xe,required:!0,dir:"rtl"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descEn",className:ye,children:i("competencyDescriptionEn")}),f.jsx("textarea",{id:"descEn",value:m,onChange:C=>p(C.target.value),rows:3,className:xe,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"descAr",className:ye,children:i("competencyDescriptionAr")}),f.jsx("textarea",{id:"descAr",value:y,onChange:C=>x(C.target.value),rows:3,className:xe,required:!0,dir:"rtl"})]})]})})},Rpe=()=>{const{t,lang:e}=ce(),{competencies:n,addCompetency:r,updateCompetency:i,deleteCompetency:a}=Rt(),[o,c]=E.useState(!1),[u,d]=E.useState(null),[m,p]=E.useState(null),y=_=>{"id"in _?i(_):r(_),c(!1)},x=()=>{m&&(a(m.id),p(null))};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[f.jsx("h2",{className:"text-2xl font-bold",children:t("competencyLibrary")}),f.jsxs("button",{onClick:()=>{d(null),c(!0)},className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm w-full sm:w-auto",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),t("addCompetency")]})]}),f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("competency")}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:t("description")}),f.jsx("th",{scope:"col",className:"relative px-6 py-3",children:f.jsx("span",{className:"sr-only",children:t("actions")})})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:n.map(_=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 font-medium",children:_.name[e]}),f.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.description[e]}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>{d(_),c(!0)},className:"p-1 text-gray-500 hover:text-brand-primary",children:f.jsx(jr,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>p(_),className:"p-1 text-gray-500 hover:text-red-500",children:f.jsx(Ar,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),o&&f.jsx(Dpe,{isOpen:o,onClose:()=>c(!1),onSave:y,existingCompetency:u}),m&&f.jsx(xc,{isOpen:!!m,onClose:()=>p(null),onConfirm:x,title:t("deleteCompetency"),message:t("areYouSureDeleteCompetency"),confirmationText:t("delete")})]})},dS=({title:t,description:e,buttonText:n,onAction:r,onFileAction:i,isFileInput:a,isDestructive:o})=>{const c=E.useRef(null),u=()=>{var p;a?(p=c.current)==null||p.click():r&&r()},d=p=>{p.target.files&&p.target.files[0]&&i&&i(p.target.files[0])},m=o?"bg-red-600 text-white hover:bg-red-700":"bg-white dark:bg-gray-700 text-brand-text-primary dark:text-dark-brand-text-primary border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600";return f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-4 border-t border-brand-border dark:border-dark-brand-border first:border-t-0 first:pt-0 last:pb-0",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:t}),f.jsx("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary mt-1",children:e})]}),f.jsxs("div",{className:"mt-3 sm:mt-0",children:[f.jsx("button",{type:"button",onClick:u,className:`px-4 py-2 rounded-lg font-semibold text-sm shadow-sm ${m}`,children:n}),a&&f.jsx("input",{type:"file",ref:c,className:"hidden",onChange:d,accept:".json"})]})]})},Mpe=()=>{const{t}=ce(),e=Zr(),n=()=>{const a=he.loadInitialData(),o=JSON.stringify(a,null,2),c=new Blob([o],{type:"application/json"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=`accreditex_export_${new Date().toISOString().split("T")[0]}.json`,d.click(),URL.revokeObjectURL(u),e.success(t("dataExported"))},r=a=>{const o=new FileReader;o.onload=()=>{console.log(o.result),e.info(t("importStarted")),setTimeout(()=>window.location.reload(),2e3)},o.readAsText(a)},i=()=>{window.confirm(t("confirmReset"))&&(localStorage.clear(),window.location.reload())};return f.jsxs(lc,{title:t("dataManagement"),description:t("dataManagementDescription"),children:[f.jsx(dS,{title:t("exportData"),description:t("exportDataDescription"),buttonText:t("export"),onAction:n}),f.jsx(dS,{title:t("importData"),description:t("importDataDescription"),buttonText:t("import"),onFileAction:r,isFileInput:!0}),f.jsx(dS,{title:t("resetData"),description:t("resetDataDescription"),buttonText:t("reset"),onAction:i,isDestructive:!0})]})},jpe=()=>{const{t}=ce();return f.jsxs(lc,{title:t("about"),description:"",children:[f.jsx("p",{className:"font-semibold text-brand-text-primary dark:text-dark-brand-text-primary",children:"AccreditEx"}),f.jsxs("p",{className:"text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:[t("appVersion")," 1.0.0"]}),f.jsx("p",{className:"mt-4 text-sm text-brand-text-secondary dark:text-dark-brand-text-secondary",children:"A centralized platform to support healthcare institutions throughout their accreditation journey, streamlining project management, ensuring traceability, and maintaining compliance."})]})},Ope=({section:t="general",setNavigation:e})=>{const{t:n}=ce(),r=[{id:"general",label:n("general"),icon:Gy},{id:"profile",label:n("profile"),icon:EB},{id:"security",label:n("security"),icon:sh},{id:"users",label:n("userManagement"),icon:nd},{id:"accreditationHub",label:n("accreditationHub"),icon:p1},{id:"competencies",label:n("competencies"),icon:CO},{id:"data",label:n("data"),icon:fs},{id:"about",label:n("about"),icon:TO}],i=()=>{switch(t){case"general":return f.jsx(HM,{});case"profile":return f.jsx(Ape,{});case"security":return f.jsx(Tpe,{});case"users":return f.jsx(Npe,{setNavigation:e});case"accreditationHub":return f.jsx(Ppe,{setNavigation:e});case"competencies":return f.jsx(Rpe,{});case"data":return f.jsx(Mpe,{});case"about":return f.jsx(jpe,{});default:return f.jsx(HM,{})}};return f.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[f.jsx("aside",{className:"w-full md:w-1/4 lg:w-1/5 flex-shrink-0",children:f.jsx("nav",{className:"space-y-1",children:r.map(a=>f.jsxs("button",{onClick:()=>e({view:"settings",section:a.id}),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors duration-200 ${t===a.id?"bg-brand-primary/10 text-brand-primary dark:bg-brand-primary/20":"text-brand-text-secondary hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:[f.jsx(a.icon,{className:"w-5 h-5"}),f.jsx("span",{children:a.label})]},a.id))})}),f.jsx("main",{className:"w-full md:w-3/4 lg:w-4/5",children:i()})]})},Lpe=({projects:t})=>{const{t:e,lang:n}=ce(),[r,i]=E.useState(""),a=E.useMemo(()=>t.flatMap(o=>o.activityLog.map(c=>({...c,projectId:o.id,projectName:o.name}))).sort((o,c)=>new Date(c.timestamp).getTime()-new Date(o.timestamp).getTime()).filter(o=>o.user.toLowerCase().includes(r.toLowerCase())||o.action[n].toLowerCase().includes(r.toLowerCase())||o.projectName.toLowerCase().includes(r.toLowerCase())),[t,n,r]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(oh,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:e("auditLog")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:e("auditLogDescription")})]})]}),f.jsxs("div",{className:"relative flex-grow",children:[f.jsx(Ko,{className:"absolute ltr:left-3 rtl:right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:e("searchLogs"),value:r,onChange:o=>i(o.target.value),className:"w-full ltr:pl-10 rtl:pr-10 px-4 py-2 border rounded-lg"})]}),a.length>0?f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("timestamp")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("user")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("action")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("project")})]})}),f.jsx("tbody",{className:"bg-white dark:bg-dark-brand-surface divide-y divide-gray-200 dark:divide-dark-brand-border",children:a.map(o=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(o.timestamp).toLocaleString()}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.user}),f.jsx("td",{className:"px-6 py-4 text-sm",children:o.action[n]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.projectName})]},o.id))})]})})}):f.jsx(Hi,{icon:oh,title:e("noActivity"),message:""})]})},Upe=({projects:t})=>{const{t:e}=ce(),[n,r]=E.useState("all"),i=E.useMemo(()=>t.flatMap(a=>a.designControls.map(o=>({...o,projectId:a.id,projectName:a.name}))).filter(a=>n==="all"||a.projectId===n),[t,n]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(TS,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:e("designControls")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:e("designControlsHubDescription")})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("select",{value:n,onChange:a=>r(a.target.value),className:"border rounded-lg py-2 px-3",children:[f.jsx("option",{value:"all",children:e("allProjects")}),t.map(a=>f.jsx("option",{value:a.id,children:a.name},a.id))]}),f.jsxs("button",{className:"bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center font-semibold shadow-sm",children:[f.jsx(Rn,{className:"w-5 h-5 ltr:mr-2 rtl:ml-2"})," ",e("newItem")]})]})]}),i.length>0?f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("userNeed")}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("designInput")}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("designOutput")}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("project")})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-brand-border",children:i.map(a=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-4 py-3 text-sm",children:a.userNeed}),f.jsx("td",{className:"px-4 py-3 text-sm",children:a.designInput}),f.jsx("td",{className:"px-4 py-3 text-sm",children:a.designOutput}),f.jsx("td",{className:"px-4 py-3 text-sm",children:a.projectName})]},a.id))})]})})}):f.jsx(Hi,{icon:TS,title:e("noDesignControls"),message:""})]})},Vpe=({setNavigation:t})=>{const{t:e}=ce(),{projects:n}=Or(),{users:r}=Rt(),i=n.flatMap(o=>o.mockSurveys.map(c=>{var u;return{...c,projectId:o.id,projectName:o.name,surveyorName:((u=r.find(d=>d.id===c.surveyorId))==null?void 0:u.name)||"Unknown"}})),a=(o,c,u)=>{t(u==="Completed"?{view:"surveyReport",projectId:o,surveyId:c}:{view:"mockSurvey",projectId:o,surveyId:c})};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse self-start",children:[f.jsx(_a,{className:"h-8 w-8 text-brand-primary"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:e("mockSurveysHub")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:e("mockSurveysHubDescription")})]})]}),i.length>0?f.jsx("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-lg shadow-sm border border-gray-200 dark:border-dark-brand-border overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-brand-border",children:[f.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("project")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("surveyDate")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("surveyor")}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:e("status")}),f.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:e("actions")})]})}),f.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-brand-border",children:i.map(o=>f.jsxs("tr",{children:[f.jsx("td",{className:"px-6 py-4 font-medium",children:o.projectName}),f.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(o.date).toLocaleDateString()}),f.jsx("td",{className:"px-6 py-4 text-sm",children:o.surveyorName}),f.jsx("td",{className:"px-6 py-4 text-sm",children:f.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${o.status==="Completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e(o.status==="Completed"?"completed":"inProgress")})}),f.jsx("td",{className:"px-6 py-4 text-right",children:f.jsxs("button",{onClick:()=>a(o.projectId,o.id,o.status),className:"text-sm font-semibold text-brand-primary flex items-center gap-1",children:[f.jsx(kO,{className:"w-5 h-5"}),o.status==="Completed"?e("viewReport"):e("startSurvey")]})})]},o.id))})]})})}):f.jsx(Hi,{icon:_a,title:e("noSurveys"),message:e("noSurveysMessage")})]})},Fpe=({navigation:t,setNavigation:e})=>{const{t:n}=ce(),r=Zr(),{projects:i,updateMockSurvey:a}=Or(),o=i.find(_=>_.id===t.projectId),c=o==null?void 0:o.mockSurveys.find(_=>_.id===t.surveyId),[u,d]=E.useState((c==null?void 0:c.results.reduce((_,T)=>({..._,[T.checklistItemId]:T}),{}))||{});if(!o||!c)return f.jsx("div",{children:n("surveyNotFound")});const m=(_,T,C="")=>{d(N=>{var M;return{...N,[_]:{checklistItemId:_,result:T,notes:((M=N[_])==null?void 0:M.notes)||C}}})},p=(_,T)=>{d(C=>({...C,[_]:{...C[_],notes:T}}))},y=()=>{a(o.id,c.id,{results:Object.values(u)}),r.success(n("progressSaved"))},x=()=>{const _=Object.values(u),T=_.filter(M=>M.result!=="Not Applicable").length,C=_.filter(M=>M.result==="Pass").length,N=T>0?Math.round(C/T*100):100;a(o.id,c.id,{results:_,status:"Completed",finalScore:N}),r.success(n("surveyFinalized")),e({view:"surveyReport",projectId:o.id,surveyId:c.id})};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:n("conductingSurvey")}),f.jsx("p",{className:"text-brand-text-secondary mt-1",children:o.name})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:y,className:"bg-white dark:bg-slate-700 text-brand-text-primary dark:text-dark-brand-text-primary border border-slate-300 dark:border-slate-600 px-4 py-2 rounded-lg font-semibold",children:n("saveProgress")}),f.jsx("button",{onClick:x,className:"bg-brand-primary text-white px-4 py-2 rounded-lg font-semibold",children:n("finalizeSurvey")})]})]}),f.jsx("div",{className:"space-y-4",children:o.checklist.map(_=>{var T,C,N,M;return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-lg border border-brand-border dark:border-dark-brand-border",children:[f.jsx("p",{className:"font-semibold",children:_.item}),f.jsxs("p",{className:"text-xs text-gray-500",children:[n("standard"),": ",_.standardId]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mt-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>m(_.id,"Pass"),className:`px-3 py-1 rounded-full text-sm ${((T=u[_.id])==null?void 0:T.result)==="Pass"?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:n("pass")}),f.jsx("button",{onClick:()=>m(_.id,"Fail"),className:`px-3 py-1 rounded-full text-sm ${((C=u[_.id])==null?void 0:C.result)==="Fail"?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:n("fail")}),f.jsx("button",{onClick:()=>m(_.id,"Not Applicable"),className:`px-3 py-1 rounded-full text-sm ${((N=u[_.id])==null?void 0:N.result)==="Not Applicable"?"bg-gray-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:n("notApplicable")})]}),f.jsx("input",{type:"text",placeholder:n("surveyorNotes"),value:((M=u[_.id])==null?void 0:M.notes)||"",onChange:P=>p(_.id,P.target.value),className:"w-full sm:flex-grow border-gray-300 dark:border-gray-600 rounded-md text-sm"})]})]},_.id)})})]})},Bpe=({navigation:t})=>{const{t:e}=ce(),{theme:n}=Ti(),{projects:r}=Or(),i=r.find(d=>d.id===t.projectId),a=i==null?void 0:i.mockSurveys.find(d=>d.id===t.surveyId),o=E.useMemo(()=>a?{passed:a.results.filter(d=>d.result==="Pass").length,failed:a.results.filter(d=>d.result==="Fail").length,na:a.results.filter(d=>d.result==="Not Applicable").length,total:a.results.length}:{passed:0,failed:0,na:0,total:0},[a]);if(!i||!a)return f.jsx("div",{children:e("surveyNotFound")});const c=[{name:"Score",value:a.finalScore||0}],u=(a.finalScore||0)>=80?"#22c55e":(a.finalScore||0)>=60?"#f97316":"#ef4444";return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:e("surveyReport")}),f.jsxs("p",{className:"text-brand-text-secondary mt-1",children:[i.name," - ",new Date(a.date).toLocaleDateString()]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[f.jsxs("div",{className:"md:col-span-1 bg-brand-surface dark:bg-dark-brand-surface p-6 rounded-lg border border-brand-border dark:border-dark-brand-border flex flex-col items-center justify-center",children:[f.jsx("h3",{className:"text-lg font-semibold",children:e("overallScore")}),f.jsx("div",{className:"w-48 h-48",children:f.jsx(Yi,{width:"100%",height:"100%",children:f.jsxs(xU,{innerRadius:"70%",outerRadius:"100%",data:c,startAngle:90,endAngle:-270,children:[f.jsx(em,{type:"number",domain:[0,100],angleAxisId:0,tick:!1}),f.jsx(Wv,{background:{fill:n==="dark"?"#334155":"#e2e8f0"},dataKey:"value",cornerRadius:10,fill:u,angleAxisId:0}),f.jsx("text",{x:"50%",y:"50%",textAnchor:"middle",dominantBaseline:"middle",className:"text-4xl font-bold fill-current",children:`${a.finalScore}%`})]})})})]}),f.jsxs("div",{className:"md:col-span-3 grid grid-cols-1 sm:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-green-50 dark:bg-green-900/50 p-6 rounded-lg flex items-center gap-4",children:[f.jsx(ja,{className:"w-8 h-8 text-green-500"}),f.jsxs("div",{className:"font-bold",children:[f.jsx("p",{className:"text-3xl",children:o.passed}),f.jsx("p",{className:"text-sm",children:e("pass")})]})]}),f.jsxs("div",{className:"bg-red-50 dark:bg-red-900/50 p-6 rounded-lg flex items-center gap-4",children:[f.jsx(Nh,{className:"w-8 h-8 text-red-500"}),f.jsxs("div",{className:"font-bold",children:[f.jsx("p",{className:"text-3xl",children:o.failed}),f.jsx("p",{className:"text-sm",children:e("fail")})]})]}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-6 rounded-lg flex items-center gap-4",children:[f.jsx(SO,{className:"w-8 h-8 text-gray-500"}),f.jsxs("div",{className:"font-bold",children:[f.jsx("p",{className:"text-3xl",children:o.na}),f.jsx("p",{className:"text-sm",children:e("notApplicable")})]})]})]})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold mb-4",children:e("detailedFindings")}),f.jsx("div",{className:"space-y-3",children:a.results.map(d=>{const m=i.checklist.find(p=>p.id===d.checklistItemId);return f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface p-4 rounded-lg border-l-4",style:{borderLeftColor:d.result==="Pass"?"#22c55e":d.result==="Fail"?"#ef4444":"#6b7280"},children:[f.jsx("p",{className:"font-semibold",children:m==null?void 0:m.item}),f.jsxs("p",{className:"text-xs text-gray-500",children:[e("standard"),": ",m==null?void 0:m.standardId]}),d.notes&&f.jsxs("p",{className:"text-sm mt-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-md",children:[f.jsxs("strong",{children:[e("surveyorNotes"),":"]})," ",d.notes]})]},d.checklistItemId)})})]})]})},zpe=()=>{const{navigation:t,setNavigation:e,users:n,documents:r,standards:i,programs:a,departments:o,competencies:c,trainings:u,customEvents:d,addProgram:m,updateProgram:p,deleteProgram:y,addStandard:x,updateStandard:_,deleteStandard:T,importStandards:C,addDepartment:N,updateDepartment:M,deleteDepartment:P,addCompetency:L,updateCompetency:j,deleteCompetency:V,addTraining:I,updateTraining:R,deleteTraining:U,assignTraining:F,addDocument:B,updateDocument:q,deleteDocument:H,approveDocument:se,addProcessMap:Se,addCustomEvent:Q,updateCustomEvent:ue,deleteCustomEvent:be,updateUser:De,addUser:Ke,deleteUser:K}=Rt(),{currentUser:re,userTrainingStatuses:pe,certificates:we,updateTrainingStatus:Ce,generateCertificate:Ve}=Pn(),{projects:ze,addProject:Mt}=Or();if(!re)return null;const oe=()=>{var Fe;switch(t.view){case"dashboard":return f.jsx(fI,{});case"analytics":return f.jsx(cle,{});case"qualityInsights":return f.jsx(ime,{projects:ze,risks:[],users:n,departments:o,competencies:c,userTrainingStatuses:pe});case"calendar":return f.jsx(fme,{customEvents:d,onAddEvent:Q,onUpdateEvent:ue,onDeleteEvent:be});case"projects":return f.jsx(pme,{});case"projectDetail":return f.jsx(Eme,{navigation:t});case"createProject":return f.jsx(Cme,{programs:a,users:n,onAddProject:Mt,setNavigation:e});case"myTasks":return f.jsx(Nme,{projects:ze,currentUser:re,setNavigation:e});case"departments":return f.jsx(epe,{departments:o,users:n,projects:ze,onAdd:N,onUpdate:M,onDelete:P,setNavigation:e});case"departmentDetail":const Ye=o.find(Ze=>Ze.id===t.departmentId);return Ye?f.jsx(rpe,{department:Ye,users:n,projects:ze}):f.jsx("div",{children:"Department not found"});case"trainingHub":return f.jsx(lpe,{trainingPrograms:u,userTrainingStatus:pe[re.id]||{},currentUser:re,setNavigation:e,users:n,departments:o,onAssign:F,onCreate:I,onUpdate:R,onDelete:U});case"trainingDetail":const me=u.find(Ze=>Ze.id===t.trainingId),Yt=(Fe=pe[re.id])==null?void 0:Fe[t.trainingId];return me?f.jsx(upe,{program:me,userStatus:Yt,onStatusUpdate:(Ze,ti)=>Ce(re.id,me.id,Ze,ti),onGenerateCertificate:Ze=>Ve(re.id,me.id,Ze),setNavigation:e}):f.jsx("div",{children:"Training not found"});case"certificate":const Xe=we.find(Ze=>Ze.id===t.certificateId);return Xe?f.jsx(dpe,{certificate:Xe}):f.jsx("div",{children:"Certificate not found"});case"standards":const Zt=a.find(Ze=>Ze.id===t.programId);return Zt?f.jsx(wpe,{program:Zt,standards:i.filter(Ze=>Ze.programId===t.programId),canModify:re.role==="Admin",onAdd:x,onUpdate:_,onDelete:Ze=>T(t.programId,Ze),onImport:Ze=>C(t.programId,Ze)}):f.jsx("div",{children:"Program not found"});case"risk":return f.jsx(Ume,{});case"auditHub":return f.jsx(Fme,{});case"documentControl":return f.jsx(Kme,{documents:r,standards:i,currentUser:re,onUpdateDocument:q,onCreateDocument:Ze=>B({...Ze,isControlled:!0,status:"Draft",content:{en:"",ar:""},currentVersion:1,uploadedAt:new Date().toISOString()}),onAddProcessMap:Se,onDeleteDocument:H,onApproveDocument:(Ze,ti)=>ti==="password"&&se(Ze,re.name)});case"dataHub":return f.jsx(Jme,{});case"userProfile":const Pt=n.find(Ze=>Ze.id===t.userId);return Pt?f.jsx(ype,{user:Pt,currentUser:re,department:o.find(Ze=>Ze.id===Pt.departmentId),projects:ze,trainingPrograms:u,userTrainingStatus:pe[Pt.id]||{},competencies:c,documents:r,onUpdateUser:De,setNavigation:e}):f.jsx("div",{children:"User not found"});case"settings":return f.jsx(Ope,{section:t.section,setNavigation:e});case"auditLog":return f.jsx(Lpe,{projects:ze});case"designControls":return f.jsx(Upe,{projects:ze});case"mockSurveyList":return f.jsx(Vpe,{setNavigation:e});case"mockSurvey":return f.jsx(Fpe,{navigation:t,setNavigation:e});case"surveyReport":return f.jsx(Bpe,{navigation:t});default:return f.jsx(fI,{})}};return f.jsx("div",{className:"page-enter-active",children:oe()})},qpe=({isOpen:t,setIsOpen:e,setNavigation:n,projects:r,users:i,documents:a,standards:o,programs:c})=>{const{t:u,lang:d}=ce(),[m,p]=E.useState("");E.useEffect(()=>{const _=T=>{T.key==="k"&&(T.metaKey||T.ctrlKey)&&(T.preventDefault(),e(!t)),T.key==="Escape"&&t&&e(!1)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[t,e]);const y=E.useMemo(()=>{if(!m)return[];const _=m.toLowerCase(),T=[{name:u("userManagement"),link:()=>n({view:"settings",section:"users"})},{name:u("accreditationHub"),link:()=>n({view:"settings",section:"accreditationHub"})}].filter(j=>j.name.toLowerCase().includes(_)).map(j=>({type:u("settings"),...j})),C=r.filter(j=>j.name.toLowerCase().includes(_)).map(j=>({type:u("projects"),name:j.name,link:()=>n({view:"projectDetail",projectId:j.id})})),N=i.filter(j=>j.name.toLowerCase().includes(_)).map(j=>({type:u("users"),name:j.name,link:()=>n({view:"settings",section:"users"})})),M=a.filter(j=>{var V;return(V=j.name[d])==null?void 0:V.toLowerCase().includes(_)}).map(j=>({type:u("documents"),name:j.name[d],link:()=>{}})),P=o.filter(j=>j.standardId.toLowerCase().includes(_)||j.description.toLowerCase().includes(_)).map(j=>(c.find(V=>V.id===j.programId),{type:u("standardsLibrary"),name:`${j.standardId}: ${j.description.substring(0,30)}...`,link:()=>n({view:"standards",programId:j.programId})}));return[...T,...C,...N,...M,...P].reduce((j,V)=>{let I=j.find(R=>R.type===V.type);return I||(I={type:V.type,items:[]},j.push(I)),I.items.push(V),j},[])},[m,r,i,a,o,c,d,n,u]),x=_=>{_(),p(""),e(!1)};return t?f.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex justify-center items-start pt-20",onClick:()=>e(!1),children:f.jsxs("div",{className:"bg-brand-surface dark:bg-dark-brand-surface rounded-xl shadow-2xl w-full max-w-xl mx-4",onClick:_=>_.stopPropagation(),children:[f.jsxs("div",{className:"relative",children:[f.jsx(AO,{className:"absolute top-3.5 left-4 h-5 w-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:u("searchAnything"),value:m,onChange:_=>p(_.target.value),className:"w-full bg-transparent px-12 py-3 border-b border-brand-border dark:border-dark-brand-border focus:outline-none",autoFocus:!0})]}),f.jsxs("div",{className:"max-h-96 overflow-y-auto p-2",children:[m&&y.length===0&&f.jsx("p",{className:"text-center text-sm text-gray-500 p-4",children:u("noResults")}),y.map(_=>f.jsxs("div",{children:[f.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase px-3 pt-3 pb-1",children:_.type}),f.jsx("ul",{children:_.items.map((T,C)=>f.jsx("li",{children:f.jsx("button",{onClick:()=>x(T.link),className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:T.name})},`${_.type}-${C}`))})]},_.type))]}),f.jsxs("div",{className:"p-2 border-t border-brand-border dark:border-dark-brand-border text-xs text-gray-400",children:[f.jsxs("strong",{children:[u("goTo"),":"]})," ",u("projects"),", ",u("users"),", ",u("documents"),", ",u("standardsLibrary"),"..."]})]})}):null},Hpe=()=>{const{navigation:t,setNavigation:e}=Rt(),{currentUser:n,logout:r,notifications:i,markNotificationAsRead:a}=Pn(),{projects:o}=Or(),{users:c,documents:u,standards:d,programs:m}=Rt(),[p,y]=E.useState(!1),[x,_]=E.useState(!1),[T,C]=E.useState(!1);return n?f.jsxs("div",{className:"flex h-screen bg-brand-background dark:bg-dark-brand-background text-brand-text-primary dark:text-dark-brand-text-primary",children:[f.jsx(iq,{navigation:t,setNavigation:e,isExpanded:x,setIsExpanded:_}),f.jsx(aq,{isOpen:p,setIsOpen:y,navigation:t,setNavigation:e}),f.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ${x?"lg:pl-64":"lg:pl-20"}`,children:[f.jsx(rq,{navigation:t,notifications:i,onToggleMobileMenu:()=>y(!0),onOpenCommandPalette:()=>C(!0),setNavigation:e,onMarkAsRead:a,onLogout:r}),f.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:f.jsx(zpe,{})})]}),f.jsx(qpe,{isOpen:T,setIsOpen:C,setNavigation:e,projects:o,users:c,documents:u,standards:d,programs:m})]}):null},$pe=()=>f.jsx("div",{className:"flex h-screen w-screen items-center justify-center bg-brand-background dark:bg-dark-brand-background",children:f.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[f.jsx(ed,{className:"h-16 w-16 text-brand-primary animate-pulse"}),f.jsx(EO,{className:"h-8 w-8 text-brand-text-secondary dark:text-dark-brand-text-secondary animate-spin"}),f.jsx("p",{className:"text-brand-text-secondary dark:text-dark-brand-text-secondary",children:"Loading AccreditEx..."})]})}),Gpe=()=>{};var $M={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Kpe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},YU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|d>>6,x=d&63;u||(x=64,o||(y=64)),r.push(n[m],n[p],n[y],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Kpe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||d==null||p==null)throw new Ype;const y=a<<2|c>>4;if(r.push(y),d!==64){const x=c<<4&240|d>>2;if(r.push(x),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ype extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wpe=function(t){const e=KU(t);return YU.encodeByteArray(e,!0)},ky=function(t){return Wpe(t).replace(/\./g,"")},WU=function(t){try{return YU.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jpe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe=()=>Jpe().__FIREBASE_DEFAULTS__,Xpe=()=>{if(typeof process>"u"||typeof $M>"u")return;const t=$M.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Zpe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WU(t[1]);return e&&JSON.parse(e)},e0=()=>{try{return Gpe()||Qpe()||Xpe()||Zpe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JU=t=>{var e,n;return(n=(e=e0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},ege=t=>{const e=JU(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QU=()=>{var t;return(t=e0())==null?void 0:t.config},XU=t=>{var e;return(e=e0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZU(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nge(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ky(JSON.stringify(n)),ky(JSON.stringify(o)),""].join(".")}const Zf={};function rge(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zf))Zf[e]?t.emulator.push(e):t.prod.push(e);return t}function ige(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let GM=!1;function eV(t,e){if(typeof window>"u"||typeof document>"u"||!bd(window.location.host)||Zf[t]===e||Zf[t]||GM)return;Zf[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=rge().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,x){y.setAttribute("width","24"),y.setAttribute("id",x),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{GM=!0,o()},y}function m(y,x){y.setAttribute("id",x),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=ige(r),x=n("text"),_=document.getElementById(x)||document.createElement("span"),T=n("learnmore"),C=document.getElementById(T)||document.createElement("a"),N=n("preprendIcon"),M=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const P=y.element;c(P),m(C,T);const L=d();u(M,N),P.append(M,_,C,L),document.body.appendChild(P)}a?(_.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function age(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pr())}function sge(){var e;const t=(e=e0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oge(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lge(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cge(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uge(){const t=pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dge(){return!sge()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fge(){try{return typeof indexedDB=="object"}catch{return!1}}function hge(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge="FirebaseError";class Us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mge,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,im.prototype.create)}}class im{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?pge(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new Us(i,c,r)}}function pge(t,e){return t.replace(gge,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const gge=/\{\$([^}]+)}/g;function yge(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(KM(a)&&KM(o)){if(!cc(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function KM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vge(t,e){const n=new xge(t,e);return n.subscribe.bind(n)}class xge{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bge(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=fS),i.error===void 0&&(i.error=fS),i.complete===void 0&&(i.complete=fS);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bge(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fS(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){return t&&t._delegate?t._delegate:t}class uc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tge;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_ge(e))try{this.getOrInitializeService({instanceIdentifier:Ol})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ol){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ol){return this.instances.has(e)}getOptions(e=Ol){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sge(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ol){return this.component?this.component.multipleInstances?e:Ol:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sge(t){return t===Ol?void 0:t}function _ge(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Age{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wge(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const Tge={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},Ege=at.INFO,Cge={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},Nge=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Cge[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class NT{constructor(e){this.name=e,this._logLevel=Ege,this._logHandler=Nge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tge[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const kge=(t,e)=>e.some(n=>t instanceof n);let YM,WM;function Ige(){return YM||(YM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pge(){return WM||(WM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tV=new WeakMap,V_=new WeakMap,nV=new WeakMap,hS=new WeakMap,kT=new WeakMap;function Dge(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Po(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&tV.set(n,t)}).catch(()=>{}),kT.set(e,t),e}function Rge(t){if(V_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});V_.set(t,e)}let F_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return V_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||nV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Po(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Mge(t){F_=t(F_)}function jge(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mS(this),e,...n);return nV.set(r,e.sort?e.sort():[e]),Po(r)}:Pge().includes(t)?function(...e){return t.apply(mS(this),e),Po(tV.get(this))}:function(...e){return Po(t.apply(mS(this),e))}}function Oge(t){return typeof t=="function"?jge(t):(t instanceof IDBTransaction&&Rge(t),kge(t,Ige())?new Proxy(t,F_):t)}function Po(t){if(t instanceof IDBRequest)return Dge(t);if(hS.has(t))return hS.get(t);const e=Oge(t);return e!==t&&(hS.set(t,e),kT.set(e,t)),e}const mS=t=>kT.get(t);function Lge(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=Po(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Po(o.result),u.oldVersion,u.newVersion,Po(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Uge=["get","getKey","getAll","getAllKeys","count"],Vge=["put","add","delete","clear"],pS=new Map;function JM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pS.get(e))return pS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Vge.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Uge.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&u.done]))[0]};return pS.set(e,a),a}Mge(t=>({...t,get:(e,n,r)=>JM(e,n)||t.get(e,n,r),has:(e,n)=>!!JM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bge(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Bge(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const B_="@firebase/app",QM="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new NT("@firebase/app"),zge="@firebase/app-compat",qge="@firebase/analytics-compat",Hge="@firebase/analytics",$ge="@firebase/app-check-compat",Gge="@firebase/app-check",Kge="@firebase/auth",Yge="@firebase/auth-compat",Wge="@firebase/database",Jge="@firebase/data-connect",Qge="@firebase/database-compat",Xge="@firebase/functions",Zge="@firebase/functions-compat",eye="@firebase/installations",tye="@firebase/installations-compat",nye="@firebase/messaging",rye="@firebase/messaging-compat",iye="@firebase/performance",aye="@firebase/performance-compat",sye="@firebase/remote-config",oye="@firebase/remote-config-compat",lye="@firebase/storage",cye="@firebase/storage-compat",uye="@firebase/firestore",dye="@firebase/ai",fye="@firebase/firestore-compat",hye="firebase",mye="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="[DEFAULT]",pye={[B_]:"fire-core",[zge]:"fire-core-compat",[Hge]:"fire-analytics",[qge]:"fire-analytics-compat",[Gge]:"fire-app-check",[$ge]:"fire-app-check-compat",[Kge]:"fire-auth",[Yge]:"fire-auth-compat",[Wge]:"fire-rtdb",[Jge]:"fire-data-connect",[Qge]:"fire-rtdb-compat",[Xge]:"fire-fn",[Zge]:"fire-fn-compat",[eye]:"fire-iid",[tye]:"fire-iid-compat",[nye]:"fire-fcm",[rye]:"fire-fcm-compat",[iye]:"fire-perf",[aye]:"fire-perf-compat",[sye]:"fire-rc",[oye]:"fire-rc-compat",[lye]:"fire-gcs",[cye]:"fire-gcs-compat",[uye]:"fire-fst",[fye]:"fire-fst-compat",[dye]:"fire-vertex","fire-js":"fire-js",[hye]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Map,gye=new Map,q_=new Map;function XM(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hu(t){const e=t.name;if(q_.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;q_.set(e,t);for(const n of Iy.values())XM(n,t);for(const n of gye.values())XM(n,t);return!0}function IT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ba(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yye={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Do=new im("app","Firebase",yye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vye{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Do.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=mye;function rV(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:z_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Do.create("bad-app-name",{appName:String(i)});if(n||(n=QU()),!n)throw Do.create("no-options");const a=Iy.get(i);if(a){if(cc(n,a.options)&&cc(r,a.config))return a;throw Do.create("duplicate-app",{appName:i})}const o=new Age(i);for(const u of q_.values())o.addComponent(u);const c=new vye(n,r,o);return Iy.set(i,c),c}function iV(t=z_){const e=Iy.get(t);if(!e&&t===z_&&QU())return rV();if(!e)throw Do.create("no-app",{appName:t});return e}function Ro(t,e,n){let r=pye[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(o.join(" "));return}Hu(new uc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xye="firebase-heartbeat-database",bye=1,Sh="firebase-heartbeat-store";let gS=null;function aV(){return gS||(gS=Lge(xye,bye,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Do.create("idb-open",{originalErrorMessage:t.message})})),gS}async function wye(t){try{const n=(await aV()).transaction(Sh),r=await n.objectStore(Sh).get(sV(t));return await n.done,r}catch(e){if(e instanceof Us)_s.warn(e.message);else{const n=Do.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function ZM(t,e){try{const r=(await aV()).transaction(Sh,"readwrite");await r.objectStore(Sh).put(e,sV(t)),await r.done}catch(n){if(n instanceof Us)_s.warn(n.message);else{const r=Do.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(r.message)}}}function sV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sye=1024,_ye=30;class Aye{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Eye(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ej();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>_ye){const o=Cye(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ej(),{heartbeatsToSend:r,unsentEntries:i}=Tye(this._heartbeatsCache.heartbeats),a=ky(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return _s.warn(n),""}}}function ej(){return new Date().toISOString().substring(0,10)}function Tye(t,e=Sye){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),tj(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tj(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Eye{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fge()?hge().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wye(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ZM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function tj(t){return ky(JSON.stringify({version:2,heartbeats:t})).length}function Cye(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nye(t){Hu(new uc("platform-logger",e=>new Fge(e),"PRIVATE")),Hu(new uc("heartbeat",e=>new Aye(e),"PRIVATE")),Ro(B_,QM,t),Ro(B_,QM,"esm2020"),Ro("fire-js","")}Nye("");function oV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kye=oV,lV=new im("auth","Firebase",oV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new NT("@firebase/auth");function Iye(t,...e){Py.logLevel<=at.WARN&&Py.warn(`Auth (${wd}): ${t}`,...e)}function Sg(t,...e){Py.logLevel<=at.ERROR&&Py.error(`Auth (${wd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t,...e){throw PT(t,...e)}function Ea(t,...e){return PT(t,...e)}function cV(t,e,n){const r={...kye(),[e]:n};return new im("auth","Firebase",r).create(e,{appName:t.name})}function Yl(t){return cV(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lV.create(t,...e)}function Be(t,e,...n){if(!t)throw PT(e,...n)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sg(e),new Error(e)}function Ts(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Pye(){return nj()==="http:"||nj()==="https:"}function nj(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dye(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pye()||lge()||"connection"in navigator)?navigator.onLine:!0}function Rye(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ts(n>e,"Short delay should be less than long delay!"),this.isMobile=age()||cge()}get(){return Dye()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){Ts(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jye=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Oye=new sm(3e4,6e4);function RT(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Sd(t,e,n,r,i={}){return dV(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=am({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...a};return oge()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&bd(t.emulatorConfig.host)&&(d.credentials="include"),uV.fetch()(await fV(t,t.config.apiHost,n,c),d)})}async function dV(t,e,n){t._canInitEmulator=!1;const r={...Mye,...e};try{const i=new Uye(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw lg(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw lg(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw lg(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw lg(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw cV(t,m,d);As(t,m)}}catch(i){if(i instanceof Us)throw i;As(t,"network-request-failed",{message:String(i)})}}async function Lye(t,e,n,r,i={}){const a=await Sd(t,e,n,r,i);return"mfaPendingCredential"in a&&As(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function fV(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?DT(t.config,i):`${t.config.apiScheme}://${i}`;return jye.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}class Uye{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ea(this.auth,"network-request-failed")),Oye.get())})}}function lg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ea(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vye(t,e){return Sd(t,"POST","/v1/accounts:delete",e)}async function Dy(t,e){return Sd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fye(t,e=!1){const n=$i(t),r=await n.getIdToken(e),i=MT(r);Be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:eh(yS(i.auth_time)),issuedAtTime:eh(yS(i.iat)),expirationTime:eh(yS(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function yS(t){return Number(t)*1e3}function MT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sg("JWT malformed, contained fewer than 3 sections"),null;try{const i=WU(n);return i?JSON.parse(i):(Sg("Failed to decode base64 JWT payload"),null)}catch(i){return Sg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rj(t){const e=MT(t);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Us&&Bye(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Bye({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zye{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ry(t){var p;const e=t.auth,n=await t.getIdToken(),r=await _h(t,Dy(e,{idToken:n}));Be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(p=i.providerUserInfo)!=null&&p.length?hV(i.providerUserInfo):[],o=Hye(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function qye(t){const e=$i(t);await Ry(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hye(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hV(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $ye(t,e){const n=await dV(t,{},async()=>{const r=am({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await fV(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&bd(t.emulatorConfig.host)&&(u.credentials="include"),uV.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Gye(t,e){return Sd(t,"POST","/v2/accounts:revokeToken",RT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const n=rj(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await $ye(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Eu;return r&&(Be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Be(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Be(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eu,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(t,e){Be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qi{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new zye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _h(this,this.stsTokenManager.getToken(this.auth,e));return Be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Fye(this,e)}reload(){return qye(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ry(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ba(this.auth.app))return Promise.reject(Yl(this.auth));const e=await this.getIdToken();return await _h(this,Vye(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:y,isAnonymous:x,providerData:_,stsTokenManager:T}=n;Be(p&&T,e,"internal-error");const C=Eu.fromJSON(this.name,T);Be(typeof p=="string",e,"internal-error"),xo(r,e.name),xo(i,e.name),Be(typeof y=="boolean",e,"internal-error"),Be(typeof x=="boolean",e,"internal-error"),xo(a,e.name),xo(o,e.name),xo(c,e.name),xo(u,e.name),xo(d,e.name),xo(m,e.name);const N=new qi({uid:p,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:C,createdAt:d,lastLoginAt:m});return _&&Array.isArray(_)&&(N.providerData=_.map(M=>({...M}))),u&&(N._redirectEventId=u),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new Eu;i.updateFromServerResponse(n);const a=new qi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ry(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Be(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?hV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Eu;c.updateFromIdToken(r);const u=new qi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Map;function ls(t){Ts(t instanceof Function,"Expected a class definition");let e=ij.get(t);return e?(Ts(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ij.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mV.type="NONE";const aj=mV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e,n){return`firebase:${t}:${e}:${n}`}class Cu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=_g(this.userKey,i.apiKey,a),this.fullPersistenceKey=_g("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Dy(this.auth,{idToken:e}).catch(()=>{});return n?qi._fromGetAccountInfoResponse(this.auth,n,e):null}return qi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Cu(ls(aj),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||ls(aj);const o=_g(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(o);if(m){let p;if(typeof m=="string"){const y=await Dy(e,{idToken:m}).catch(()=>{});if(!y)break;p=await qi._fromGetAccountInfoResponse(e,y,m)}else p=qi._fromJSON(e,m);d!==a&&(c=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Cu(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new Cu(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bV(e))return"Blackberry";if(wV(e))return"Webos";if(gV(e))return"Safari";if((e.includes("chrome/")||yV(e))&&!e.includes("edge/"))return"Chrome";if(xV(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function pV(t=pr()){return/firefox\//i.test(t)}function gV(t=pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yV(t=pr()){return/crios\//i.test(t)}function vV(t=pr()){return/iemobile/i.test(t)}function xV(t=pr()){return/android/i.test(t)}function bV(t=pr()){return/blackberry/i.test(t)}function wV(t=pr()){return/webos/i.test(t)}function jT(t=pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Kye(t=pr()){var e;return jT(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Yye(){return uge()&&document.documentMode===10}function SV(t=pr()){return jT(t)||xV(t)||wV(t)||bV(t)||/windows phone/i.test(t)||vV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t,e=[]){let n;switch(t){case"Browser":n=sj(pr());break;case"Worker":n=`${sj(pr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wye{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jye(t,e={}){return Sd(t,"GET","/v2/passwordPolicy",RT(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qye=6;class Xye{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Qye,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zye{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oj(this),this.idTokenSubscription=new oj(this),this.beforeStateQueue=new Wye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ls(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Cu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dy(this,{idToken:e}),r=await qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ba(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ry(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rye()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ba(this.app))return Promise.reject(Yl(this));const n=e?$i(e):null;return n&&Be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ba(this.app)?Promise.reject(Yl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ba(this.app)?Promise.reject(Yl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Jye(this),n=new Xye(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new im("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gye(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ls(e)||this._popupRedirectResolver;Be(n,this,"argument-error"),this.redirectPersistenceManager=await Cu.create(this,[ls(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_V(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ba(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Iye(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function OT(t){return $i(t)}class oj{constructor(e){this.auth=e,this.observer=null,this.addObserver=vge(n=>this.observer=n)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eve(t){LT=t}function tve(t){return LT.loadJS(t)}function nve(){return LT.gapiScript}function rve(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ive(t,e){const n=IT(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(cc(a,e??{}))return i;As(i,"already-initialized")}return n.initialize({options:e})}function ave(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ls);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sve(t,e,n){const r=OT(t);Be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=AV(e),{host:o,port:c}=ove(e),u=c===null?"":`:${c}`,d={url:`${a}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Be(cc(d,r.config.emulator)&&cc(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,bd(o)?(ZU(`${a}//${o}${u}`),eV("Auth",!0)):lve()}function AV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ove(t){const e=AV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:lj(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:lj(o)}}}function lj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lve(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,n){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(t,e){return Lye(t,"POST","/v1/accounts:signInWithIdp",RT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cve="http://localhost";class dc extends TV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new dc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):As("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new dc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Nu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Nu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nu(e,n)}buildRequest(){const e={requestUri:cve,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=am(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends EV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends om{constructor(){super("facebook.com")}static credential(e){return dc._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends om{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return dc._fromParams({providerId:Ao.PROVIDER_ID,signInMethod:Ao.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ao.credentialFromTaggedObject(e)}static credentialFromError(e){return Ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ao.credential(n,r)}catch{return null}}}Ao.GOOGLE_SIGN_IN_METHOD="google.com";Ao.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends om{constructor(){super("github.com")}static credential(e){return dc._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends om{constructor(){super("twitter.com")}static credential(e,n){return dc._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Eo.credential(n,r)}catch{return null}}}Eo.TWITTER_SIGN_IN_METHOD="twitter.com";Eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await qi._fromIdTokenResponse(e,r,i),o=cj(r);return new $u({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cj(r);return new $u({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends Us{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,My.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new My(e,n,r,i)}}function CV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?My._fromErrorAndOperation(t,a,e,r):a})}async function uve(t,e,n=!1){const r=await _h(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $u._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dve(t,e,n=!1){const{auth:r}=t;if(ba(r.app))return Promise.reject(Yl(r));const i="reauthenticate";try{const a=await _h(t,CV(r,i,e,t),n);Be(a.idToken,r,"internal-error");const o=MT(a.idToken);Be(o,r,"internal-error");const{sub:c}=o;return Be(t.uid===c,r,"user-mismatch"),$u._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&As(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fve(t,e,n=!1){if(ba(t.app))return Promise.reject(Yl(t));const r="signIn",i=await CV(t,r,e),a=await $u._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function hve(t,e,n,r){return $i(t).onIdTokenChanged(e,n,r)}function mve(t,e,n){return $i(t).beforeAuthStateChanged(e,n)}function pve(t,e,n,r){return $i(t).onAuthStateChanged(e,n,r)}const jy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jy,"1"),this.storage.removeItem(jy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gve=1e3,yve=10;class kV extends NV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);Yye()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yve):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kV.type="LOCAL";const vve=kV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV extends NV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IV.type="SESSION";const PV=IV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xve(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new t0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await xve(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=UT("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(){return window}function wve(t){Ca().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(){return typeof Ca().WorkerGlobalScope<"u"&&typeof Ca().importScripts=="function"}async function Sve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _ve(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ave(){return DV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="firebaseLocalStorageDb",Tve=1,Oy="firebaseLocalStorage",MV="fbase_key";class lm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function n0(t,e){return t.transaction([Oy],e?"readwrite":"readonly").objectStore(Oy)}function Eve(){const t=indexedDB.deleteDatabase(RV);return new lm(t).toPromise()}function G_(){const t=indexedDB.open(RV,Tve);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Oy,{keyPath:MV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Oy)?e(r):(r.close(),await Eve(),e(await G_()))})})}async function uj(t,e,n){const r=n0(t,!0).put({[MV]:e,value:n});return new lm(r).toPromise()}async function Cve(t,e){const n=n0(t,!1).get(e),r=await new lm(n).toPromise();return r===void 0?null:r.value}function dj(t,e){const n=n0(t,!0).delete(e);return new lm(n).toPromise()}const Nve=800,kve=3;class jV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await G_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kve)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t0._getInstance(Ave()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Sve(),!this.activeServiceWorker)return;this.sender=new bve(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_ve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await G_();return await uj(e,jy,"1"),await dj(e,jy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uj(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Cve(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=n0(i,!1).getAll();return new lm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jV.type="LOCAL";const Ive=jV;new sm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pve(t,e){return e?ls(e):(Be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT extends TV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Dve(t){return fve(t.auth,new VT(t),t.bypassAuthState)}function Rve(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),dve(n,new VT(t),t.bypassAuthState)}async function Mve(t){const{auth:e,user:n}=t;return Be(n,e,"internal-error"),uve(n,new VT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dve;case"linkViaPopup":case"linkViaRedirect":return Mve;case"reauthViaPopup":case"reauthViaRedirect":return Rve;default:As(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jve=new sm(2e3,1e4);class xu extends OV{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,xu.currentPopupAction&&xu.currentPopupAction.cancel(),xu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=UT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ea(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ea(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ea(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jve.get())};e()}}xu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ove="pendingRedirect",Ag=new Map;class Lve extends OV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ag.get(this.auth._key());if(!e){try{const r=await Uve(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ag.set(this.auth._key(),e)}return this.bypassAuthState||Ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uve(t,e){const n=Bve(e),r=Fve(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Vve(t,e){Ag.set(t._key(),e)}function Fve(t){return ls(t._redirectPersistence)}function Bve(t){return _g(Ove,t.config.apiKey,t.name)}async function zve(t,e,n=!1){if(ba(t.app))return Promise.reject(Yl(t));const r=OT(t),i=Pve(r,e),o=await new Lve(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qve=600*1e3;class Hve{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$ve(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LV(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ea(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qve&&this.cachedEventUids.clear(),this.cachedEventUids.has(fj(e))}saveEventToCache(e){this.cachedEventUids.add(fj(e)),this.lastProcessedEventTime=Date.now()}}function fj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $ve(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gve(t,e={}){return Sd(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kve=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yve=/^https?/;async function Wve(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Gve(t);for(const n of e)try{if(Jve(n))return}catch{}As(t,"unauthorized-domain")}function Jve(t){const e=H_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Yve.test(n))return!1;if(Kve.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qve=new sm(3e4,6e4);function hj(){const t=Ca().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Xve(t){return new Promise((e,n)=>{var i,a,o;function r(){hj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hj(),n(Ea(t,"network-request-failed"))},timeout:Qve.get()})}if((a=(i=Ca().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=Ca().gapi)!=null&&o.load)r();else{const c=rve("iframefcb");return Ca()[c]=()=>{gapi.load?r():n(Ea(t,"network-request-failed"))},tve(`${nve()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Tg=null,e})}let Tg=null;function Zve(t){return Tg=Tg||Xve(t),Tg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0e=new sm(5e3,15e3),t0e="__/auth/iframe",n0e="emulator/auth/iframe",r0e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i0e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a0e(t){const e=t.config;Be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?DT(e,n0e):`https://${t.config.authDomain}/${t0e}`,r={apiKey:e.apiKey,appName:t.name,v:wd},i=i0e.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${am(r).slice(1)}`}async function s0e(t){const e=await Zve(t),n=Ca().gapi;return Be(n,t,"internal-error"),e.open({where:document.body,url:a0e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r0e,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Ea(t,"network-request-failed"),c=Ca().setTimeout(()=>{a(o)},e0e.get());function u(){Ca().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l0e=500,c0e=600,u0e="_blank",d0e="http://localhost";class mj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f0e(t,e,n,r=l0e,i=c0e){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...o0e,width:r.toString(),height:i.toString(),top:a,left:o},d=pr().toLowerCase();n&&(c=yV(d)?u0e:n),pV(d)&&(e=e||d0e,u.scrollbars="yes");const m=Object.entries(u).reduce((y,[x,_])=>`${y}${x}=${_},`,"");if(Kye(d)&&c!=="_self")return h0e(e||"",c),new mj(null);const p=window.open(e||"",c,m);Be(p,t,"popup-blocked");try{p.focus()}catch{}return new mj(p)}function h0e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0e="__/auth/handler",p0e="emulator/auth/handler",g0e=encodeURIComponent("fac");async function pj(t,e,n,r,i,a){Be(t.config.authDomain,t,"auth-domain-config-required"),Be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wd,eventId:i};if(e instanceof EV){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",yge(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof om){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${g0e}=${encodeURIComponent(u)}`:"";return`${y0e(t)}?${am(c).slice(1)}${d}`}function y0e({config:t}){return t.emulator?DT(t,p0e):`https://${t.authDomain}/${m0e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="webStorageSupport";class v0e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PV,this._completeRedirectFn=zve,this._overrideRedirectResult=Vve}async _openPopup(e,n,r,i){var o;Ts((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await pj(e,n,r,H_(),i);return f0e(e,a,UT())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await pj(e,n,r,H_(),i);return wve(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ts(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await s0e(e),r=new Hve(e);return n.register("authEvent",i=>(Be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vS,{type:vS},i=>{var o;const a=(o=i==null?void 0:i[0])==null?void 0:o[vS];a!==void 0&&n(!!a),As(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wve(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SV()||gV()||jT()}}const x0e=v0e;var gj="@firebase/auth",yj="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S0e(t){Hu(new uc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_V(t)},d=new Zye(r,i,a,u);return ave(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Hu(new uc("auth-internal",e=>{const n=OT(e.getProvider("auth").getImmediate());return(r=>new b0e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ro(gj,yj,w0e(t)),Ro(gj,yj,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0e=300,A0e=XU("authIdTokenMaxAge")||_0e;let vj=null;const T0e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>A0e)return;const i=n==null?void 0:n.token;vj!==i&&(vj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function E0e(t=iV()){const e=IT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ive(t,{popupRedirectResolver:x0e,persistence:[Ive,vve,PV]}),r=XU("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=T0e(a.toString());mve(n,o,()=>o(n.currentUser)),hve(n,c=>o(c))}}const i=JU("auth");return i&&sve(n,`http://${i}`),n}function C0e(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}eve({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Ea("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",C0e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S0e("Browser");var xj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mo,UV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function U(){}U.prototype=R.prototype,I.F=R.prototype,I.prototype=new U,I.prototype.constructor=I,I.D=function(F,B,q){for(var H=Array(arguments.length-2),se=2;se<arguments.length;se++)H[se-2]=arguments[se];return R.prototype[B].apply(F,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,U){U||(U=0);const F=Array(16);if(typeof R=="string")for(var B=0;B<16;++B)F[B]=R.charCodeAt(U++)|R.charCodeAt(U++)<<8|R.charCodeAt(U++)<<16|R.charCodeAt(U++)<<24;else for(B=0;B<16;++B)F[B]=R[U++]|R[U++]<<8|R[U++]<<16|R[U++]<<24;R=I.g[0],U=I.g[1],B=I.g[2];let q=I.g[3],H;H=R+(q^U&(B^q))+F[0]+3614090360&4294967295,R=U+(H<<7&4294967295|H>>>25),H=q+(B^R&(U^B))+F[1]+3905402710&4294967295,q=R+(H<<12&4294967295|H>>>20),H=B+(U^q&(R^U))+F[2]+606105819&4294967295,B=q+(H<<17&4294967295|H>>>15),H=U+(R^B&(q^R))+F[3]+3250441966&4294967295,U=B+(H<<22&4294967295|H>>>10),H=R+(q^U&(B^q))+F[4]+4118548399&4294967295,R=U+(H<<7&4294967295|H>>>25),H=q+(B^R&(U^B))+F[5]+1200080426&4294967295,q=R+(H<<12&4294967295|H>>>20),H=B+(U^q&(R^U))+F[6]+2821735955&4294967295,B=q+(H<<17&4294967295|H>>>15),H=U+(R^B&(q^R))+F[7]+4249261313&4294967295,U=B+(H<<22&4294967295|H>>>10),H=R+(q^U&(B^q))+F[8]+1770035416&4294967295,R=U+(H<<7&4294967295|H>>>25),H=q+(B^R&(U^B))+F[9]+2336552879&4294967295,q=R+(H<<12&4294967295|H>>>20),H=B+(U^q&(R^U))+F[10]+4294925233&4294967295,B=q+(H<<17&4294967295|H>>>15),H=U+(R^B&(q^R))+F[11]+2304563134&4294967295,U=B+(H<<22&4294967295|H>>>10),H=R+(q^U&(B^q))+F[12]+1804603682&4294967295,R=U+(H<<7&4294967295|H>>>25),H=q+(B^R&(U^B))+F[13]+4254626195&4294967295,q=R+(H<<12&4294967295|H>>>20),H=B+(U^q&(R^U))+F[14]+2792965006&4294967295,B=q+(H<<17&4294967295|H>>>15),H=U+(R^B&(q^R))+F[15]+1236535329&4294967295,U=B+(H<<22&4294967295|H>>>10),H=R+(B^q&(U^B))+F[1]+4129170786&4294967295,R=U+(H<<5&4294967295|H>>>27),H=q+(U^B&(R^U))+F[6]+3225465664&4294967295,q=R+(H<<9&4294967295|H>>>23),H=B+(R^U&(q^R))+F[11]+643717713&4294967295,B=q+(H<<14&4294967295|H>>>18),H=U+(q^R&(B^q))+F[0]+3921069994&4294967295,U=B+(H<<20&4294967295|H>>>12),H=R+(B^q&(U^B))+F[5]+3593408605&4294967295,R=U+(H<<5&4294967295|H>>>27),H=q+(U^B&(R^U))+F[10]+38016083&4294967295,q=R+(H<<9&4294967295|H>>>23),H=B+(R^U&(q^R))+F[15]+3634488961&4294967295,B=q+(H<<14&4294967295|H>>>18),H=U+(q^R&(B^q))+F[4]+3889429448&4294967295,U=B+(H<<20&4294967295|H>>>12),H=R+(B^q&(U^B))+F[9]+568446438&4294967295,R=U+(H<<5&4294967295|H>>>27),H=q+(U^B&(R^U))+F[14]+3275163606&4294967295,q=R+(H<<9&4294967295|H>>>23),H=B+(R^U&(q^R))+F[3]+4107603335&4294967295,B=q+(H<<14&4294967295|H>>>18),H=U+(q^R&(B^q))+F[8]+1163531501&4294967295,U=B+(H<<20&4294967295|H>>>12),H=R+(B^q&(U^B))+F[13]+2850285829&4294967295,R=U+(H<<5&4294967295|H>>>27),H=q+(U^B&(R^U))+F[2]+4243563512&4294967295,q=R+(H<<9&4294967295|H>>>23),H=B+(R^U&(q^R))+F[7]+1735328473&4294967295,B=q+(H<<14&4294967295|H>>>18),H=U+(q^R&(B^q))+F[12]+2368359562&4294967295,U=B+(H<<20&4294967295|H>>>12),H=R+(U^B^q)+F[5]+4294588738&4294967295,R=U+(H<<4&4294967295|H>>>28),H=q+(R^U^B)+F[8]+2272392833&4294967295,q=R+(H<<11&4294967295|H>>>21),H=B+(q^R^U)+F[11]+1839030562&4294967295,B=q+(H<<16&4294967295|H>>>16),H=U+(B^q^R)+F[14]+4259657740&4294967295,U=B+(H<<23&4294967295|H>>>9),H=R+(U^B^q)+F[1]+2763975236&4294967295,R=U+(H<<4&4294967295|H>>>28),H=q+(R^U^B)+F[4]+1272893353&4294967295,q=R+(H<<11&4294967295|H>>>21),H=B+(q^R^U)+F[7]+4139469664&4294967295,B=q+(H<<16&4294967295|H>>>16),H=U+(B^q^R)+F[10]+3200236656&4294967295,U=B+(H<<23&4294967295|H>>>9),H=R+(U^B^q)+F[13]+681279174&4294967295,R=U+(H<<4&4294967295|H>>>28),H=q+(R^U^B)+F[0]+3936430074&4294967295,q=R+(H<<11&4294967295|H>>>21),H=B+(q^R^U)+F[3]+3572445317&4294967295,B=q+(H<<16&4294967295|H>>>16),H=U+(B^q^R)+F[6]+76029189&4294967295,U=B+(H<<23&4294967295|H>>>9),H=R+(U^B^q)+F[9]+3654602809&4294967295,R=U+(H<<4&4294967295|H>>>28),H=q+(R^U^B)+F[12]+3873151461&4294967295,q=R+(H<<11&4294967295|H>>>21),H=B+(q^R^U)+F[15]+530742520&4294967295,B=q+(H<<16&4294967295|H>>>16),H=U+(B^q^R)+F[2]+3299628645&4294967295,U=B+(H<<23&4294967295|H>>>9),H=R+(B^(U|~q))+F[0]+4096336452&4294967295,R=U+(H<<6&4294967295|H>>>26),H=q+(U^(R|~B))+F[7]+1126891415&4294967295,q=R+(H<<10&4294967295|H>>>22),H=B+(R^(q|~U))+F[14]+2878612391&4294967295,B=q+(H<<15&4294967295|H>>>17),H=U+(q^(B|~R))+F[5]+4237533241&4294967295,U=B+(H<<21&4294967295|H>>>11),H=R+(B^(U|~q))+F[12]+1700485571&4294967295,R=U+(H<<6&4294967295|H>>>26),H=q+(U^(R|~B))+F[3]+2399980690&4294967295,q=R+(H<<10&4294967295|H>>>22),H=B+(R^(q|~U))+F[10]+4293915773&4294967295,B=q+(H<<15&4294967295|H>>>17),H=U+(q^(B|~R))+F[1]+2240044497&4294967295,U=B+(H<<21&4294967295|H>>>11),H=R+(B^(U|~q))+F[8]+1873313359&4294967295,R=U+(H<<6&4294967295|H>>>26),H=q+(U^(R|~B))+F[15]+4264355552&4294967295,q=R+(H<<10&4294967295|H>>>22),H=B+(R^(q|~U))+F[6]+2734768916&4294967295,B=q+(H<<15&4294967295|H>>>17),H=U+(q^(B|~R))+F[13]+1309151649&4294967295,U=B+(H<<21&4294967295|H>>>11),H=R+(B^(U|~q))+F[4]+4149444226&4294967295,R=U+(H<<6&4294967295|H>>>26),H=q+(U^(R|~B))+F[11]+3174756917&4294967295,q=R+(H<<10&4294967295|H>>>22),H=B+(R^(q|~U))+F[2]+718787259&4294967295,B=q+(H<<15&4294967295|H>>>17),H=U+(q^(B|~R))+F[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(B+(H<<21&4294967295|H>>>11))&4294967295,I.g[2]=I.g[2]+B&4294967295,I.g[3]=I.g[3]+q&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const U=R-this.blockSize,F=this.C;let B=this.h,q=0;for(;q<R;){if(B==0)for(;q<=U;)i(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<R;)if(F[B++]=I.charCodeAt(q++),B==this.blockSize){i(this,F),B=0;break}}else for(;q<R;)if(F[B++]=I[q++],B==this.blockSize){i(this,F),B=0;break}}this.h=B,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var U=I.length-8;U<I.length;++U)I[U]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,U=0;U<4;++U)for(let F=0;F<32;F+=8)I[R++]=this.g[U]>>>F&255;return I};function a(I,R){var U=c;return Object.prototype.hasOwnProperty.call(U,I)?U[I]:U[I]=R(I)}function o(I,R){this.h=R;const U=[];let F=!0;for(let B=I.length-1;B>=0;B--){const q=I[B]|0;F&&q==R||(U[B]=q,F=!1)}this.g=U}var c={};function u(I){return-128<=I&&I<128?a(I,function(R){return new o([R|0],R<0?-1:0)}):new o([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return C(d(-I));const R=[];let U=1;for(let F=0;I>=U;F++)R[F]=I/U|0,U*=4294967296;return new o(R,0)}function m(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return C(m(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const U=d(Math.pow(R,8));let F=p;for(let q=0;q<I.length;q+=8){var B=Math.min(8,I.length-q);const H=parseInt(I.substring(q,q+B),R);B<8?(B=d(Math.pow(R,B)),F=F.j(B).add(d(H))):(F=F.j(U),F=F.add(d(H)))}return F}var p=u(0),y=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-C(this).m();let I=0,R=1;for(let U=0;U<this.g.length;U++){const F=this.i(U);I+=(F>=0?F:4294967296+F)*R,R*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(T(this))return"-"+C(this).toString(I);const R=d(Math.pow(I,6));var U=this;let F="";for(;;){const B=L(U,R).g;U=N(U,B.j(R));let q=((U.g.length>0?U.g[0]:U.h)>>>0).toString(I);if(U=B,_(U))return q+F;for(;q.length<6;)q="0"+q;F=q+F}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=N(this,I),T(I)?-1:_(I)?0:1};function C(I){const R=I.g.length,U=[];for(let F=0;F<R;F++)U[F]=~I.g[F];return new o(U,~I.h).add(y)}t.abs=function(){return T(this)?C(this):this},t.add=function(I){const R=Math.max(this.g.length,I.g.length),U=[];let F=0;for(let B=0;B<=R;B++){let q=F+(this.i(B)&65535)+(I.i(B)&65535),H=(q>>>16)+(this.i(B)>>>16)+(I.i(B)>>>16);F=H>>>16,q&=65535,H&=65535,U[B]=H<<16|q}return new o(U,U[U.length-1]&-2147483648?-1:0)};function N(I,R){return I.add(C(R))}t.j=function(I){if(_(this)||_(I))return p;if(T(this))return T(I)?C(this).j(C(I)):C(C(this).j(I));if(T(I))return C(this.j(C(I)));if(this.l(x)<0&&I.l(x)<0)return d(this.m()*I.m());const R=this.g.length+I.g.length,U=[];for(var F=0;F<2*R;F++)U[F]=0;for(F=0;F<this.g.length;F++)for(let B=0;B<I.g.length;B++){const q=this.i(F)>>>16,H=this.i(F)&65535,se=I.i(B)>>>16,Se=I.i(B)&65535;U[2*F+2*B]+=H*Se,M(U,2*F+2*B),U[2*F+2*B+1]+=q*Se,M(U,2*F+2*B+1),U[2*F+2*B+1]+=H*se,M(U,2*F+2*B+1),U[2*F+2*B+2]+=q*se,M(U,2*F+2*B+2)}for(I=0;I<R;I++)U[I]=U[2*I+1]<<16|U[2*I];for(I=R;I<2*R;I++)U[I]=0;return new o(U,0)};function M(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function P(I,R){this.g=I,this.h=R}function L(I,R){if(_(R))throw Error("division by zero");if(_(I))return new P(p,p);if(T(I))return R=L(C(I),R),new P(C(R.g),C(R.h));if(T(R))return R=L(I,C(R)),new P(C(R.g),R.h);if(I.g.length>30){if(T(I)||T(R))throw Error("slowDivide_ only works with positive integers.");for(var U=y,F=R;F.l(I)<=0;)U=j(U),F=j(F);var B=V(U,1),q=V(F,1);for(F=V(F,2),U=V(U,2);!_(F);){var H=q.add(F);H.l(I)<=0&&(B=B.add(U),q=H),F=V(F,1),U=V(U,1)}return R=N(I,B.j(R)),new P(B,R)}for(B=p;I.l(R)>=0;){for(U=Math.max(1,Math.floor(I.m()/R.m())),F=Math.ceil(Math.log(U)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),q=d(U),H=q.j(R);T(H)||H.l(I)>0;)U-=F,q=d(U),H=q.j(R);_(q)&&(q=y),B=B.add(q),I=N(I,H)}return new P(B,I)}t.B=function(I){return L(this,I).h},t.and=function(I){const R=Math.max(this.g.length,I.g.length),U=[];for(let F=0;F<R;F++)U[F]=this.i(F)&I.i(F);return new o(U,this.h&I.h)},t.or=function(I){const R=Math.max(this.g.length,I.g.length),U=[];for(let F=0;F<R;F++)U[F]=this.i(F)|I.i(F);return new o(U,this.h|I.h)},t.xor=function(I){const R=Math.max(this.g.length,I.g.length),U=[];for(let F=0;F<R;F++)U[F]=this.i(F)^I.i(F);return new o(U,this.h^I.h)};function j(I){const R=I.g.length+1,U=[];for(let F=0;F<R;F++)U[F]=I.i(F)<<1|I.i(F-1)>>>31;return new o(U,I.h)}function V(I,R){const U=R>>5;R%=32;const F=I.g.length-U,B=[];for(let q=0;q<F;q++)B[q]=R>0?I.i(q+U)>>>R|I.i(q+U+1)<<32-R:I.i(q+U);return new o(B,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,UV=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Mo=o}).apply(typeof xj<"u"?xj:typeof self<"u"?self:typeof window<"u"?window:{});var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VV,Hf,FV,Eg,K_,BV,zV,qV;(function(){var t,e=Object.defineProperty;function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof cg=="object"&&cg];for(var k=0;k<b.length;++k){var O=b[k];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var r=n(this);function i(b,k){if(k)e:{var O=r;b=b.split(".");for(var $=0;$<b.length-1;$++){var X=b[$];if(!(X in O))break e;O=O[X]}b=b[b.length-1],$=O[b],k=k($),k!=$&&k!=null&&e(O,b,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(b){return b||function(k){var O=[],$;for($ in k)Object.prototype.hasOwnProperty.call(k,$)&&O.push([$,k[$]]);return O}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(b){var k=typeof b;return k=="object"&&b!=null||k=="function"}function u(b,k,O){return b.call.apply(b.bind,arguments)}function d(b,k,O){return d=u,d.apply(null,arguments)}function m(b,k){var O=Array.prototype.slice.call(arguments,1);return function(){var $=O.slice();return $.push.apply($,arguments),b.apply(this,$)}}function p(b,k){function O(){}O.prototype=k.prototype,b.Z=k.prototype,b.prototype=new O,b.prototype.constructor=b,b.Ob=function($,X,ne){for(var ve=Array(arguments.length-2),We=2;We<arguments.length;We++)ve[We-2]=arguments[We];return k.prototype[X].apply($,ve)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function x(b){const k=b.length;if(k>0){const O=Array(k);for(let $=0;$<k;$++)O[$]=b[$];return O}return[]}function _(b,k){for(let $=1;$<arguments.length;$++){const X=arguments[$];var O=typeof X;if(O=O!="object"?O:X?Array.isArray(X)?"array":O:"null",O=="array"||O=="object"&&typeof X.length=="number"){O=b.length||0;const ne=X.length||0;b.length=O+ne;for(let ve=0;ve<ne;ve++)b[O+ve]=X[ve]}else b.push(X)}}class T{constructor(k,O){this.i=k,this.j=O,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function C(b){o.setTimeout(()=>{throw b},0)}function N(){var b=I;let k=null;return b.g&&(k=b.g,b.g=b.g.next,b.g||(b.h=null),k.next=null),k}class M{constructor(){this.h=this.g=null}add(k,O){const $=P.get();$.set(k,O),this.h?this.h.next=$:this.g=$,this.h=$}}var P=new T(()=>new L,b=>b.reset());class L{constructor(){this.next=this.g=this.h=null}set(k,O){this.h=k,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let j,V=!1,I=new M,R=()=>{const b=Promise.resolve(void 0);j=()=>{b.then(U)}};function U(){for(var b;b=N();){try{b.h.call(b.g)}catch(O){C(O)}var k=P;k.j(b),k.h<100&&(k.h++,b.next=k.g,k.g=b)}V=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(b,k){this.type=b,this.g=this.target=k,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var b=!1,k=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const O=()=>{};o.addEventListener("test",O,k),o.removeEventListener("test",O,k)}catch{}return b})();function H(b){return/^[\s\xa0]*$/.test(b)}function se(b,k){B.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,k)}p(se,B),se.prototype.init=function(b,k){const O=this.type=b.type,$=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=k,k=b.relatedTarget,k||(O=="mouseover"?k=b.fromElement:O=="mouseout"&&(k=b.toElement)),this.relatedTarget=k,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&se.Z.h.call(this)},se.prototype.h=function(){se.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ue(b,k,O,$,X){this.listener=b,this.proxy=null,this.src=k,this.type=O,this.capture=!!$,this.ha=X,this.key=++Q,this.da=this.fa=!1}function be(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function De(b,k,O){for(const $ in b)k.call(O,b[$],$,b)}function Ke(b,k){for(const O in b)k.call(void 0,b[O],O,b)}function K(b){const k={};for(const O in b)k[O]=b[O];return k}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(b,k){let O,$;for(let X=1;X<arguments.length;X++){$=arguments[X];for(O in $)b[O]=$[O];for(let ne=0;ne<re.length;ne++)O=re[ne],Object.prototype.hasOwnProperty.call($,O)&&(b[O]=$[O])}}function we(b){this.src=b,this.g={},this.h=0}we.prototype.add=function(b,k,O,$,X){const ne=b.toString();b=this.g[ne],b||(b=this.g[ne]=[],this.h++);const ve=Ve(b,k,$,X);return ve>-1?(k=b[ve],O||(k.fa=!1)):(k=new ue(k,this.src,ne,!!$,X),k.fa=O,b.push(k)),k};function Ce(b,k){const O=k.type;if(O in b.g){var $=b.g[O],X=Array.prototype.indexOf.call($,k,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call($,X,1),ne&&(be(k),b.g[O].length==0&&(delete b.g[O],b.h--))}}function Ve(b,k,O,$){for(let X=0;X<b.length;++X){const ne=b[X];if(!ne.da&&ne.listener==k&&ne.capture==!!O&&ne.ha==$)return X}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Mt={};function oe(b,k,O,$,X){if(Array.isArray(k)){for(let ne=0;ne<k.length;ne++)oe(b,k[ne],O,$,X);return null}return O=ti(O),b&&b[Se]?b.J(k,O,c($)?!!$.capture:!1,X):Fe(b,k,O,!1,$,X)}function Fe(b,k,O,$,X,ne){if(!k)throw Error("Invalid event type");const ve=c(X)?!!X.capture:!!X;let We=Pt(b);if(We||(b[ze]=We=new we(b)),O=We.add(k,O,$,ve,ne),O.proxy)return O;if($=Ye(),O.proxy=$,$.src=b,$.listener=O,b.addEventListener)q||(X=ve),X===void 0&&(X=!1),b.addEventListener(k.toString(),$,X);else if(b.attachEvent)b.attachEvent(Xe(k.toString()),$);else if(b.addListener&&b.removeListener)b.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return O}function Ye(){function b(O){return k.call(b.src,b.listener,O)}const k=Zt;return b}function me(b,k,O,$,X){if(Array.isArray(k))for(var ne=0;ne<k.length;ne++)me(b,k[ne],O,$,X);else $=c($)?!!$.capture:!!$,O=ti(O),b&&b[Se]?(b=b.i,ne=String(k).toString(),ne in b.g&&(k=b.g[ne],O=Ve(k,O,$,X),O>-1&&(be(k[O]),Array.prototype.splice.call(k,O,1),k.length==0&&(delete b.g[ne],b.h--)))):b&&(b=Pt(b))&&(k=b.g[k.toString()],b=-1,k&&(b=Ve(k,O,$,X)),(O=b>-1?k[b]:null)&&Yt(O))}function Yt(b){if(typeof b!="number"&&b&&!b.da){var k=b.src;if(k&&k[Se])Ce(k.i,b);else{var O=b.type,$=b.proxy;k.removeEventListener?k.removeEventListener(O,$,b.capture):k.detachEvent?k.detachEvent(Xe(O),$):k.addListener&&k.removeListener&&k.removeListener($),(O=Pt(k))?(Ce(O,b),O.h==0&&(O.src=null,k[ze]=null)):be(b)}}}function Xe(b){return b in Mt?Mt[b]:Mt[b]="on"+b}function Zt(b,k){if(b.da)b=!0;else{k=new se(k,this);const O=b.listener,$=b.ha||b.src;b.fa&&Yt(b),b=O.call($,k)}return b}function Pt(b){return b=b[ze],b instanceof we?b:null}var Ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function ti(b){return typeof b=="function"?b:(b[Ze]||(b[Ze]=function(k){return b.handleEvent(k)}),b[Ze])}function dn(){F.call(this),this.i=new we(this),this.M=this,this.G=null}p(dn,F),dn.prototype[Se]=!0,dn.prototype.removeEventListener=function(b,k,O,$){me(this,b,k,O,$)};function Nn(b,k){var O,$=b.G;if($)for(O=[];$;$=$.G)O.push($);if(b=b.M,$=k.type||k,typeof k=="string")k=new B(k,b);else if(k instanceof B)k.target=k.target||b;else{var X=k;k=new B($,b),pe(k,X)}X=!0;let ne,ve;if(O)for(ve=O.length-1;ve>=0;ve--)ne=k.g=O[ve],X=Vs(ne,$,!0,k)&&X;if(ne=k.g=b,X=Vs(ne,$,!0,k)&&X,X=Vs(ne,$,!1,k)&&X,O)for(ve=0;ve<O.length;ve++)ne=k.g=O[ve],X=Vs(ne,$,!1,k)&&X}dn.prototype.N=function(){if(dn.Z.N.call(this),this.i){var b=this.i;for(const k in b.g){const O=b.g[k];for(let $=0;$<O.length;$++)be(O[$]);delete b.g[k],b.h--}}this.G=null},dn.prototype.J=function(b,k,O,$){return this.i.add(String(b),k,!1,O,$)},dn.prototype.K=function(b,k,O,$){return this.i.add(String(b),k,!0,O,$)};function Vs(b,k,O,$){if(k=b.i.g[String(k)],!k)return!0;k=k.concat();let X=!0;for(let ne=0;ne<k.length;++ne){const ve=k[ne];if(ve&&!ve.da&&ve.capture==O){const We=ve.listener,an=ve.ha||ve.src;ve.fa&&Ce(b.i,ve),X=We.call(an,$)!==!1&&X}}return X&&!$.defaultPrevented}function g0(b,k){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=d(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(b,k||0)}function mm(b){b.g=g0(()=>{b.g=null,b.i&&(b.i=!1,mm(b))},b.l);const k=b.h;b.h=null,b.m.apply(null,k)}class yr extends F{constructor(k,O){super(),this.m=k,this.l=O,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:mm(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tl(b){F.call(this),this.h=b,this.g={}}p(tl,F);var Nd=[];function kd(b){De(b.g,function(k,O){this.g.hasOwnProperty(O)&&Yt(k)},b),b.g={}}tl.prototype.N=function(){tl.Z.N.call(this),kd(this)},tl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=o.JSON.stringify,y0=o.JSON.parse,pm=class{stringify(b){return o.JSON.stringify(b,void 0)}parse(b){return o.JSON.parse(b,void 0)}};function gm(){}function ym(){}var Ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kn(){B.call(this,"d")}p(Kn,B);function ni(){B.call(this,"c")}p(ni,B);var rn={},vm=null;function wc(){return vm=vm||new dn}rn.Ia="serverreachability";function xm(b){B.call(this,rn.Ia,b)}p(xm,B);function Ji(b){const k=wc();Nn(k,new xm(k))}rn.STAT_EVENT="statevent";function nl(b,k){B.call(this,rn.STAT_EVENT,b),this.stat=k}p(nl,B);function fn(b){const k=wc();Nn(k,new nl(k,b))}rn.Ja="timingevent";function Qi(b,k){B.call(this,rn.Ja,b),this.size=k}p(Qi,B);function Xi(b,k){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){b()},k)}function Ni(){this.g=!0}Ni.prototype.ua=function(){this.g=!1};function v0(b,k,O,$,X,ne){b.info(function(){if(b.g)if(ne){var ve="",We=ne.split("&");for(let pt=0;pt<We.length;pt++){var an=We[pt].split("=");if(an.length>1){const Bt=an[0];an=an[1];const si=Bt.split("_");ve=si.length>=2&&si[1]=="type"?ve+(Bt+"="+an+"&"):ve+(Bt+"=redacted&")}}}else ve=null;else ve=ne;return"XMLHTTP REQ ("+$+") [attempt "+X+"]: "+k+`
`+O+`
`+ve})}function bm(b,k,O,$,X,ne,ve){b.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+X+"]: "+k+`
`+O+`
`+ne+" "+ve})}function Zi(b,k,O,$){b.info(function(){return"XMLHTTP TEXT ("+k+"): "+x0(b,O)+($?" "+$:"")})}function rl(b,k){b.info(function(){return"TIMEOUT: "+k})}Ni.prototype.info=function(){};function x0(b,k){if(!b.g)return k;if(!k)return null;try{const ne=JSON.parse(k);if(ne){for(b=0;b<ne.length;b++)if(Array.isArray(ne[b])){var O=ne[b];if(!(O.length<2)){var $=O[1];if(Array.isArray($)&&!($.length<1)){var X=$[0];if(X!="noop"&&X!="stop"&&X!="close")for(let ve=1;ve<$.length;ve++)$[ve]=""}}}}return Fs(ne)}catch{return k}}var il={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Id={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pd;function al(){}p(al,gm),al.prototype.g=function(){return new XMLHttpRequest},Pd=new al;function La(b){return encodeURIComponent(String(b))}function wm(b){var k=1;b=b.split(":");const O=[];for(;k>0&&b.length;)O.push(b.shift()),k--;return b.length&&O.push(b.join(":")),O}function ki(b,k,O,$){this.j=b,this.i=k,this.l=O,this.S=$||1,this.V=new tl(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}var hn={},Un={};function ea(b,k,O){b.M=1,b.A=sl(pn(k)),b.u=O,b.R=!0,Sc(b,null)}function Sc(b,k){b.F=Date.now(),ta(b),b.B=pn(b.A);var O=b.B,$=b.S;Array.isArray($)||($=[String($)]),Ec(O.i,"t",$),b.C=0,O=b.j.L,b.h=new Ii,b.g=Om(b.j,O?k:null,!b.u),b.P>0&&(b.O=new yr(d(b.Y,b,b.g),b.P)),k=b.V,O=b.g,$=b.ba;var X="readystatechange";Array.isArray(X)||(X&&(Nd[0]=X.toString()),X=Nd);for(let ne=0;ne<X.length;ne++){const ve=oe(O,X[ne],$||k.handleEvent,!1,k.h||k);if(!ve)break;k.g[ve.key]=ve}k=b.J?K(b.J):{},b.u?(b.v||(b.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,k)):(b.v="GET",b.g.ea(b.B,b.v,null,k)),Ji(),v0(b.i,b.v,b.B,b.l,b.S,b.u)}ki.prototype.ba=function(b){b=b.target;const k=this.O;k&&Ri(b)==3?k.j():this.Y(b)},ki.prototype.Y=function(b){try{if(b==this.g)e:{const We=Ri(this.g),an=this.g.ya(),pt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||We!=4||an==7||(an==8||pt<=0?Ji(3):Ji(2)),na(this);var k=this.g.ca();this.X=k;var O=b0(this);if(this.o=k==200,bm(this.i,this.v,this.B,this.l,this.S,We,k),this.o){if(this.U&&!this.L){t:{if(this.g){var $,X=this.g;if(($=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H($)){var ne=$;break t}}ne=null}if(b=ne)Zi(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ra(this,b);else{this.o=!1,this.m=3,fn(12),Lr(this),ri(this);break e}}if(this.R){b=!0;let Bt;for(;!this.K&&this.C<O.length;)if(Bt=_m(this,O),Bt==Un){We==4&&(this.m=4,fn(14),b=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==hn){this.m=4,fn(15),Zi(this.i,this.l,O,"[Invalid Chunk]"),b=!1;break}else Zi(this.i,this.l,Bt,null),ra(this,Bt);if(Sm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||O.length!=0||this.h.h||(this.m=1,fn(16),b=!1),this.o=this.o&&b,!b)Zi(this.i,this.l,O,"[Invalid Chunked Response]"),Lr(this),ri(this);else if(O.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Gd(ve),ve.P=!0,fn(11))}}else Zi(this.i,this.l,O,null),ra(this,O);We==4&&Lr(this),this.o&&!this.K&&(We==4?Dm(this.j,this):(this.o=!1,ta(this)))}else Va(this.g),k==400&&O.indexOf("Unknown SID")>0?(this.m=3,fn(12)):(this.m=0,fn(13)),Lr(this),ri(this)}}}catch{}finally{}};function b0(b){if(!Sm(b))return b.g.la();const k=Yn(b.g);if(k==="")return"";let O="";const $=k.length,X=Ri(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return Lr(b),ri(b),"";b.h.i=new o.TextDecoder}for(let ne=0;ne<$;ne++)b.h.h=!0,O+=b.h.i.decode(k[ne],{stream:!(X&&ne==$-1)});return k.length=0,b.h.g+=O,b.C=0,b.h.g}function Sm(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function _m(b,k){var O=b.C,$=k.indexOf(`
`,O);return $==-1?Un:(O=Number(k.substring(O,$)),isNaN(O)?hn:($+=1,$+O>k.length?Un:(k=k.slice($,$+O),b.C=$+O,k)))}ki.prototype.cancel=function(){this.K=!0,Lr(this)};function ta(b){b.T=Date.now()+b.H,_c(b,b.H)}function _c(b,k){if(b.D!=null)throw Error("WatchDog timer not null");b.D=Xi(d(b.aa,b),k)}function na(b){b.D&&(o.clearTimeout(b.D),b.D=null)}ki.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(rl(this.i,this.B),this.M!=2&&(Ji(),fn(17)),Lr(this),this.m=2,ri(this)):_c(this,this.T-b)};function ri(b){b.j.I==0||b.K||Dm(b.j,b)}function Lr(b){na(b);var k=b.O;k&&typeof k.dispose=="function"&&k.dispose(),b.O=null,kd(b.V),b.g&&(k=b.g,b.g=null,k.abort(),k.dispose())}function ra(b,k){try{var O=b.j;if(O.I!=0&&(O.g==b||aa(O.h,b))){if(!b.L&&aa(O.h,b)&&O.I==3){try{var $=O.Ba.g.parse(k)}catch{$=null}if(Array.isArray($)&&$.length==3){var X=$;if(X[0]==0){e:if(!O.v){if(O.g)if(O.g.F+3e3<b.F)Pc(O),Ys(O);else break e;hl(O),fn(18)}}else O.xa=X[1],0<O.xa-O.K&&X[2]<37500&&O.F&&O.A==0&&!O.C&&(O.C=Xi(d(O.Va,O),6e3));ia(O.h)<=1&&O.ta&&(O.ta=void 0)}else da(O,11)}else if((b.L||O.g==b)&&Pc(O),!H(k))for(X=O.Ba.g.parse(k),k=0;k<X.length;k++){let pt=X[k];const Bt=pt[0];if(!(Bt<=O.K))if(O.K=Bt,pt=pt[1],O.I==2)if(pt[0]=="c"){O.M=pt[1],O.ba=pt[2];const si=pt[3];si!=null&&(O.ka=si,O.j.info("VER="+O.ka));const fa=pt[4];fa!=null&&(O.za=fa,O.j.info("SVER="+O.za));const Mi=pt[5];Mi!=null&&typeof Mi=="number"&&Mi>0&&($=1.5*Mi,O.O=$,O.j.info("backChannelRequestTimeoutMs_="+$)),$=O;const ji=b.g;if(ji){const ml=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var ne=$.h;ne.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Md(ne,ne.h),ne.h=null))}if($.G){const Dc=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Dc&&($.wa=Dc,yt($.J,$.G,Dc))}}O.I=3,O.l&&O.l.ra(),O.aa&&(O.T=Date.now()-b.F,O.j.info("Handshake RTT: "+O.T+"ms")),$=O;var ve=b;if($.na=jm($,$.L?$.ba:null,$.W),ve.L){jd($.h,ve);var We=ve,an=$.O;an&&(We.H=an),We.D&&(na(We),ta(We)),$.g=ve}else Im($);O.i.length>0&&ua(O)}else pt[0]!="stop"&&pt[0]!="close"||da(O,7);else O.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?da(O,7):Hd(O):pt[0]!="noop"&&O.l&&O.l.qa(pt),O.A=0)}}Ji(4)}catch{}}var mn=class{constructor(b,k){this.g=b,this.map=k}};function Dd(b){this.l=b||10,o.PerformanceNavigationTiming?(b=o.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rd(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function ia(b){return b.h?1:b.g?b.g.size:0}function aa(b,k){return b.h?b.h==k:b.g?b.g.has(k):!1}function Md(b,k){b.g?b.g.add(k):b.h=k}function jd(b,k){b.h&&b.h==k?b.h=null:b.g&&b.g.has(k)&&b.g.delete(k)}Dd.prototype.cancel=function(){if(this.i=Od(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function Od(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let k=b.i;for(const O of b.g.values())k=k.concat(O.G);return k}return x(b.i)}var Am=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ac(b,k){if(b){b=b.split("&");for(let O=0;O<b.length;O++){const $=b[O].indexOf("=");let X,ne=null;$>=0?(X=b[O].substring(0,$),ne=b[O].substring($+1)):X=b[O],k(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Ur(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;b instanceof Ur?(this.l=b.l,Vn(this,b.j),this.o=b.o,this.g=b.g,Bs(this,b.u),this.h=b.h,Ld(this,Nm(b.i)),this.m=b.m):b&&(k=String(b).match(Am))?(this.l=!1,Vn(this,k[1]||"",!0),this.o=sa(k[2]||""),this.g=sa(k[3]||"",!0),Bs(this,k[4]),this.h=sa(k[5]||"",!0),Ld(this,k[6]||"",!0),this.m=sa(k[7]||"")):(this.l=!1,this.i=new qs(null,this.l))}Ur.prototype.toString=function(){const b=[];var k=this.j;k&&b.push(ol(k,Tc,!0),":");var O=this.g;return(O||k=="file")&&(b.push("//"),(k=this.o)&&b.push(ol(k,Tc,!0),"@"),b.push(La(O).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.u,O!=null&&b.push(":",String(O))),(O=this.h)&&(this.g&&O.charAt(0)!="/"&&b.push("/"),b.push(ol(O,O.charAt(0)=="/"?Ud:Tm,!0))),(O=this.i.toString())&&b.push("?",O),(O=this.m)&&b.push("#",ol(O,Em)),b.join("")},Ur.prototype.resolve=function(b){const k=pn(this);let O=!!b.j;O?Vn(k,b.j):O=!!b.o,O?k.o=b.o:O=!!b.g,O?k.g=b.g:O=b.u!=null;var $=b.h;if(O)Bs(k,b.u);else if(O=!!b.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var X=k.h.lastIndexOf("/");X!=-1&&($=k.h.slice(0,X+1)+$)}if(X=$,X==".."||X==".")$="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){$=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let ve=0;ve<X.length;){const We=X[ve++];We=="."?$&&ve==X.length&&ne.push(""):We==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),$&&ve==X.length&&ne.push("")):(ne.push(We),$=!0)}$=ne.join("/")}else $=X}return O?k.h=$:O=b.i.toString()!=="",O?Ld(k,Nm(b.i)):O=!!b.m,O&&(k.m=b.m),k};function pn(b){return new Ur(b)}function Vn(b,k,O){b.j=O?sa(k,!0):k,b.j&&(b.j=b.j.replace(/:$/,""))}function Bs(b,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);b.u=k}else b.u=null}function Ld(b,k,O){k instanceof qs?(b.i=k,Cc(b.i,b.l)):(O||(k=ol(k,zs)),b.i=new qs(k,b.l))}function yt(b,k,O){b.i.set(k,O)}function sl(b){return yt(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function sa(b,k){return b?k?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function ol(b,k,O){return typeof b=="string"?(b=encodeURI(b).replace(k,Tr),O&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function Tr(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Tc=/[#\/\?@]/g,Tm=/[#\?:]/g,Ud=/[#\?]/g,zs=/[#\?@]/g,Em=/#/g;function qs(b,k){this.h=this.g=null,this.i=b||null,this.j=!!k}function Er(b){b.g||(b.g=new Map,b.h=0,b.i&&Ac(b.i,function(k,O){b.add(decodeURIComponent(k.replace(/\+/g," ")),O)}))}t=qs.prototype,t.add=function(b,k){Er(this),this.i=null,b=Hs(this,b);let O=this.g.get(b);return O||this.g.set(b,O=[]),O.push(k),this.h+=1,this};function Cm(b,k){Er(b),k=Hs(b,k),b.g.has(k)&&(b.i=null,b.h-=b.g.get(k).length,b.g.delete(k))}function Vd(b,k){return Er(b),k=Hs(b,k),b.g.has(k)}t.forEach=function(b,k){Er(this),this.g.forEach(function(O,$){O.forEach(function(X){b.call(k,X,$,this)},this)},this)};function Fd(b,k){Er(b);let O=[];if(typeof k=="string")Vd(b,k)&&(O=O.concat(b.g.get(Hs(b,k))));else for(b=Array.from(b.g.values()),k=0;k<b.length;k++)O=O.concat(b[k]);return O}t.set=function(b,k){return Er(this),this.i=null,b=Hs(this,b),Vd(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[k]),this.h+=1,this},t.get=function(b,k){return b?(b=Fd(this,b),b.length>0?String(b[0]):k):k};function Ec(b,k,O){Cm(b,k),O.length>0&&(b.i=null,b.g.set(Hs(b,k),x(O)),b.h+=O.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],k=Array.from(this.g.keys());for(let $=0;$<k.length;$++){var O=k[$];const X=La(O);O=Fd(this,O);for(let ne=0;ne<O.length;ne++){let ve=X;O[ne]!==""&&(ve+="="+La(O[ne])),b.push(ve)}}return this.i=b.join("&")};function Nm(b){const k=new qs;return k.i=b.i,b.g&&(k.g=new Map(b.g),k.h=b.h),k}function Hs(b,k){return k=String(k),b.j&&(k=k.toLowerCase()),k}function Cc(b,k){k&&!b.j&&(Er(b),b.i=null,b.g.forEach(function(O,$){const X=$.toLowerCase();$!=X&&(Cm(this,$),Ec(this,X,O))},b)),b.j=k}function Pi(b,k){const O=new Ni;if(o.Image){const $=new Image;$.onload=m(ii,O,"TestLoadImage: loaded",!0,k,$),$.onerror=m(ii,O,"TestLoadImage: error",!1,k,$),$.onabort=m(ii,O,"TestLoadImage: abort",!1,k,$),$.ontimeout=m(ii,O,"TestLoadImage: timeout",!1,k,$),o.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=b}else k(!1)}function Bd(b,k){const O=new Ni,$=new AbortController,X=setTimeout(()=>{$.abort(),ii(O,"TestPingServer: timeout",!1,k)},1e4);fetch(b,{signal:$.signal}).then(ne=>{clearTimeout(X),ne.ok?ii(O,"TestPingServer: ok",!0,k):ii(O,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(X),ii(O,"TestPingServer: error",!1,k)})}function ii(b,k,O,$,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),$(O)}catch{}}function $s(){this.g=new pm}function oa(b){this.i=b.Sb||null,this.h=b.ab||!1}p(oa,gm),oa.prototype.g=function(){return new ll(this.i,this.h)};function ll(b,k){dn.call(this),this.H=b,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ll,dn),t=ll.prototype,t.open=function(b,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=k,this.readyState=1,Di(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(k.body=b),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nc(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nc(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}t.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var k=b.value?b.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!b.done}))&&(this.response=this.responseText+=k)}b.done?Gs(this):Di(this),this.readyState==3&&Nc(this)}},t.Oa=function(b){this.g&&(this.response=this.responseText=b,Gs(this))},t.Na=function(b){this.g&&(this.response=b,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(b){b.readyState=4,b.l=null,b.j=null,b.B=null,Di(b)}t.setRequestHeader=function(b,k){this.A.append(b,k)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],k=this.h.entries();for(var O=k.next();!O.done;)O=O.value,b.push(O[0]+": "+O[1]),O=k.next();return b.join(`\r
`)};function Di(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function ai(b){let k="";return De(b,function(O,$){k+=$,k+=":",k+=O,k+=`\r
`}),k}function cl(b,k,O){e:{for($ in O){var $=!1;break e}$=!0}$||(O=ai(O),typeof b=="string"?O!=null&&La(O):yt(b,k,O))}function wt(b){dn.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(wt,dn);var la=/^https?$/i,zd=["POST","PUT"];t=wt.prototype,t.Fa=function(b){this.H=b},t.ea=function(b,k,O,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);k=k?k.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pd.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(k,String(b),!0),this.B=!1}catch(ne){ul(this,ne);return}if(b=O||"",O=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var X in $)O.set(X,$[X]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const ne of $.keys())O.set(ne,$.get(ne));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(O.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=o.FormData&&b instanceof o.FormData,!(Array.prototype.indexOf.call(zd,k,void 0)>=0)||$||X||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ve]of O)this.g.setRequestHeader(ne,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(ne){ul(this,ne)}};function ul(b,k){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=k,b.o=5,qd(b),Ua(b)}function qd(b){b.A||(b.A=!0,Nn(b,"complete"),Nn(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,Nn(this,"complete"),Nn(this,"abort"),Ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?dl(this):this.Xa())},t.Xa=function(){dl(this)};function dl(b){if(b.h&&typeof a<"u"){if(b.v&&Ri(b)==4)setTimeout(b.Ca.bind(b),0);else if(Nn(b,"readystatechange"),Ri(b)==4){b.h=!1;try{const ne=b.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var O;if(!(O=k)){var $;if($=ne===0){let ve=String(b.D).match(Am)[1]||null;!ve&&o.self&&o.self.location&&(ve=o.self.location.protocol.slice(0,-1)),$=!la.test(ve?ve.toLowerCase():"")}O=$}if(O)Nn(b,"complete"),Nn(b,"success");else{b.o=6;try{var X=Ri(b)>2?b.g.statusText:""}catch{X=""}b.l=X+" ["+b.ca()+"]",qd(b)}}finally{Ua(b)}}}}function Ua(b,k){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const O=b.g;b.g=null,k||Nn(b,"ready");try{O.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ri(b){return b.g?b.g.readyState:0}t.ca=function(){try{return Ri(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(b){if(this.g){var k=this.g.responseText;return b&&k.indexOf(b)==0&&(k=k.substring(b.length)),y0(k)}};function Yn(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Va(b){const k={};b=(b.g&&Ri(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<b.length;$++){if(H(b[$]))continue;var O=wm(b[$]);const X=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ne=k[X]||[];k[X]=ne,ne.push(O)}Ke(k,function($){return $.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(b,k,O){return O&&O.internalChannelParams&&O.internalChannelParams[b]||k}function Ks(b){this.za=0,this.i=[],this.j=new Ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ca("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ca("baseRetryDelayMs",5e3,b),this.Za=ca("retryDelaySeedMs",1e4,b),this.Ta=ca("forwardChannelMaxRetries",2,b),this.va=ca("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new Dd(b&&b.concurrentRequestLimit),this.Ba=new $s,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ks.prototype,t.ka=8,t.I=1,t.connect=function(b,k,O,$){fn(0),this.W=b,this.H=k||{},O&&$!==void 0&&(this.H.OSID=O,this.H.OAID=$),this.F=this.X,this.J=jm(this,null,this.W),ua(this)};function Hd(b){if(kc(b),b.I==3){var k=b.V++,O=pn(b.J);if(yt(O,"SID",b.M),yt(O,"RID",k),yt(O,"TYPE","terminate"),fl(b,O),k=new ki(b,b.j,k),k.M=2,k.A=sl(pn(O)),O=!1,o.navigator&&o.navigator.sendBeacon)try{O=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!O&&o.Image&&(new Image().src=k.A,O=!0),O||(k.g=Om(k.j,null),k.g.ea(k.A)),k.F=Date.now(),ta(k)}Mm(b)}function Ys(b){b.g&&(Gd(b),b.g.cancel(),b.g=null)}function kc(b){Ys(b),b.v&&(o.clearTimeout(b.v),b.v=null),Pc(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&o.clearTimeout(b.m),b.m=null)}function ua(b){if(!Rd(b.h)&&!b.m){b.m=!0;var k=b.Ea;j||R(),V||(j(),V=!0),I.add(k,b),b.D=0}}function Ic(b,k){return ia(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=k.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=Xi(d(b.Ea,b,k),Rm(b,b.D)),b.D++,!0)}t.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const X=new ki(this,this.j,b);let ne=this.o;if(this.U&&(ne?(ne=K(ne),pe(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var k=0,O=0;O<this.i.length;O++){t:{var $=this.i[O];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(k+=$,k>4096){k=O;break e}if(k===4096||O===this.i.length-1){k=O+1;break e}}k=1e3}else k=1e3;k=km(this,X,k),O=pn(this.J),yt(O,"RID",b),yt(O,"CVER",22),this.G&&yt(O,"X-HTTP-Session-Id",this.G),fl(this,O),ne&&(this.R?k="headers="+La(ai(ne))+"&"+k:this.u&&cl(O,this.u,ne)),Md(this.h,X),this.Ra&&yt(O,"TYPE","init"),this.S?(yt(O,"$req",k),yt(O,"SID","null"),X.U=!0,ea(X,O,null)):ea(X,O,k),this.I=2}}else this.I==3&&(b?$d(this,b):this.i.length==0||Rd(this.h)||$d(this))};function $d(b,k){var O;k?O=k.l:O=b.V++;const $=pn(b.J);yt($,"SID",b.M),yt($,"RID",O),yt($,"AID",b.K),fl(b,$),b.u&&b.o&&cl($,b.u,b.o),O=new ki(b,b.j,O,b.D+1),b.u===null&&(O.J=b.o),k&&(b.i=k.G.concat(b.i)),k=km(b,O,1e3),O.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),Md(b.h,O),ea(O,$,k)}function fl(b,k){b.H&&De(b.H,function(O,$){yt(k,$,O)}),b.l&&De({},function(O,$){yt(k,$,O)})}function km(b,k,O){O=Math.min(b.i.length,O);const $=b.l?d(b.l.Ka,b.l,b):null;e:{var X=b.i;let We=-1;for(;;){const an=["count="+O];We==-1?O>0?(We=X[0].g,an.push("ofs="+We)):We=0:an.push("ofs="+We);let pt=!0;for(let Bt=0;Bt<O;Bt++){var ne=X[Bt].g;const si=X[Bt].map;if(ne-=We,ne<0)We=Math.max(0,X[Bt].g-100),pt=!1;else try{ne="req"+ne+"_"||"";try{var ve=si instanceof Map?si:Object.entries(si);for(const[fa,Mi]of ve){let ji=Mi;c(Mi)&&(ji=Fs(Mi)),an.push(ne+fa+"="+encodeURIComponent(ji))}}catch(fa){throw an.push(ne+"type="+encodeURIComponent("_badmap")),fa}}catch{$&&$(si)}}if(pt){ve=an.join("&");break e}}ve=void 0}return b=b.i.splice(0,O),k.G=b,ve}function Im(b){if(!b.g&&!b.v){b.Y=1;var k=b.Da;j||R(),V||(j(),V=!0),I.add(k,b),b.A=0}}function hl(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=Xi(d(b.Da,b),Rm(b,b.A)),b.A++,!0)}t.Da=function(){if(this.v=null,Pm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=Xi(d(this.Wa,this),b)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fn(10),Ys(this),Pm(this))};function Gd(b){b.B!=null&&(o.clearTimeout(b.B),b.B=null)}function Pm(b){b.g=new ki(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var k=pn(b.na);yt(k,"RID","rpc"),yt(k,"SID",b.M),yt(k,"AID",b.K),yt(k,"CI",b.F?"0":"1"),!b.F&&b.ia&&yt(k,"TO",b.ia),yt(k,"TYPE","xmlhttp"),fl(b,k),b.u&&b.o&&cl(k,b.u,b.o),b.O&&(b.g.H=b.O);var O=b.g;b=b.ba,O.M=1,O.A=sl(pn(k)),O.u=null,O.R=!0,Sc(O,b)}t.Va=function(){this.C!=null&&(this.C=null,Ys(this),hl(this),fn(19))};function Pc(b){b.C!=null&&(o.clearTimeout(b.C),b.C=null)}function Dm(b,k){var O=null;if(b.g==k){Pc(b),Gd(b),b.g=null;var $=2}else if(aa(b.h,k))O=k.G,jd(b.h,k),$=1;else return;if(b.I!=0){if(k.o)if($==1){O=k.u?k.u.length:0,k=Date.now()-k.F;var X=b.D;$=wc(),Nn($,new Qi($,O)),ua(b)}else Im(b);else if(X=k.m,X==3||X==0&&k.X>0||!($==1&&Ic(b,k)||$==2&&hl(b)))switch(O&&O.length>0&&(k=b.h,k.i=k.i.concat(O)),X){case 1:da(b,5);break;case 4:da(b,10);break;case 3:da(b,6);break;default:da(b,2)}}}function Rm(b,k){let O=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(O*=2),O*k}function da(b,k){if(b.j.info("Error code "+k),k==2){var O=d(b.bb,b),$=b.Ua;const X=!$;$=new Ur($||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Vn($,"https"),sl($),X?Pi($.toString(),O):Bd($.toString(),O)}else fn(2);b.I=0,b.l&&b.l.pa(k),Mm(b),kc(b)}t.bb=function(b){b?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function Mm(b){if(b.I=0,b.ja=[],b.l){const k=Od(b.h);(k.length!=0||b.i.length!=0)&&(_(b.ja,k),_(b.ja,b.i),b.h.i.length=0,x(b.i),b.i.length=0),b.l.oa()}}function jm(b,k,O){var $=O instanceof Ur?pn(O):new Ur(O);if($.g!="")k&&($.g=k+"."+$.g),Bs($,$.u);else{var X=o.location;$=X.protocol,k=k?k+"."+X.hostname:X.hostname,X=+X.port;const ne=new Ur(null);$&&Vn(ne,$),k&&(ne.g=k),X&&Bs(ne,X),O&&(ne.h=O),$=ne}return O=b.G,k=b.wa,O&&k&&yt($,O,k),yt($,"VER",b.ka),fl(b,$),$}function Om(b,k,O){if(k&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=b.Aa&&!b.ma?new wt(new oa({ab:O})):new wt(b.ma),k.Fa(b.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lm(){}t=Lm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ws(){}Ws.prototype.g=function(b,k){return new vr(b,k)};function vr(b,k){dn.call(this),this.g=new Ks(k),this.l=b,this.h=k&&k.messageUrlParams||null,b=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(b?b["X-WebChannel-Content-Type"]=k.messageContentType:b={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(b?b["X-WebChannel-Client-Profile"]=k.sa:b={"X-WebChannel-Client-Profile":k.sa}),this.g.U=b,(b=k&&k.Qb)&&!H(b)&&(this.g.u=b),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!H(k)&&(this.g.G=k,b=this.h,b!==null&&k in b&&(b=this.h,k in b&&delete b[k])),this.j=new Fa(this)}p(vr,dn),vr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vr.prototype.close=function(){Hd(this.g)},vr.prototype.o=function(b){var k=this.g;if(typeof b=="string"){var O={};O.__data__=b,b=O}else this.v&&(O={},O.__data__=Fs(b),b=O);k.i.push(new mn(k.Ya++,b)),k.I==3&&ua(k)},vr.prototype.N=function(){this.g.l=null,delete this.j,Hd(this.g),delete this.g,vr.Z.N.call(this)};function Um(b){Kn.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var k=b.__sm__;if(k){e:{for(const O in k){b=O;break e}b=void 0}(this.i=b)&&(b=this.i,k=k!==null&&b in k?k[b]:void 0),this.data=k}else this.data=b}p(Um,Kn);function Vm(){ni.call(this),this.status=1}p(Vm,ni);function Fa(b){this.g=b}p(Fa,Lm),Fa.prototype.ra=function(){Nn(this.g,"a")},Fa.prototype.qa=function(b){Nn(this.g,new Um(b))},Fa.prototype.pa=function(b){Nn(this.g,new Vm)},Fa.prototype.oa=function(){Nn(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,vr.prototype.send=vr.prototype.o,vr.prototype.open=vr.prototype.m,vr.prototype.close=vr.prototype.close,qV=function(){return new Ws},zV=function(){return wc()},BV=rn,K_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},il.NO_ERROR=0,il.TIMEOUT=8,il.HTTP_ERROR=6,Eg=il,Id.COMPLETE="complete",FV=Id,ym.EventType=Ci,Ci.OPEN="a",Ci.CLOSE="b",Ci.ERROR="c",Ci.MESSAGE="d",dn.prototype.listen=dn.prototype.J,Hf=ym,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,VV=wt}).apply(typeof cg<"u"?cg:typeof self<"u"?self:typeof window<"u"?window:{});const bj="@firebase/firestore",wj="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new NT("@firebase/firestore");function du(){return fc.logLevel}function Ae(t,...e){if(fc.logLevel<=at.DEBUG){const n=e.map(FT);fc.debug(`Firestore (${_d}): ${t}`,...n)}}function Es(t,...e){if(fc.logLevel<=at.ERROR){const n=e.map(FT);fc.error(`Firestore (${_d}): ${t}`,...n)}}function Gu(t,...e){if(fc.logLevel<=at.WARN){const n=e.map(FT);fc.warn(`Firestore (${_d}): ${t}`,...n)}}function FT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HV(t,r,n)}function HV(t,e,n){let r=`FIRESTORE (${_d}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Es(r),new Error(r)}function Qt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||HV(e,i,r)}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N0e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(or.UNAUTHENTICATED)))}shutdown(){}}class k0e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class I0e{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Wl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Wl,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const u=a;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},c=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wl)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string",31837,{l:r}),new $V(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class P0e{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class D0e{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new P0e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R0e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ba(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sj(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sj(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=M0e(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function Y_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return xS(i)===xS(a)?ot(i,a):xS(i)?1:-1}return ot(t.length,e.length)}const j0e=55296,O0e=57343;function xS(t){const e=t.charCodeAt(0);return e>=j0e&&e<=O0e}function Ku(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="__name__";class ya{constructor(e,n,r){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ya.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ot(e.length,n.length)}static compareSegments(e,n){const r=ya.isNumericId(e),i=ya.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ya.extractNumericId(e).compare(ya.extractNumericId(n)):Y_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mo.fromString(e.substring(4,e.length-2))}}class Ht extends ya{construct(e,n,r){return new Ht(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ht(n)}static emptyPath(){return new Ht([])}}const L0e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dr extends ya{construct(e,n,r){return new dr(e,n,r)}static isValidIdentifier(e){return L0e.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_j}static keyField(){return new dr([_j])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ie(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ie(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new Ie(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dr(n)}static emptyPath(){return new dr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Ht.fromString(e))}static fromName(e){return new je(Ht.fromString(e).popFirst(5))}static empty(){return new je(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ht.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Ht(e.slice()))}}function U0e(t,e,n,r){if(e===!0&&r===!0)throw new Ie(ge.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Aj(t){if(je.isDocumentKey(t))throw new Ie(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function KV(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function r0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e(12329,{type:typeof t})}function W_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ie(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=r0(t);throw new Ie(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){const n={typeString:t};return e&&(n.value=e),n}function cm(t,e){if(!KV(t))throw new Ie(ge.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Ie(ge.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=-62135596800,Ej=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ej);return new $t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tj)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ej}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cm(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:_n("string",$t._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new $t(0,0))}static max(){return new He(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=-1;function V0e(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new $t(n+1,0):new $t(n,r));return new Bo(i,je.empty(),e)}function F0e(t){return new Bo(t.readTime,t.key,Ah)}class Bo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bo(He.min(),je.empty(),Ah)}static max(){return new Bo(He.max(),je.empty(),Ah)}}function B0e(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q0e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(t){if(t.code!==ge.FAILED_PRECONDITION||t.message!==z0e)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof fe?n:fe.resolve(n)}catch(n){return fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):fe.reject(n)}static resolve(e){return new fe(((n,r)=>{n(e)}))}static reject(e){return new fe(((n,r)=>{r(e)}))}static waitFor(e){return new fe(((n,r)=>{let i=0,a=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++a,o&&a===i&&n()}),(u=>r(u)))})),o=!0,a===i&&n()}))}static or(e){let n=fe.resolve(!1);for(const r of e)n=n.next((i=>i?fe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new fe(((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next((m=>{o[d]=m,++c,c===a&&r(o)}),(m=>i(m)))}}))}static doWhile(e,n){return new fe(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}function H0e(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ad(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}a0.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0e=-1;function s0(t){return t==null}function Ly(t){return t===0&&1/t==-1/0}function G0e(t){return typeof t=="number"&&Number.isInteger(t)&&!Ly(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="";function K0e(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cj(e)),e=Y0e(t.get(n),e);return Cj(e)}function Y0e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case YV:n+="";break;default:n+=a}}return n}function Cj(t){return t+YV+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Td(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new un(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ug(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ug(this.root,e,this.comparator,!1)}getReverseIterator(){return new ug(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ug(this.root,e,this.comparator,!0)}}class ug{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??nr.RED,this.left=i??nr.EMPTY,this.right=a??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new nr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kj(this.data.getIterator())}getIteratorFrom(e){return new kj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dn(this.comparator);return n.data=e,n}}class kj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.fields=e,e.sort(dr.comparator)}static empty(){return new No([])}unionWith(e){let n=new Dn(dr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new No(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ku(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new JV("Invalid base64 string: "+a):a}})(e);return new rr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(e);return new rr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const W0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zo(t){if(Qt(!!t,39018),typeof t=="string"){let e=0;const n=W0e.exec(t);if(Qt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cn(t.seconds),nanos:cn(t.nanos)}}function cn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qo(t){return typeof t=="string"?rr.fromBase64String(t):rr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="server_timestamp",XV="__type__",ZV="__previous_value__",e8="__local_write_time__";function BT(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[XV])==null?void 0:r.stringValue)===QV}function o0(t){const e=t.mapValue.fields[ZV];return BT(e)?o0(e):e}function Th(t){const e=zo(t.mapValue.fields[e8].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0e{constructor(e,n,r,i,a,o,c,u,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=m}}const Uy="(default)";class Eh{constructor(e,n){this.projectId=e,this.database=n||Uy}static empty(){return new Eh("","")}get isDefaultDatabase(){return this.database===Uy}isEqual(e){return e instanceof Eh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="__type__",Q0e="__max__",dg={mapValue:{}},n8="__vector__",Vy="value";function Ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?BT(t)?4:Z0e(t)?9007199254740991:X0e(t)?10:11:$e(28295,{value:t})}function Ra(t,e){if(t===e)return!0;const n=Ho(t);if(n!==Ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Th(t).isEqual(Th(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=zo(i.timestampValue),c=zo(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return qo(i.bytesValue).isEqual(qo(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return cn(i.geoPointValue.latitude)===cn(a.geoPointValue.latitude)&&cn(i.geoPointValue.longitude)===cn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return cn(i.integerValue)===cn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=cn(i.doubleValue),c=cn(a.doubleValue);return o===c?Ly(o)===Ly(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return Ku(t.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Nj(o)!==Nj(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ra(o[u],c[u])))return!1;return!0})(t,e);default:return $e(52216,{left:t})}}function Ch(t,e){return(t.values||[]).find((n=>Ra(n,e)))!==void 0}function Yu(t,e){if(t===e)return 0;const n=Ho(t),r=Ho(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return(function(a,o){const c=cn(a.integerValue||a.doubleValue),u=cn(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return Ij(t.timestampValue,e.timestampValue);case 4:return Ij(Th(t),Th(e));case 5:return Y_(t.stringValue,e.stringValue);case 6:return(function(a,o){const c=qo(a),u=qo(o);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ot(c[d],u[d]);if(m!==0)return m}return ot(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,o){const c=ot(cn(a.latitude),cn(o.latitude));return c!==0?c:ot(cn(a.longitude),cn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pj(t.arrayValue,e.arrayValue);case 10:return(function(a,o){var y,x,_,T;const c=a.fields||{},u=o.fields||{},d=(y=c[Vy])==null?void 0:y.arrayValue,m=(x=u[Vy])==null?void 0:x.arrayValue,p=ot(((_=d==null?void 0:d.values)==null?void 0:_.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return p!==0?p:Pj(d,m)})(t.mapValue,e.mapValue);case 11:return(function(a,o){if(a===dg.mapValue&&o===dg.mapValue)return 0;if(a===dg.mapValue)return 1;if(o===dg.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const y=Y_(u[p],m[p]);if(y!==0)return y;const x=Yu(c[u[p]],d[m[p]]);if(x!==0)return x}return ot(u.length,m.length)})(t.mapValue,e.mapValue);default:throw $e(23264,{he:n})}}function Ij(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=zo(t),r=zo(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function Pj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Yu(n[i],r[i]);if(a)return a}return ot(n.length,r.length)}function Wu(t){return J_(t)}function J_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=zo(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return je.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=J_(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${J_(n.fields[o])}`;return i+"}"})(t.mapValue):$e(61005,{value:t})}function Cg(t){switch(Ho(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=o0(t);return e?16+Cg(e):16;case 5:return 2*t.stringValue.length;case 6:return qo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Cg(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Td(r.fields,((a,o)=>{i+=a.length+Cg(o)})),i})(t.mapValue);default:throw $e(13486,{value:t})}}function Dj(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Q_(t){return!!t&&"integerValue"in t}function zT(t){return!!t&&"arrayValue"in t}function Rj(t){return!!t&&"nullValue"in t}function Mj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bS(t){return!!t&&"mapValue"in t}function X0e(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[t8])==null?void 0:r.stringValue)===n8}function th(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Td(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=th(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=th(t.arrayValue.values[n]);return e}return{...t}}function Z0e(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Q0e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.value=e}static empty(){return new wa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bS(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=th(n)}setAll(e){let n=dr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=th(o):i.push(c.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());bS(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Td(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new wa(th(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new cr(e,0,He.min(),He.min(),He.min(),wa.empty(),0)}static newFoundDocument(e,n,r,i){return new cr(e,1,n,He.min(),r,i,0)}static newNoDocument(e,n){return new cr(e,2,n,He.min(),He.min(),wa.empty(),0)}static newUnknownDocument(e,n){return new cr(e,3,n,He.min(),He.min(),wa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n){this.position=e,this.inclusive=n}}function jj(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=je.comparator(je.fromName(o.referenceValue),n.key):r=Yu(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Oj(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ra(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n="asc"){this.field=e,this.dir=n}}function exe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{}class wn extends r8{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nxe(e,n,r):n==="array-contains"?new axe(e,r):n==="in"?new sxe(e,r):n==="not-in"?new oxe(e,r):n==="array-contains-any"?new lxe(e,r):new wn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rxe(e,r):new ixe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Yu(n,this.value)):n!==null&&Ho(this.value)===Ho(n)&&this.matchesComparison(Yu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gi extends r8{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gi(e,n)}matches(e){return i8(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function i8(t){return t.op==="and"}function a8(t){return txe(t)&&i8(t)}function txe(t){for(const e of t.filters)if(e instanceof Gi)return!1;return!0}function X_(t){if(t instanceof wn)return t.field.canonicalString()+t.op.toString()+Wu(t.value);if(a8(t))return t.filters.map((e=>X_(e))).join(",");{const e=t.filters.map((n=>X_(n))).join(",");return`${t.op}(${e})`}}function s8(t,e){return t instanceof wn?(function(r,i){return i instanceof wn&&r.op===i.op&&r.field.isEqual(i.field)&&Ra(r.value,i.value)})(t,e):t instanceof Gi?(function(r,i){return i instanceof Gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,c)=>a&&s8(o,i.filters[c])),!0):!1})(t,e):void $e(19439)}function o8(t){return t instanceof wn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wu(n.value)}`})(t):t instanceof Gi?(function(n){return n.op.toString()+" {"+n.getFilters().map(o8).join(" ,")+"}"})(t):"Filter"}class nxe extends wn{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class rxe extends wn{constructor(e,n){super(e,"in",n),this.keys=l8("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class ixe extends wn{constructor(e,n){super(e,"not-in",n),this.keys=l8("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function l8(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>je.fromName(r.referenceValue)))}class axe extends wn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zT(n)&&Ch(n.arrayValue,this.value)}}class sxe extends wn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ch(this.value.arrayValue,n)}}class oxe extends wn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ch(this.value.arrayValue,n)}}class lxe extends wn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zT(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ch(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function Lj(t,e=null,n=[],r=[],i=null,a=null,o=null){return new cxe(t,e,n,r,i,a,o)}function qT(t){const e=ct(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>X_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),s0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Wu(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Wu(r))).join(",")),e.Te=n}return e.Te}function HT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!exe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Oj(t.startAt,e.startAt)&&Oj(t.endAt,e.endAt)}function Z_(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uxe(t,e,n,r,i,a,o,c){return new um(t,e,n,r,i,a,o,c)}function c8(t){return new um(t)}function Uj(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function u8(t){return t.collectionGroup!==null}function nh(t){const e=ct(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Dn(dr.comparator);return o.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new By(a,r))})),n.has(dr.keyField().canonicalString())||e.Ie.push(new By(dr.keyField(),r))}return e.Ie}function Na(t){const e=ct(t);return e.Ee||(e.Ee=dxe(e,nh(t))),e.Ee}function dxe(t,e){if(t.limitType==="F")return Lj(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new By(i.field,a)}));const n=t.endAt?new Fy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Fy(t.startAt.position,t.startAt.inclusive):null;return Lj(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function e1(t,e){const n=t.filters.concat([e]);return new um(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function t1(t,e,n){return new um(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function l0(t,e){return HT(Na(t),Na(e))&&t.limitType===e.limitType}function d8(t){return`${qT(Na(t))}|lt:${t.limitType}`}function fu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>o8(i))).join(", ")}]`),s0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Wu(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Wu(i))).join(",")),`Target(${r})`})(Na(t))}; limitType=${t.limitType})`}function c0(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):je.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of nh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,u){const d=jj(o,c,u);return o.inclusive?d<=0:d<0})(r.startAt,nh(r),i)||r.endAt&&!(function(o,c,u){const d=jj(o,c,u);return o.inclusive?d>=0:d>0})(r.endAt,nh(r),i))})(t,e)}function fxe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function f8(t){return(e,n)=>{let r=!1;for(const i of nh(t)){const a=hxe(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function hxe(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):(function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Yu(u,d):$e(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Td(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return WV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mxe=new un(je.comparator);function $o(){return mxe}const h8=new un(je.comparator);function $f(...t){let e=h8;for(const n of t)e=e.insert(n.key,n);return e}function pxe(t){let e=h8;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Bl(){return rh()}function m8(){return rh()}function rh(){return new bc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const gxe=new Dn(je.comparator);function ut(...t){let e=gxe;for(const n of t)e=e.add(n);return e}const yxe=new Dn(ot);function vxe(){return yxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ly(e)?"-0":e}}function p8(t){return{integerValue:""+t}}function xxe(t,e){return G0e(e)?p8(e):$T(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this._=void 0}}function bxe(t,e,n){return t instanceof n1?(function(i,a){const o={fields:{[XV]:{stringValue:QV},[e8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&BT(a)&&(a=o0(a)),a&&(o.fields[ZV]=a),{mapValue:o}})(n,e):t instanceof zy?g8(t,e):t instanceof qy?y8(t,e):(function(i,a){const o=Sxe(i,a),c=Vj(o)+Vj(i.Ae);return Q_(o)&&Q_(i.Ae)?p8(c):$T(i.serializer,c)})(t,e)}function wxe(t,e,n){return t instanceof zy?g8(t,e):t instanceof qy?y8(t,e):n}function Sxe(t,e){return t instanceof r1?(function(r){return Q_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class n1 extends u0{}class zy extends u0{constructor(e){super(),this.elements=e}}function g8(t,e){const n=v8(e);for(const r of t.elements)n.some((i=>Ra(i,r)))||n.push(r);return{arrayValue:{values:n}}}class qy extends u0{constructor(e){super(),this.elements=e}}function y8(t,e){let n=v8(e);for(const r of t.elements)n=n.filter((i=>!Ra(i,r)));return{arrayValue:{values:n}}}class r1 extends u0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Vj(t){return cn(t.integerValue||t.doubleValue)}function v8(t){return zT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _xe(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof zy&&i instanceof zy||r instanceof qy&&i instanceof qy?Ku(r.elements,i.elements,Ra):r instanceof r1&&i instanceof r1?Ra(r.Ae,i.Ae):r instanceof n1&&i instanceof n1})(t.transform,e.transform)}class Jl{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jl}static exists(e){return new Jl(void 0,e)}static updateTime(e){return new Jl(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ng(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class GT{}function x8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Txe(t.key,Jl.none()):new KT(t.key,t.data,Jl.none());{const n=t.data,r=wa.empty();let i=new Dn(dr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new d0(t.key,r,new No(i.toArray()),Jl.none())}}function Axe(t,e,n){t instanceof KT?(function(i,a,o){const c=i.value.clone(),u=Bj(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof d0?(function(i,a,o){if(!Ng(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Bj(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(b8(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(t,e,n):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function ih(t,e,n,r){return t instanceof KT?(function(a,o,c,u){if(!Ng(a.precondition,o))return c;const d=a.value.clone(),m=zj(a.fieldTransforms,u,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof d0?(function(a,o,c,u){if(!Ng(a.precondition,o))return c;const d=zj(a.fieldTransforms,u,o),m=o.data;return m.setAll(b8(a)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(a,o,c){return Ng(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function Fj(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ku(r,i,((a,o)=>_xe(a,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class KT extends GT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class d0 extends GT{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function b8(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Bj(t,e,n){const r=new Map;Qt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,wxe(o,c,n[i]))}return r}function zj(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,bxe(a,o,e))}return r}class Txe extends GT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Exe{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Axe(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ih(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ih(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m8();return this.mutations.forEach((i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=x8(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(He.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Ku(this.mutations,e.mutations,((n,r)=>Fj(n,r)))&&Ku(this.baseMutations,e.baseMutations,((n,r)=>Fj(n,r)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nxe{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,lt;function w8(t){if(t===void 0)return Es("GRPC error has no .code"),ge.UNKNOWN;switch(t){case bn.OK:return ge.OK;case bn.CANCELLED:return ge.CANCELLED;case bn.UNKNOWN:return ge.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ge.INTERNAL;case bn.UNAVAILABLE:return ge.UNAVAILABLE;case bn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case bn.NOT_FOUND:return ge.NOT_FOUND;case bn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case bn.ABORTED:return ge.ABORTED;case bn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case bn.DATA_LOSS:return ge.DATA_LOSS;default:return $e(39323,{code:t})}}(lt=bn||(bn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kxe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ixe=new Mo([4294967295,4294967295],0);function qj(t){const e=kxe().encode(t),n=new UV;return n.update(e),new Uint8Array(n.digest())}function Hj(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Mo([n,r],0),new Mo([i,a],0)]}class YT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gf(`Invalid padding: ${n}`);if(r<0)throw new Gf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mo.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Mo.fromNumber(r)));return i.compare(Ixe)===1&&(i=new Mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qj(e),[r,i]=Hj(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new YT(a,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=qj(e),[r,i]=Hj(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,dm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new f0(He.min(),i,new un(ot),$o(),ut())}}class dm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new dm(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class S8{constructor(e,n){this.targetId=e,this.Ce=n}}class _8{constructor(e,n,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $j{constructor(){this.ve=0,this.Fe=Gj(),this.Me=rr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),n=ut(),r=ut();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$e(38017,{changeType:a})}})),new dm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Gj()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Pxe{constructor(e){this.Ge=e,this.ze=new Map,this.je=$o(),this.Je=fg(),this.He=fg(),this.Ye=new un(ot)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Z_(a))if(r===0){const o=new je(a.path);this.et(n,o,cr.newNoDocument(o,He.min()))}else Qt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=qo(r).toUint8Array()}catch(u){if(u instanceof JV)return Gu("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new YT(o,i,a)}catch(u){return Gu(u instanceof Gf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,o)=>{const c=this.ot(o);if(c){if(a.current&&Z_(c.target)){const u=new je(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,cr.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}}));let r=ut();this.He.forEach(((a,o)=>{let c=!0;o.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(e)));const i=new f0(e,n,this.Ye,this.je,r);return this.je=$o(),this.Je=fg(),this.He=fg(),this.Ye=new un(ot),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $j,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dn(ot),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dn(ot),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $j),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fg(){return new un(je.comparator)}function Gj(){return new un(je.comparator)}const Dxe={asc:"ASCENDING",desc:"DESCENDING"},Rxe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mxe={and:"AND",or:"OR"};class jxe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i1(t,e){return t.useProto3Json||s0(e)?e:{value:e}}function a1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ku(t){return Qt(!!t,49232),He.fromTimestamp((function(n){const r=zo(n);return new $t(r.seconds,r.nanos)})(t))}function T8(t,e){return s1(t,e).canonicalString()}function s1(t,e){const n=(function(i){return new Ht(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function E8(t){const e=Ht.fromString(t);return Qt(P8(e),10190,{key:e.toString()}),e}function wS(t,e){const n=E8(e);if(n.get(1)!==t.databaseId.projectId)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(N8(n))}function C8(t,e){return T8(t.databaseId,e)}function Oxe(t){const e=E8(t);return e.length===4?Ht.emptyPath():N8(e)}function Kj(t){return new Ht(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N8(t){return Qt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lxe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:$e(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(d,m){return d.useProto3Json?(Qt(m===void 0||typeof m=="string",58123),rr.fromBase64String(m||"")):(Qt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),rr.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?ge.UNKNOWN:w8(d.code);return new Ie(m,d.message||"")})(o);n=new _8(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wS(t,r.document.name),a=ku(r.document.updateTime),o=r.document.createTime?ku(r.document.createTime):He.min(),c=new wa({mapValue:{fields:r.document.fields}}),u=cr.newFoundDocument(i,a,o,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new kg(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wS(t,r.document),a=r.readTime?ku(r.readTime):He.min(),o=cr.newNoDocument(i,a),c=r.removedTargetIds||[];n=new kg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wS(t,r.document),a=r.removedTargetIds||[];n=new kg([],a,i,null)}else{if(!("filter"in e))return $e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new Nxe(i,a),c=r.targetId;n=new S8(c,o)}}return n}function Uxe(t,e){return{documents:[C8(t,e.path)]}}function Vxe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=C8(t,i);const a=(function(d){if(d.length!==0)return I8(Gi.create(d,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const o=(function(d){if(d.length!==0)return d.map((m=>(function(y){return{field:hu(y.field),direction:zxe(y.dir)}})(m)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=i1(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function Fxe(t){let e=Oxe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=(function(p){const y=k8(p);return y instanceof Gi&&a8(y)?y.getFilters():[y]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((y=>(function(_){return new By(mu(_.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(y)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,s0(y)?null:y})(n.limit));let u=null;n.startAt&&(u=(function(p){const y=!!p.before,x=p.values||[];return new Fy(x,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(p){const y=!p.before,x=p.values||[];return new Fy(x,y)})(n.endAt)),uxe(e,i,o,a,c,"F",u,d)}function Bxe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k8(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mu(n.unaryFilter.field);return wn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=mu(n.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=mu(n.unaryFilter.field);return wn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mu(n.unaryFilter.field);return wn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(t):t.fieldFilter!==void 0?(function(n){return wn.create(mu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Gi.create(n.compositeFilter.filters.map((r=>k8(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(n.compositeFilter.op))})(t):$e(30097,{filter:t})}function zxe(t){return Dxe[t]}function qxe(t){return Rxe[t]}function Hxe(t){return Mxe[t]}function hu(t){return{fieldPath:t.canonicalString()}}function mu(t){return dr.fromServerFormat(t.fieldPath)}function I8(t){return t instanceof wn?(function(n){if(n.op==="=="){if(Mj(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NAN"}};if(Rj(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mj(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NOT_NAN"}};if(Rj(n.value))return{unaryFilter:{field:hu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hu(n.field),op:qxe(n.op),value:n.value}}})(t):t instanceof Gi?(function(n){const r=n.getFilters().map((i=>I8(i)));return r.length===1?r[0]:{compositeFilter:{op:Hxe(n.op),filters:r}}})(t):$e(54877,{filter:t})}function P8(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r,i,a=He.min(),o=He.min(),c=rr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $xe{constructor(e){this.yt=e}}function Gxe(t){const e=Fxe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?t1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{constructor(){this.Cn=new Yxe}addToCollectionParentIndex(e,n){return this.Cn.add(n),fe.resolve()}getCollectionParents(e,n){return fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return fe.resolve()}deleteFieldIndex(e,n){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,n){return fe.resolve()}getDocumentsMatchingTarget(e,n){return fe.resolve(null)}getIndexType(e,n){return fe.resolve(0)}getFieldIndexes(e,n){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,n){return fe.resolve(Bo.min())}getMinOffsetFromCollectionGroup(e,n){return fe.resolve(Bo.min())}updateCollectionGroup(e,n,r){return fe.resolve()}updateIndexEntries(e,n){return fe.resolve()}}class Yxe{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dn(Ht.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D8=41943040;class Rr{static withCacheSize(e){return new Rr(e,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr.DEFAULT_COLLECTION_PERCENTILE=10,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rr.DEFAULT=new Rr(D8,Rr.DEFAULT_COLLECTION_PERCENTILE,Rr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rr.DISABLED=new Rr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ju(0)}static cr(){return new Ju(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="LruGarbageCollector",Wxe=1048576;function Jj([t,e],[n,r]){const i=ot(t,n);return i===0?ot(e,r):i}class Jxe{constructor(e){this.Ir=e,this.buffer=new Dn(Jj),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Jj(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Qxe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ae(Wj,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ad(n)?Ae(Wj,"Ignoring IndexedDB error during garbage collection: ",n):await i0(n)}await this.Vr(3e5)}))}}class Xxe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return fe.resolve(a0.ce);const r=new Jxe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Yj)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yj):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),du()<=at.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-m}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function Zxe(t,e){return new Xxe(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ebe{constructor(){this.changes=new bc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tbe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nbe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&ih(r.mutation,i,No.empty(),$t.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ut()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ut()){const i=Bl();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let o=$f();return a.forEach(((c,u)=>{o=o.insert(c,u.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Bl();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ut())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let a=$o();const o=rh(),c=(function(){return rh()})();return n.forEach(((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof d0)?a=a.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),ih(m.mutation,d,m.mutation.getFieldMask(),$t.now())):o.set(d.key,No.empty())})),this.recalculateAndSaveOverlays(e,a).next((u=>(u.forEach(((d,m)=>o.set(d,m))),n.forEach(((d,m)=>c.set(d,new tbe(m,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=rh();let i=new un(((o,c)=>o-c)),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||No.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(i.get(c.batchId)||ut()).add(u);i=i.insert(c.batchId,p)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=m8();m.forEach((y=>{if(!a.has(y)){const x=x8(n.get(y),r.get(y));x!==null&&p.set(y,x),a=a.add(y)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return fe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return je.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u8(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):fe.resolve(Bl());let c=Ah,u=a;return o.next((d=>fe.forEach(d,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?fe.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{u=u.insert(m,y)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,u,d,ut()))).next((m=>({batchId:c,changes:pxe(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next((r=>{let i=$f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=$f();return this.indexManager.getCollectionParents(e,a).next((c=>fe.forEach(c,(u=>{const d=(function(p,y){return new um(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((m=>{m.forEach(((p,y)=>{o=o.insert(p,y)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((o=>{a.forEach(((u,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,cr.newInvalidDocument(m)))}));let c=$f();return o.forEach(((u,d)=>{const m=a.get(u);m!==void 0&&ih(m.mutation,d,No.empty(),$t.now()),c0(n,d)&&(c=c.insert(u,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rbe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:ku(i.createTime)}})(n)),fe.resolve()}getNamedQuery(e,n){return fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Gxe(i.bundledQuery),readTime:ku(i.readTime)}})(n)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ibe{constructor(){this.overlays=new un(je.comparator),this.qr=new Map}getOverlay(e,n){return fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bl();return fe.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),fe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,n,r){const i=Bl(),a=n.length+1,o=new je(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new un(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=a.get(d.largestBatchId);m===null&&(m=Bl(),a=a.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=Bl(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=i)););return fe.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cxe(n,r));let a=this.qr.get(n);a===void 0&&(a=ut(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class abe{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.Qr=new Dn(zn.$r),this.Ur=new Dn(zn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new zn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new zn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new je(new Ht([])),r=new zn(n,e),i=new zn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new je(new Ht([])),r=new zn(n,e),i=new zn(n,e+1);let a=ut();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(e){const n=new zn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return je.comparator(e.key,n.key)||ot(e.Yr,n.Yr)}static Kr(e,n){return ot(e.Yr,n.Yr)||je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sbe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dn(zn.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Exe(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new zn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,n){return fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return fe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?$0e:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zn(n,0),i=new zn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const c=this.Xr(o.Yr);a.push(c)})),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dn(ot);return n.forEach((i=>{const a=new zn(i,0),o=new zn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(c=>{r=r.add(c.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;je.isDocumentKey(a)||(a=a.child(""));const o=new zn(new je(a),0);let c=new Dn(ot);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.Yr)),!0)}),o),fe.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Qt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(n.mutations,(i=>{const a=new zn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new zn(n,0),i=this.Zr.firstAfterOrEqual(r);return fe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class obe{constructor(e){this.ri=e,this.docs=(function(){return new un(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return fe.resolve(r?r.document.mutableCopy():cr.newInvalidDocument(n))}getEntries(e,n){let r=$o();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():cr.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=$o();const o=n.path,c=new je(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||B0e(F0e(m),r)<=0||(i.has(m.key)||c0(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return fe.resolve(a)}getAllFromCollectionGroup(e,n,r,i){$e(9500)}ii(e,n){return fe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new lbe(this)}getSize(e){return fe.resolve(this.size)}}class lbe extends ebe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cbe{constructor(e){this.persistence=e,this.si=new bc((n=>qT(n)),HT),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new WT,this.targetCount=0,this.ai=Ju.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ju(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,fe.resolve()}updateTargetData(e,n){return this.Pr(n),fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),fe.waitFor(a).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return fe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),fe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((o=>{a.push(i.markPotentiallyOrphaned(e,o))})),fe.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return fe.resolve(r)}containsKey(e,n){return fe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,n){this.ui={},this.overlays={},this.ci=new a0(0),this.li=!1,this.li=!0,this.hi=new abe,this.referenceDelegate=e(this),this.Pi=new cbe(this),this.indexManager=new Kxe,this.remoteDocumentCache=(function(i){return new obe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $xe(n),this.Ii=new rbe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ibe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new sbe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ae("MemoryPersistence","Starting transaction:",e);const i=new ube(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class ube extends q0e{constructor(e){super(),this.currentSequenceNumber=e}}class JT{constructor(e){this.persistence=e,this.Ri=new WT,this.Vi=null}static mi(e){return new JT(e)}get fi(){if(this.Vi)return this.Vi;throw $e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const i=je.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,He.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return fe.or([()=>fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hy{constructor(e,n){this.persistence=e,this.pi=new bc((r=>K0e(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Zxe(this,n)}static mi(e,n){return new Hy(e,n)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return fe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?fe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,a.removeEntry(o,He.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cg(e.data.value)),n}br(e,n,r){return fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ut(),i=ut();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new QT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dbe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fbe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dge()?8:H0e(pr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new dbe;return this.Ss(e,n,o).next((c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(du()<=at.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",fu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(du()<=at.DEBUG&&Ae("QueryEngine","Query:",fu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(du()<=at.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",fu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Na(n))):fe.resolve())}ys(e,n){if(Uj(n))return fe.resolve(null);let r=Na(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=t1(n,null,"F"),r=Na(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const o=ut(...a);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,c);return this.Cs(n,d,o,u.readTime)?this.ys(e,t1(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return Uj(n)||i.isEqual(He.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?fe.resolve(null):(du()<=at.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fu(n)),this.vs(e,o,n,V0e(i,Ah)).next((c=>c)))}))}Ds(e,n){let r=new Dn(f8(e));return n.forEach(((i,a)=>{c0(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return du()<=at.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",fu(n)),this.ps.getDocumentsMatchingQuery(e,n,Bo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((o=>{a=a.insert(o.key,o)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="LocalStore",hbe=3e8;class mbe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new un(ot),this.xs=new bc((a=>qT(a)),HT),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nbe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function pbe(t,e,n,r){return new mbe(t,e,n,r)}async function M8(t,e){const n=ct(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],c=[];let u=ut();for(const d of i){o.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of a){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function j8(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function gbe(t,e){const n=ct(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach(((m,p)=>{const y=i.get(p);if(!y)return;c.push(n.Pi.removeMatchingKeys(a,m.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(a,m.addedDocuments,p))));let x=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(rr.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),i=i.insert(p,x),(function(T,C,N){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=hbe?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,x,m)&&c.push(n.Pi.updateTargetData(a,x))}));let u=$o(),d=ut();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(ybe(a,o,e.documentUpdates).next((m=>{u=m.ks,d=m.qs}))),!r.isEqual(He.min())){const m=n.Pi.getLastRemoteSnapshotVersion(a).next((p=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(m)}return fe.waitFor(c).next((()=>o.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,u,d))).next((()=>u))})).then((a=>(n.Ms=i,a)))}function ybe(t,e,n){let r=ut(),i=ut();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let o=$o();return n.forEach(((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(He.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Ae(XT,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{ks:o,qs:i}}))}function vbe(t,e){const n=ct(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,fe.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function o1(t,e,n){const r=ct(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ad(o))throw o;Ae(XT,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Qj(t,e,n){const r=ct(t);let i=He.min(),a=ut();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(u,d,m){const p=ct(u),y=p.xs.get(m);return y!==void 0?fe.resolve(p.Ms.get(y)):p.Pi.getTargetData(d,m)})(r,o,Na(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((u=>{a=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:He.min(),n?a:ut()))).next((c=>(xbe(r,fxe(e),c),{documents:c,Qs:a})))))}function xbe(t,e,n){let r=t.Os.get(e)||He.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class Xj{constructor(){this.activeTargetIds=vxe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bbe{constructor(){this.Mo=new Xj,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xj,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wbe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="ConnectivityMonitor";class eO{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ae(Zj,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ae(Zj,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg=null;function l1(){return hg===null?hg=(function(){return 268435456+Math.round(2147483648*Math.random())})():hg++,"0x"+hg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="RestConnection",Sbe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _be{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Uy?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=l1(),c=this.zo(e,n.toUriEncodedString());Ae(SS,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:d}=new URL(c),m=bd(d);return this.Jo(e,c,u,r,m).then((p=>(Ae(SS,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw Gu(SS,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_d})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=Sbe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Abe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="WebChannelConnection";class Tbe extends _be{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=l1();return new Promise(((c,u)=>{const d=new VV;d.setWithCredentials(!0),d.listenOnce(FV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Eg.NO_ERROR:const p=d.getResponseJson();Ae(ar,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Eg.TIMEOUT:Ae(ar,`RPC '${e}' ${o} timed out`),u(new Ie(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Eg.HTTP_ERROR:const y=d.getStatus();if(Ae(ar,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x==null?void 0:x.error;if(_&&_.status&&_.message){const T=(function(N){const M=N.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(M)>=0?M:ge.UNKNOWN})(_.status);u(new Ie(T,_.message))}else u(new Ie(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ie(ge.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Ae(ar,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(i);Ae(ar,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",m,r,15)}))}T_(e,n,r){const i=l1(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qV(),c=zV(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Ae(ar,`Creating RPC '${e}' stream ${i}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let y=!1,x=!1;const _=new Abe({Yo:C=>{x?Ae(ar,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(Ae(ar,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Ae(ar,`RPC '${e}' stream ${i} sending:`,C),p.send(C))},Zo:()=>p.close()}),T=(C,N,M)=>{C.listen(N,(P=>{try{M(P)}catch(L){setTimeout((()=>{throw L}),0)}}))};return T(p,Hf.EventType.OPEN,(()=>{x||(Ae(ar,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),T(p,Hf.EventType.CLOSE,(()=>{x||(x=!0,Ae(ar,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))})),T(p,Hf.EventType.ERROR,(C=>{x||(x=!0,Gu(ar,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),_.a_(new Ie(ge.UNAVAILABLE,"The operation could not be completed")))})),T(p,Hf.EventType.MESSAGE,(C=>{var N;if(!x){const M=C.data[0];Qt(!!M,16349);const P=M,L=(P==null?void 0:P.error)||((N=P[0])==null?void 0:N.error);if(L){Ae(ar,`RPC '${e}' stream ${i} received error:`,L);const j=L.status;let V=(function(U){const F=bn[U];if(F!==void 0)return w8(F)})(j),I=L.message;V===void 0&&(V=ge.INTERNAL,I="Unknown error status: "+j+" with message "+L.message),x=!0,_.a_(new Ie(V,I)),p.close()}else Ae(ar,`RPC '${e}' stream ${i} received:`,M),_.u_(M)}})),T(c,BV.STAT_EVENT,(C=>{C.stat===K_.PROXY?Ae(ar,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===K_.NOPROXY&&Ae(ar,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function _S(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){return new jxe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="PersistentStream";class Ebe{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O8(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ie(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(tO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ae(tO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cbe extends Ebe{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Lxe(this.serializer,e),r=(function(a){if(!("targetChange"in a))return He.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?ku(o.readTime):He.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Kj(this.serializer),n.addTarget=(function(a,o){let c;const u=o.target;if(c=Z_(u)?{documents:Uxe(a,u)}:{query:Vxe(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=A8(a,o.resumeToken);const d=i1(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(He.min())>0){c.readTime=a1(a,o.snapshotVersion.toTimestamp());const d=i1(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=Bxe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Kj(this.serializer),n.removeTarget=e,this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nbe{}class kbe extends Nbe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(e,s1(n,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ie(ge.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,s1(n,r),i,o,c,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(ge.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ibe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="RemoteStore";class Pbe{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{hm(this)&&(Ae(Qu,"Restarting streams for network reachability change."),await(async function(u){const d=ct(u);d.Ea.add(4),await fm(d),d.Ra.set("Unknown"),d.Ea.delete(4),await m0(d)})(this))}))})),this.Ra=new Ibe(r,i)}}async function m0(t){if(hm(t))for(const e of t.da)await e(!0)}async function fm(t){for(const e of t.da)await e(!1)}function L8(t,e){const n=ct(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nE(n)?tE(n):Ed(n).O_()&&eE(n,e))}function ZT(t,e){const n=ct(t),r=Ed(n);n.Ia.delete(e),r.O_()&&U8(n,e),n.Ia.size===0&&(r.O_()?r.L_():hm(n)&&n.Ra.set("Unknown"))}function eE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ed(t).Y_(e)}function U8(t,e){t.Va.Ue(e),Ed(t).Z_(e)}function tE(t){t.Va=new Pxe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ed(t).start(),t.Ra.ua()}function nE(t){return hm(t)&&!Ed(t).x_()&&t.Ia.size>0}function hm(t){return ct(t).Ea.size===0}function V8(t){t.Va=void 0}async function Dbe(t){t.Ra.set("Online")}async function Rbe(t){t.Ia.forEach(((e,n)=>{eE(t,e)}))}async function Mbe(t,e){V8(t),nE(t)?(t.Ra.ha(e),tE(t)):t.Ra.set("Unknown")}async function jbe(t,e,n){if(t.Ra.set("Online"),e instanceof _8&&e.state===2&&e.cause)try{await(async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){Ae(Qu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nO(t,r)}else if(e instanceof kg?t.Va.Ze(e):e instanceof S8?t.Va.st(e):t.Va.tt(e),!n.isEqual(He.min()))try{const r=await j8(t.localStore);n.compareTo(r)>=0&&await(function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ia.get(d);m&&a.Ia.set(d,m.withResumeToken(u.resumeToken,o))}})),c.targetMismatches.forEach(((u,d)=>{const m=a.Ia.get(u);if(!m)return;a.Ia.set(u,m.withResumeToken(rr.EMPTY_BYTE_STRING,m.snapshotVersion)),U8(a,u);const p=new ko(m.target,u,d,m.sequenceNumber);eE(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Ae(Qu,"Failed to raise snapshot:",r),await nO(t,r)}}async function nO(t,e,n){if(!Ad(e))throw e;t.Ea.add(1),await fm(t),t.Ra.set("Offline"),n||(n=()=>j8(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ae(Qu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await m0(t)}))}async function rO(t,e){const n=ct(t);n.asyncQueue.verifyOperationInProgress(),Ae(Qu,"RemoteStore received new credentials");const r=hm(n);n.Ea.add(3),await fm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await m0(n)}async function Obe(t,e){const n=ct(t);e?(n.Ea.delete(2),await m0(n)):e||(n.Ea.add(2),await fm(n),n.Ra.set("Unknown"))}function Ed(t){return t.ma||(t.ma=(function(n,r,i){const a=ct(n);return a.sa(),new Cbe(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:Dbe.bind(null,t),t_:Rbe.bind(null,t),r_:Mbe.bind(null,t),H_:jbe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),nE(t)?tE(t):t.Ra.set("Unknown")):(await t.ma.stop(),V8(t))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new rE(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function F8(t,e){if(Es("AsyncQueue",`${e}: ${t}`),Ad(t))return new Ie(ge.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{static emptySet(e){return new Iu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=$f(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Iu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Iu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.ga=new un(je.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Xu{constructor(e,n,r,i,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Xu(e,n,Iu.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&l0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lbe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Ube{constructor(){this.queries=aO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ct(n),a=i.queries;i.queries=aO(),a.forEach(((o,c)=>{for(const u of c.Sa)u.onError(r)}))})(this,new Ie(ge.ABORTED,"Firestore shutting down"))}}function aO(){return new bc((t=>d8(t)),l0)}async function Vbe(t,e){const n=ct(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Lbe,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=F8(o,`Initialization of query '${fu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&iE(n)}async function Fbe(t,e){const n=ct(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bbe(t,e){const n=ct(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&iE(n)}function zbe(t,e,n){const r=ct(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function iE(t){t.Ca.forEach((e=>{e.next()}))}var c1,sO;(sO=c1||(c1={})).Ma="default",sO.Cache="cache";class qbe{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Xu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==c1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.key=e}}class z8{constructor(e){this.key=e}}class Hbe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=f8(e),this.tu=new Iu(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new iO,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,p)=>{const y=i.get(m),x=c0(this.query,p)?p:null,_=!!y&&this.mutatedKeys.has(y.key),T=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;y&&x?y.data.isEqual(x.data)?_!==T&&(r.track({type:3,doc:x}),C=!0):this.su(y,x)||(r.track({type:2,doc:x}),C=!0,(u&&this.eu(x,u)>0||d&&this.eu(x,d)<0)&&(c=!0)):!y&&x?(r.track({type:0,doc:x}),C=!0):y&&!x&&(r.track({type:1,doc:y}),C=!0,(u||d)&&(c=!0)),C&&(x?(o=o.add(x),a=T?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((m,p)=>(function(x,_){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Rt:C})}};return T(x)-T(_)})(m.type,p.type)||this.eu(m.doc,p.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Xu(this.query,e.tu,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iO,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new z8(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new B8(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ut();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const aE="SyncEngine";class $be{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Gbe{constructor(e){this.key=e,this.hu=!1}}class Kbe{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new bc((c=>d8(c)),l0),this.Iu=new Map,this.Eu=new Set,this.du=new un(je.comparator),this.Au=new Map,this.Ru=new WT,this.Vu={},this.mu=new Map,this.fu=Ju.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ybe(t,e,n=!0){const r=K8(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await q8(r,e,n,!0),i}async function Wbe(t,e){const n=K8(t);await q8(n,e,!0,!1)}async function q8(t,e,n,r){const i=await vbe(t.localStore,Na(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await Jbe(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&L8(t.remoteStore,i),c}async function Jbe(t,e,n,r,i){t.pu=(p,y,x)=>(async function(T,C,N,M){let P=C.view.ru(N);P.Cs&&(P=await Qj(T.localStore,C.query,!1).then((({documents:I})=>C.view.ru(I,P))));const L=M&&M.targetChanges.get(C.targetId),j=M&&M.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(P,T.isPrimaryClient,L,j);return lO(T,C.targetId,V.au),V.snapshot})(t,p,y,x);const a=await Qj(t.localStore,e,!0),o=new Hbe(e,a.Qs),c=o.ru(a.documents),u=dm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,u);lO(t,n,d.au);const m=new $be(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Qbe(t,e,n){const r=ct(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!l0(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await o1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ZT(r.remoteStore,i.targetId),u1(r,i.targetId)})).catch(i0)):(u1(r,i.targetId),await o1(r.localStore,i.targetId,!0))}async function Xbe(t,e){const n=ct(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ZT(n.remoteStore,r.targetId))}async function H8(t,e){const n=ct(t);try{const r=await gbe(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const o=n.Au.get(a);o&&(Qt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Qt(o.hu,14607):i.removedDocuments.size>0&&(Qt(o.hu,42227),o.hu=!1))})),await G8(n,r,e)}catch(r){await i0(r)}}function oO(t,e,n){const r=ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const u=ct(o);u.onlineState=c;let d=!1;u.queries.forEach(((m,p)=>{for(const y of p.Sa)y.va(c)&&(d=!0)})),d&&iE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zbe(t,e,n){const r=ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new un(je.comparator);o=o.insert(a,cr.newNoDocument(a,He.min()));const c=ut().add(a),u=new f0(He.min(),new Map,new un(ot),o,c);await H8(r,u),r.du=r.du.remove(a),r.Au.delete(e),sE(r)}else await o1(r.localStore,e,!1).then((()=>u1(r,e,n))).catch(i0)}function u1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||$8(t,r)}))}function $8(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ZT(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sE(t))}function lO(t,e,n){for(const r of n)r instanceof B8?(t.Ru.addReference(r.key,e),ewe(t,r)):r instanceof z8?(Ae(aE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||$8(t,r.key)):$e(19791,{wu:r})}function ewe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ae(aE,"New document in limbo: "+n),t.Eu.add(r),sE(t))}function sE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(Ht.fromString(e)),r=t.fu.next();t.Au.set(r,new Gbe(n)),t.du=t.du.insert(n,r),L8(t.remoteStore,new ko(Na(c8(n.path)),r,"TargetPurposeLimboResolution",a0.ce))}}async function G8(t,e,n){const r=ct(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,u)=>{o.push(r.pu(u,e,n).then((d=>{var m;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=QT.As(u.targetId,d);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(u,d){const m=ct(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>fe.forEach(d,(y=>fe.forEach(y.Es,(x=>m.persistence.referenceDelegate.addReference(p,y.targetId,x))).next((()=>fe.forEach(y.ds,(x=>m.persistence.referenceDelegate.removeReference(p,y.targetId,x)))))))))}catch(p){if(!Ad(p))throw p;Ae(XT,"Failed to update sequence numbers: "+p)}for(const p of d){const y=p.targetId;if(!p.fromCache){const x=m.Ms.get(y),_=x.snapshotVersion,T=x.withLastLimboFreeSnapshotVersion(_);m.Ms=m.Ms.insert(y,T)}}})(r.localStore,a))}async function twe(t,e){const n=ct(t);if(!n.currentUser.isEqual(e)){Ae(aE,"User change. New user:",e.toKey());const r=await M8(n.localStore,e);n.currentUser=e,(function(a,o){a.mu.forEach((c=>{c.forEach((u=>{u.reject(new Ie(ge.CANCELLED,o))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await G8(n,r.Ls)}}function nwe(t,e){const n=ct(t),r=n.Au.get(e);if(r&&r.hu)return ut().add(r.key);{let i=ut();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function K8(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=H8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nwe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zbe.bind(null,e),e.Pu.H_=Bbe.bind(null,e.eventManager),e.Pu.yu=zbe.bind(null,e.eventManager),e}class $y{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=h0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pbe(this.persistence,new fbe,e.initialUser,this.serializer)}Cu(e){return new R8(JT.mi,this.serializer)}Du(e){return new bbe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$y.provider={build:()=>new $y};class rwe extends $y{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qt(this.persistence.referenceDelegate instanceof Hy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Qxe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rr.withCacheSize(this.cacheSizeBytes):Rr.DEFAULT;return new R8((r=>Hy.mi(r,n)),this.serializer)}}class d1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oO(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=twe.bind(null,this.syncEngine),await Obe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Ube})()}createDatastore(e){const n=h0(e.databaseInfo.databaseId),r=(function(a){return new Tbe(a)})(e.databaseInfo);return(function(a,o,c,u){return new kbe(a,o,c,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,o,c){return new Pbe(r,i,a,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>oO(this.syncEngine,n,0)),(function(){return eO.v()?new eO:new wbe})())}createSyncEngine(e,n){return(function(i,a,o,c,u,d,m){const p=new Kbe(i,a,o,c,u,d);return m&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=ct(i);Ae(Qu,"RemoteStore shutting down."),a.Ea.add(5),await fm(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}d1.provider={build:()=>new d1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iwe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class awe{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=or.UNAUTHENTICATED,this.clientId=GV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{Ae(Go,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Ae(Go,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=F8(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function AS(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(Go,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await M8(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cO(t,e){t.asyncQueue.verifyOperationInProgress();const n=await swe(t);Ae(Go,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>rO(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>rO(e.remoteStore,i))),t._onlineComponents=e}async function swe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(Go,"Using user provided OfflineComponentProvider");try{await AS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Gu("Error using user provided cache. Falling back to memory cache: "+n),await AS(t,new $y)}}else Ae(Go,"Using default OfflineComponentProvider"),await AS(t,new rwe(void 0));return t._offlineComponents}async function owe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(Go,"Using user provided OnlineComponentProvider"),await cO(t,t._uninitializedComponentsProvider._online)):(Ae(Go,"Using default OnlineComponentProvider"),await cO(t,new d1))),t._onlineComponents}async function lwe(t){const e=await owe(t),n=e.eventManager;return n.onListen=Ybe.bind(null,e.syncEngine),n.onUnlisten=Qbe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Wbe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Xbe.bind(null,e.syncEngine),n}function cwe(t,e,n={}){const r=new Wl;return t.asyncQueue.enqueueAndForget((async()=>(function(a,o,c,u,d){const m=new iwe({next:y=>{m.Nu(),o.enqueueAndForget((()=>Fbe(a,p))),y.fromCache&&u.source==="server"?d.reject(new Ie(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new qbe(c,m,{includeMetadataChanges:!0,qa:!0});return Vbe(a,p)})(await lwe(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="firestore.googleapis.com",dO=!0;class fO{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W8,this.ssl=dO}else this.host=e.host,this.ssl=e.ssl??dO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wxe)throw new Ie(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U0e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y8(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oE{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new N0e;switch(r.type){case"firstParty":return new D0e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=uO.get(n);r&&(Ae("ComponentProvider","Removing Datastore"),uO.delete(n),r.terminate())})(this),Promise.resolve()}}function uwe(t,e,n,r={}){var d;t=W_(t,oE);const i=bd(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(ZU(`https://${c}`),eV("Firestore",!0)),a.host!==W8&&a.host!==c&&Gu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!cc(u,o)&&(t._setSettings(u),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=or.MOCK_USER;else{m=nge(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ie(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new or(y)}t._authCredentials=new k0e(new $V(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cd(this.firestore,e,this._query)}}class _r{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _r(this.firestore,e,this._key)}toJSON(){return{type:_r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(cm(n,_r._jsonSchema))return new _r(e,r||null,new je(Ht.fromString(n.referencePath)))}}_r._jsonSchemaVersion="firestore/documentReference/1.0",_r._jsonSchema={type:_n("string",_r._jsonSchemaVersion),referencePath:_n("string")};class Pu extends Cd{constructor(e,n,r){super(e,n,c8(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _r(this.firestore,null,new je(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function dwe(t,e,...n){if(t=$i(t),t instanceof oE){const r=Ht.fromString(e,...n);return Aj(r),new Pu(t,null,r)}{if(!(t instanceof _r||t instanceof Pu))throw new Ie(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ht.fromString(e,...n));return Aj(r),new Pu(t.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="AsyncQueue";class mO{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O8(this,"async_queue_retry"),this._c=()=>{const r=_S();r&&Ae(hO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_S();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_S();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ad(e))throw e;Ae(hO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",pO(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rE.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&$e(47125,{Pc:pO(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pO(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class J8 extends oE{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mO(e),this._firestoreClient=void 0,await e}}}function fwe(t,e){const n=typeof t=="object"?t:iV(),r=typeof t=="string"?t:Uy,i=IT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=ege("firestore");a&&uwe(i,...a)}return i}function hwe(t){if(t._terminated)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mwe(t),t._firestoreClient}function mwe(t){var r,i,a;const e=t._freezeSettings(),n=(function(c,u,d,m){return new J0e(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Y8(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new awe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(rr.fromBase64String(e))}catch(n){throw new Ie(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bi(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cm(e,bi._jsonSchema))return bi.fromBase64String(e.bytes)}}bi._jsonSchemaVersion="firestore/bytes/1.0",bi._jsonSchema={type:_n("string",bi._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ie(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ie(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ie(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ka._jsonSchemaVersion}}static fromJSON(e){if(cm(e,ka._jsonSchema))return new ka(e.latitude,e.longitude)}}ka._jsonSchemaVersion="firestore/geoPoint/1.0",ka._jsonSchema={type:_n("string",ka._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ia._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cm(e,Ia._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ia(e.vectorValues);throw new Ie(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ia._jsonSchemaVersion="firestore/vectorValue/1.0",Ia._jsonSchema={type:_n("string",Ia._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pwe=/^__.*__$/;function Z8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ac:t})}}class lE{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lE({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return f1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z8(this.Ac)&&pwe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gwe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||h0(e)}Cc(e,n,r,i=!1){return new lE({Ac:e,methodName:n,Dc:r,path:dr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ywe(t){const e=t._freezeSettings(),n=h0(t._databaseId);return new gwe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vwe(t,e,n,r=!1){return cE(n,t.Cc(r?4:3,e))}function cE(t,e){if(e9(t=$i(t)))return bwe("Unsupported field value:",e,t),xwe(t,e);if(t instanceof X8)return(function(r,i){if(!Z8(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const c of r){let u=cE(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=$i(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xxe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$t.fromDate(r);return{timestampValue:a1(i.serializer,a)}}if(r instanceof $t){const a=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:a1(i.serializer,a)}}if(r instanceof ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bi)return{bytesValue:A8(i.serializer,r._byteString)};if(r instanceof _r){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:T8(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ia)return(function(o,c){return{mapValue:{fields:{[t8]:{stringValue:n8},[Vy]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return $T(c.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${r0(r)}`)})(t,e)}function xwe(t,e){const n={};return WV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Td(t,((r,i)=>{const a=cE(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function e9(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof ka||t instanceof bi||t instanceof _r||t instanceof X8||t instanceof Ia)}function bwe(t,e,n){if(!e9(n)||!KV(n)){const r=r0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}const wwe=new RegExp("[~\\*/\\[\\]]");function Swe(t,e,n){if(e.search(wwe)>=0)throw f1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Q8(...e.split("."))._internalPath}catch{throw f1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function f1(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ie(ge.INVALID_ARGUMENT,c+t+u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _we(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _we extends t9{data(){return super.data()}}function uE(t,e){return typeof e=="string"?Swe(t,e):e instanceof Q8?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Awe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ie(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dE{}class Twe extends dE{}function Ewe(t,e,...n){let r=[];e instanceof dE&&r.push(e),r=r.concat(n),(function(a){const o=a.filter((u=>u instanceof fE)).length,c=a.filter((u=>u instanceof p0)).length;if(o>1||o>0&&c>0)throw new Ie(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class p0 extends Twe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new p0(e,n,r)}_apply(e){const n=this._parse(e);return n9(e._query,n),new Cd(e.firestore,e.converter,e1(e._query,n))}_parse(e){const n=ywe(e.firestore);return(function(a,o,c,u,d,m,p){let y;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yO(p,m);const _=[];for(const T of p)_.push(gO(u,a,T));y={arrayValue:{values:_}}}else y=gO(u,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yO(p,m),y=vwe(c,o,p,m==="in"||m==="not-in");return wn.create(d,m,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Cwe(t,e,n){const r=e,i=uE("where",t);return p0._create(i,r,n)}class fE extends dE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fE(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Gi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)n9(o,u),o=e1(o,u)})(e._query,n),new Cd(e.firestore,e.converter,e1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gO(t,e,n){if(typeof(n=$i(n))=="string"){if(n==="")throw new Ie(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u8(e)&&n.indexOf("/")!==-1)throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ht.fromString(n));if(!je.isDocumentKey(r))throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dj(t,new je(r))}if(n instanceof _r)return Dj(t,n._key);throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${r0(n)}.`)}function yO(t,e){if(!Array.isArray(t)||t.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n9(t,e){const n=(function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Nwe{convertValue(e,n="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Td(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[Vy].arrayValue)==null?void 0:i.values)==null?void 0:a.map((o=>cn(o.doubleValue)));return new Ia(n)}convertGeoPoint(e){return new ka(cn(e.latitude),cn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=o0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Th(e));default:return null}}convertTimestamp(e){const n=zo(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ht.fromString(e);Qt(P8(r),9688,{name:e});const i=new Eh(r.get(1),r.get(3)),a=new je(r.popFirst(5));return i.isEqual(n)||Es(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}class mg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Du extends t9{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Du._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Du._jsonSchemaVersion="firestore/documentSnapshot/1.0",Du._jsonSchema={type:_n("string",Du._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class Ig extends Du{data(e={}){return super.data(e)}}class Ru{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new mg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ig(this._firestore,this._userDataWriter,r.key,r,new mg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ie(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const u=new Ig(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const u=new Ig(i._firestore,i._userDataWriter,c.doc.key,c.doc,new mg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:kwe(c.type),doc:u,oldIndex:d,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ru._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=GV.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kwe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:t})}}Ru._jsonSchemaVersion="firestore/querySnapshot/1.0",Ru._jsonSchema={type:_n("string",Ru._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class Iwe extends Nwe{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _r(this.firestore,null,n)}}function Pwe(t){t=W_(t,Cd);const e=W_(t.firestore,J8),n=hwe(e),r=new Iwe(e);return Awe(t._query),cwe(n,t._query).then((i=>new Ru(e,r,t,i)))}(function(e,n=!0){(function(i){_d=i})(wd),Hu(new uc("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new J8(new I0e(r.getProvider("auth-internal")),new R0e(o,r.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ie(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(d.options.projectId,m)})(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Ro(bj,wj,e),Ro(bj,wj,"esm2020")})();var Dwe="firebase",Rwe="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro(Dwe,Rwe,"app");const Mwe={apiKey:"AIzaSyB_YOUR_API_KEY_HERE",authDomain:"your-project-id.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project-id.appspot.com",messagingSenderId:"your-sender-id",appId:"1:your-app-id:web:your-web-app-id",measurementId:"G-your-measurement-id"},r9=rV(Mwe),jwe=E0e(r9),Owe=fwe(r9);function Lwe(){const t=Pn(n=>n.setCurrentUser),e=Pn(n=>n.logout);E.useEffect(()=>{const n=pve(jwe,async r=>{if(r&&r.email){const i=dwe(Owe,"users"),a=Ewe(i,Cwe("email","==",r.email)),o=await Pwe(a);if(o.empty)console.error("User document not found in Firestore for email:",r.email),e();else{const c=o.docs[0],u={...c.data(),id:c.id};t(u)}}else Pn.getState().currentUser&&e()});return()=>n()},[t,e])}const Uwe=()=>{const{currentUser:t,isLoggingIn:e,login:n}=Pn(),{initialize:r}=Rt(),{initialize:i}=Or(),[a,o]=E.useState(!0),[c,u]=E.useState(!1);Lwe(),E.useEffect(()=>{(async()=>{const y=he.loadInitialData();r(y.appSettings),i(y),localStorage.getItem("accreditex-onboarded")==="true"||u(!0),o(!1)})()},[r,i]);const d=(p,y)=>{const x=he.findUserByCredentials(p,y);x?n(x):alert("Invalid credentials")},m=()=>{localStorage.setItem("accreditex-onboarded","true"),u(!1)};return a||e?f.jsx($pe,{}):f.jsx(pB,{children:f.jsx(gB,{children:f.jsx(RB,{children:t?c?f.jsx(Jz,{onComplete:m}):f.jsx(Hpe,{}):f.jsx(Wz,{onLogin:d})})})})},i9=document.getElementById("root");if(!i9)throw new Error("Could not find root element to mount to");const Vwe=YF.createRoot(i9);Vwe.render(f.jsx(Bi.StrictMode,{children:f.jsx(Uwe,{})}));
